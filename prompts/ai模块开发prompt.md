# ai对话模块开发

## 项目简介

我当前的项目是一个鸿蒙新闻与智能体问答的综合体应用，当前新闻模块的功能基本完善，需要继续开发智能体问答部分的功能，我们的智能体是开发在扣子平台上的，总共有两种模式的智能体，一种是快速回答模式，另一种是深度搜索模式。你需要帮我仿照现有的数据链路模式去进行智能体模块的开发。

## 核心需求

首先我为这个功能模块单独设置了两个功能模块ai_common和ai_feature，你需要仿照当下 common , feature , default这三者的逻辑关系去进行架构设计。common模块负责存放基础接口工具如网络请求工具，数据模型接口，数据模型类，日志工具等内容，为feature提供底层支持，随后feature层封装manager模块用于管理整体聊天流程，同时封装诸如聊天输入框，对话历史渲染列表等等功能组件，最上层的product则是最后展现给用户的UI界面层级。

### 接口封装

我给你的html文档包含coze空间的对话流文档，我们切换快速回答和深度思考的关键参数在于`workflow_id`，所以我们需要准备两套接口，来去拉起不同智能体的会话。利用一个AppStorageV2全局变量来设置，这个全局变量要在common中设置一个新的枚举类，利用这个枚举类去进行选择，这个枚举类有三种状态一种是未选择，一种是快速回答一种是深度思考。

我们的coze接口要使用的是流式传输，使用鸿蒙中的

```ts