"use strict";(self.webpackChunkapp_botstudio_main=self.webpackChunkapp_botstudio_main||[]).push([["66928"],{984818:function(e,n,i){i.d(n,{fd:()=>d,qp:()=>s,I:()=>N});var r=i("938809"),t=i("723530"),l=i("182956"),o=i("698363"),a=i("274372"),s=()=>{var e=(0,o.y8)(),n=(0,o.ZY)(),i=(0,o.zD)(),r=(0,o.I2)(),l=(0,t.useMemo)(()=>n.includes(a.gY.super_admin),[n]),s=(0,t.useMemo)(()=>null==i?void 0:i.includes(a.ZQ.super_admin2),[i]),c=l||s;return{canDelete:(0,t.useMemo)(()=>{if(!e||!c)return!1;var n=!e.is_default_organization;return c&&n&&!r},[e,c,r])}},c=[{title:"\u6210\u5458\u4E0E\u7A7A\u95F4",items:["\u7EC4\u7EC7\u5185\u6240\u6709\u6210\u5458\u5C06\u88AB\u79FB\u51FA","\u8BE5\u7EC4\u7EC7\u4E0B\u7684\u6240\u6709\u5DE5\u4F5C\u7A7A\u95F4\u9700\u8981\u60A8\u624B\u52A8\u5220\u9664"]},{title:"\u8D44\u6E90\u4E0E\u8D44\u4EA7",items:["\u5DE5\u4F5C\u7A7A\u95F4\u5185\u7684 \u667A\u80FD\u4F53\u3001\u5E94\u7528\u3001\u5DE5\u4F5C\u6D41\u3001\u63D2\u4EF6\u3001API \u7B49\u8D44\u6E90\u5C06\u540C\u6B65\u5220\u9664","\u8349\u7A3F\u4E0D\u53EF\u6062\u590D","\u5546\u5E97\u5546\u54C1\u4E0E\u6A21\u677F\u5C06\u88AB\u4E0B\u67B6","API \u5C06\u65E0\u6CD5\u7EE7\u7EED\u4F7F\u7528"]},{title:"\u6570\u636E\u4E0E\u6743\u9650",items:["\u7EC4\u7EC7\u4E0B\u7684\u6240\u6709\u6570\u636E\u4E0E\u4FE1\u606F\u5C06\u65E0\u6CD5\u627E\u56DE","\u6240\u6709 API \u5BC6\u94A5\u7B49\u654F\u611F\u4FE1\u606F\u5C06\u88AB\u5F7B\u5E95\u5220\u9664\u3002"]},{title:"\u26A0\uFE0F \u518D\u6B21\u63D0\u793A",items:["\u7EC4\u7EC7\u5220\u9664\u4E3A \u4E0D\u53EF\u9006\u3001\u4E0D\u53EF\u6062\u590D \u64CD\u4F5C\uFF1B","\u5220\u9664\u540E\uFF0C\u60A8\u5C06\u65E0\u6CD5\u8BBF\u95EE\u8BE5\u7EC4\u7EC7\u53CA\u5176\u4E0B\u7684\u4EFB\u4F55\u4FE1\u606F\u3002"]}],d=e=>{var{visible:n,onClose:i,onConfirm:o}=e,[a,s]=(0,t.useState)(!1),d=()=>{i(),s(!1)};return(0,r.jsx)(l.Modal,{title:"\u7EC4\u7EC7\u5220\u9664\u540E\u4E0D\u53EF\u6062\u590D\uFF0C\u8BF7\u786E\u8BA4\u4EE5\u4E0B\u5F71\u54CD\uFF1A",visible:n,onCancel:d,footer:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)(l.Checkbox,{checked:a,onChange:e=>s(!!e.target.checked),children:"\u6211\u5DF2\u77E5\u6089\u4E0A\u8FF0\u98CE\u9669"}),(0,r.jsxs)("div",{className:"flex justify-end gap-[8px]",children:[(0,r.jsx)(l.Button,{onClick:d,color:"primary",children:"\u53D6\u6D88"}),(0,r.jsx)(l.Button,{color:"red",onClick:()=>{a&&(o(),s(!1))},disabled:!a,children:"\u786E\u8BA4\u5220\u9664"})]})]}),width:500,closable:!0,centered:!0,maskClosable:!1,children:(0,r.jsx)("div",{className:"flex flex-col gap-[16px]",children:c.map((e,n)=>(0,r.jsx)("div",{className:"flex flex-col gap-[4px]",children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"coz-fg-secondary text-[12px] leading-[16px] font-medium",children:e.title}),(0,r.jsx)("ul",{className:"list-disc pl-[18px]",children:e.items.map(e=>(0,r.jsx)("li",{className:"text-medium coz-fg-primary text-[14px] leading-[20px]",children:e}))}),n!==c.length-1&&(0,r.jsx)(l.Divider,{className:"mt-[12px]"})]})}))})})},u=i("255721"),p=i("988726"),_=i("449001"),m=i("559293"),x=i("582103"),h=i("21474"),v=i("16242"),g=i("412590"),f=()=>{var{open:e,close:n,modal:i}=(0,x.dd)({title:v.o.t("user_connections_title"),centered:!0,onCancel:()=>{n()},width:800,height:600}),l=(0,g.p6)();(0,t.useEffect)(()=>{(0,g.UC)()},[]);var o=(null==l?void 0:l.length)?(0,r.jsx)(h.S6,{}):(0,r.jsx)(r.Fragment,{});return{open:e,close:n,modal:()=>i(o)}},j=i("856306"),y=i.n(j),w={[a.wr.workspace]:{title:"\u5DE5\u4F5C\u7A7A\u95F4",description:"\u7528\u4E8E\u7EC4\u7EC7\u8D44\u6E90\u3001\u652F\u6301\u591A\u4EBA\u534F\u4F5C\u4E14\u6570\u636E\u76F8\u4E92\u9694\u79BB\u7684\u57FA\u7840\u5355\u5143"},[a.wr.o_auth_app]:{title:"OAuth\u5E94\u7528",description:"\u901A\u8FC7OAuth\u534F\u8BAE\u83B7\u53D6\u8D44\u6E90\u8BBF\u95EE\u6743\u9650\u4EE5\u5B89\u5168\u8C03\u7528API\u7684\u5E94\u7528"},[a.wr.authorized_o_auth_app]:{title:"\u5DF2\u5B89\u88C5OAuth\u5E94\u7528",description:"\u5DF2\u7ECF\u6388\u6743\u5B89\u88C5\u5E76\u83B7\u5F97\u8D44\u6E90\u8BBF\u95EE\u6743\u9650\u7684OAuth\u5E94\u7528\u3002"},[a.wr.service_access_token]:{title:"\u670D\u52A1\u8EAB\u4EFD\u53CA\u51ED\u8BC1",description:"\u7528\u4E8EAPI\u8C03\u7528\u7684\u8EAB\u4EFD\u6807\u8BC6\u53CA\u957F\u6548\u8BBF\u95EE\u4EE4\u724C"},[a.wr.personal_access_token2]:{title:"\u4E2A\u4EBA\u8BBF\u95EE\u4EE4\u724C",description:"\u5E73\u53F0\u63D0\u4F9B\u7684\u77ED\u6548\u4EE4\u724C,\u7528\u4E8EAPI\u8BF7\u6C42\u9274\u6743"},[a.wr.connector2]:{title:"\u81EA\u5B9A\u4E49\u53D1\u5E03\u6E20\u9053",description:"\u5DE5\u4F5C\u7A7A\u95F4\u4E2D\u6DFB\u52A0\u7684\u3001\u652F\u6301\u5C06\u667A\u80FD\u4F53\u53D1\u5E03\u5230\u5916\u90E8\u5E73\u53F0\u7684\u81EA\u5B9A\u4E49\u6E20\u9053"},[a.wr.normal_api_app]:{title:"\u666E\u901A\u56DE\u8C03\u5E94\u7528",description:"\u7528\u4E8E\u63A5\u6536\u5E73\u53F0\u7EA7\u5173\u952E\u4E1A\u52A1\u4E8B\u4EF6\u901A\u77E5\u7684\u5E94\u7528"},[a.wr.connector_api_app]:{title:"\u6E20\u9053\u56DE\u8C03\u5E94\u7528",description:"\u7528\u4E8E\u63A5\u6536\u6E20\u9053\u5185\u5173\u952E\u4E1A\u52A1\u4E8B\u4EF6\u901A\u77E5\u7684\u5E94\u7528"}},z=[a.wr.connector2,a.wr.normal_api_app,a.wr.connector_api_app],b=e=>{var{onHandle:n}=e;return[{title:"\u8D44\u6E90",dataIndex:"delete_org_resource_type",align:"left",render:e=>{var n;return(0,r.jsx)("p",{className:"font-medium text-[14px] leading-[20px] coz-fg-primary",children:null===(n=w[e])||void 0===n?void 0:n.title})},width:"20%"},{title:"\u63CF\u8FF0",dataIndex:"delete_org_resource_description",align:"left",render:(e,n)=>{var i;return(0,r.jsx)("p",{className:"font-normal text-[14px] leading-[20px] coz-fg-secondary",children:null===(i=w[n.delete_org_resource_type])||void 0===i?void 0:i.description})},width:"20%"},{title:"\u6570\u91CF",dataIndex:"number",align:"left",render:(e,n)=>{var i="".concat(e," \u4E2A");return z.includes(n.delete_org_resource_type)&&e>10&&(i="\u82E5\u5E72"),(0,r.jsx)("p",{className:"font-normal text-[14px] leading-[20px] coz-fg-secondary",children:i})},width:"20%"},{title:"\u7B49\u7EA7",dataIndex:"handle_level",align:"left",render:e=>(0,r.jsx)("p",{className:"font-normal text-[14px] leading-[20px] coz-fg-secondary",children:e===a.MI.must_handle?"\u5FC5\u987B\u5904\u7406":"\u65E0\u9700\u5904\u7406"}),width:"20%"},{title:"\u64CD\u4F5C",dataIndex:"opt",align:"left",render:(e,i)=>{var t=0===i.number;return(0,r.jsx)(l.Button,{className:y()("font-normal !text-[14px] !leading-[20px]",t?"!coz-fg-hglt-dim":"!coz-fg-hglt"),color:"secondary",onClick:()=>null==n?void 0:n(i.delete_org_resource_type),disabled:t,children:"\u524D\u5F80\u5220\u9664"})},width:"20%"}]},k=e=>{var n,{visible:i,onClose:s,onDelete:c,onConfirm:d}=e,x=(0,o.y8)(),h=(0,o.F2)(),{open:v,modal:g}=f(),{data:j,loading:y,refresh:w}=(0,m.Z)((0,u._)(function*(){if(null==x?void 0:x.organization_id)return(yield _.f_.CheckDeleteOrganization({organization_id:x.organization_id})).data.check_delete_org_resource_info_list}),{refreshDeps:[null==x?void 0:x.organization_id]}),{runAsync:z,loading:k}=(0,m.Z)((0,u._)(function*(){(null==x?void 0:x.organization_id)&&(yield _.f_.DeleteOrganization({organization_id:x.organization_id}),l.Toast.success("\u7EC4\u7EC7\u5220\u9664\u6210\u529F"))}),{manual:!0,refreshDeps:[null==x?void 0:x.organization_id],retryCount:3}),C=(0,t.useMemo)(()=>({[a.wr.workspace]:"/enterprise/".concat(h,"/organization/").concat(null==x?void 0:x.organization_id,"/organization/workspace"),[a.wr.o_auth_app]:"/open/oauth/apps",[a.wr.authorized_o_auth_app]:"/open/oauth/authorizations",[a.wr.service_access_token]:"/open/oauth/sats",[a.wr.personal_access_token2]:"/open/oauth/pats",[a.wr.normal_api_app]:"/open/callback/normal",[a.wr.connector_api_app]:"/open/callback/connector"}),[h,null==x?void 0:x.organization_id]),N=(0,t.useMemo)(()=>{var e;return null==j?void 0:null===(e=j.filter(e=>e.handle_level===a.MI.must_handle))||void 0===e?void 0:e.every(e=>0===e.number)},[j]);var S=(n=(0,u._)(function*(){if(!!N)yield z(),null==d||d()}),function(){return n.apply(this,arguments)});return(0,r.jsxs)(l.Modal,{visible:i,width:800,title:(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)("div",{className:"w-full h-[40px] flex items-center justify-between",children:[(0,r.jsx)(l.Typography.Title,{heading:4,children:"\u7EC4\u7EC7\u5220\u9664\u524D\u9700\u5B8C\u6210\u8D44\u6E90\u6E05\u7406"}),(0,r.jsxs)(l.Space,{children:[(0,r.jsx)(l.Button,{icon:(0,r.jsx)(p.mxP,{}),color:"primary",onClick:w,children:"\u5237\u65B0\u5217\u8868"}),(0,r.jsx)(l.Divider,{layout:"vertical"}),(0,r.jsx)(l.IconButton,{icon:(0,r.jsx)(p.rmE,{width:"20",height:"20"}),color:"secondary",onClick:s})]})]}),(0,r.jsx)("p",{className:"!coz-fg-primary text-[14px] leading-[20px] font-normal",children:"\u4EE5\u4E0B\u8D44\u6E90\u672A\u6E05\u7406\uFF0C\u8BF7\u5148\u5220\u9664\u6216\u89E3\u7ED1\u540E\u518D\u7EE7\u7EED\u64CD\u4F5C\u3002"})]}),closeIcon:null,closable:!1,onCancel:s,cancelText:"\u53D6\u6D88",cancelButtonProps:{onClick:s},okText:"\u786E\u8BA4\u5220\u9664",okButtonProps:{onClick:S,color:"red",disabled:!N,loading:k},children:[(0,r.jsx)(l.Table,{tableProps:{dataSource:j,columns:b({onHandle:e=>{if(e===a.wr.connector2){v();return}c?c(e):window.open("".concat(C[e]),"_blank")}}),loading:y,scroll:!1}}),(0,r.jsx)(g,{})]})},C=i("310207"),N=e=>{var{className:n}=e,[i,a]=(0,t.useState)(!1),[c,u]=(0,t.useState)(!1),p=(0,o.F2)(),_=(0,o.JZ)(),m=(0,t.useMemo)(()=>_.find(e=>e.enterprise_id===p),[p,_]),x=s(),{handleResourceCleanUpCallback:h,handleOrganizationDelete:v}=(0,C.A)(),{canDelete:g}=x;return g?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Button,{className:n,color:"redhglt",onClick:()=>{a(!0)},children:"\u5220\u9664\u7EC4\u7EC7"}),(0,r.jsx)(d,{visible:i,onClose:()=>{a(!1)},onConfirm:()=>{a(!1),u(!0)}}),(0,r.jsx)(k,{visible:c,onClose:()=>{u(!1)},onConfirm:()=>{if(u(!1),v){v(p);return}var e,n,i=null==m?void 0:null===(n=m.organization_info_list)||void 0===n?void 0:null===(e=n[0])||void 0===e?void 0:e.organization_id;i?(0,o.J1)(p,i):(0,o.J1)(p),window.location.href="/enterprise/".concat(p,"/enterprise/workspace")},onDelete:h})]}):null}},394660:function(e,n,i){i.d(n,{C:function(){return p}});var r=i(255721),t=i(938809),l=i(723530),o=i(559293),a=i(274372),s=i(16242),c=i(182956),d=i(449001),u=i(764256),p=e=>{var n,i,p,{organizationId:_,memberInfo:m,onSuccess:x,textSlot:h,isCheckRole:v}=e,[g,f]=(0,l.useState)(!1),[j,y]=(0,l.useState)(!1),[w,z]=(0,l.useState)(""),[b,k]=(0,l.useState)(""),[C,N]=(0,l.useState)(0),[S,T]=(0,l.useState)([]),[I,P]=(0,l.useState)([]),A=(0,l.useRef)({init:!1,count:0}),{run:B,loading:D}=(0,o.Z)(e=>d.f_.SearchOrganizationPeople({organization_id:null!=_?_:"",page:1,page_size:50,search_key:e}),{manual:!0,debounceWait:500,onSuccess:e=>{var n,i,r=null==e?void 0:null===(i=e.data)||void 0===i?void 0:null===(n=i.organization_people_list)||void 0===n?void 0:n.filter(e=>e.user_id!==m.user_id&&e.valid&&e.organization_role_type!==a.ZQ.guest2);P(null!=r?r:[]),f(!0)}}),{data:O,run:M,loading:Z}=(0,o.Z)(e=>d.f_.SearchOrganizationPeople({organization_id:null!=_?_:"",page:1,page_size:50,organization_role_type_list:[a.ZQ.super_admin2,a.ZQ.admin2],search_key:e}),{manual:!0,debounceWait:500,onSuccess:e=>{var n,i,r,t=null==e?void 0:null===(i=e.data)||void 0===i?void 0:null===(n=i.organization_people_list)||void 0===n?void 0:n.filter(e=>e.user_id!==m.user_id&&e.valid);T(null!=t?t:[]),f(!0),!A.current.init&&(A.current={init:!0,count:null!==(r=null==t?void 0:t.length)&&void 0!==r?r:0})}}),{loading:F,runAsync:R}=(0,o.Z)(()=>{var e;return d.f_.RemoveOrganizationPeople({organization_id:null!=_?_:"",user_id:null!==(e=m.user_id)&&void 0!==e?e:"",receiver:w})},{manual:!0,onSuccess:()=>{null==x||x(),c.Toast.success(s.o.t("enterprise_member_delete_toast_successed")),y(!1),f(!0)}}),{loading:q,run:Q}=(0,o.Z)(()=>d.f_.UpdateOrganizationPeople({organization_id:null!=_?_:"",user_id:null!=b?b:"",organization_role_type:a.ZQ.super_admin2}),{manual:!0,onSuccess:()=>{c.Toast.success("\u8D85\u7BA1\u8BBE\u7F6E\u6210\u529F"),f(!0)}});(0,l.useEffect)(()=>{!j&&f(!1)},[j]);var W=(0,t.jsx)("div",{className:"flex flex-row-reverse",children:(0,t.jsxs)("div",{style:{textAlign:"center"},children:[(0,t.jsx)(c.Button,{color:"primary",theme:"solid",onClick:()=>{y(!1)},children:s.o.t("Cancel")}),0===C&&v&&0===S.length?(0,t.jsx)(c.Button,{type:"primary",loading:q,disabled:!b,onClick:(0,r._)(function*(){yield Q(),yield M(),N(1)}),theme:"borderless",children:"\u4E0B\u4E00\u6B65"}):null,1===C||!v||S.length>0?(0,t.jsx)(c.Button,{type:"primary",loading:F,disabled:!w,color:"red",theme:"borderless",onClick:(0,r._)(function*(){yield null==R?void 0:R()}),children:null!==(n=null==h?void 0:h.okText)&&void 0!==n?n:s.o.t("enterprise_member_delete_pop_button_confirm_delete")}):null]})});return{node:(0,t.jsx)(c.Modal,{title:null!==(i=null==h?void 0:h.title)&&void 0!==i?i:s.o.t("enterprise_member_delete_pop_title"),visible:j,footer:g?W:null,onCancel:()=>{y(!1)},children:!O&&(Z||D)||!g?(0,t.jsx)(c.Spin,{style:{margin:"0 auto",width:"100%"},size:"middle"}):(0,t.jsxs)("div",{children:[v?null:(0,t.jsx)("div",{className:"coz-fg-primary mb-[16px]",children:null!==(p=null==h?void 0:h.description)&&void 0!==p?p:"\u79BB\u5F00\u7EC4\u7EC7\u524D\u8BF7\u8F6C\u79FB\u8D44\u6E90"}),v&&A.current.init&&0===A.current.count&&g?(0,t.jsxs)(c.Steps,{className:"w-[340px]",style:{margin:"0 auto 16px"},type:"basic",current:C,children:[(0,t.jsx)(c.Step,{title:"\u8BBE\u7F6E\u65B0\u8D85\u7EA7\u7BA1\u7406\u5458"},"set-new-super-admin"),(0,t.jsx)(c.Step,{title:"\u8F6C\u79FB\u8D44\u6E90"},"transfer-resources")]}):null,v&&0===S.length&&!Z&&!D&&0===C&&g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"coz-fg-primary font-[500]",children:["\u8BBE\u7F6E\u65B0\u8D85\u7EA7\u7BA1\u7406\u5458",(0,t.jsx)("span",{className:"coz-fg-hglt-red",children:"*"})]}),(0,t.jsx)("div",{className:"mt-[4px]",children:(0,t.jsx)(c.Select,{className:"w-full",value:b,onChange:e=>{var n;k(null!==(n=String(e))&&void 0!==n?n:"")},placeholder:s.o.t("enterprise_member_delete_pop_choose_user"),filter:!0,remote:!0,onSearch:B,loading:D,children:null==I?void 0:I.map(e=>(0,t.jsx)(c.Select.Option,{value:e.user_id,children:(0,t.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,t.jsxs)(c.Space,{spacing:6,className:"w-[300px]",children:[(0,t.jsx)(c.CozAvatar,{src:e.avatar_url,size:"mini"}),(0,t.jsx)(c.Typography.Text,{className:"coz-fg-primary !font-[500]",ellipsis:{showTooltip:{opts:{content:e.user_name,style:{wordBreak:"break-word"}}}},children:e.user_name}),(0,t.jsx)(c.Typography.Text,{className:"coz-fg-secondary",ellipsis:{showTooltip:{opts:{content:e.name,style:{wordBreak:"break-word"}}}},children:"@".concat(e.name)})]}),(0,t.jsx)(c.Tag,{size:"mini",className:"mr-[20px]",color:(0,u.kq)()[e.organization_role_type].color,children:(0,u.kq)()[e.organization_role_type].text})]})}))})})]}):null,1===C||!v||S.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"coz-fg-primary font-[500]",children:[s.o.t("enterprise_member_delete_pop_desc2"),(0,t.jsx)("span",{className:"coz-fg-hglt-red",children:"*"})]}),(0,t.jsx)("div",{className:"mt-[4px]",children:(0,t.jsx)(c.Select,{className:"w-full",value:w,onChange:e=>{var n;z(null!==(n=String(e))&&void 0!==n?n:"")},placeholder:s.o.t("enterprise_member_delete_pop_choose_user"),filter:!0,remote:!0,onSearch:M,loading:Z,children:null==S?void 0:S.map(e=>(0,t.jsx)(c.Select.Option,{value:e.user_id,children:(0,t.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,t.jsxs)(c.Space,{spacing:6,className:"w-[300px]",children:[(0,t.jsx)(c.CozAvatar,{src:e.avatar_url,size:"mini"}),(0,t.jsx)(c.Typography.Text,{className:"coz-fg-primary !font-[500]",ellipsis:{showTooltip:{opts:{content:e.user_name,style:{wordBreak:"break-word"}}}},children:e.user_name}),(0,t.jsx)(c.Typography.Text,{className:"coz-fg-secondary",ellipsis:{showTooltip:{opts:{content:e.name,style:{wordBreak:"break-word"}}}},children:"@".concat(e.name)})]}),(0,t.jsx)(c.Tag,{size:"mini",className:"mr-[20px]",color:(0,u.kq)()[e.organization_role_type].color,children:(0,u.kq)()[e.organization_role_type].text})]})}))})})]}):null]})}),open:()=>{y(!0),z(""),M(),B()},close:()=>{y(!1)}}}},310207:function(e,n,i){i.d(n,{A:function(){return a},_:function(){return s}});var r=i(556923),t=i(938809),l=i(723530),o=(0,l.createContext)({}),a=()=>(0,l.useContext)(o),s=e=>{var{children:n}=e,i=(0,r._)(e,["children"]);return(0,t.jsx)(o.Provider,{value:i,children:n})}},353774:function(e,n,i){i.d(n,{W:function(){return s}});var r=i(938809),t=i(611),l=i(120482),o=i(723530),a=(0,o.createContext)({isInProvider:!1}),s=e=>{var{children:n}=e,i=(0,o.useContext)(a);return(0,r.jsx)(a.Provider,{value:{isInProvider:!0},children:i.isInProvider?n:(0,r.jsx)(l.W,{backend:t.PD,context:window,children:n})})}},61888:function(e,n,i){i.d(n,{a:function(){return o}});var r=i(380094),t=i(87530),l=i(723530),o=e=>{var{id:n,type:i,direction:o="verticle",enabled:a=!0,onMove:s}=e,c=(0,l.useRef)(),d=(0,l.useRef)(a);d.current=a;var[{isHovered:u},p]=(0,r.L)({accept:i,collect:e=>({isHovered:e.isOver()}),canDrop:()=>d.current,hover:(e,i)=>{if(!!c.current&&e.id!==n){var r,t=i.getClientOffset(),l=null===(r=c.current)||void 0===r?void 0:r.getBoundingClientRect(),a=!1;if("verticle"===o){if((null==t?void 0:t.y)===void 0)return;var d=(l.top+l.bottom)/2;a=(null==t?void 0:t.y)<d,s(e.id,n,a)}if("horizontal"===o){if((null==t?void 0:t.x)===void 0)return;var u=(l.left+l.right)/2;a=(null==t?void 0:t.x)<u,s(e.id,n,a)}}}}),[{isDragging:_},m,x]=(0,t.c)({type:i,item:()=>({id:n}),canDrag:()=>d.current,collect:e=>({isDragging:e.isDragging()})});return{isHovered:u,isDragging:_,connect:(0,l.useMemo)(()=>(e,n)=>{p(e),m(null!=n?n:e),x(e),c.current=e.current},[p,m])}}},272391:function(e,n,i){i.d(n,{c:function(){return d}});var r=i(341333),t=i(265489),l=i(938809),o=i(353774),a=i(61888),s=e=>{var{id:n,type:i,data:o,itemRender:s,enabled:c,onMove:d,direction:u}=e,p=(0,a.a)({id:n,type:i,onMove:d,enabled:c,direction:u});return(0,l.jsx)(s,(0,t._)((0,r._)({},p),{data:o}))},c=e=>e.id,d=e=>{var{list:n,type:i,getId:r=c,onChange:t,enabled:a,itemRender:d,direction:u}=e;return(0,l.jsx)(o.W,{children:n.map(e=>{var o=r(e);return(0,l.jsx)(s,{type:i,id:o,data:e,itemRender:d,enabled:a,direction:u,onMove:(e,i,l)=>{var o=[...n],a=o.findIndex(n=>r(n)===e),s=o.splice(a,1)[0],c=o.findIndex(e=>r(e)===i)+(l?0:1);if(a!==c)s&&o.splice(c,0,s),t(o)}},o)})})}}}]);
//# sourceMappingURL=https://sourcemap-redirect.coze.cn/obj/coze-sourcemap/ol-sourcemap/bot/1.0.2.2522/66928.f904b81f.js.map