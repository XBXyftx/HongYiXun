"use strict";(self.webpackChunkapp_botstudio_main=self.webpackChunkapp_botstudio_main||[]).push([["10491"],{253675:function(e,o,t){t.d(o,{Q:function(){return r},p:function(){return a}});var i=t(161666),l=t(462458),n=t(963036),r=e=>{var o,t,n,r;return{0:{zoneType:null===(o=e[0])||void 0===o?void 0:o.zoneType,zoneId:null===(t=e[0])||void 0===t?void 0:t.zoneId,ops:null===(r=e[0])||void 0===r?void 0:null===(n=r.ops)||void 0===n?void 0:n.map(e=>(0,i.Z)(e,l.Z))}}},a=e=>{var o=r(JSON.parse(e));return new n.D(o)}},274889:function(e,o,t){t.d(o,{og:()=>u,yw:()=>tv,xw:()=>tM,PN:()=>tm,LA:()=>oZ,AK:()=>p,eT:()=>c});var i,l,n,r,a,s=t("16242"),d=t("383672");var c=((i={}).PLUGIN="plugin",i.PLUGIN_INFO="pluginDetail",i.PUBLISH_RESULT="publishResult",i);var u=((l={}).PUBLISH_RESULT="publishResult",l.BOT="bot",l.BOT_INFO="botDetail",l);var p=((n={}).PUBLISH_RESULT="publishResult",n.WORKFLOW="workflow",n.WORKFLOW_INFO="workflowDetail",n.WORKFLOW_CASE="workflowCase",n),f={type:"modal",footer:null,width:960,height:600},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.WorkflowMode.Workflow;return e===d.WorkflowMode.Imageflow?{selectTitle:s.o.t("Imageflow_Store_select"),infoTitle:s.o.t("Imageflow_Store_info"),caseTitle:s.o.t("Imageflow_Store_case")}:{selectTitle:s.o.t("workflowstore_select"),infoTitle:s.o.t("workflowstore_workflow_information"),caseTitle:s.o.t("Imageflow_Store_case")}},v=t("341333"),g=t("265489"),_=t("938809"),h=t("723530"),x=t("301464"),b=t("182956"),y=t("642385"),w=t("993301"),k=t("888953"),j=t("922321"),I=(0,j.ZP)()((0,k.mW)(e=>({currentModal:null,spaceId:"",setSpace:o=>e({spaceId:o}),setModal:(o,t)=>{!o&&e({workflowId:void 0}),e(e=>({currentModal:o,source:null!=t?t:e.source}))},source:y.MU.WORKFLOW_STORE,selectWorkflow:o=>{e({workflowId:o,productInfo:void 0,currentModal:p.WORKFLOW_INFO})},setProductInfo:o=>e({productInfo:o}),setHookProps:o=>e({hookProps:o}),setCategories:o=>e({categories:o}),setSubCategories:o=>e({subCategories:o}),setProductDetail:o=>{e({productDetail:o})},caseConfigInfoList:[],setCaseConfigInfoList:o=>{e({caseConfigInfoList:o})},setActiveFlowInfo:o=>{e({activeFlowInfo:o})},setToRunCaseConfigInfo:o=>{e({toRunCaseConfigInfo:o})},clearState:()=>{e({productDetail:void 0,activeFlowInfo:void 0,toRunCaseConfigInfo:void 0,categories:[],caseConfigInfoList:[]})}}),{enabled:!1,name:"community.workflowStorePublish"})),S=t("255721"),z=t("559293"),N=t("765337"),T=t("449001"),P=t("866466"),C=t.n(P),O=t("462669"),E=t.n(O),F=t("318249"),A=t.n(F),L=t("294754"),M=t.n(L),Z=t("13355"),W=t.n(Z),B=t("876846"),G=t.n(B),R=t("722130"),J={};J.styleTagTransform=G(),J.setAttributes=M(),J.insert=A().bind(null,"head"),J.domAPI=E(),J.insertStyleElement=W(),C()(R.Z,J);var U=R.Z&&R.Z.locals?R.Z.locals:void 0;var Y=((r={}).Success="success",r.Reviewing="reviewing",r.Failure="failure",r),D=e=>{var{entityId:o,entityType:t,handleSeeMore:i,reviewStatusMap:l}=e,{loading:n,data:r}=(0,z.Z)((0,S._)(function*(){return(yield T.yF.PublicGetProductDetail({entity_id:o,entity_type:t},{__disableErrorToast:!0})).data}),{manual:!1}),a=(null==r?void 0:r.audit_status)===w.Lo.Approved?"success":"reviewing";return(0,_.jsx)("div",{className:U["publish-result-modal"],children:(0,_.jsx)(b.Spin,{spinning:n,children:(0,_.jsx)(b.EmptyState,{icon:(0,_.jsx)(N.Yf,{}),darkModeIcon:(0,_.jsx)(N._l,{}),size:"full_screen",title:l[a].title,description:l[a].description,buttonText:s.o.t("see_more"),onButtonClick:i})})})},q=()=>{var e,o={[Y.Success]:{title:s.o.t("workflowstore_submitted_successfully_under_review"),description:null},[Y.Reviewing]:{title:s.o.t("mkpl_workflow_publish_reviewing"),description:s.o.t("mkpl_workflow_publish_reviewing_desc")},[Y.Failure]:{title:s.o.t("mkpl_workflow_publish_failed"),description:s.o.t("mkpl_workflow_publish_failed_desc"),icon:null}},{workflowId:t,productInfo:i,setModal:l,hookProps:n,source:r}=I(),a=t||(null==i?void 0:null===(e=i.meta_info)||void 0===e?void 0:e.entity_id),c=(null==n?void 0:n.flowMode)===d.WorkflowMode.Imageflow?w._J.ImageflowTemplateV2:w._J.WorkflowTemplateV2;return{entityId:a,entityType:c,handleSeeMore:()=>{var e;r!==y.MU.WORKFLOW_DETAILPAGE&&window.open("/template","_blank"),null==n||null===(e=n.onPublishSuccess)||void 0===e||e.call(n),l(null)},reviewStatusMap:o}},H=t("479727"),K=e=>{var{productInfo:{image:o,name:t,description:i,updateAt:l,modelName:n},onClick:r}=e;return(0,_.jsxs)("div",{className:"flex items-center gap-x-8px w-full",onClick:r,children:[(0,_.jsx)(b.Image,{className:"flex-shrink-0 rounded-mini",width:32,height:32,src:o}),(0,_.jsxs)("div",{className:"flex flex-col flex-1 overflow-hidden",children:[(0,_.jsx)(b.Typography.Text,{ellipsis:{showTooltip:{opts:{content:i,style:{wordWrap:"break-word"}},renderTooltip:(e,o)=>(0,_.jsx)(b.Tooltip,{content:e,children:o})},rows:1},className:"coz-fg-primary font-medium text-lg leading-[20px]",children:t}),(0,_.jsxs)("div",{className:"flex items-center leading-[16px]",children:[n?(0,_.jsx)(b.Typography.Text,{className:"text-base coz-fg-secondary m-w-[140px]",ellipsis:{showTooltip:!0},children:n}):null,n?(0,_.jsx)("div",{className:"mx-6px w-[3px] h-[3px] bg-foreground-1 rounded-full"}):null,(0,_.jsxs)("div",{className:"coz-fg-secondary text-base shrink-0",children:[s.o.t("mkpl_published",{},"Updated")," ".concat((0,H.p6)(Number(l),"YYYY-MM-DD HH:mm"))]}),(0,_.jsx)("div",{className:"mx-6px w-[3px] h-[3px] bg-foreground-1 rounded-full"}),(0,_.jsx)(b.Typography.Text,{className:"flex-1 coz-fg-dim text-base overflow-hidden leading-[16px]",ellipsis:{showTooltip:{opts:{content:i,style:{wordWrap:"break-word"}},renderTooltip:(e,o)=>(0,_.jsx)(b.Tooltip,{content:e,children:o})},rows:1},children:i||s.o.t("mkpl_no_description")})]})]})]})},V=e=>{var{selectWorkflow:o}=I(),{name:t,update_time:i,desc:l,url:n}=e.itemInfo;return(0,_.jsx)(K,{onClick:()=>{var t;o(null!==(t=e.itemInfo.workflow_id)&&void 0!==t?t:"")},productInfo:{name:t,description:l,updateAt:String(i),image:n}})},Q=()=>{var e,{spaceId:o,setSpace:t,hookProps:i,currentModal:l}=I(),n=!(null==i?void 0:i.fromSpace)&&l===p.WORKFLOW;return{getDefaultSpaceId:(e=(0,S._)(function*(e){var o,t,l;return null===(l=(yield T.OH.GetListableWorkflows({page:1,size:10,space_id_list:e,flow_mode:null==i?void 0:i.flowMode})).data)||void 0===l?void 0:null===(t=l.workflows)||void 0===t?void 0:null===(o=t[0])||void 0===o?void 0:o.space_id}),function(o){return e.apply(this,arguments)}),modalSpaceId:o,setModalSpaceId:t,chooseInStore:n}},X=()=>{var e,{hookProps:o}=I(),t=(null==o?void 0:o.flowMode)===d.WorkflowMode.Imageflow,i=t?s.o.t("imageflowstore_no_workflows_yet"):s.o.t("workflowstore_no_workflows_yet"),l=t?s.o.t("Imageflow_Store_select1"):s.o.t("Submit_workflow_list"),[n,r]=(0,h.useState)(!1);var a=(e=(0,S._)(function*(e){var t,i,l,n,a=(null==e?void 0:e.nextPage)||1,s=yield T.OH.GetListableWorkflows({page:a,size:10,space_id_list:[c],flow_mode:null==o?void 0:o.flowMode});return r(!(null===(i=s.data)||void 0===i?void 0:null===(t=i.workflows)||void 0===t?void 0:t.length)),{list:(null===(l=s.data)||void 0===l?void 0:l.workflows)||[],hasMore:null===(n=s.data)||void 0===n?void 0:n.has_more,nextPage:a+1}}),function(o){return e.apply(this,arguments)}),c=I(e=>e.spaceId);return{spaceId:c,emptyTips:i,productListTitle:l,loadData:a,isEmpty:n,workspaceSelectConfig:Q()}},$=t("345305"),ee=t("964207"),eo=t.n(ee),et=t("856306"),ei=t.n(et),el=t("519310"),en=t("84229"),er={};er.styleTagTransform=G(),er.setAttributes=M(),er.insert=A().bind(null,"head"),er.domAPI=E(),er.insertStyleElement=W(),C()(en.Z,er);var ea=en.Z&&en.Z.locals?en.Z.locals:void 0,es=()=>{var{hookProps:e}=I((0,$.N)(e=>({hookProps:e.hookProps}))),o=(0,el.k)((null==e?void 0:e.flowMode)===d.WorkflowMode.Imageflow?s.o.t("imageflowstore_listing_rules_info"):s.o.t("workflowstore_listing_rules_info"));return(0,_.jsxs)("div",{className:ea["tooltip-content"],children:[(0,_.jsx)(b.Typography.Title,{heading:6,className:ea["tooltip-content-title"],children:s.o.t("workflowstore_listing_rules")}),(0,_.jsx)("div",{dangerouslySetInnerHTML:{__html:eo().sanitize(o)},className:ei()(ea["tooltip-content-desc"],"coz-fg-secondary")})]})},ed=t("988726"),ec=t("609708"),eu={};eu.styleTagTransform=G(),eu.setAttributes=M(),eu.insert=A().bind(null,"head"),eu.domAPI=E(),eu.insertStyleElement=W(),C()(ec.Z,eu);var ep=ec.Z&&ec.Z.locals?ec.Z.locals:void 0,ef=e=>{var{content:o}=e;return(0,_.jsx)("div",{className:ep["select-tips"],children:(0,_.jsx)(b.Popover,{spacing:10,content:o,position:"top",showArrow:!0,children:(0,_.jsx)(ed.L03,{className:"coz-fg-secondary text-xxl"})})})},em=t("763209"),ev={};ev.styleTagTransform=G(),ev.setAttributes=M(),ev.insert=A().bind(null,"head"),ev.domAPI=E(),ev.insertStyleElement=W(),C()(em.Z,ev);var eg=em.Z&&em.Z.locals?em.Z.locals:void 0,e_=e=>{var{title:o,tooltip:t}=e;return(0,_.jsxs)("div",{className:eg["publish-plugin-title"],children:[o,(0,_.jsx)("span",{className:eg["title-tooltip"],children:t})]})},eh=t("211964"),ex=(0,j.ZP)(e=>({loading:!1,isPublishing:!1,formApi:null,editorRef:null,imageflowCaseFormApi:null,setFormApi:o=>e({formApi:o}),setLoading:o=>e({loading:o}),setIsPublishing:o=>e({isPublishing:o}),setEditorRef:o=>e({editorRef:o}),setErrMsg:o=>e({errMsg:o})})),eb=()=>({[w._J.ImageflowTemplate]:s.o.t("imageflowstore_list"),[w._J.WorkflowTemplate]:s.o.t("workflowstore_list")}),ey=e=>{var{spaceId:o,caseConfigInfo:t,onExucutionBtnClick:i}=e;return(0,_.jsx)(b.EmptyState,{size:"full_screen",icon:(0,_.jsx)(N.TL,{}),darkModeIcon:(0,_.jsx)(N.Io,{}),title:s.o.t("Imageflow_Store_testrun_expire",{entity_type:eb()[(null==t?void 0:t.entityType)||w._J.WorkflowTemplate]||"",entity_name:(null==t?void 0:t.entityName)||""}),buttonText:s.o.t("Imageflow_Store_testrun"),onButtonClick:()=>{null==i||i({caseConfigInfoToRun:t})}})},ew=()=>{var{loading:e,setIsPublishing:o,errMsg:t}=ex(),{workflowId:i,productInfo:l,setModal:n,source:r,hookProps:a,productDetail:c,caseConfigInfoList:u,setActiveFlowInfo:f,setToRunCaseConfigInfo:v}=I(),g=m(null==a?void 0:a.flowMode),{loading:_,run:h}=(0,z.Z)((0,S._)(function*(){var e,t,n,p,m,g,_,h=x.Z.parse(location.search);(0,y.Gg)(y.Kg.entity_publish_click_front,{entity_type:"workflow",from:h.from,submit_type:Number(null==l?void 0:null===(e=l.meta_info)||void 0===e?void 0:e.id)?"update":"first",entity_id:i||(null==l?void 0:null===(t=l.meta_info)||void 0===t?void 0:t.id)||"",product_id:String(null==l?void 0:null===(n=l.meta_info)||void 0===n?void 0:n.id),product_name:null==l?void 0:null===(p=l.meta_info)||void 0===p?void 0:p.name,publish_action:y.n_.Confirm,source:r}),o(!0);var{name:k,readme:j,category:I,entity_version:S}=(null==c?void 0:c.meta_info)||{},z=u.find(e=>e.isExpire);if(z)throw b.Modal.confirm({title:s.o.t("imageflowstore_expire_title"),content:s.o.t("imageflowstore_expire_content",{entity_name:z.entityName,entity_type:eb()[(null==z?void 0:z.entityType)||w._J.WorkflowTemplate]||""}),cancelText:s.o.t("imageflowstore_expire_cancel"),okText:s.o.t("imageflowstore_expire_continue"),onOk:()=>{f(z),v(z)}}),Error("Has some Expire Config");var{executeId:N,inputImageUrl:P,outputImageUrl:C,hoverText:O}=u[0],E={};return u.forEach(e=>{e.entityId&&(E[e.entityId]=e)}),yield T.yF.PublicListingProduct({entity_type:(null==a?void 0:a.flowMode)===d.WorkflowMode.Imageflow?w._J.ImageflowTemplate:w._J.WorkflowTemplate,entity_id:i||(null==l?void 0:null===(m=l.meta_info)||void 0===m?void 0:m.entity_id)||"",category_id:null==I?void 0:I.id,entity_version:S,related_entity:null==c?void 0:null===(_=c.workflow_extra)||void 0===_?void 0:null===(g=_.related_workflows)||void 0===g?void 0:g.map(e=>{var o,t,i,l,n,r,a,s,d,c;return{entity_type:null!==(r=e.entity_type)&&void 0!==r?r:w._J.WorkflowTemplate,entity_id:e.entity_id,product_name:e.name,readme:e.readme,category_id:null===(o=e.category)||void 0===o?void 0:o.id,workflow_case_config:{case_execute_id:null===(t=E[null!==(a=e.entity_id)&&void 0!==a?a:""])||void 0===t?void 0:t.executeId,hover_text:null===(i=E[null!==(s=e.entity_id)&&void 0!==s?s:""])||void 0===i?void 0:i.hoverText,input_image_url:null===(l=E[null!==(d=e.entity_id)&&void 0!==d?d:""])||void 0===l?void 0:l.inputImageUrl,output_image_url:null===(n=E[null!==(c=e.entity_id)&&void 0!==c?c:""])||void 0===n?void 0:n.outputImageUrl}}}),readme:j,product_name:k,workflow_case_config:{hover_text:O,input_image_url:P,output_image_url:C,case_execute_id:N}},{__disableErrorToast:!0})}),{manual:!0,onSuccess:()=>{n(p.PUBLISH_RESULT)},onError:e=>{(0,eh.k0)(e)&&((null==e?void 0:e.code)==="788662002"?b.Toast.error(s.o.t("mkpl_plugin_product_audit_error")):b.Toast.error(e.msg||e.message||"".concat(s.o.t("mkpl_workflow_publish_failed"))))},onFinally:()=>{o(!1)}});return{title:g.caseTitle,loading:_,showNextButton:!0,showPrevButton:!0,handleNext:h,handlePrev:()=>{n(p.WORKFLOW_INFO)},prevButtonText:s.o.t("Imageflow_Store_before"),nextButtonProps:{disabled:_||e||!!t}}},ek=e=>{var{showNextButton:o,showPrevButton:t,nextButtonProps:i,prevButtonProps:l,nextButtonText:n=s.o.t("mkpl_submit",{},"Submit"),prevButtonText:r="Last",handleNext:a,handlePrev:d,title:c,handleClose:u,loading:p}=e;return(0,_.jsxs)("div",{className:"h-[65px] w-full p-16px flex flex-shrink-0 justify-between items-center border-0 border-b border-solid coz-stroke-primary",children:[(0,_.jsx)("div",{className:"coz-fg-plus font-medium text-[20px] flex-1 mr-[24px] overflow-hidden",children:c}),(0,_.jsxs)("div",{className:"flex items-center",children:[t?(0,_.jsx)(b.Button,(0,g._)((0,v._)({className:"mr-8px",onClick:d,color:"primary"},l),{children:r})):null,o?(0,_.jsx)(b.Button,(0,g._)((0,v._)({color:"hgltplus",loading:p,onClick:a},i),{children:n})):null,o?(0,_.jsx)(b.Divider,{layout:"vertical",className:"coz-stroke-primary mx-8px h-16px"}):null,(0,_.jsx)(b.IconButton,{onClick:u,color:"secondary",icon:(0,_.jsx)(ed.rmE,{})})]})]})},ej=t("294731"),eI=t("475210"),eS=t("395493"),ez=t("299846"),eN=t("646411"),eT=t("515560"),eP={};eP.styleTagTransform=G(),eP.setAttributes=M(),eP.insert=A().bind(null,"head"),eP.domAPI=E(),eP.insertStyleElement=W(),C()(eT.Z,eP);var eC=eT.Z&&eT.Z.locals?eT.Z.locals:void 0,eO=e=>{var{getDefaultSpaceId:o,modalSpaceId:t,setModalSpaceId:i,chooseInStore:l}=e,{spaces:n=[],loading:r}=(0,ez.B3)(),a=(0,ez.rY)(e=>{try{return e.getSpaceId()}catch(e){return""}}),d=(0,eI.Z)(n,"space_type"),c=(0,eS.Z)(d,(e,o)=>({label:Number(o)===eN.Sn.Personal?s.o.t("mkpl_select_space_personal"):s.o.t("mkpl_select_space_teams"),children:e.map(e=>({value:e.id,label:(0,_.jsx)(_.Fragment,{children:e.name}),avatar:e.icon_url}))})),{loading:u,run:p}=(0,z.Z)((0,S._)(function*(){return yield o(n.map(e=>String(e.id)))}),{manual:!0,onSuccess:e=>{i(e?String(e):String(n[0].id))},onError:()=>{i("")}});return(0,h.useEffect)(()=>{l?p():i(a)},[l]),(0,_.jsxs)("div",{className:eC["publish-product-title-filter"],children:[(0,_.jsx)("div",{className:eC["select-label"],children:s.o.t("mkpl_workspace")}),(0,_.jsx)(b.Select,{className:"w-full",loading:u||r,value:t,onChange:e=>{i(e)},children:c.map((e,o)=>{var t;return(0,_.jsx)(b.Select.OptGroup,{label:e.label,children:null===(t=e.children)||void 0===t?void 0:t.map(e=>(0,_.jsx)(b.Select.Option,{className:eC["select-option"],value:e.value,children:(0,_.jsxs)("div",{className:eC["filter-prefix"],children:[(0,_.jsx)(b.Avatar,{src:e.avatar,size:"extra-extra-small",className:"mr-[8px]"}),e.label]},e.value)},e.value))},"".concat(o,"-").concat(e.label))})})]})},eE=e=>{var o=(0,h.useRef)(null),{emptyTips:t,productListTitle:i,loadData:l,renderItem:n,isEmpty:r,workspaceSelectConfig:a,spaceId:s,renderOtherSelect:d,reloadDeps:c,loading:u=!1}=e;return(0,_.jsx)("div",{className:ei()(eC["publish-plugin-list"],{[eC["is-empty"]]:r}),ref:o,children:(0,_.jsxs)(b.Spin,{spinning:u,children:[(0,_.jsx)(eO,(0,v._)({},a)),(0,_.jsx)("div",{children:d}),(0,_.jsx)("div",{className:ei()(eC["list-title"],d?"mt-[12px]":"mt-[16px]"),children:i}),s?(0,_.jsx)(ej.$r,{renderItem:n,containerClassName:eC["select-list-container"],emptyConf:{renderEmpty:e=>{var{isLoading:o}=e;return o?(0,_.jsx)(b.Spin,{}):(0,_.jsx)("div",{className:eC["list-empty"],children:t})}},scrollConf:{reloadDeps:null!=c?c:[s],targetRef:o,loadData:l}}):null]})})},eF=()=>(0,_.jsx)(ed.rmE,{className:"coz-fg-secondary text-xxl"}),eA=t("666428"),eL=t("544788"),eM=e=>{var o,t,i,{entityName:l,productDetail:n,layout:r="vertical"}=e;return(0,_.jsxs)("div",{className:"flex flex-col items-start gap-y-12px relative",children:[(0,_.jsxs)("div",{className:ei()("flex",{"flex-col gap-y-12px":"vertical"===r,"flex-row gap-x-12px":"horizontal"===r}),children:[(0,_.jsx)(b.Avatar,{src:null==n?void 0:null===(o=n.meta_info)||void 0===o?void 0:o.icon_url,shape:"square",className:"w-48px h-48px rounded-little hover:cursor-auto"}),(0,_.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,_.jsx)(b.Typography.Title,{className:"coz-fg-plus",heading:6,children:null!=l?l:null==n?void 0:null===(t=n.meta_info)||void 0===t?void 0:t.name}),(0,_.jsx)(eL.p,{size:"large",metaInfo:null==n?void 0:n.meta_info})]})]}),(0,_.jsx)(b.Typography.Text,{ellipsis:{rows:3,showTooltip:!1},className:"coz-fg-primary text-base font-normal leading-[16px]",children:null==n?void 0:null===(i=n.meta_info)||void 0===i?void 0:i.description})]})},eZ=t("253675"),eW=(e,o)=>t=>{if(e){var i=(0,eZ.p)(e);null==t||t.setContent(i)}else o&&t.setText(o)},eB=(e,o)=>[{required:!0,message:""},{validator:()=>{var o,t=null===(o=e.current)||void 0===o?void 0:o.getEditor();return!(null==t?void 0:t.getContentState().getActiveZone().isEmpty())},message:s.o.t("mkpl_can_not_be_empty")},{validator:()=>{var t,i,l=null===(t=e.current)||void 0===t?void 0:t.getEditor();return!(Number((null!==(i=null==l?void 0:l.getText())&&void 0!==i?i:"").replaceAll("\n","").length||0)>o)&&!0},message:s.o.t("mkpl_maximum_chatacter_limit",{maxCount:o})}],eG=()=>[{required:!0,message:s.o.t("mkpl_can_not_be_empty")},{validator:(e,o)=>(null==o?void 0:o.trim())!=="",message:s.o.t("mkpl_can_not_be_empty")}],eR=()=>[{required:!0,message:s.o.t("mkpl_can_not_be_empty")}],eJ=e=>{var o,{nodes:t}=e,i=new Map,l=t.filter(e=>!i.has(e.node_type)&&i.set(e.node_type,!0));return(0,_.jsxs)("div",{children:[(0,_.jsxs)("div",{className:"coz-fg-primary text-base font-medium leading-[16px]",children:["Nodes (",null!==(o=t.length)&&void 0!==o?o:0,")"]}),(0,_.jsx)("div",{className:"flex flex-wrap",children:l.map(e=>(0,_.jsx)(b.Image,{preview:!1,width:32,height:32,className:"coz-stroke-primary mr-6px mt-6px",src:e.node_icon_url},e.node_id))})]})},eU=(0,h.lazy)(()=>Promise.all([t.e("43361"),t.e("14138"),t.e("16826"),t.e("47802"),t.e("4118"),t.e("7561"),t.e("16533"),t.e("53101"),t.e("74943"),t.e("43969"),t.e("71897")]).then(t.bind(t,607031))),eY=(0,b.withField)(b.Input),eD=(0,b.withField)(b.Select),eq=e=>{var o,t,i,l,n,{categories:r,subCategories:a}=I(),d=(0,h.useRef)(null),{field:c,productDetail:u,workflowEntity:p}=e,f=(null==p?void 0:p.entity_type)===w._J.ImageflowTemplate,m=(null==p?void 0:p.entity_type)===(null==u?void 0:null===(o=u.meta_info)||void 0===o?void 0:o.entity_type)?r:a;return(0,_.jsxs)("div",{className:"flex flex-col gap-y-16px",children:[(0,_.jsx)(eM,{layout:"horizontal",entityName:null==p?void 0:p.entity_name,productDetail:(0,g._)((0,v._)({},u),{meta_info:(0,g._)((0,v._)({},null!==(l=null==u?void 0:u.meta_info)&&void 0!==l?l:{}),{description:null==p?void 0:p.desc,icon_url:null==p?void 0:p.icon_url})})}),(0,_.jsxs)("div",{className:"hidden",children:[(0,_.jsx)(eY,{initValue:p.entity_type,noLabel:!0,field:"".concat(c,"[entity_type]"),disabled:!0}),(0,_.jsx)(eY,{initValue:p.entity_id,noLabel:!0,field:"".concat(c,"[entity_id]"),disabled:!0})]}),(null==p?void 0:p.entity_type)===w._J.WorkflowTemplate?(0,_.jsx)(eJ,{nodes:null!==(n=null==p?void 0:p.nodes)&&void 0!==n?n:[]}):null,(0,_.jsxs)(b.Row,{gutter:24,children:[(0,_.jsx)(b.Col,{span:12,children:(0,_.jsx)(eY,{field:"".concat(c,"[name]"),trigger:"blur",initValue:p.name||p.entity_name,placeholder:s.o.t("workflowstore_enter_product_name"),maxLength:50,label:{text:s.o.t("workflowstore_product_name"),extra:(0,_.jsx)(b.Tooltip,{className:"coz-tooltip-dark",spacing:10,content:f?s.o.t("imageflowstore_product_name_tooltip"):s.o.t("workflowstore_product_name_tooltip"),children:(0,_.jsx)(eA.eQN,{style:{color:"var(--semi-color-text-2)"}})})},rules:eG()})}),(0,_.jsx)(b.Col,{span:12,children:(0,_.jsx)(eD,{initValue:(null===(t=p.category)||void 0===t?void 0:t.id)||(null===(i=p.recommended_category)||void 0===i?void 0:i.id),className:"w-full",field:"".concat(c,"[category.id]"),label:s.o.t("mkpl_bots_category",{},"\u5206\u7C7B"),placeholder:f?s.o.t("select_imageflow_category"):s.o.t("select_workflow_category"),optionList:null==m?void 0:m.map(e=>({label:e.name,value:e.id})),rules:eR()})})]}),(0,_.jsx)(h.Suspense,{fallback:(0,_.jsx)(b.Spin,{}),children:(0,_.jsx)(eU,{className:"coz-fg-primary w-full",minHeight:120,ref:d,onInit:eW(null==p?void 0:p.readme,null==p?void 0:p.desc),label:f?s.o.t("Imageflow_Store_about"):s.o.t("workflowstore_about_workflow"),placeholder:f?s.o.t("imageflowstore_about_workflow_desc"):s.o.t("workflowstore_about_workflow_desc"),trigger:"blur",maxCount:500,rules:eB(d,500),field:"".concat(c,"[readme]")})})]})},eH=()=>{var e,{setCategories:o,setSubCategories:t,hookProps:i}=I((0,$.N)(e=>({hookProps:e.hookProps,setCategories:e.setCategories,setSubCategories:e.setSubCategories}))),l=(null==i?void 0:i.flowMode)===d.WorkflowMode.Imageflow;var{run:n}=(0,z.Z)((e=(0,S._)(function*(e){var o,t,i=yield T.yF.PublicGetProductCategoryList({entity_type:(null!=e?e:l)?w._J.ImageflowTemplate:w._J.WorkflowTemplate,need_empty_category:!0});return{isSubCategories:!!e,categories:null!==(t=null===(o=i.data)||void 0===o?void 0:o.categories)&&void 0!==t?t:[]}}),function(o){return e.apply(this,arguments)}),{refreshDeps:[null==i?void 0:i.flowMode],debounceWait:300,retryCount:3,onSuccess:e=>{e.isSubCategories?t(e.categories):o(e.categories)}});return{getCategories:n}},eK=(0,h.lazy)(()=>Promise.all([t.e("43361"),t.e("14138"),t.e("16826"),t.e("47802"),t.e("4118"),t.e("7561"),t.e("16533"),t.e("53101"),t.e("74943"),t.e("43969"),t.e("71897")]).then(t.bind(t,607031))),eV=(0,b.withField)(b.Input),eQ=(0,b.withField)(b.Select),eX=()=>{var e,o,t,i,l=(0,h.useRef)(null),{setEditorRef:n}=ex((0,$.N)(e=>({setEditorRef:e.setEditorRef}))),{categories:r,productDetail:a,hookProps:c}=I((0,$.N)(e=>({categories:e.categories,productDetail:e.productDetail,hookProps:e.hookProps}))),u=(null==c?void 0:c.flowMode)===d.WorkflowMode.Imageflow,p=!!(null==a?void 0:null===(o=a.workflow_extra)||void 0===o?void 0:null===(e=o.related_workflows)||void 0===e?void 0:e.length);return(0,h.useEffect)(()=>{n(l)},[l]),(0,_.jsxs)("div",{className:ei()("flex-1",{"mt-16px":p,"px-32px pt-16px":!p}),children:[(0,_.jsxs)("div",{className:ei()("flex",{"flex-row gap-x-[12px]":p,"flex-col":!p}),children:[(0,_.jsx)(eV,{fieldClassName:"!py-8px flex-1",field:"name",placeholder:s.o.t("workflowstore_enter_product_name"),maxLength:50,label:{text:s.o.t("workflowstore_product_name"),extra:(0,_.jsx)(b.Tooltip,{className:"coz-tooltip-dark",spacing:10,content:u?s.o.t("imageflowstore_product_name_tooltip"):s.o.t("workflowstore_product_name_tooltip"),children:(0,_.jsx)(eA.eQN,{style:{color:"var(--semi-color-text-2)"}})})},rules:eG()}),(0,_.jsx)(eQ,{fieldClassName:"!py-8px flex-1",className:"w-full",field:"category",label:s.o.t("mkpl_bots_category",{},"\u5206\u7C7B"),placeholder:u?s.o.t("select_imageflow_category"):s.o.t("select_workflow_category"),optionList:null==r?void 0:r.map(e=>({label:e.name,value:e.id})),rules:eR()})]}),(0,_.jsx)(h.Suspense,{fallback:(0,_.jsx)(b.Loading,{loading:!0}),children:(0,_.jsx)(eK,{className:"coz-fg-primary w-full",fieldClassName:"!py-8px",minHeight:120,ref:l,label:u?s.o.t("Imageflow_Store_about"):s.o.t("workflowstore_about_workflow"),placeholder:u?s.o.t("imageflowstore_about_workflow_desc"):s.o.t("workflowstore_about_workflow_desc"),trigger:"blur",maxCount:500,onInit:eW(null==a?void 0:null===(t=a.meta_info)||void 0===t?void 0:t.readme,null==a?void 0:null===(i=a.meta_info)||void 0===i?void 0:i.description),rules:eB(l,500),field:"readme"})})]})},e$=e=>{var o,t,i,l,n,r,{formApi:a}=e,{productDetail:d}=I(),{getCategories:c}=eH(),u=null==d?void 0:null===(o=d.workflow_extra)||void 0===o?void 0:o.related_workflows,p=!!(null==u?void 0:u.length);return(0,h.useEffect)(()=>{if(!!d){var e,o,t=null===(o=d.workflow_extra)||void 0===o?void 0:null===(e=o.related_workflows)||void 0===e?void 0:e.find(e=>{var o;return e.entity_type!==(null===(o=d.meta_info)||void 0===o?void 0:o.entity_type)});t&&c(t.entity_type)}},[d]),(0,_.jsxs)(b.Form,{getFormApi:a,showValidateIcon:!1,className:ei()("flex h-full",{"flex-col":p}),children:[(0,_.jsxs)("div",{className:ei()("flex flex-col gap-y-16px",{"p-16px w-[312px]":!p,"w-full":p}),children:[(0,_.jsx)(eM,{layout:p?"horizontal":"vertical",productDetail:d,entityName:null==d?void 0:null===(t=d.workflow_extra)||void 0===t?void 0:t.entity_name}),(null==d?void 0:null===(i=d.meta_info)||void 0===i?void 0:i.entity_type)===w._J.WorkflowTemplate||(null==d?void 0:null===(l=d.meta_info)||void 0===l?void 0:l.entity_type)===w._J.WorkflowTemplateV2?(0,_.jsx)(eJ,{nodes:null!==(r=null==d?void 0:null===(n=d.workflow_extra)||void 0===n?void 0:n.nodes)&&void 0!==r?r:[]}):null]}),!p&&(0,_.jsx)(b.Divider,{className:"h-full mx-0 coz-stroke-primary",layout:"vertical"}),(0,_.jsx)(eX,{}),p?(0,_.jsx)(b.Divider,{className:"mt-24px mb-32px",align:"center",children:(0,_.jsx)("span",{className:"coz-fg-secondary text-base leading-[16px]",children:s.o.t("workflowstore_submit_together")})}):null,null==u?void 0:u.map((e,o)=>(0,_.jsx)(eq,{field:"workflows.".concat(o),workflowEntity:e,productDetail:d},e.entity_id))]})},e0=()=>{var e,o,t,{workflowId:i,setCategories:l,productInfo:n,hookProps:r,setProductDetail:a,productDetail:c}=I(),u=i||(null==n?void 0:n.meta_info.entity_id),{setFormApi:p,formApi:f,loading:m,setLoading:v,editorRef:g,errMsg:x,setErrMsg:y}=ex(),{run:k}=(0,z.Z)((0,S._)(function*(){return c?c:(v(!0),(yield T.yF.PublicGetProductEntityInfo({entity_id:u||"",entity_type:(null==r?void 0:r.flowMode)===d.WorkflowMode.Imageflow?w._J.ImageflowTemplate:w._J.WorkflowTemplate},{__disableErrorToast:!0})).data)}),{manual:!0,debounceWait:300,onSuccess:e=>{y(),a(e)},onError:e=>{y(e.message),l([])},onFinally:()=>{v(!1)}});(0,h.useEffect)(()=>()=>{y()},[]),(0,h.useEffect)(()=>{k()},[u,null==r?void 0:r.flowMode]),(0,h.useEffect)(()=>{if(c&&f){var e,o,t,{name:i,readme:l,category:n,description:r}=c.meta_info||{},{recommended_category:a,entity_name:s}=c.workflow_extra||{};f.setValue("name",i||s),f.setValue("category",(null==n?void 0:n.id)||(null==a?void 0:a.id)),l?(f.setValue("readme",l),null==g||null===(e=g.current)||void 0===e||e.setContent(l)):null==g||null===(t=g.current)||void 0===t||null===(o=t.getEditor())||void 0===o||o.setText(null!=r?r:"")}},[c,f]);var j=!!(null==c?void 0:null===(o=c.workflow_extra)||void 0===o?void 0:null===(e=o.related_workflows)||void 0===e?void 0:e.length);return(0,_.jsx)("div",{className:ei()("h-full w-full",{"p-24px":j,"p-0":!j}),children:(0,_.jsxs)(b.Loading,{loading:m,style:{height:"100%"},childStyle:{height:"100%",width:"100%",visibility:m?"hidden":"visible"},children:[x?(0,_.jsx)(b.EmptyState,{size:"full_screen",icon:(0,_.jsx)(N.TL,{}),darkModeIcon:(0,_.jsx)(N.Io,{}),title:x}):null,!x&&(0,_.jsxs)("div",{className:"flex flex-col h-full",children:[Number(null==n?void 0:null===(t=n.meta_info)||void 0===t?void 0:t.id)?(0,_.jsx)(b.Banner,{className:"mb-[24px]",closeIcon:null,description:s.o.t("workflowstore_updating_notify")}):null,(0,_.jsx)(e$,{formApi:e=>p(e)})]})]})})},e1=()=>{var e,{formApi:o,loading:t,errMsg:i}=ex(),{setModal:l,hookProps:n,productDetail:r,setProductDetail:a}=I(),d=m(null==n?void 0:n.flowMode);var c=(e=(0,S._)(function*(){yield null==o?void 0:o.validate();var e=null==o?void 0:o.getValues();if(e){var t,i,{name:n,readme:s,category:d,workflows:c}=e;a((0,g._)((0,v._)({},r),{meta_info:(0,g._)((0,v._)({},null==r?void 0:r.meta_info),{name:n,readme:s,category:{id:d}}),workflow_extra:(0,g._)((0,v._)({},null==r?void 0:r.workflow_extra),{related_workflows:null==r?void 0:null===(i=r.workflow_extra)||void 0===i?void 0:null===(t=i.related_workflows)||void 0===t?void 0:t.map((e,o)=>(0,v._)({},e,null==c?void 0:c[o]))})})),l(p.WORKFLOW_CASE)}}),function(){return e.apply(this,arguments)});return{title:d.infoTitle,handleNext:c,showNextButton:!0,nextButtonText:s.o.t("Imageflow_Store_next"),nextButtonProps:{disabled:t||!!i}}},e2=t("567576"),e6=t("124707"),e4=t("406276"),e3=t("478516"),e5={};e5.styleTagTransform=G(),e5.setAttributes=M(),e5.insert=A().bind(null,"head"),e5.domAPI=E(),e5.insertStyleElement=W(),C()(e3.Z,e5);var e7=e3.Z&&e3.Z.locals?e3.Z.locals:void 0,e8=1e3,e9=e=>{var{closeFuncName:o,getPreviewInfoFuncName:t,changePreviewResultFuncName:i}=e,[l,n]=(0,h.useState)(!0);return(0,_.jsx)(b.Spin,{spinning:l,childStyle:{width:"100%",height:"100%"},style:{width:"100%",height:"100%"},children:(0,_.jsx)("iframe",{src:"/store/flow-trial?close_func=".concat(o,"&get_preview_info_func=").concat(t,"&change_preview_result_func=").concat(i),width:"100%",height:"100%",className:e7.container,onLoad:()=>{n(!1)}})})},oe=(e,o)=>{window[e]=o},oo=e=>{var{previewInfo:o,onChangeResult:t}=e,i=e8++,l="closeFuncName".concat(i),n="getPreviewInfoFuncName".concat(i),r="changePreviewResultFuncName".concat(i);oe(l,()=>{null==a||a(),window[l]=null,window[n]=null,window[r]=null}),oe(n,()=>o),oe(r,e=>{null==t||t(e),window[l]()});var{destroy:a}=b.Modal.info({header:null,width:1360,height:880,closeOnEsc:!1,closable:!1,maskClosable:!1,className:e7.modal,footer:null,content:(0,_.jsx)(e9,{closeFuncName:l,getPreviewInfoFuncName:n,changePreviewResultFuncName:r})})},ot=t("428701"),oi={};oi.styleTagTransform=G(),oi.setAttributes=M(),oi.insert=A().bind(null,"head"),oi.domAPI=E(),oi.insertStyleElement=W(),C()(ot.Z,oi);var ol=ot.Z&&ot.Z.locals?ot.Z.locals:void 0,on=(0,h.lazy)((0,S._)(function*(){var{JsonViewer:e}=yield Promise.all([t.e("7561"),t.e("11046")]).then(t.bind(t,362742));return{default:e}})),or=e=>(0,_.jsx)(h.Suspense,{fallback:null,children:(0,_.jsx)(on,(0,v._)({},e))}),{Text:oa}=b.Typography,os=e=>{var{labelName:o,labelValue:t,labelType:i=d.InputType.String,description:l}=e;return(0,_.jsxs)(b.Space,{spacing:4,className:ol["item-info"],children:[(0,_.jsx)(oa,{className:ol["label-name"],children:o}),(0,_.jsxs)(b.Space,{className:ol["label-info"],vertical:!0,spacing:4,children:[[d.InputType.Object,d.InputType.Array].includes(i)?(0,_.jsx)(or,{style:{whiteSpace:"pre-line"},className:ol["json-container"],rootName:!1,displayDataTypes:!1,enableClipboard:!1,value:t}):(0,_.jsx)(oa,{className:ol["label-value"],children:String(null!=t?t:"")}),l?(0,_.jsx)(oa,{className:ol["label-desc"],children:l}):null]})]})},od=e=>{var{name:o="",data:t="",desc:i,type:l}=e;return{labelName:o,labelValue:t,description:i,labelType:l}},oc=e=>{var o,t,i,l,n,r,a,c,{spaceId:u,caseConfigInfo:p,onExucutionBtnClick:f}=e,m=(null==p?void 0:null===(l=p.excuteInfo)||void 0===l?void 0:null===(i=l.end_node)||void 0===i?void 0:null===(t=i.node_param)||void 0===t?void 0:null===(o=t.terminate_plan)||void 0===o?void 0:o.plan)===d.TerminatePlanType.USESETTING&&(null==p?void 0:null===(n=p.excuteInfo)||void 0===n?void 0:n.output_data);return(0,_.jsx)("div",{className:ol["case-config-container"],children:(0,_.jsx)(b.Spin,{spinning:!1,childStyle:{width:"100%",height:"100%"},style:{height:"100%"},children:(0,_.jsxs)(b.Space,{spacing:0,style:{width:"100%",height:"100%"},children:[(0,_.jsxs)(b.Space,{className:ol["left-container"],vertical:!0,spacing:16,children:[(0,_.jsxs)(b.Space,{spacing:8,children:[(0,_.jsx)(oa,{className:ol.title,children:s.o.t("Imageflow_Store_trial_output")}),(0,_.jsx)(b.Tag,{color:"primary",children:s.o.t(m?"Imageflow_Store_output_mode1":"Imageflow_Store_output_mode2")})]}),(0,_.jsxs)(b.Space,{vertical:!0,className:ol.content,spacing:20,children:[(0,_.jsx)(oa,{className:ol["content-primary"],children:s.o.t("Imageflow_Store_output_variable")}),null==p?void 0:null===(r=p.outputInfo)||void 0===r?void 0:r.map((e,o)=>(0,_.jsx)(os,(0,v._)({},od(e)),o)),m?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{className:ol.divider}),(0,_.jsx)(os,{labelName:s.o.t("Imageflow_Store_output_content"),labelValue:null==p?void 0:null===(a=p.excuteInfo)||void 0===a?void 0:a.output_data})]}):null]}),(0,_.jsxs)(b.Space,{spacing:12,children:[(0,_.jsx)(b.Button,{color:"primary",size:"default",onClick:()=>{null==f||f({caseConfigInfoToRun:p})},children:s.o.t("Imageflow_Store_testrun")}),(0,_.jsx)(b.Tooltip,{trigger:"hover",content:s.o.t("Imageflow_Store_testrun_tooltip"),position:"top",showArrow:!0,children:(0,_.jsx)(ed.L03,{className:"coz-fg-secondary"})})]})]}),(0,_.jsxs)(b.Space,{className:ol["right-container"],vertical:!0,style:{height:"100%"},spacing:16,children:[(0,_.jsx)(oa,{className:ol.title,children:s.o.t("Imageflow_Store_trial_input")}),(0,_.jsx)(b.Space,{spacing:4,vertical:!0,className:ol.content,children:null==p?void 0:null===(c=p.inputInfo)||void 0===c?void 0:c.map((e,o)=>(0,_.jsx)(os,(0,v._)({},od(e)),o))})]})]})})})},ou=t("350871"),op=t("640626"),of=e=>e.type===e6.n$I.String&&e.format===op.vG.ImageUrl,om=e=>null==e?void 0:e.find(of),ov=e=>null==e?void 0:e.filter(of),og=t("766184"),o_={};o_.styleTagTransform=G(),o_.setAttributes=M(),o_.insert=A().bind(null,"head"),o_.domAPI=E(),o_.insertStyleElement=W(),C()(og.Z,o_);var oh=og.Z&&og.Z.locals?og.Z.locals:void 0,ox=e=>{var{title:o,tooltip:t}=e;return(0,_.jsxs)("div",{className:"coz-fg-primary font-medium text-[16px] flex items-center",children:[o,t?(0,_.jsx)(b.Tooltip,{className:"coz-tooltip-dark",spacing:10,content:t,children:(0,_.jsx)(ed.L03,{className:"ml-6px text-base coz-fg-secondary"})}):null]})},ob=e=>{var{title:o}=e;return(0,_.jsx)("div",{className:"coz-fg-secondary font-medium text-base flex items-center",children:o})},oy=e=>{var{data:o,name:t,desc:i}=e;return(0,_.jsxs)("div",{className:oh["string-option"],children:[(0,_.jsx)(b.Radio,{className:"w-full",value:t,extra:(0,_.jsx)(b.Typography.Text,{ellipsis:{showTooltip:!0,rows:1},className:"inline-block coz-fg-secondary text-base h-16px leading-[16px]",children:o}),children:t}),(0,_.jsx)("div",{className:"coz-fg-dim text-base mt-4px",children:i})]})},ow=e=>{var{data:o,name:t,desc:i}=e;return(0,_.jsxs)("div",{className:oh["image-option"],children:[(0,_.jsx)(b.Radio,{className:"w-full",value:t,extra:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{className:"flex items-center justify-center w-full h-[96px] coz-mg-secondary py-12px",children:(0,_.jsx)(b.Image,{imgCls:"object-cover",preview:!1,src:o,className:"rounded-mini",width:54,height:72})}),(0,_.jsx)("div",{className:"flex flex-col gap-y-4px p-12px",children:(0,_.jsxs)("div",{className:"flex items-center coz-fg-primary text-lg font-medium leading-[20px]",children:[t,(0,_.jsx)(b.Tag,{className:"ml-4px",size:"mini",color:"blue",children:s.o.t("Imageflow_Store_image")})]})})]})}),(0,_.jsx)("div",{className:"coz-fg-dim text-base mt-4px",children:i})]})},ok={mode:"advanced",className:"mt-6px w-full",direction:"horizontal",type:"pureCard"},oj=e=>{var{productDetail:o,caseConfigInfo:t,onClick:i}=e,{hoverText:l,inputImageUrl:n,outputImageUrl:r}=t||{};return(0,_.jsxs)("div",{className:"w-[319px] px-16px py-24px flex flex-col justify-center items-center",children:[(0,_.jsx)("div",{className:"w-[180px]",children:(0,_.jsx)(ou.H1,{needRedirect:!1,productInfo:{meta_info:(0,v._)({},null==o?void 0:o.meta_info),workflow_extra:(0,g._)((0,v._)({},null==o?void 0:o.workflow_extra),{hover_text:l,case_input_icon_url:n,case_output_icon_url:r,duplicate_count:0})}})}),(0,_.jsx)("div",{className:"coz-fg-dim text-base mt-[-4px] mb-24px text-center leading-[16px]",children:s.o.t("Imageflow_Store_default_text")}),(0,_.jsx)(b.Button,{onClick:i,color:"primary",children:s.o.t("Imageflow_Store_preview")})]})},oI=e=>{var o,t,i,l,n,r,{caseConfigInfo:a,onExucutionBtnClick:d}=e,{productDetail:c,caseConfigInfoList:u,setCaseConfigInfoList:p,setActiveFlowInfo:f}=I(),{inputInfo:m=[],outputInfo:x=[],excuteInfo:y}=a||{},{raw_output_data:w="{}",input_data:k="{}"}=y||{},j=(0,H.f5)(k),S=(0,H.f5)(w),z=null==m?void 0:m.filter(e=>e.type===e6.n$I.String&&!e.format),N=ov(m),T=ov(x),[P,C]=(0,h.useState)(null!==(l=null===(o=z[0])||void 0===o?void 0:o.name)&&void 0!==l?l:""),[O,E]=(0,h.useState)(null!==(n=null===(t=N[0])||void 0===t?void 0:t.name)&&void 0!==n?n:""),[F,A]=(0,h.useState)(null!==(r=null===(i=T[0])||void 0===i?void 0:i.name)&&void 0!==r?r:""),L=(e,o)=>{var t=u.map(t=>t.entityId===(null==a?void 0:a.entityId)?(0,g._)((0,v._)({},t),{[e]:o}):t);p(t),f(t.find(e=>e.entityId===(null==a?void 0:a.entityId)))};return(0,_.jsxs)("div",{className:ei()(oh["imageflow-case"],"h-full w-full flex"),children:[oj({productDetail:c,caseConfigInfo:a,onClick:()=>{null==d||d({caseConfigInfoToRun:a,onChangeResult:()=>{var e,o,t,i,l,n;C(null!==(i=null===(e=z[0])||void 0===e?void 0:e.name)&&void 0!==i?i:""),E(null!==(l=null===(o=N[0])||void 0===o?void 0:o.name)&&void 0!==l?l:""),A(null!==(n=null===(t=T[0])||void 0===t?void 0:t.name)&&void 0!==n?n:"")}})}}),(0,_.jsx)(b.Divider,{className:"h-full m-0 coz-stroke-primary",layout:"vertical"}),(0,_.jsxs)("div",{className:"overflow-y-auto flex flex-col px-32px py-24px flex-1 h-full gap-y-24px",children:[(0,_.jsxs)("div",{className:"flex flex-col gap-y-16px",children:[(0,_.jsx)(ox,{title:s.o.t("Imageflow_Store_trial_input"),tooltip:s.o.t("Imageflow_Store_tooltip1")}),z.length?(0,_.jsxs)("div",{className:"w-full",children:[(0,_.jsx)(ob,{title:s.o.t("Imageflow_Store_string")}),(0,_.jsx)(b.RadioGroup,(0,g._)((0,v._)({},ok),{value:P,onChange:e=>{var o,t=null!==(o=e.target.value)&&void 0!==o?o:"";C(t),L("hoverText",j[t])},children:z.map((e,o)=>(0,_.jsx)(oy,(0,v._)({},e),o))}))]}):null,N.length?(0,_.jsxs)("div",{className:"w-full",children:[(0,_.jsx)(ob,{title:s.o.t("Imageflow_Store_image")}),(0,_.jsx)(b.RadioGroup,(0,g._)((0,v._)({},ok),{value:O,onChange:e=>{var o,t=null!==(o=e.target.value)&&void 0!==o?o:"";E(t),L("inputImageUrl",j[t])},children:N.map((e,o)=>(0,_.jsx)(ow,(0,v._)({},e),o))}))]}):null]}),T.length?(0,_.jsxs)("div",{className:"w-full flex flex-col gap-y-16px",children:[(0,_.jsx)(ox,{title:s.o.t("Imageflow_Store_trial_output"),tooltip:s.o.t("Imageflow_Store_tooltip2")}),(0,_.jsx)(b.RadioGroup,(0,g._)((0,v._)({},ok),{className:"mt-0",value:F,onChange:e=>{var o,t=null!==(o=e.target.value)&&void 0!==o?o:"";A(t),L("outputImageUrl",S[t])},children:T.map((e,o)=>(0,_.jsx)(ow,(0,v._)({},e),o))}))]}):null]})]})},oS=t("74551"),oz={};oz.styleTagTransform=G(),oz.setAttributes=M(),oz.insert=A().bind(null,"head"),oz.domAPI=E(),oz.insertStyleElement=W(),C()(oS.Z,oz);var oN=oS.Z&&oS.Z.locals?oS.Z.locals:void 0,{Text:oT}=b.Typography,oP=e=>{var{info:o,isNeedTypeIcon:t,activeFlowId:i,setActiveFlowInfo:l}=e;return(0,_.jsx)(b.Tooltip,{trigger:(null==o?void 0:o.isExpire)?"hover":"custom",content:s.o.t("Imageflow_Store_case_tooltip"),position:"top",showArrow:!0,children:(0,_.jsxs)("div",{className:ei()(oN["case-config-header-text"],{[oN.active]:i===o.entityId}),children:[t?(null==o?void 0:o.entityType)===w._J.ImageflowTemplate?(0,_.jsx)(ed.nie,{}):(0,_.jsx)(ed.eTH,{}):null,(0,_.jsx)(oT,{className:oN.text,onClick:()=>{l(o)},children:o.entityName}),(null==o?void 0:o.isExpire)?(0,_.jsx)("div",{className:oN["warn-dot"]}):null]})})},oC=e=>{var{activeFlowId:o,setActiveFlowInfo:t,caseConfigInfoList:i}=e;return(0,_.jsx)(b.OverflowList,{items:i,overflowRenderer:e=>e.length>0?(0,_.jsx)(e4.r,{buttonList:e.map(e=>({text:(0,_.jsx)(oP,{info:e,activeFlowId:o,setActiveFlowInfo:t}),onClick:()=>{t(e)}})),popoverMinWidth:120,children:(0,_.jsx)("div",{className:"coz-fg-secondary hover:coz-mg-secondary-hovered p-[5px] cursor-pointer rounded-[6px]",children:(0,_.jsx)(ed.d7l,{width:"14px",height:"14px"})})}):null,visibleItemRenderer:(e,i)=>(0,_.jsx)(oP,{info:e,isNeedTypeIcon:!0,activeFlowId:o,setActiveFlowInfo:t}),className:oN["case-config-header"]})},oO=e=>{var o,t,i,l,n,r,a,s;return[{entityId:(null==e?void 0:null===(o=e.meta_info)||void 0===o?void 0:o.entity_id)||"",entityName:(null==e?void 0:null===(t=e.meta_info)||void 0===t?void 0:t.name)||"",entityType:(null==e?void 0:null===(i=e.meta_info)||void 0===i?void 0:i.entity_type)||w._J.WorkflowTemplate,executeId:null==e?void 0:null===(l=e.workflow_extra)||void 0===l?void 0:l.case_execute_id,commitId:null==e?void 0:null===(n=e.workflow_extra)||void 0===n?void 0:n.latest_publish_commit_id,isExpire:!0,iconUrl:(null==e?void 0:null===(r=e.meta_info)||void 0===r?void 0:r.icon_url)||"",userInfo:null==e?void 0:null===(a=e.meta_info)||void 0===a?void 0:a.user_info},...((null==e?void 0:null===(s=e.workflow_extra)||void 0===s?void 0:s.related_workflows)||[]).map(o=>{var t;return{entityId:(null==o?void 0:o.entity_id)||"",entityName:(null==o?void 0:o.name)||"",entityType:(null==o?void 0:o.entity_type)||w._J.WorkflowTemplate,executeId:"",commitId:(null==o?void 0:o.latest_publish_commit_id)||"",isExpire:!0,iconUrl:(null==o?void 0:o.icon_url)||"",userInfo:null==e?void 0:null===(t=e.meta_info)||void 0===t?void 0:t.user_info}})]},oE=()=>{var e,{productDetail:o,spaceId:t,caseConfigInfoList:i,setCaseConfigInfoList:l,activeFlowInfo:n,setActiveFlowInfo:r,toRunCaseConfigInfo:a,setToRunCaseConfigInfo:d}=I(),[c,u]=(0,h.useState)(""),p=(0,h.useMemo)(()=>null==i?void 0:i.find(e=>e.entityId===(null==n?void 0:n.entityId)),[n,i]);var{run:f,loading:m}=(0,z.Z)((e=(0,S._)(function*(e){var t=i,l=[];l=0!==i.length&&(null==e?void 0:e.entityId)?[{workflow_id:null==e?void 0:e.entityId,execute_id:(null==e?void 0:e.executeId)||void 0,commit_id:(null==e?void 0:e.commitId)||void 0}]:(t=oO(o)).map(e=>({workflow_id:e.entityId,commit_id:e.commitId||void 0}));var n=yield T.OH.BatchGetWkProcessIO({workflow_params:l}),r={};return(n.in_out_data||[]).forEach(e=>{e.workflow_id&&(r[e.workflow_id]=e)}),t.map(e=>{if(r[e.entityId]){e.excuteInfo=r[e.entityId];var o,t,i,l,n,a,s,d,c,u,p,f,m,v,g=oF((null===(i=e.excuteInfo)||void 0===i?void 0:null===(t=i.start_node)||void 0===t?void 0:null===(o=t.node_param)||void 0===o?void 0:o.input_parameters)||[],(null===(l=e.excuteInfo)||void 0===l?void 0:l.input_data)||""),_=oF((null===(s=e.excuteInfo)||void 0===s?void 0:null===(a=s.end_node)||void 0===a?void 0:null===(n=a.node_param)||void 0===n?void 0:n.output_parameters)||[],(null===(d=e.excuteInfo)||void 0===d?void 0:d.raw_output_data)||"");e.entityType===w._J.ImageflowTemplate&&(e.hoverText=String(null!==(f=null===(c=g.find(e=>(null==e?void 0:e.type)===e6.n$I.String&&!e.format))||void 0===c?void 0:c.data)&&void 0!==f?f:""),e.inputImageUrl=String(null!==(m=null===(u=om(g))||void 0===u?void 0:u.data)&&void 0!==m?m:""),e.outputImageUrl=String(null!==(v=null===(p=om(_))||void 0===p?void 0:p.data)&&void 0!==v?v:"")),e.executeId=r[e.entityId].execute_id,e.inputInfo=g,e.outputInfo=_,e.isExpire=!1}return e})}),function(o){return e.apply(this,arguments)}),{manual:!0,onSuccess:e=>{u(""),l(e),!n&&r(e[0])},onError:e=>{(null==i?void 0:i.length)===0?u(e.message):b.Toast.error(e.message)}});(0,h.useEffect)(()=>{if(i.length>0){var e=oO(o),t={};e.forEach(e=>{t[e.entityId]=e});var n=i.map(e=>{var o;return(0,g._)((0,v._)({},e),{entityName:(null===(o=t[e.entityId])||void 0===o?void 0:o.entityName)||void 0})});l(n),r(n[0]);return}f()},[]);var x=e=>{var{caseConfigInfoToRun:o,onChangeResult:i}=e,{entityName:l="",iconUrl:n="",userInfo:r,entityId:a="",executeId:s="",commitId:d,entityType:c}=o||{};oo({previewInfo:{name:l,iconUrl:n,userInfo:r,entityId:a,executeId:s,commitId:d,entityType:c,spaceId:t||""},onChangeResult:e=>{f({entityId:null==o?void 0:o.entityId,executeId:null==e?void 0:e.executeId,commitId:null==o?void 0:o.commitId}),null==i||i()}})};return(0,h.useEffect)(()=>{a&&(x({caseConfigInfoToRun:a}),d())},[a]),c?(0,_.jsx)(e2.y,{title:c,type:"widget",isNotFound:!1,button:(0,_.jsx)(b.Button,{type:"primary",onClick:()=>{u(""),f()},children:s.o.t("inifinit_list_retry")})}):(0,_.jsx)(b.Spin,{spinning:m,childStyle:{height:"100%",visibility:m?"hidden":"visible"},style:{height:"100%"},children:(0,_.jsxs)(b.Space,{vertical:!0,spacing:0,className:oN.container,children:[i.length>1?(0,_.jsx)("div",{className:oN["header-container"],children:(0,_.jsx)(oC,{activeFlowId:(null==n?void 0:n.entityId)||"",setActiveFlowInfo:r,caseConfigInfoList:i})}):null,(0,_.jsx)("div",{className:oN["content-container"],children:(null==p?void 0:p.isExpire)?(0,_.jsx)(ey,{spaceId:t,caseConfigInfo:n,onExucutionBtnClick:x}):(null==p?void 0:p.entityType)===w._J.ImageflowTemplate?(0,_.jsx)(oI,{caseConfigInfo:n,onExucutionBtnClick:x}):(0,_.jsx)(oc,{spaceId:t,caseConfigInfo:n,onExucutionBtnClick:x})})]})})},oF=(e,o)=>{var t=(0,H.f5)(o)||[];return e.map(e=>{var o;return{name:e.name,desc:e.desc,type:e.type,required:e.required,data:null!==(o=null==t?void 0:t[e.name||""])&&void 0!==o?o:"",format:e.format}})},oA=t("797607"),oL={};oL.styleTagTransform=G(),oL.setAttributes=M(),oL.insert=A().bind(null,"head"),oL.domAPI=E(),oL.insertStyleElement=W(),C()(oA.Z,oL);var oM=oA.Z&&oA.Z.locals?oA.Z.locals:void 0,oZ=e=>{var o,{currentModal:t,setModal:i,setProductInfo:l,setHookProps:n,setSpace:r,clearState:a}=I(),s=e1(),c=ew(),u=q(),w=X(),k=null!==(o=null==e?void 0:e.flowMode)&&void 0!==o?o:d.WorkflowMode.Workflow,j=m(k);(0,h.useEffect)(()=>{n((0,g._)((0,v._)({},e),{flowMode:k}))},[k]);var S=(0,h.useCallback)(e=>{var{type:o,product:t,source:n=y.MU.WORKFLOW_STORE,releaseEntrance:r}=e||{};if(o){var a,s,d=x.Z.parse(location.search);(0,y.Gg)(y.Kg.entity_publish_click_front,{entity_type:"workflow",from:d.from,source:n,submit_type:t?"update":"first",entity_id:String(null==t?void 0:t.meta_info.entity_id)||"",product_id:String(null==t?void 0:null===(a=t.meta_info)||void 0===a?void 0:a.id),product_name:null==t?void 0:null===(s=t.meta_info)||void 0===s?void 0:s.name,publish_action:y.n_.Click,release_entrance:r||""})}t&&l(t),i(o,n)},[i]),z=()=>{if(t===p.PUBLISH_RESULT){var o;null==e||null===(o=e.onPublishSuccess)||void 0===o||o.call(e)}i(),a()},N={[p.WORKFLOW]:{title:(0,_.jsx)(e_,{title:j.selectTitle,tooltip:(0,_.jsx)(ef,{content:(0,_.jsx)(es,{})})}),type:"modal",width:480,content:(0,_.jsx)(eE,(0,g._)((0,v._)({},w),{renderItem:e=>(0,_.jsx)(V,{itemInfo:e})})),footer:null,closeIcon:(0,_.jsx)(eF,{}),className:oM["select-product-modal"]},[p.WORKFLOW_INFO]:(0,g._)((0,v._)({},f),{header:(0,_.jsx)(ek,(0,g._)((0,v._)({},s),{handleClose:z})),content:(0,_.jsx)(e0,{}),className:oM["workflow-info-modal"],bodyStyle:{overflow:"auto"}}),[p.WORKFLOW_CASE]:(0,g._)((0,v._)({},f),{header:(0,_.jsx)(ek,(0,g._)((0,v._)({},c),{handleClose:z})),content:(0,_.jsx)(oE,{}),className:oM["workflow-info-modal"],bodyStyle:{overflow:"auto"}}),[p.PUBLISH_RESULT]:(0,g._)((0,v._)({},f),{header:(0,_.jsx)(ek,{title:j.infoTitle,handleClose:z}),content:(0,_.jsx)(D,(0,g._)((0,v._)({},u),{handleSeeMore:()=>{u.handleSeeMore(),a()}})),className:oM["product-info-modal"]})};return{ModalComponent:(0,_.jsx)(b.Modal,(0,g._)((0,v._)({},N[t||p.WORKFLOW]),{visible:!!t,onCancel:z,children:t?N[t].content:null})),showModal:S,setSpace:r}},oW=t("698363"),oB={from:y.YJ.PLUGIN_CARD,spaceId:"",pluginId:"",currentModal:void 0,pluginInfo:void 0,publishType:{billingType:w.j2.Free,businessType:void 0},basicInfo:{readme:"",use_scene:""},expansionConfig:{qps:5,qps_enterprise:20,supports_expansion:0},paymentInfo:{free_quota:10}},oG=(0,j.ZP)()((0,k.mW)((e,o)=>(0,g._)((0,v._)({},oB),{setSpaceId:o=>e({spaceId:o}),setModal:(o,t)=>{!o&&e({pluginInfo:void 0}),e(e=>({currentModal:o,from:null!=t?t:e.from}))},setPluginId:o=>e({pluginId:o}),setPluginInfo:o=>e({pluginInfo:o}),setPublishType:t=>e({publishType:(0,v._)({},o().publishType,t)},!1,"setPublishType"),setBasicInfo:t=>e({basicInfo:(0,v._)({},o().basicInfo,t)},!1,"setBasicInfo"),setExpansionConfig:t=>e({expansionConfig:(0,v._)({},o().expansionConfig,t)},!1,"setExpansionConfig"),setPaymentInfo:t=>e({paymentInfo:(0,v._)({},o().paymentInfo,t)},!1,"setPaymentInfo"),reset:()=>e((0,v._)({},oB))}),{name:"bot.pluginModalStore",enabled:!1})),oR=()=>{var e,{spaceId:o,setSpaceId:t}=oG((0,$.N)(e=>({spaceId:e.spaceId,setSpaceId:e.setSpaceId})));return{getDefaultSpaceId:(e=(0,S._)(function*(e){var o,t,i;return null===(i=(yield T.Js.GetPublishedPluginList({page:1,size:1,user_space_ids:e},{__disableErrorToast:!0})).data)||void 0===i?void 0:null===(t=i.plugin_list)||void 0===t?void 0:null===(o=t[0])||void 0===o?void 0:o.space_id}),function(o){return e.apply(this,arguments)}),modalSpaceId:o,setModalSpaceId:t,chooseInStore:!1}},oJ=t("387294"),oU=t("967756"),oY=t("378994");function oD(e){var o,t,{spaceId:i,value:l,onChange:n}=e;var r=(0,oJ.Z)((o=(0,S._)(function*(e){var o,t,l,n,r,a,s,d=yield T.Js.GetPublishedPluginList({space_id:i,page:null!==(n=null==e?void 0:e.page)&&void 0!==n?n:1,size:10});return{list:null!==(r=null===(o=d.data)||void 0===o?void 0:o.plugin_list)&&void 0!==r?r:[],page:null!==(a=null===(t=d.data)||void 0===t?void 0:t.page)&&void 0!==a?a:0,total:Number(null!==(s=null===(l=d.data)||void 0===l?void 0:l.total)&&void 0!==s?s:0)}}),function(e){return o.apply(this,arguments)}),{reloadDeps:[i],isNoMore:e=>{var o,t,i;return(null!==(t=null==e?void 0:null===(o=e.list)||void 0===o?void 0:o.length)&&void 0!==t?t:0)>=(null!==(i=null==e?void 0:e.total)&&void 0!==i?i:0)}}),a=null===(t=r.data)||void 0===t?void 0:t.list.map(e=>{var o=e.status===oY.vF.PUBLISHED,t=(0,_.jsx)("div",{className:"px-[8px] py-[6px] w-[358px] pointer-events-none",children:(0,_.jsx)(K,{productInfo:{name:e.name,description:e.desc_for_human,updateAt:e.update_time,image:e.plugin_icon}})});return{value:e.id,disabled:o,label:o?(0,_.jsx)(b.Tooltip,{theme:"dark",content:"\u8BF7\u524D\u5F80\u201C\u63D2\u4EF6\u7BA1\u7406\u201D\u9875\u9762\u66F4\u65B0\u5DF2\u53D1\u5E03\u7684\u63D2\u4EF6",children:(0,_.jsx)("div",{className:"opacity-75",children:t})}):t}});return(0,_.jsx)(b.Select,{value:l,onChange:e=>{if("string"==typeof e){var o,t=null===(o=r.data)||void 0===o?void 0:o.list.find(o=>o.id===e);t&&(null==n||n(e,t))}},optionList:a,innerBottomSlot:(0,_.jsx)(oq,{onLoadMore:r.loadMore}),renderSelectedItem:e=>{var o,t=null===(o=r.data)||void 0===o?void 0:o.list.find(o=>o.id===e.value);return t?(0,_.jsxs)("div",{className:"flex items-center gap-[6px]",children:[(0,_.jsx)(b.CozAvatar,{type:"platform",size:"mini",src:t.plugin_icon}),(0,_.jsx)("span",{children:t.name})]}):null}})}function oq(e){var{onLoadMore:o}=e,t=(0,h.useRef)(null),[i]=(0,oU.Z)(t);return(0,h.useEffect)(()=>{if(!!i)null==o||o()},[i]),(0,_.jsx)("div",{ref:t,style:{height:1}})}function oH(e){var o,{spaceId:t,pluginId:i,setPluginId:l,pluginInfo:n,setPluginInfo:r,publishType:a,setPublishType:d}=oG((0,$.N)(e=>({spaceId:e.spaceId,pluginId:e.pluginId,setPluginId:e.setPluginId,pluginInfo:e.pluginInfo,setPluginInfo:e.setPluginInfo,publishType:e.publishType,setPublishType:e.setPublishType}))),c=oR();(0,h.useEffect)(()=>{l("")},[t]);var u=(null==n?void 0:null===(o=n.meta_info)||void 0===o?void 0:o.status)!==w.Pt.NeverListed,[p,f]=(0,h.useState)([]),{loading:m}=(0,z.Z)(()=>T.yF.PublicGetProductEntityInfo({entity_id:i,entity_type:e.isEnterpriseStore?w._J.EnterprisePlugin:w._J.Plugin}),{ready:!!i,refreshDeps:[i],onSuccess:e=>{var o,t,i,l,n;r(e.data),f(null!==(l=null===(o=e.data.whitelist_config)||void 0===o?void 0:o.business_types)&&void 0!==l?l:[]),d({billingType:null!==(n=null===(t=e.data.commercial_setting)||void 0===t?void 0:t.commercial_type)&&void 0!==n?n:w.j2.Free,businessType:null===(i=e.data.commercial_setting)||void 0===i?void 0:i.business_type})}}),g=e=>{d((0,v._)({},a,e))},x=!i||m||a.billingType===w.j2.Paid&&!a.businessType;return(0,_.jsxs)("div",{className:"flex flex-col gap-[16px]",children:[(0,_.jsx)(eO,(0,v._)({},c)),(0,_.jsx)(oK,{label:s.o.t("mkpl_select_plugin"),children:(0,_.jsx)(oD,{spaceId:t,value:i,onChange:e=>l(e)})}),p.length>0?(0,_.jsx)(oK,{label:s.o.t("plugin_billing"),description:s.o.t("paid_plugin_tip"),children:(0,_.jsx)(b.Select,{optionList:[{label:s.o.t("free_plugin"),value:w.j2.Free},{label:s.o.t("paid_plugin"),value:w.j2.Paid}],value:a.billingType,onChange:e=>{g({billingType:e})},disabled:u})}):null,p.length>0&&a.billingType===w.j2.Paid?(0,_.jsx)(oK,{label:s.o.t("business_type"),description:s.o.t("plugin_business_type_tip"),children:(0,_.jsx)(b.Select,{optionList:[{label:s.o.t("self_operated_plugin"),value:w._$.SelfOperated},{label:s.o.t("community_plugin"),value:w._$.Community}].filter(e=>p.includes(e.value)),value:a.businessType,onChange:e=>{g({businessType:e})},disabled:u})}):null,(0,_.jsxs)("div",{className:"flex justify-end gap-[8px]",children:[(0,_.jsx)(b.Button,{color:"primary",onClick:e.onCancel,children:s.o.t("Cancel")}),(0,_.jsx)(b.Button,{onClick:e.onSubmit,disabled:x,children:s.o.t("Confirm")})]})]})}function oK(e){return(0,_.jsxs)("div",{className:"flex flex-col",children:[(0,_.jsx)("span",{className:"px-[2px] pb-[4px] text-[14px] leading-[20px] font-medium coz-fg-primary",children:e.label}),e.children,e.description?(0,_.jsx)("span",{className:"px-[2px] pt-[4px] text-[12px] leading-[16px] coz-fg-secondary",children:e.description}):null]})}var oV=t("216134");function oQ(e){var o,t,i,l=null==e?void 0:null===(o=e.settlement)||void 0===o?void 0:o.service_tree,n=null==e?void 0:null===(t=e.settlement)||void 0===t?void 0:t.partner_product,r=null==e?void 0:null===(i=e.charge_items)||void 0===i?void 0:i.at(0),a={};return l&&Object.assign(a,{service_tree:l}),n&&Object.assign(a,{account_id:n.account_id,account_name:n.account_name,product_code:n.product_code}),r&&Object.assign(a,{charge_item_code:r.code,charge_item_unit:r.unit,price:r.price,free_quota:r.free_quota}),a}function oX(e){var{status:o,onSeeMore:t}=e,i=o===w.Lo.Approved;return(0,_.jsx)(b.EmptyState,{icon:(0,_.jsx)(N.Yf,{}),darkModeIcon:(0,_.jsx)(N._l,{}),size:"full_screen",title:s.o.t(i?"mkpl_plugin_avaliable":"mkpl_plugin_publish_reviewing"),description:i?void 0:s.o.t("mkpl_plugin_publish_reviewing_desc"),buttonText:s.o.t("see_more"),onButtonClick:t})}var o$=t("274372"),o0=t("984864");var o1=((a={})[a.Unbind=1]="Unbind",a[a.Valid=2]="Valid",a),o2=(0,b.withField)(e=>(0,_.jsx)(b.RadioGroup,(0,g._)((0,v._)({},e),{onChange:o=>{var t;return null===(t=e.onChange)||void 0===t?void 0:t.call(e,o.target.value)}})));function o6(){var e,o,t,i,l,n=(0,b.useFormState)();return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(b.FormInputNumber,{field:"qps",label:s.o.t("non_enterprise_qps"),min:3,max:5,step:1,className:"w-full",rules:[{required:!0}]}),(0,_.jsx)(b.FormInputNumber,{field:"qps_enterprise",label:s.o.t("enterprise_qps"),min:10,step:1,className:"w-full",rules:[{required:!0}]}),(0,_.jsxs)(o2,{field:"supports_expansion",label:s.o.t("supports_scaling"),rules:[{required:!0}],children:[(0,_.jsx)(b.Radio,{value:1,children:s.o.t("supports")}),(0,_.jsx)(b.Radio,{value:0,children:s.o.t("not_support")})]}),(null===(e=n.values)||void 0===e?void 0:e.supports_expansion)?(0,_.jsx)(b.FormInputNumber,{field:"expansion_limit",label:s.o.t("expansion_limit_qps"),className:"w-full",extraText:(0,_.jsx)(b.Typography.Paragraph,{type:"secondary",fontSize:"12px",children:s.o.t("plugin_scaling_tip")}),min:null!==(l=null===(o=n.values)||void 0===o?void 0:o.qps_enterprise)&&void 0!==l?l:1,step:1,rules:[{required:(null===(t=n.values)||void 0===t?void 0:t.supports_expansion)===1},{type:"number",min:(null===(i=n.values)||void 0===i?void 0:i.qps_enterprise)+1}]}):null]})}var o4=t("68489");function o3(e){var{className:o,tools:t}=e;return(0,_.jsxs)("div",{className:ei()("border-[0.5px] border-solid coz-stroke-plus rounded-[12px]","flex flex-col gap-[12px] p-[16px] coz-mg-secondary",o),children:[(0,_.jsxs)("div",{className:"flex items-center gap-[8px]",children:[(0,_.jsx)("div",{className:"w-[20px] h-[20px] coz-mg-hglt-plus-green p-[3px] rounded-[5px] flex",children:(0,_.jsx)(ed.fNZ,{className:"text-[14px] coz-fg-white"})}),(0,_.jsx)(b.Typography.Text,{weight:500,children:s.o.t("bot_edit_page_plugin_list_plugin_has_n_tools",{n:t.length})})]}),t.map((e,o)=>(0,_.jsxs)(h.Fragment,{children:[o>0?(0,_.jsx)(b.Divider,{}):null,(0,_.jsxs)("div",{className:"flex flex-col gap-[4px]",children:[(0,_.jsx)(b.Typography.Text,{fontSize:"12px",weight:500,children:e.name}),(0,_.jsx)(b.Typography.Paragraph,{type:"secondary",fontSize:"12px",ellipsis:{rows:2,showTooltip:{opts:{theme:"dark",style:{maxWidth:500}}}},children:e.description})]})]},e.id))]})}var o5=t("78420"),o7=e=>{var o,t,{product:i}=e,l=null==i?void 0:null===(t=i.plugin_extra)||void 0===t?void 0:null===(o=t.tools)||void 0===o?void 0:o.find(e=>(0,o5.Z)(e.example));return l?(0,_.jsx)(b.Banner,{card:!0,closeIcon:null,className:"w-full",type:"warning",description:(0,_.jsxs)("div",{children:[s.o.t("submit_plugin_before_submitting_your_plugin"),(0,_.jsx)("span",{className:"text-brand-6 block cursor-pointer",onClick:()=>{var e,o,t=null==i?void 0:null===(e=i.plugin_extra)||void 0===e?void 0:e.material_id,n=null==i?void 0:null===(o=i.plugin_extra)||void 0===o?void 0:o.space_id;window.open("/space/".concat(n,"/plugin/").concat(t,"?edit_example_id=").concat(l.id))},children:s.o.t("Submit_plugin_go_edit")})]})}):null},o8=["7342466101361983685","7475930039976984614"],o9=(0,h.lazy)(()=>Promise.all([t.e("43361"),t.e("14138"),t.e("16826"),t.e("47802"),t.e("4118"),t.e("7561"),t.e("16533"),t.e("53101"),t.e("74943"),t.e("43969"),t.e("71897")]).then(t.bind(t,607031))),te=(0,b.withField)(function(e){var o,t,i,{productDetail:l}=e,n=()=>{var e,o,t,i,n,r=null!==(i=null==l?void 0:null===(e=l.plugin_extra)||void 0===e?void 0:e.material_id)&&void 0!==i?i:null==l?void 0:null===(o=l.meta_info)||void 0===o?void 0:o.entity_id;window.open("/space/".concat(null!==(n=null==l?void 0:l.space_id)&&void 0!==n?n:null==l?void 0:null===(t=l.plugin_extra)||void 0===t?void 0:t.space_id,"/plugin/").concat(r))};return(0,_.jsxs)("div",{className:"flex gap-[16px]",children:[(0,_.jsx)(b.CozAvatar,{size:"xl",type:"platform",className:"shrink-0",hoverMask:!0,src:null==l?void 0:null===(o=l.meta_info)||void 0===o?void 0:o.icon_url,onClick:n}),(0,_.jsxs)("div",{className:"h-[64px] flex flex-col gap-[4px] grow min-w-0",children:[(0,_.jsxs)("div",{className:"flex gap-[4px] items-center",children:[(0,_.jsx)("span",{className:"coz-fg-plus text-[16px] font-medium leading-[20px]",children:null==l?void 0:null===(t=l.meta_info)||void 0===t?void 0:t.name}),(0,_.jsx)(ed.JAz,{className:"coz-fg-secondary cursor-pointer",onClick:n})]}),(0,_.jsx)(eL.p,{size:"large",metaInfo:null==l?void 0:l.meta_info,className:"!h-[16px] [&_span]:!text-[12px] [&_span]:!leading-[16px]"}),(0,_.jsxs)("div",{className:"flex gap-[4px] items-center",children:[(0,_.jsx)(b.Typography.Text,{fontSize:"14px",type:"secondary",className:"coz-fg-secondary",ellipsis:{rows:1,showTooltip:!0},children:null==l?void 0:null===(i=l.meta_info)||void 0===i?void 0:i.description}),(0,_.jsx)(ed.JAz,{className:"coz-fg-secondary cursor-pointer",onClick:n})]})]})]})}),to=e=>{var{productDetail:o,formApi:t}=e,{categories:i,loading:l}=function(){var e=(0,z.Z)((0,S._)(function*(){var e,o;return null===(o=(yield T.yF.PublicGetProductCategoryList({entity_type:w._J.Plugin,need_empty_category:!0})).data)||void 0===o?void 0:null===(e=o.categories)||void 0===e?void 0:e.filter(e=>{var o;return!o8.includes(null!==(o=e.id)&&void 0!==o?o:"")})}));return{loading:e.loading,categories:e.data}}(),n=function(e){return(0,z.Z)((0,S._)(function*(){var o,t,i,l,n,r,a,s,d,c;if(!(null===(t=e.productInfo)||void 0===t?void 0:null===(o=t.meta_info)||void 0===o?void 0:o.entity_id)||!(null===(l=e.productInfo)||void 0===l?void 0:null===(i=l.meta_info)||void 0===i?void 0:i.entity_type))return"";return null!==(c=null===(d=(yield T.yF.PublicGenerateProductListingInfo({generate_type:o4.BR.Category,entity:{entity_type:e.productInfo.meta_info.entity_type,entity_id:null===(r=e.productInfo)||void 0===r?void 0:null===(n=r.meta_info)||void 0===n?void 0:n.entity_id,entity_version:null===(s=e.productInfo)||void 0===s?void 0:null===(a=s.meta_info)||void 0===a?void 0:a.entity_version}})).data)||void 0===d?void 0:d.category_id)&&void 0!==c?c:""}),{manual:!0,onSuccess:o=>{o&&e.onSuccess(o)},onError:()=>{b.Toast.error(s.o.t("Submit_plugin_ai_generating_fail"))}})}({productInfo:o,onSuccess:e=>{t.setValue("category",e)}});return(0,h.useEffect)(()=>{var{meta_info:e}=null!=o?o:{};if(!!e)!t.getValues().category&&(e.category?t.setValue("category",e.category.id):n.run())},[o]),(0,_.jsx)(b.FormSelect,{field:"category",loading:l,label:s.o.t("mkpl_category"),className:"w-full",placeholder:n.loading?(0,_.jsx)(b.Spin,{spinning:!0,style:{verticalAlign:"middle"},children:s.o.t("mkpl_select_plugin_category")}):s.o.t("mkpl_select_plugin_category"),optionList:null==i?void 0:i.map(e=>({label:e.name,value:e.id})),rules:[{required:!0,message:s.o.t("mkpl_can_not_be_empty")}]})},tt=e=>{var o,t,i,l,{productDetail:n,loading:r=!1,isEnterpriseStore:a}=e,d=(0,b.useFormApi)(),c=(0,h.useRef)(null),u=(0,h.useRef)(null);return(0,h.useEffect)(()=>{var e,o,{meta_info:t,plugin_extra:i}=null!=n?n:{};if(!!t){var l=d.getValues();!l.readme&&(d.setValue("readme",t.readme),null===(e=c.current)||void 0===e||e.setContent(t.readme)),!l.use_scene&&(d.setValue("use_scene",null==i?void 0:i.use_scene),null===(o=u.current)||void 0===o||o.setContent(null==i?void 0:i.use_scene))}},[n]),(0,_.jsxs)(b.Spin,{style:{height:"100%"},childStyle:{height:"100%"},spinning:r,children:[(0,_.jsx)(te,{productDetail:n,field:"url",noLabel:!0,validate:()=>{var e,o,t,[i]=null!==(t=null==n?void 0:null===(o=n.meta_info)||void 0===o?void 0:null===(e=o.icon_url)||void 0===e?void 0:e.split("?"))&&void 0!==t?t:[];return i?i.endsWith("ocean-cloud-tos/plugin_icon/default_icon.png")?"\u68C0\u6D4B\u5230\u5F53\u524D\u63D2\u4EF6\u5934\u50CF\u662F\u9ED8\u8BA4\u5934\u50CF\uFF0C\u4E0A\u67B6\u63D2\u4EF6\u9700\u8981\u81EA\u5B9A\u4E49\u63D2\u4EF6\u5934\u50CF\uFF0C\u8BF7\u66F4\u65B0\u540E\u518D\u4E0A\u67B6\u3002":"":"\u68C0\u6D4B\u5230\u5F53\u524D\u63D2\u4EF6\u5934\u50CF\u4E3A\u7A7A\uFF0C\u4E0A\u67B6\u63D2\u4EF6\u9700\u8981\u81EA\u5B9A\u4E49\u5F53\u524D\u63D2\u4EF6\u5934\u50CF\uFF0C\u8BF7\u66F4\u65B0\u540E\u518D\u4E0A\u67B6"}}),(0,_.jsx)(o7,{product:n}),(0,_.jsx)(o3,{tools:(null==n?void 0:null===(o=n.plugin_extra)||void 0===o?void 0:o.tools)||[],className:"my-[16px]"}),(0,_.jsxs)(h.Suspense,{fallback:(0,_.jsx)(b.Spin,{}),children:[(0,_.jsx)(o9,{field:"readme",aiGenerator:(0,S._)(function*(){return ti(n,o4.BR.Readme,a)}),maxCount:5e3,minHeight:80,maxHeight:160,ref:c,onInit:eW(d.getValue("readme")||(null==n?void 0:null===(t=n.meta_info)||void 0===t?void 0:t.readme),null==n?void 0:null===(i=n.meta_info)||void 0===i?void 0:i.description),label:s.o.t("mkpl_about_plugin"),placeholder:s.o.t("mkpl_about_plugin_description"),rules:eB(c,5e3),className:"[&_.editor-kit-container]:bg-transparent [&_.editor-kit-container]:p-[6px_10px]"}),(0,_.jsx)(o9,{field:"use_scene",aiGenerator:(0,S._)(function*(){return ti(n,o4.BR.UseScene,a)}),maxCount:5e3,minHeight:80,maxHeight:160,ref:u,onInit:eW(d.getValue("use_scene")||(null==n?void 0:null===(l=n.plugin_extra)||void 0===l?void 0:l.use_scene)),label:s.o.t("Usage_Scen"),placeholder:s.o.t("plugin_Describe"),rules:eB(u,5e3),className:"[&_.editor-kit-container]:bg-transparent [&_.editor-kit-container]:p-[6px_10px]"})]}),a?null:(0,_.jsx)(to,{productDetail:n,formApi:d})]})};function ti(e){return tl.apply(this,arguments)}function tl(){return(tl=(0,S._)(function*(e){var o,t,i,l,n,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o4.BR.Readme,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return"";var d=yield T.yF.PublicGenerateProductListingInfo({generate_type:a,entity:{entity_type:s?w._J.EnterprisePlugin:w._J.Plugin,entity_id:null==e?void 0:null===(o=e.meta_info)||void 0===o?void 0:o.entity_id,entity_version:null==e?void 0:null===(t=e.meta_info)||void 0===t?void 0:t.entity_version}});switch(a){case o4.BR.UseScene:return null!==(l=null===(i=d.data)||void 0===i?void 0:i.use_scene)&&void 0!==l?l:"";case o4.BR.Readme:default:return null!==(r=null===(n=d.data)||void 0===n?void 0:n.readme)&&void 0!==r?r:""}})).apply(this,arguments)}function tn(e){var{entityType:o,businessType:t,onOpenProductCreate:i,noFreeQuotaLimit:l,paymentInfo:n,onOpenPluginEdit:r}=e;return(0,_.jsxs)(_.Fragment,{children:[t===w._$.SelfOperated?(0,_.jsx)(tr,{noFreeQuotaLimit:l,entityType:o}):null,t===w._$.Community?(0,_.jsx)(ta,{onOpenProductCreate:i,noFreeQuotaLimit:l,paymentInfo:n}):null,(0,_.jsx)(ts,{title:s.o.t("billing_amount_config"),description:s.o.t("billing_amount_tip")}),n.billing_enabled?(0,_.jsxs)(_.Fragment,{children:[n.field_type?(0,_.jsx)(td,{label:s.o.t("billing_parameter_position"),children:n.field_type}):(0,_.jsx)(b.Typography.Paragraph,{children:s.o.t("plugin_billing_config_default")}),"response"===n.field_type?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(td,{label:s.o.t("billing_prameter_response_name"),children:n.field_name}),(0,_.jsx)(td,{label:s.o.t("billing_prameter_value"),children:n.field_value})]}):null,"header"===n.field_type?(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(td,{label:s.o.t("billing_parameter_header_name"),children:n.header_name})}):null]}):(0,_.jsx)(b.Typography.Paragraph,{children:s.o.t("plugin_billing_not_configured",{config:(0,_.jsx)(b.Typography.Text,{link:!0,onClick:r,children:s.o.t("plugin_billing_goto_config")})})})]})}function tr(e){var o,{entityType:t=w._J.Plugin,noFreeQuotaLimit:i}=e,{data:l,loading:n}=(0,z.Z)(()=>T.yF.PublicGetListingPriceRange({entity_type:t})),r=(0,h.useMemo)(()=>{var e,o,t,i;return t=null!==(o=null==l?void 0:null===(e=l.data)||void 0===e?void 0:e.prices)&&void 0!==o?o:[],i=new Intl.NumberFormat(s.o.language,{minimumFractionDigits:0,maximumFractionDigits:3}),t.map(e=>({value:e,label:i.format(e)}))},[null==l?void 0:null===(o=l.data)||void 0===o?void 0:o.prices]);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(ts,{title:s.o.t("payment_config")}),(0,_.jsx)(td,{label:s.o.t("plugin_service_tree"),extra:s.o.t("plugin_service_tree_tip"),children:(0,_.jsx)(b.FormInput,{field:"service_tree",pure:!0,className:"w-full",rules:[{required:!0}]})}),(0,_.jsx)(td,{label:s.o.t("plugin_price"),extra:r.length>0?s.o.t("plugin_price_tip",{num:r.length}):"-",children:(0,_.jsx)(b.FormSelect,{field:"price",pure:!0,suffix:s.o.t("plugin_price_unit"),className:"w-full",loading:n,optionList:r,rules:[{required:!0}]})}),(0,_.jsx)(td,{label:s.o.t("plugin_free_quota"),extra:s.o.t("plugin_free_quota_tip"),children:(0,_.jsx)(b.FormInputNumber,{field:"free_quota",pure:!0,suffix:s.o.t("plugin_free_quota_unit"),className:"w-full",min:i?0:10,max:i?1/0:50,step:1,rules:[{required:!0}]})})]})}function ta(e){var o,t,{onOpenProductCreate:i,noFreeQuotaLimit:l,paymentInfo:n}=e,r=!!n.product_code;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(ts,{title:s.o.t("payment_config")}),(0,_.jsx)(td,{label:s.o.t("linked_partner_account"),children:(0,_.jsxs)("div",{className:"p-[12px] rounded-[12px] border-[0.5px] border-solid coz-stroke-primary coz-mg-secondary flex gap-[12px]",children:[(0,_.jsx)(b.CozAvatar,{color:"grey",size:"plus",style:{width:40,height:40},children:(0,_.jsx)(ed.U5H,{})}),(0,_.jsxs)("div",{className:"flex flex-col gap-[2px]",children:[(0,_.jsx)("span",{className:"text-[16px] leading-[22px] coz-fg-primary font-medium",children:null!==(o=n.account_name)&&void 0!==o?o:"-"}),(0,_.jsxs)("span",{className:"text-[12px] leading-[16px] coz-fg-secondary",children:["ID: ",null!==(t=n.account_id)&&void 0!==t?t:"-"]})]})]})}),r?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(td,{label:s.o.t("product_code"),children:n.product_code}),(0,_.jsx)(td,{label:s.o.t("billing_item"),children:n.charge_item_code}),(0,_.jsx)(td,{label:s.o.t("plugin_price"),children:n.price}),(0,_.jsx)(td,{label:s.o.t("plugin_free_quota"),extra:s.o.t("plugin_free_quota_tip"),children:(0,_.jsx)(b.FormInputNumber,{field:"free_quota",pure:!0,suffix:s.o.t("plugin_free_quota_unit"),className:"w-full",fieldClassName:r?"":"hidden",min:l?0:10,max:l?1/0:50,step:1,rules:[{required:!0}]})})]}):(0,_.jsx)(td,{label:s.o.t("product_code"),children:s.o.t("product_not_created",{create:(0,_.jsx)("a",{className:"coz-fg-hglt no-underline cursor-pointer",onClick:i,children:s.o.t("goto_volcano_create")})})})]})}function ts(e){return(0,_.jsxs)("div",{className:"h-[32px] flex items-center gap-[6px]",children:[(0,_.jsx)("div",{className:"h-[16px] w-[2px] rounded-[2px] coz-fg-hglt bg-current"}),(0,_.jsx)("span",{className:"text-[16px] leading-[22px] font-medium coz-fg-primary",children:e.title}),e.description?(0,_.jsx)("span",{className:"text-[12px] leading-[16px] coz-fg-secondary",children:e.description}):null]})}function td(e){var o;return(0,_.jsxs)("div",{className:"my-[20px] last:mb-0 flex flex-col gap-[4px] text-[14px] leading-[20px] coz-fg-primary",children:[(0,_.jsx)("div",{className:"font-medium",children:e.label}),(0,_.jsx)("div",{className:"min-h-[20px]",children:null!==(o=e.children)&&void 0!==o?o:""}),e.extra?(0,_.jsx)("div",{className:"mt-[4px] mx-[2px] text-[12px] leading-[16px] coz-fg-secondary",children:e.extra}):null]})}var tc="https://console.partner.volcengine.com";function tu(e){var o,t,i,l,{onCancel:n,onSubmit:r,isEnterpriseStore:a}=e,{pluginInfo:d,publishType:c,basicInfo:u,expansionConfig:p,paymentInfo:f}=oG((0,$.N)(e=>({pluginInfo:e.pluginInfo,publishType:e.publishType,basicInfo:e.basicInfo,expansionConfig:e.expansionConfig,paymentInfo:e.paymentInfo}))),m=(null==d?void 0:null===(t=d.meta_info)||void 0===t?void 0:t.status)!==w.Pt.NeverListed;(0,h.useEffect)(()=>{var e,o=null==d?void 0:null===(e=d.plugin_extra)||void 0===e?void 0:e.plugin_benefit_report_config;if(o){var t=function(e){var o={billing_enabled:null==e?void 0:e.is_enable};if(null==e?void 0:e.header)o.field_type="header",o.header_name=e.header;else if(null==e?void 0:e.response){var t=Object.entries(e.response);o.field_type="response",o.field_name=t[0][0],o.field_value=t[0][1]}return o}(o);oG.getState().setPaymentInfo(t)}var i=null==d?void 0:d.commercial_setting;if(i){var l,n,r,a,s,c=(a=null==(r=i.capacity_extensions)?void 0:r.find(e=>e.user_level!==oV.aZ.Enterprise),s=null==r?void 0:r.find(e=>e.user_level===oV.aZ.Enterprise),{qps:null!==(l=null==a?void 0:a.default_amount)&&void 0!==l?l:0,qps_enterprise:null!==(n=null==s?void 0:s.default_amount)&&void 0!==n?n:0,supports_expansion:(null==s?void 0:s.is_support_extension)===!0?1:0,expansion_limit:null==s?void 0:s.max_amount});oG.getState().setExpansionConfig(c);var u=oQ(i);oG.getState().setPaymentInfo(u)}},[d]);var v=c.billingType===w.j2.Paid,g=c.businessType===w._$.Community,x=(0,oW.F2)(),y=function(e){var o,[t,i]=(0,h.useState)(!1),l=(0,z.Z)((0,S._)(function*(){var o;if(!e.enterpriseId)return!1;return(null===(o=(yield T.hT.CheckBindStatus({external_type:o0.oh.VolcWy,exterprise_id:e.enterpriseId})).data)||void 0===o?void 0:o.status)===o1.Valid}),{ready:e.ready,refreshDeps:[e.enterpriseId],onSuccess:o=>{o&&(i(!1),e.onSuccess())}}),n=t?(0,_.jsx)(tf,{title:s.o.t("auth_completed"),loading:l.loading,onClick:()=>l.refresh()}):null;return{bindStatus:null!==(o=l.data)&&void 0!==o&&o,visible:t,show:()=>{i(!0)},node:n}}({ready:v&&g,enterpriseId:x,onSuccess:()=>{k.refresh()}}),k=function(e){var o=(0,z.Z)(()=>T.yF.PublicGetEntityCommercialSetting({entity_type:e.entityType,entity_id:e.entityId}),{ready:e.ready,onSuccess:o=>{if(o.data){var t,l;e.onSuccess(o.data),(null===(l=o.data.settlement)||void 0===l?void 0:null===(t=l.partner_product)||void 0===t?void 0:t.product_code)&&i(!1)}}}),[t,i]=(0,h.useState)(!1),l=t?(0,_.jsx)(tf,{title:s.o.t("product_create_completed"),loading:o.loading,onClick:()=>o.refresh()}):null;return{refresh:o.refresh,visible:t,show:()=>{i(!0)},node:l}}({ready:v&&g,entityType:null==d?void 0:null===(i=d.meta_info)||void 0===i?void 0:i.entity_type,entityId:null==d?void 0:null===(l=d.meta_info)||void 0===l?void 0:l.entity_id,onSuccess:e=>{var o,t=oQ(e);oG.getState().setPaymentInfo(t),null===(o=F.current)||void 0===o||o.formApi.setValues(t,{isOverride:!0})}}),[j,I]=(0,h.useState)(!1);var N=(o=(0,S._)(function*(){try{I(!0),yield r()}finally{I(!1)}}),function(){return o.apply(this,arguments)}),[P,C]=(0,h.useState)(0),O=(0,h.useRef)(null),E=(0,h.useRef)(null),F=(0,h.useRef)(null);return(0,_.jsxs)(_.Fragment,{children:[v&&!m?(0,_.jsxs)(b.CozSteps,{current:P,type:"basic",className:"mb-[24px] px-[24px] py-[8px] [&_.semi-steps-item-title]:!max-w-none",children:[(0,_.jsx)(b.CozSteps.Step,{title:s.o.t("basic_info_config")}),(0,_.jsx)(b.CozSteps.Step,{title:s.o.t("expansion_config")}),(0,_.jsx)(b.CozSteps.Step,{title:s.o.t("billing_config")})]}):null,(()=>{switch(P){case 0:return(0,_.jsx)(b.Form,{ref:O,initValues:u,onValueChange:e=>{oG.getState().setBasicInfo(e)},children:(0,_.jsx)(tt,{productDetail:d,isEnterpriseStore:a})},0);case 1:return(0,_.jsx)(b.Form,{ref:E,initValues:p,onValueChange:e=>{oG.getState().setExpansionConfig(e)},children:(0,_.jsx)(o6,{})},1);case 2:var e,o,t;return(0,_.jsx)(b.Form,{ref:F,initValues:f,onValueChange:e=>{oG.getState().setPaymentInfo(e)},children:(0,_.jsx)(tn,{entityType:null==d?void 0:null===(e=d.meta_info)||void 0===e?void 0:e.entity_type,businessType:c.businessType,onOpenProductCreate:()=>{window.open("".concat(tc,"/home/goodListManage")),k.show()},noFreeQuotaLimit:null!==(t=null==d?void 0:null===(o=d.whitelist_config)||void 0===o?void 0:o.not_limit_free_quota)&&void 0!==t&&t,paymentInfo:f,onOpenPluginEdit:()=>{var e,o;return window.open("/space/".concat(null==d?void 0:null===(e=d.plugin_extra)||void 0===e?void 0:e.space_id,"/plugin/").concat(null==d?void 0:null===(o=d.plugin_extra)||void 0===o?void 0:o.material_id))}})},2);default:return null}})(),(0,_.jsx)("div",{className:"flex items-center justify-end gap-[8px]",children:(()=>{if(!v||m)return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(b.Button,{color:"primary",onClick:n,children:s.o.t("Cancel")}),(0,_.jsx)(b.Button,{onClick:(0,S._)(function*(){var e;yield null===(e=O.current)||void 0===e?void 0:e.formApi.validate(),N()}),loading:j,children:s.o.t("mkpl_submit")})]});switch(P){case 0:return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(b.Button,{color:"primary",onClick:n,children:s.o.t("Cancel")}),(0,_.jsx)(b.Button,{onClick:(0,S._)(function*(){var e;yield null===(e=O.current)||void 0===e?void 0:e.formApi.validate(),C(1)}),children:s.o.t("Next_1")})]});case 1:return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(b.Button,{color:"primary",onClick:()=>C(0),children:s.o.t("Previous_1")}),g&&!y.bindStatus?(0,_.jsx)(tp,{enterpriseId:x,onAfterBind:()=>y.show()}):(0,_.jsx)(b.Button,{onClick:(0,S._)(function*(){var e;yield null===(e=E.current)||void 0===e?void 0:e.formApi.validate(),C(2)}),children:s.o.t("Next_1")})]});case 2:var e;return f.billing_enabled?g&&!f.product_code&&(e=s.o.t("no_product_code")):e=s.o.t("plugin_billing_not_enabled"),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(b.Button,{color:"primary",onClick:()=>C(1),children:s.o.t("Previous_1")}),e?(0,_.jsx)(b.Tooltip,{theme:"dark",content:e,children:(0,_.jsx)(b.Button,{disabled:!0,children:s.o.t("mkpl_submit")})}):(0,_.jsx)(b.Button,{onClick:(0,S._)(function*(){var e;yield null===(e=F.current)||void 0===e?void 0:e.formApi.validate(),N()}),loading:j,children:s.o.t("mkpl_submit")})]});default:return null}})()}),y.node,k.node]})}function tp(e){var o,t=(0,oW.ZY)(),i=(null==t?void 0:t.includes(o$.gY.admin))||(null==t?void 0:t.includes(o$.gY.super_admin));var l=(o=(0,S._)(function*(){if(!!e.enterpriseId&&!!i)try{var o,t,l,n=yield T.hT.GenBindToken({external_type:o0.oh.VolcWy,exterprise_id:e.enterpriseId},{__disableErrorToast:!0}),r=null===(t=n.data)||void 0===t?void 0:t.id_token;if(!r)return;window.open("".concat(tc,"/home/partnerInfo?token=").concat(r)),null===(l=e.onAfterBind)||void 0===l||l.call(e)}catch(e){(0,eh.k0)(e)&&b.Toast.error(null!==(o=e.msg)&&void 0!==o?o:e.message)}}),function(){return o.apply(this,arguments)});return(0,_.jsx)(b.Tooltip,{content:s.o.t("plugin_volcano_auth_tip"),trigger:i?"custom":"hover",visible:!i&&void 0,children:(0,_.jsx)(b.Button,{disabled:!i,onClick:i?l:void 0,icon:(0,_.jsx)(ed.FRM,{}),iconPosition:"right",children:s.o.t("goto_volcano_auth")})},i?1:0)}function tf(e){return(0,_.jsx)("div",{className:"absolute top-0 left-0 right-0 bottom-0 coz-bg-plus",children:(0,_.jsx)(b.EmptyState,{size:"full_screen",icon:(0,_.jsx)(N.Yf,{}),title:e.title,description:s.o.t("refresh_to_continue"),buttonText:s.o.t("refresh"),buttonProps:{color:"primary",icon:(0,_.jsx)(ed.mxP,{}),loading:e.loading},onButtonClick:e.onClick})})}var tm=e=>{var o,[t,i]=(0,h.useState)(!1),l=(0,oW.F2)(),{currentModal:n,pluginId:r,setModal:a}=oG((0,$.N)(e=>({currentModal:e.currentModal,setModal:e.setModal,pluginId:e.pluginId}))),d=()=>{if(n===c.PUBLISH_RESULT){var o;null==e||null===(o=e.onPublishSuccess)||void 0===o||o.call(e)}i(!1)},[u,p]=(0,h.useState)(w.Lo.Default);var f=(o=(0,S._)(function*(){try{var o,t,i=yield T.yF.PublicListingProduct(function(e,o){var{pluginId:t,publishType:i,basicInfo:l,expansionConfig:n,paymentInfo:r}=e,a=i.billingType===w.j2.Paid,s=i.businessType===w._$.Community;return{entity_type:o?w._J.EnterprisePlugin:w._J.Plugin,entity_id:t,category_id:l.category,readme:l.readme,use_scene:l.use_scene,commercial_setting:a?{commercial_type:w.j2.Paid,business_type:i.businessType,settlement:s?{partner_product:{account_id:r.account_id,account_name:r.account_name,product_code:r.product_code}}:{service_tree:r.service_tree},charge_items:[{free_quota:r.free_quota,price:r.price,code:r.charge_item_code,unit:r.charge_item_unit}],capacity_extensions:[{capacity_type:w.mj.PluginQPS,user_level:oV.aZ.V1ProInstance,default_amount:n.qps},{capacity_type:w.mj.PluginQPS,user_level:oV.aZ.ProPersonal,default_amount:n.qps},{capacity_type:w.mj.PluginQPS,user_level:oV.aZ.Team,default_amount:n.qps},{capacity_type:w.mj.PluginQPS,user_level:oV.aZ.Enterprise,default_amount:n.qps_enterprise,is_support_extension:1===n.supports_expansion,max_amount:n.expansion_limit}]}:void 0}}(oG.getState(),null==e?void 0:e.isEnterpriseStore),{__disableErrorToast:!0});p(null!==(t=null===(o=i.data)||void 0===o?void 0:o.audit_status)&&void 0!==t?t:w.Lo.Default),a(c.PUBLISH_RESULT)}catch(e){(0,eh.k0)(e)&&((null==e?void 0:e.code)==="788662002"?b.Toast.error(s.o.t("mkpl_plugin_product_audit_error")):(null==e?void 0:e.code)==="788662003"?b.Toast.error("".concat(s.o.t("mkpl_maximum_chatacter_limit",{maxCount:5e3}))):b.Toast.error(null==e?void 0:e.message))}}),function(){return o.apply(this,arguments)}),m={[c.PLUGIN]:{title:s.o.t("mkpl_select_plugin"),width:440,children:(0,_.jsx)(oH,{onCancel:d,onSubmit:()=>a(c.PLUGIN_INFO),isEnterpriseStore:null==e?void 0:e.isEnterpriseStore}),footer:null},[c.PLUGIN_INFO]:{width:600,title:s.o.t("mkpl_plugin_information"),children:(0,_.jsx)(tu,{onCancel:d,onSubmit:f,isEnterpriseStore:null==e?void 0:e.isEnterpriseStore}),footer:null},[c.PUBLISH_RESULT]:{width:600,title:s.o.t("mkpl_plugin_information"),footer:null,children:(0,_.jsx)(oX,{status:u,onSeeMore:()=>{window.open("".concat((null==e?void 0:e.isEnterpriseStore)?"/enterprise/".concat(l):"","/store/plugin/").concat(r,"?plugin_id=true&from=plugins_publish"),"_blank"),d()}})}},k=n?m[n]:null;return{ModalComponent:(0,_.jsx)(b.Modal,(0,g._)((0,v._)({},k),{visible:t,onCancel:d,className:"[&_.semi-modal-footer]:hidden"})),showModal:e=>{oG.getState().reset();var o,t,{type:l,product:n,from:r,releaseEntrance:s}=e||{},d=x.Z.parse(location.search);(0,y.Gg)(y.Kg.entity_publish_click_front,{entity_type:"plugin",from:d.from,source:r||y.YJ.PLUGIN_CARD,submit_type:n?"update":"first",entity_id:String(null==n?void 0:n.meta_info.entity_id)||"",product_id:String(null==n?void 0:null===(o=n.meta_info)||void 0===o?void 0:o.id),product_name:null==n?void 0:null===(t=n.meta_info)||void 0===t?void 0:t.name,publish_action:y.n_.Click,release_entrance:s||""}),a(null!=l?l:c.PLUGIN,r),i(!0)}}};function tv(e){var o,{onSuccess:t,entityType:i=w._J.Plugin}=e,[l,n]=(0,h.useState)(!1),[r,a]=(0,h.useState)(""),[d,c]=(0,h.useState)(),u=(0,z.Z)(()=>r?T.yF.PublicGetProductDetail({entity_type:i,entity_id:r}):Promise.resolve(void 0),{refreshDeps:[r],onSuccess:e=>{(null==e?void 0:e.data)&&c(e.data)}}),p=()=>{n(!1),a("")},f=(0,h.useRef)(null),[m,v]=(0,h.useState)(!1);var g=(o=(0,S._)(function*(){var e,o=yield null===(e=f.current)||void 0===e?void 0:e.formApi.validate();if(!!o){v(!0);try{yield T.yF.PublicListingProduct({entity_type:i,entity_id:r,category_id:o.category,readme:o.readme,use_scene:o.use_scene},{__disableErrorToast:!0}),null==t||t(),p()}catch(e){(0,eh.k0)(e)&&b.Toast.error(e.message)}finally{v(!1)}}}),function(){return o.apply(this,arguments)});return{node:(0,_.jsx)(b.Modal,{title:s.o.t("plugin_Update"),visible:l,width:600,onCancel:p,cancelText:s.o.t("Cancel"),okText:s.o.t("mkpl_submit"),onOk:g,okButtonProps:{loading:m},children:(0,_.jsx)(b.Form,{ref:f,children:(0,_.jsx)(tt,{loading:u.loading,productDetail:d,isEnterpriseStore:i===w._J.EnterprisePlugin})})}),open:e=>{var o;null===(o=f.current)||void 0===o||o.formApi.reset(),c(void 0),a(e),n(!0)}}}var tg=(0,j.ZP)()((0,k.mW)(e=>({aiCategoryLoading:!1,setAiCategoryLoading:o=>e({aiCategoryLoading:o}),currentModal:null,spaceId:"",setSpace:o=>e({spaceId:o}),setModal:(o,t)=>{!o&&e({botInfo:void 0}),e(e=>({currentModal:o,source:null!=t?t:e.source}))},source:y.JL.BOTS_STORE,selectBot:o=>{e({botInfo:o,productInfo:void 0,currentModal:u.BOT_INFO})},setBotVersion:o=>e({botVersion:o}),setProductInfo:o=>e({productInfo:o}),setHookProps:o=>e({hookProps:o}),setCategories:o=>e({categories:o})}),{enabled:!1,name:"community.botStorePublish"})),t_=()=>{var e,o={[Y.Success]:{title:s.o.t("mkpl_bots_bot_release_sucess")},[Y.Reviewing]:{title:s.o.t("mkpl_bot_publish_reviewing"),description:s.o.t("mkpl_bot_publish_reviewing_desc")},[Y.Failure]:{title:s.o.t("mkpl_bot_publish_failed"),description:s.o.t("mkpl_bot_publish_failed_desc")}},{botInfo:t,productInfo:i,setModal:l,hookProps:n,source:r}=tg(),a=(null==t?void 0:t.bot_id)||(null==i?void 0:null===(e=i.meta_info)||void 0===e?void 0:e.entity_id),d=w._J.Bot;return{entityId:a,entityType:d,handleSeeMore:()=>{var e;r!==y.JL.BOTS_DETAILPAGE&&window.open("/store/agent/".concat(a,"?bot_id=true&from=bots_publish"),"_blank"),null==n||null===(e=n.onPublishSuccess)||void 0===e||e.call(n),l(null)},reviewStatusMap:o}},th=()=>{var e,{spaceId:o,setSpace:t,hookProps:i,currentModal:l}=tg(),n=!(null==i?void 0:i.fromSpace)&&l===u.BOT;return{getDefaultSpaceId:(e=(0,S._)(function*(e){var o,t,i;return null===(i=(yield T.pr.GetPublishedBotList({page:1,size:1,space_id_list:e})).data)||void 0===i?void 0:null===(t=i.published_bot_list)||void 0===t?void 0:null===(o=t[0])||void 0===o?void 0:o.space_id}),function(o){return e.apply(this,arguments)}),modalSpaceId:o,setModalSpaceId:t,chooseInStore:n}},tx=()=>{var e,o=s.o.t("mkpl_no_bot"),t=s.o.t("Submit_bot_list"),[i,l]=(0,h.useState)(!1);var n=(e=(0,S._)(function*(e){var o,t,i,n,a=(null==e?void 0:e.nextPage)||1,s=yield T.pr.GetPublishedBotList({page:a,size:10,space_id_list:[r]});return l(!(null===(t=s.data)||void 0===t?void 0:null===(o=t.published_bot_list)||void 0===o?void 0:o.length)),{list:(null===(i=s.data)||void 0===i?void 0:i.published_bot_list)||[],hasMore:Number(null===(n=s.data)||void 0===n?void 0:n.total)>10*a,nextPage:a+1}}),function(o){return e.apply(this,arguments)}),r=tg(e=>e.spaceId);return{spaceId:r,emptyTips:o,productListTitle:t,loadData:n,isEmpty:i,workspaceSelectConfig:th()}},tb=t("639781"),ty=e=>{var{selectBot:o}=tg(),{name:t,bot_mode:i,publish_time:l,model_info:n,description:r,icon_url:a}=e.itemInfo;return(0,_.jsx)(K,{onClick:()=>{o(e.itemInfo)},productInfo:{name:t,updateAt:l,description:r,image:a,modelName:i===tb.J4.SingleMode?"".concat(null==n?void 0:n.name," "):"".concat(s.o.t("chatflow_switch_mode_multiple"))}})},tw=(0,j.ZP)(e=>({loading:!1,formApi:null,setFormApi:o=>e({formApi:o}),setLoading:o=>e({loading:o})})),tk=()=>{var e,o,{formApi:t,loading:i}=tw(),{botInfo:l={},productInfo:n,setModal:r,source:a,botVersion:d,currentModal:c,hookProps:p}=tg();var{loading:f,run:m}=(0,z.Z)((e=(0,S._)(function*(e){var o,t,i,r,s,c,u=x.Z.parse(location.search);return(0,y.Gg)(y.Kg.entity_publish_click_front,{entity_type:"bot",from:u.from,submit_type:Number(null==n?void 0:null===(o=n.meta_info)||void 0===o?void 0:o.id)?"update":"first",entity_id:(null==l?void 0:l.bot_id)||(null==n?void 0:null===(t=n.meta_info)||void 0===t?void 0:t.id)||"",product_id:String(null==n?void 0:null===(i=n.meta_info)||void 0===i?void 0:i.id),product_name:null==n?void 0:null===(r=n.meta_info)||void 0===r?void 0:r.name,publish_action:y.n_.Confirm,source:a}),yield T.yF.PublicListingProduct({entity_type:(null==n?void 0:null===(s=n.meta_info)||void 0===s?void 0:s.entity_type)||w._J.Bot,entity_id:l.bot_id||(null==n?void 0:null===(c=n.meta_info)||void 0===c?void 0:c.entity_id),category_id:e,publish_mode:w.In.ClosedSource,entity_version:d},{__disableErrorToast:!0})}),function(o){return e.apply(this,arguments)}),{manual:!0,onSuccess:()=>{r(u.PUBLISH_RESULT)},onError:e=>{(0,eh.k0)(e)&&((null==e?void 0:e.code)==="788662002"?b.Toast.error(s.o.t("mkpl_plugin_product_audit_error")):(null==e?void 0:e.code)==="788664016"?b.Toast.error(null==e?void 0:e.message):b.Toast.error("".concat(s.o.t("mkpl_bot_publish_failed"))))}});var v=(o=(0,S._)(function*(){yield null==t?void 0:t.validate();var e=null==t?void 0:t.getValues();e&&m(e.category)}),function(){return o.apply(this,arguments)});return{loading:f,handleNext:v,handleClose:()=>{if(c===u.PUBLISH_RESULT){var e;null==p||null===(e=p.onPublishSuccess)||void 0===e||e.call(p)}r(null)},title:s.o.t("mkpl_bots_bot_information"),nextButtonProps:{disabled:i}}},tj=t("154147"),tI={};tI.styleTagTransform=G(),tI.setAttributes=M(),tI.insert=A().bind(null,"head"),tI.domAPI=E(),tI.insertStyleElement=W(),C()(tj.Z,tI);var tS=tj.Z&&tj.Z.locals?tj.Z.locals:void 0,tz=e=>{var{title:o,list:t=[],titleClassName:i,itemClassName:l,containerClassName:n}=e;return t.length?(0,_.jsxs)("div",{className:tS["bot-material-list"],children:[(0,_.jsx)("div",{className:ei()(tS["bot-resource-title"],i),children:s.o.t(o)}),(0,_.jsx)("div",{className:ei()(tS["bot-resource-list"],n),children:t.map((e,o)=>(0,_.jsxs)("div",{className:ei()(tS["bot-resource-list-item"],l),children:[(0,_.jsx)(b.Avatar,{shape:"square",size:"small",src:e.icon_url,className:"hover:cursor-auto"}),(0,_.jsx)(b.Typography.Text,{className:"flex-1",ellipsis:{showTooltip:{opts:{content:e.name},renderTooltip:(e,o)=>(0,_.jsx)(b.Tooltip,{content:e,children:o})}},children:e.name})]},o))})]}):null},tN=t("798441"),tT={};tT.styleTagTransform=G(),tT.setAttributes=M(),tT.insert=A().bind(null,"head"),tT.domAPI=E(),tT.insertStyleElement=W(),C()(tN.Z,tT);var tP=tN.Z&&tN.Z.locals?tN.Z.locals:void 0,tC=e=>{var o,t,i,l;return(0,_.jsx)(_.Fragment,{children:(null===(t=e.botResources)||void 0===t?void 0:null===(o=t.bot_voices)||void 0===o?void 0:o.length)?(0,_.jsxs)("div",{className:tP["config-private-resources"],children:[(0,_.jsx)("div",{className:tP["bot-resource-title"],children:s.o.t("mkpl_voices",{},"Voices")}),(0,_.jsx)("div",{className:tP["bot-private-resource"],children:null===(l=e.botResources)||void 0===l?void 0:null===(i=l.bot_voices)||void 0===i?void 0:i.map(e=>(0,_.jsx)("div",{className:tP["bot-private-resource-item"],children:"".concat(e.name,"(").concat(e.language_name,")")}))})]}):null})},tO=t("168074"),tE=e=>{var o,t,i,l,n,r;return(0,_.jsx)(_.Fragment,{children:(null===(i=e.productDetail)||void 0===i?void 0:null===(t=i.bot_extra)||void 0===t?void 0:null===(o=t.publish_platforms)||void 0===o?void 0:o.length)?(0,_.jsxs)("div",{className:tP["bot-info"],children:[(0,_.jsx)("div",{className:tP["bot-info-title"],children:s.o.t("mkpl_bots_publishing_platform",{},"Published On")}),(0,_.jsx)("div",{className:tP["publish-platform"],children:null===(r=e.productDetail)||void 0===r?void 0:null===(n=r.bot_extra)||void 0===n?void 0:null===(l=n.publish_platforms)||void 0===l?void 0:l.map(e=>(0,_.jsx)(tO.u,{content:e.name,children:(0,_.jsx)(tO.qE,{className:tP["publish-platform-icon"],src:e.icon_url})},e.id))})]}):null})},tF=e=>{var o,t,i,l,n,r,a,d;return(0,_.jsx)(_.Fragment,{children:e.hasPrivateResource?(0,_.jsxs)("div",{className:tP["config-private-resources"],children:[(0,_.jsx)("div",{className:tP["bot-resource-title"],children:s.o.t("mkpl_private_resources",{},"Private Resources")}),(0,_.jsxs)("div",{className:tP["bot-private-resource"],children:[(null===(o=e.botResources)||void 0===o?void 0:o.private_plugins_count)?(0,_.jsxs)("div",{className:tP["bot-private-resource-item"],children:[s.o.t("Plugins")," x"," ",null===(l=e.productDetail)||void 0===l?void 0:null===(i=l.bot_extra)||void 0===i?void 0:null===(t=i.config)||void 0===t?void 0:t.private_plugins_count]}):null,(null===(n=e.botResources)||void 0===n?void 0:n.private_workflows_count)?(0,_.jsxs)("div",{className:tP["bot-private-resource-item"],children:[s.o.t("Workflows")," x"," ",null===(r=e.botResources)||void 0===r?void 0:r.private_workflows_count]}):null,(null===(a=e.botResources)||void 0===a?void 0:a.private_knowledges_count)?(0,_.jsxs)("div",{className:tP["bot-private-resource-item"],children:[s.o.t("mkpl_knowledge",{},"Knowledge")," x"," ",null===(d=e.botResources)||void 0===d?void 0:d.private_knowledges_count]}):null]})]}):null})},tA=e=>{var{categories:o,setCategories:t,aiCategoryLoading:i}=tg(),l=(0,z.Z)((0,S._)(function*(){var e;return(null===(e=(yield T.yF.PublicGetProductCategoryList({entity_type:w._J.Bot,need_empty_category:!0},{__disableErrorToast:!0})).data)||void 0===e?void 0:e.categories)||[]}),{manual:!1,retryCount:3,onSuccess:e=>{t(e)}});return(0,_.jsx)(b.Form,{className:"mt-[-14px]",getFormApi:e.formApi,children:(0,_.jsx)(tO.N5,{loading:l.loading,field:"category",label:s.o.t("mkpl_bots_category"),className:"w-full mt-[4px]",placeholder:i?(0,_.jsx)(b.Spin,{style:{verticalAlign:"middle"},spinning:!0,children:s.o.t("select_bot_category")}):s.o.t("select_bot_category"),optionList:null==o?void 0:o.map(e=>({label:e.name,value:e.id})),rules:[{required:!0,message:s.o.t("mkpl_can_not_be_empty")}]})})},tL=()=>{var e,o,t,i,l,n,r,a,d,c,u,{botInfo:p={},categories:f,setCategories:m,productInfo:v,setBotVersion:g,setAiCategoryLoading:x}=tg(),y=(null==p?void 0:p.bot_id)||(null==v?void 0:v.meta_info.entity_id),{setFormApi:k,formApi:j,loading:I,setLoading:N}=tw(),P=(0,z.Z)((0,S._)(function*(){x(!0);var e,o,t=null===(o=(yield T.yF.PublicGenerateProductListingInfo({generate_type:o4.BR.Category,entity:{entity_type:w._J.Bot,entity_id:y,entity_version:null==v?void 0:null===(e=v.meta_info)||void 0===e?void 0:e.entity_version}})).data)||void 0===o?void 0:o.category_id;if(!t||"0"===t)throw Error("no category");null==j||j.setValue("category",t)}),{manual:!0,onFinally:()=>{x(!1)},onError:()=>{b.Toast.error(s.o.t("Submit_plugin_ai_generating_fail"))}}),{run:C,data:O}=(0,z.Z)((0,S._)(function*(){return N(!0),(yield T.yF.PublicGetProductEntityInfo({entity_id:y||"",entity_type:w._J.Bot},{__disableErrorToast:!0})).data}),{manual:!0,onSuccess:e=>{var o,t;if((null==e?void 0:null===(o=e.meta_info)||void 0===o?void 0:o.category)&&(null==f?void 0:f.length)){var i,l=null==e?void 0:null===(i=e.meta_info)||void 0===i?void 0:i.category;null==j||j.setValue("category",String(null==l?void 0:l.id))}else!(null==e?void 0:null===(t=e.meta_info)||void 0===t?void 0:t.category)&&P.run()},onError:()=>{m([])},onFinally:()=>{N(!1)}}),E=null==O?void 0:null===(e=O.bot_extra)||void 0===e?void 0:e.config,F=!!(null==E?void 0:E.private_plugins_count)||!!(null==E?void 0:E.private_knowledges_count)||!!(null==E?void 0:E.private_workflows_count);return(0,h.useEffect)(()=>{var e,o,t=F?w.In.ClosedSource:w.In.OpenSource;null==j||j.setValue("mode",F||(null==E?void 0:E.has_bot_agent)?w.In.ClosedSource:(null==O?void 0:null===(e=O.bot_extra)||void 0===e?void 0:e.publish_mode)||t),g((null==O?void 0:null===(o=O.meta_info)||void 0===o?void 0:o.entity_version)||"")},[F,O]),(0,h.useEffect)(()=>{C()},[y,null==v?void 0:null===(o=v.meta_info)||void 0===o?void 0:o.entity_id]),(0,_.jsx)("div",{className:ei()(tP["product-info-container"]),children:(0,_.jsx)(b.Spin,{spinning:I,style:{height:"100%"},children:(0,_.jsxs)("div",{className:tP["product-info"],children:[(0,_.jsxs)("div",{className:tP["product-info-sider"],children:[(0,_.jsx)(eM,{productDetail:O}),(0,_.jsx)(tE,{productDetail:O}),(null==O?void 0:null===(t=O.bot_extra)||void 0===t?void 0:t.config)?(0,_.jsxs)("div",{className:tP["bot-info"],children:[(0,_.jsx)("div",{className:tP["bot-info-title"],children:s.o.t("mkpl_bots_configuration")}),(0,_.jsx)(tz,{title:s.o.t("mkpl_model"),list:null==O?void 0:null===(l=O.bot_extra)||void 0===l?void 0:null===(i=l.config)||void 0===i?void 0:i.models}),(0,_.jsx)(tz,{title:s.o.t("Plugins"),list:null==O?void 0:null===(r=O.bot_extra)||void 0===r?void 0:null===(n=r.config)||void 0===n?void 0:n.plugins}),(0,_.jsx)(tz,{title:s.o.t("Workflows"),list:null==O?void 0:null===(d=O.bot_extra)||void 0===d?void 0:null===(a=d.config)||void 0===a?void 0:a.workflows}),(0,_.jsx)(tz,{title:s.o.t("mkpl_knowledge"),list:null==O?void 0:null===(u=O.bot_extra)||void 0===u?void 0:null===(c=u.config)||void 0===c?void 0:c.knowledges}),(0,_.jsx)(tF,{hasPrivateResource:F,botResources:E,productDetail:O}),(0,_.jsx)(tC,{botResources:E})]}):null]}),(0,_.jsx)(b.Divider,{layout:"vertical",className:"h-full"}),(0,_.jsx)("div",{className:tP["product-info-content"],children:(0,_.jsx)(tA,{formApi:e=>k(e),hasPrivateResource:F,botResources:E})})]})})})},tM=e=>{var{currentModal:o,setModal:t,setProductInfo:i,setHookProps:l}=tg(),n=tk(),r=t_(),a=tx();(0,h.useEffect)(()=>{l(e)},[]);var d=(0,h.useCallback)(e=>{var{type:o,product:l,source:n=y.JL.BOTS_STORE,releaseEntrance:r}=e||{};if(o){var a,s,d=x.Z.parse(location.search);(0,y.Gg)(y.Kg.entity_publish_click_front,{entity_type:"bot",from:d.from,source:n,submit_type:l?"update":"first",entity_id:String(null==l?void 0:l.meta_info.entity_id)||"",product_id:String(null==l?void 0:null===(a=l.meta_info)||void 0===a?void 0:a.id),product_name:null==l?void 0:null===(s=l.meta_info)||void 0===s?void 0:s.name,publish_action:y.n_.Click,release_entrance:r||""})}l&&i(l),t(o,n)},[t]),c={[u.BOT]:{title:(0,_.jsx)(e_,{title:s.o.t("mkpl_bots_sumbit_select_bot")}),content:(0,_.jsx)(eE,(0,g._)((0,v._)({},a),{renderItem:e=>(0,_.jsx)(ty,{itemInfo:e})})),width:480,footer:null,closeIcon:(0,_.jsx)(eF,{}),className:oM["select-product-modal"]},[u.BOT_INFO]:(0,g._)((0,v._)({},f),{header:(0,_.jsx)(ek,(0,v._)({showNextButton:!0},n)),content:(0,_.jsx)(tL,{}),className:oM["product-info-modal"]}),[u.PUBLISH_RESULT]:(0,g._)((0,v._)({},f),{header:(0,_.jsx)(ek,(0,v._)({},n)),content:(0,_.jsx)(D,(0,v._)({},r)),className:oM["product-info-modal"]})};return{ModalComponent:(0,_.jsx)(b.Modal,(0,g._)((0,v._)({},c[o||u.BOT]),{visible:!!o,onCancel:n.handleClose,children:o?c[o].content:null})),showModal:d}}},124707:function(e,o,t){t.d(o,{B5l:function(){return i.B5l},BSe:function(){return i.BSe},ByT:function(){return i.ByT},CPf:function(){return i.CPf},Grz:function(){return i.Grz},KN6:function(){return i.KN6},KNf:function(){return i.KNf},Ldn:function(){return i.Ldn},Lo5:function(){return i.Lo5},MZY:function(){return i.MZY},MZx:function(){return i.MZx},Mtg:function(){return i.Mtg},TvD:function(){return i.TvD},Up9:function(){return i.Up9},VBX:function(){return i.VBX},Vp9:function(){return i.Vp9},XG2:function(){return i.XG2},XQ3:function(){return i.XQ3},Xpx:function(){return i.Xpx},_$8:function(){return i._$8},_gl:function(){return i._gl},_yW:function(){return i._yW},aZp:function(){return i.aZp},d$J:function(){return i.d$J},gfc:function(){return i.gfc},htH:function(){return i.htH},j2G:function(){return i.j2G},k5N:function(){return i.k5N},lcl:function(){return i.lcl},n$I:function(){return l},nBi:function(){return i.nBi},sL0:function(){return i.sL0},twY:function(){return i.twY},uql:function(){return i.uql},vGB:function(){return i.vGB},wz8:function(){return i.wz8},x5o:function(){return i.x5o},z7A:function(){return i.z7A},ztP:function(){return i.ztP}});var i=t(803660),{InputType:l}=t(383672)},984864:function(e,o,t){t.d(o,{KL:function(){return s},oh:function(){return a},qE:function(){return r}});var i,l,n,r=((i={})[i.CreateMerchant=1]="CreateMerchant",i);var a=((l={})[l.VolcWy=1]="VolcWy",l);var s=((n={})[n.UnSign=1]="UnSign",n[n.Signed=2]="Signed",n)},797607:function(e,o,t){var i=t(160052),l=t.n(i),n=t(570717),r=t.n(n)()(l());r.push([e.id,".product-info-modal--OzUqr0HhRcAs0zMO,.select-product-modal--PF54Ygw9FH0MP0DO,.workflow-info-modal--yOAmyAmyGoxfSbhy{background-color:rgba(var(--coze-bg-3),var(--coze-bg-3-alpha))}.product-info-modal--OzUqr0HhRcAs0zMO .semi-modal,.select-product-modal--PF54Ygw9FH0MP0DO .semi-modal,.workflow-info-modal--yOAmyAmyGoxfSbhy .semi-modal{align-items:center;display:flex;height:auto}.product-info-modal--OzUqr0HhRcAs0zMO .semi-modal .semi-modal-content,.select-product-modal--PF54Ygw9FH0MP0DO .semi-modal .semi-modal-content,.workflow-info-modal--yOAmyAmyGoxfSbhy .semi-modal .semi-modal-content{gap:0}.product-info-modal--OzUqr0HhRcAs0zMO .semi-modal-title,.select-product-modal--PF54Ygw9FH0MP0DO .semi-modal-title,.workflow-info-modal--yOAmyAmyGoxfSbhy .semi-modal-title{overflow:hidden}.product-info-modal--OzUqr0HhRcAs0zMO .semi-list-footer,.product-info-modal--OzUqr0HhRcAs0zMO .semi-modal-footer,.select-product-modal--PF54Ygw9FH0MP0DO .semi-list-footer,.select-product-modal--PF54Ygw9FH0MP0DO .semi-modal-footer,.workflow-info-modal--yOAmyAmyGoxfSbhy .semi-list-footer,.workflow-info-modal--yOAmyAmyGoxfSbhy .semi-modal-footer{display:none}.select-product-modal--PF54Ygw9FH0MP0DO.coz-modal.as-modal .semi-modal-content{padding-left:16px;padding-right:16px}.select-product-modal--PF54Ygw9FH0MP0DO .semi-modal-header{padding:0 8px}.product-info-modal--OzUqr0HhRcAs0zMO .semi-modal .semi-modal-content,.workflow-info-modal--yOAmyAmyGoxfSbhy .semi-modal .semi-modal-content{background-color:rgba(var(--coze-bg-3),var(--coze-bg-3-alpha));padding:0}.product-info-modal--OzUqr0HhRcAs0zMO .semi-modal-body,.workflow-info-modal--yOAmyAmyGoxfSbhy .semi-modal-body{flex:1 1;overflow:hidden;padding:0 16px}.product-info-modal--OzUqr0HhRcAs0zMO .semi-form-field-label-text,.workflow-info-modal--yOAmyAmyGoxfSbhy .semi-form-field-label-text{color:rgba(var(--coze-fg-2),var(--coze-fg-2-alpha));font-size:var(--coze-12);font-weight:500}.product-info-modal--OzUqr0HhRcAs0zMO .editor-kit-container,.workflow-info-modal--yOAmyAmyGoxfSbhy .editor-kit-container{padding:10px 12px;word-break:break-word}.workflow-info-modal--yOAmyAmyGoxfSbhy .semi-modal-body{padding:0}.loading--cYYzut5Lap4sglge{align-items:center;display:flex;height:100%;justify-content:center;width:100%}.error-msg-box--bc1POfViNKgpD2PJ{position:relative;top:-24px}.error-msg-box--bc1POfViNKgpD2PJ .error-msg--YO8etiIVioEzTFCT{color:#f93920;display:block;line-height:16px;padding:8px 16px;text-align:left}.error-msg-box--bc1POfViNKgpD2PJ .error-msg--YO8etiIVioEzTFCT .link--ZPjVj_b5xbEPqzDm{color:#4d53e8;font-weight:400}",""]),r.locals={"product-info-modal":"product-info-modal--OzUqr0HhRcAs0zMO",productInfoModal:"product-info-modal--OzUqr0HhRcAs0zMO","select-product-modal":"select-product-modal--PF54Ygw9FH0MP0DO",selectProductModal:"select-product-modal--PF54Ygw9FH0MP0DO","workflow-info-modal":"workflow-info-modal--yOAmyAmyGoxfSbhy",workflowInfoModal:"workflow-info-modal--yOAmyAmyGoxfSbhy",loading:"loading--cYYzut5Lap4sglge","error-msg-box":"error-msg-box--bc1POfViNKgpD2PJ",errorMsgBox:"error-msg-box--bc1POfViNKgpD2PJ","error-msg":"error-msg--YO8etiIVioEzTFCT",errorMsg:"error-msg--YO8etiIVioEzTFCT",link:"link--ZPjVj_b5xbEPqzDm"},o.Z=r},154147:function(e,o,t){var i=t(160052),l=t.n(i),n=t(570717),r=t.n(n)()(l());r.push([e.id,".bot-resource-title--ECkTMbkDmQzCj2aA{color:rgba(var(--coze-fg-3),var(--coze-fg-3-alpha));font-size:12px;font-weight:600;line-height:14px;margin-bottom:8px}.bot-resource-list--jbbwTQ9gR24k3dJO{display:flex;flex-flow:row wrap;gap:16px;height:100%;row-gap:10px;width:100%}.bot-resource-list-item--YcgnI9XpMh0YkoeQ{align-items:center;align-self:stretch;color:rgba(var(--coze-fg-3),var(--coze-fg-3-alpha));display:flex;font-size:12px;font-weight:400;gap:8px;line-height:16px;overflow:hidden;text-overflow:ellipsis;width:300px}",""]),r.locals={"bot-resource-title":"bot-resource-title--ECkTMbkDmQzCj2aA",botResourceTitle:"bot-resource-title--ECkTMbkDmQzCj2aA","bot-resource-list":"bot-resource-list--jbbwTQ9gR24k3dJO",botResourceList:"bot-resource-list--jbbwTQ9gR24k3dJO","bot-resource-list-item":"bot-resource-list-item--YcgnI9XpMh0YkoeQ",botResourceListItem:"bot-resource-list-item--YcgnI9XpMh0YkoeQ"},o.Z=r},798441:function(e,o,t){var i=t(160052),l=t.n(i),n=t(570717),r=t.n(n)()(l());r.push([e.id,".product-info--jEDhJa34ZLYMKHBO{align-items:flex-start;column-gap:4px;display:flex;font-size:12px;font-weight:400;height:100%;justify-content:space-between;line-height:16px;overflow:hidden;padding:0 4px;text-align:left;white-space:normal;width:100%}.product-info-container--uyinZm7JGx0r5QLG{height:100%}.product-info-container--uyinZm7JGx0r5QLG .semi-layout-has-sider,.product-info-container--uyinZm7JGx0r5QLG .semi-spin-block,.product-info-container--uyinZm7JGx0r5QLG .semi-spin-children{height:100%}.product-info-sider--EMle3AiG18oK02cP{height:100%;margin-right:24px;overflow:auto;padding-top:24px;width:288px}.product-info-sider--EMle3AiG18oK02cP::-webkit-scrollbar{display:none}.product-info-content--Q_Sav9BWgYkCwOQJ{padding-left:28px;padding-top:24px;width:578px}.product-info-content--Q_Sav9BWgYkCwOQJ .semi-radioGroup-horizontal{display:flex;flex-wrap:nowrap}.product-info-content--Q_Sav9BWgYkCwOQJ .semi-radio-cardRadioGroup{background-color:rgba(var(--coze-bg-3),var(--coze-bg-3-alpha));border:1px solid;border-color:rgba(var(--coze-stroke-5),var(--coze-stroke-5-alpha));border-radius:8px;line-height:22px}.product-info-content--Q_Sav9BWgYkCwOQJ .semi-radio-cardRadioGroup .semi-radio-extra{font-size:14px;font-weight:400;line-height:22px;margin-top:4px}.product-info-content--Q_Sav9BWgYkCwOQJ .semi-radio-cardRadioGroup_checked{background-color:rgba(var(--coze-bg-3),var(--coze-bg-3-alpha));border:1px solid;color:rgba(var(--coze-brand-5),1)}.product-info-content--Q_Sav9BWgYkCwOQJ .semi-radio-cardRadioGroup{padding:15px 19px;width:267px}.product-info-content--Q_Sav9BWgYkCwOQJ .semi-form-field-label{margin-bottom:8px}.bot-info--hZXDBFo_DdwhbpPc{align-items:flex-start;display:flex;flex-direction:column;gap:16px;margin-bottom:12px;margin-top:12px}.bot-info--hZXDBFo_DdwhbpPc:last-child{margin-bottom:0}.bot-resource-title--leQh3aTLOvECUTwt{color:rgba(var(--coze-fg-2),var(--coze-fg-2-alpha));font-size:12px;font-weight:600;line-height:14px;margin-bottom:8px}.bot-info-title--o5UdwrPCdEAvZswi{color:rgba(var(--coze-fg-4),var(--coze-fg-4-alpha));font-size:14px;font-weight:600;line-height:20px;text-align:left;vertical-align:top}.publish-platform--ktULkf0Jm3ERts2D{display:flex;flex-wrap:wrap;gap:8px;width:100%}.publish-platform--ktULkf0Jm3ERts2D>img{border-radius:8px;height:100%;object-fit:cover;width:100%}.publish-platform-icon--leqzgV8Z0FQt7Jp_{background-color:rgba(var(--coze-bg-3),var(--coze-bg-3-alpha));border:1px solid;border-color:rgba(var(--coze-stroke-5),var(--coze-stroke-5-alpha));border-radius:6px;flex-shrink:0;height:40px;width:40px}.publish-platform-icon--leqzgV8Z0FQt7Jp_>img{cursor:default}.bot-private-resource--bc2fYGCyKsjKK4Mq{display:flex;flex-wrap:wrap;gap:4px}.bot-private-resource-item--HfHTOpXbq_Qyivhz{background-color:rgba(var(--coze-bg-1),var(--coze-bg-1-alpha));border-radius:6px;color:rgba(var(--coze-fg-3),var(--coze-fg-3-alpha));display:flex;font-size:12px;font-weight:500;height:20px;line-height:16px;padding:2px 8px}",""]),r.locals={"product-info":"product-info--jEDhJa34ZLYMKHBO",productInfo:"product-info--jEDhJa34ZLYMKHBO","product-info-container":"product-info-container--uyinZm7JGx0r5QLG",productInfoContainer:"product-info-container--uyinZm7JGx0r5QLG","product-info-sider":"product-info-sider--EMle3AiG18oK02cP",productInfoSider:"product-info-sider--EMle3AiG18oK02cP","product-info-content":"product-info-content--Q_Sav9BWgYkCwOQJ",productInfoContent:"product-info-content--Q_Sav9BWgYkCwOQJ","bot-info":"bot-info--hZXDBFo_DdwhbpPc",botInfo:"bot-info--hZXDBFo_DdwhbpPc","bot-resource-title":"bot-resource-title--leQh3aTLOvECUTwt",botResourceTitle:"bot-resource-title--leQh3aTLOvECUTwt","bot-info-title":"bot-info-title--o5UdwrPCdEAvZswi",botInfoTitle:"bot-info-title--o5UdwrPCdEAvZswi","publish-platform":"publish-platform--ktULkf0Jm3ERts2D",publishPlatform:"publish-platform--ktULkf0Jm3ERts2D","publish-platform-icon":"publish-platform-icon--leqzgV8Z0FQt7Jp_",publishPlatformIcon:"publish-platform-icon--leqzgV8Z0FQt7Jp_","bot-private-resource":"bot-private-resource--bc2fYGCyKsjKK4Mq",botPrivateResource:"bot-private-resource--bc2fYGCyKsjKK4Mq","bot-private-resource-item":"bot-private-resource-item--HfHTOpXbq_Qyivhz",botPrivateResourceItem:"bot-private-resource-item--HfHTOpXbq_Qyivhz"},o.Z=r},722130:function(e,o,t){var i=t(160052),l=t.n(i),n=t(570717),r=t.n(n)()(l());r.push([e.id,".publish-result-modal--ONBjgI1Jk8oW80Eg{align-items:center;display:flex;height:100%;justify-content:center}",""]),r.locals={"publish-result-modal":"publish-result-modal--ONBjgI1Jk8oW80Eg",publishResultModal:"publish-result-modal--ONBjgI1Jk8oW80Eg"},o.Z=r},515560:function(e,o,t){var i=t(160052),l=t.n(i),n=t(570717),r=t.n(n)()(l());r.push([e.id,".publish-plugin-list--ndJyUuqVUwU18yMs .semi-list-item{height:52px;padding:8px}.publish-plugin-list--ndJyUuqVUwU18yMs .semi-list-item:not(:first-child){border-left:none;border-right:none}.publish-plugin-list--ndJyUuqVUwU18yMs .semi-list-item:hover{background:rgba(46,47,56,.05);border-color:transparent;border-radius:8px;cursor:pointer;position:relative}.list-empty--P79rk_mxiAPYCtqo{align-items:center;background-color:rgba(var(--coze-bg-1),var(--coze-bg-1-alpha));border-radius:8px;color:rgba(var(--coze-fg-2),var(--coze-fg-2-alpha));display:flex;font-size:12px;font-weight:400;line-height:16px;margin-left:8px;margin-right:8px;padding:12px 8px;padding-left:8px;padding-right:8px}.list-title--X0raDvoH6SYMZOUo,.select-label--WR4cYDSDT2YfkNGy{color:rgba(var(--coze-fg-3),var(--coze-fg-3-alpha));font-size:14px;font-weight:500;line-height:20px;padding:0 2px 8px}.workspace-select--pgdnCTcWSuMOdi6P{width:100%}.select-list-container--psq6lyZB__0JxRfH{height:auto}.select-list-container--psq6lyZB__0JxRfH .semi-spin-middle,.select-list-container--psq6lyZB__0JxRfH .semi-spin-middle svg{height:24px;width:24px}.select-list-container--psq6lyZB__0JxRfH .semi-spin-middle{margin:8px 8px 2px}.filter-prefix--Jf1K2ilnDAsJGirg{align-items:center;color:rgba(var(--coze-fg-3),var(--coze-fg-3-alpha));display:flex;font-size:14px;font-style:normal;font-weight:400;overflow:hidden;text-overflow:ellipsis;text-wrap:nowrap}.select-option--OrrgpA1Qs0dZtqRY .filter-prefix--Jf1K2ilnDAsJGirg{margin-left:8px}",""]),r.locals={"publish-plugin-list":"publish-plugin-list--ndJyUuqVUwU18yMs",publishPluginList:"publish-plugin-list--ndJyUuqVUwU18yMs","list-empty":"list-empty--P79rk_mxiAPYCtqo",listEmpty:"list-empty--P79rk_mxiAPYCtqo","list-title":"list-title--X0raDvoH6SYMZOUo",listTitle:"list-title--X0raDvoH6SYMZOUo","select-label":"select-label--WR4cYDSDT2YfkNGy",selectLabel:"select-label--WR4cYDSDT2YfkNGy","workspace-select":"workspace-select--pgdnCTcWSuMOdi6P",workspaceSelect:"workspace-select--pgdnCTcWSuMOdi6P","select-list-container":"select-list-container--psq6lyZB__0JxRfH",selectListContainer:"select-list-container--psq6lyZB__0JxRfH","filter-prefix":"filter-prefix--Jf1K2ilnDAsJGirg",filterPrefix:"filter-prefix--Jf1K2ilnDAsJGirg","select-option":"select-option--OrrgpA1Qs0dZtqRY",selectOption:"select-option--OrrgpA1Qs0dZtqRY"},o.Z=r},478516:function(e,o,t){var i=t(160052),l=t.n(i),n=t(570717),r=t.n(n)()(l());r.push([e.id,".modal--nBY3rR3OUy4pwg6u .semi-modal-wrap .semi-modal-content{padding:0}.modal--nBY3rR3OUy4pwg6u .semi-modal-wrap .semi-modal-confirm-content{height:100%}.modal--nBY3rR3OUy4pwg6u .semi-modal-wrap .semi-modal{max-height:100%;max-width:100%}.modal--nBY3rR3OUy4pwg6u .semi-modal-wrap .semi-modal-footer{display:none}.container--BoBG6To1F2sZp6uf{border:none}",""]),r.locals={modal:"modal--nBY3rR3OUy4pwg6u",container:"container--BoBG6To1F2sZp6uf"},o.Z=r},766184:function(e,o,t){var i=t(160052),l=t.n(i),n=t(570717),r=t.n(n)()(l());r.push([e.id,".imageflow-case--hedOygqrmOYJ1y1W .semi-radio-content{width:100%}.imageflow-case--hedOygqrmOYJ1y1W .semi-radioGroup-horizontal{gap:12px}.imageflow-case--hedOygqrmOYJ1y1W .semi-radio-cardRadioGroup_checked{box-shadow:0 4px 12px 0 rgba(var(--coze-shadow-0),.08),0 8px 24px 0 rgba(var(--coze-shadow-0),.04)}.imageflow-case--hedOygqrmOYJ1y1W .string-option--uvh0XhHrRXor8YUJ{width:calc(50% - 6px)}.imageflow-case--hedOygqrmOYJ1y1W .string-option--uvh0XhHrRXor8YUJ .semi-radio-cardRadioGroup{background-color:rgba(var(--coze-bg-4),var(--coze-bg-4-alpha));padding:12px}.imageflow-case--hedOygqrmOYJ1y1W .string-option--uvh0XhHrRXor8YUJ .semi-radio-cardRadioGroup_checked{background-color:rgba(var(--coze-bg-3),var(--coze-bg-3-alpha));border-color:rgba(var(--coze-brand-5),1)}.imageflow-case--hedOygqrmOYJ1y1W .image-option--kqhszw4VZsjrWheQ{width:calc(33.3% - 8px)}.imageflow-case--hedOygqrmOYJ1y1W .image-option--kqhszw4VZsjrWheQ .semi-radio-cardRadioGroup{background:transparent;border-color:rgba(var(--coze-stroke-5),var(--coze-stroke-5-alpha));padding:0}.imageflow-case--hedOygqrmOYJ1y1W .image-option--kqhszw4VZsjrWheQ .semi-radio-cardRadioGroup_checked{border-color:rgba(var(--coze-brand-5),1)}.imageflow-case--hedOygqrmOYJ1y1W .image-option--kqhszw4VZsjrWheQ .semi-radio-content{width:100%}",""]),r.locals={"imageflow-case":"imageflow-case--hedOygqrmOYJ1y1W",imageflowCase:"imageflow-case--hedOygqrmOYJ1y1W","string-option":"string-option--uvh0XhHrRXor8YUJ",stringOption:"string-option--uvh0XhHrRXor8YUJ","image-option":"image-option--kqhszw4VZsjrWheQ",imageOption:"image-option--kqhszw4VZsjrWheQ"},o.Z=r},428701:function(e,o,t){var i=t(160052),l=t.n(i),n=t(570717),r=t.n(n)()(l());r.push([e.id,".case-config-container--wdhvkCF79os2GfvW{height:100%}.case-config-container--wdhvkCF79os2GfvW .left-container--bVaDKzI7kscwZ5rk{align-items:flex-start;border-right:1px solid rgba(6,7,9,.1);height:100%;overflow:hidden;padding:24px 32px 32px;width:50%}.case-config-container--wdhvkCF79os2GfvW .left-container--bVaDKzI7kscwZ5rk .content-primary--NbOJss_ZTw07DU7Q{color:rgba(var(--coze-fg-3),var(--coze-fg-3-alpha));font-size:14px;font-weight:500;line-height:20px;width:100%}.case-config-container--wdhvkCF79os2GfvW .title--zoV24J4XplAF5cwA{color:rgba(var(--coze-fg-2),var(--coze-fg-2-alpha));font-size:16px;font-weight:500;line-height:22px;overflow:hidden}.case-config-container--wdhvkCF79os2GfvW .divider--TCrLldWMN0S30OFt{border-bottom:1px solid rgba(6,7,9,.1);height:1px;margin:4px 0;width:100%}.case-config-container--wdhvkCF79os2GfvW .right-container--xDHWjca97Ybh4JE2{align-items:flex-start;flex:1 1;height:100%;overflow:hidden;padding:24px 32px 16px}.case-config-container--wdhvkCF79os2GfvW .content--fzMg4S5_poclpWB3{align-items:flex-start;flex:1 1;overflow:auto;scrollbar-width:none;width:100%}.case-config-container--wdhvkCF79os2GfvW .content--fzMg4S5_poclpWB3>*{width:100%}.case-config-container--wdhvkCF79os2GfvW .content--fzMg4S5_poclpWB3 .item-info--Y6__zLKnyeMAxxEI{align-items:flex-start}.case-config-container--wdhvkCF79os2GfvW .content--fzMg4S5_poclpWB3 .item-info--Y6__zLKnyeMAxxEI .semi-tabs-bar{align-items:center;background-color:rgba(var(--coze-bg-6),var(--coze-bg-6-alpha));display:flex;height:48px;padding:0 16px}.case-config-container--wdhvkCF79os2GfvW .content--fzMg4S5_poclpWB3 .item-info--Y6__zLKnyeMAxxEI .semi-tabs-content{flex:1 1;padding:0}.case-config-container--wdhvkCF79os2GfvW .content--fzMg4S5_poclpWB3 .item-info--Y6__zLKnyeMAxxEI .semi-tabs-pane-motion-overlay{height:100%}.case-config-container--wdhvkCF79os2GfvW .content--fzMg4S5_poclpWB3 .item-info--Y6__zLKnyeMAxxEI .semi-tabs-tab-button.semi-tabs-tab{color:rgba(var(--coze-fg-2),var(--coze-fg-2-alpha));font-size:12px;padding:0}.case-config-container--wdhvkCF79os2GfvW .content--fzMg4S5_poclpWB3 .item-info--Y6__zLKnyeMAxxEI .semi-tabs-tab-button.semi-tabs-tab:not(:last-of-type){margin-right:16px}.case-config-container--wdhvkCF79os2GfvW .content--fzMg4S5_poclpWB3 .item-info--Y6__zLKnyeMAxxEI .semi-tabs-tab-button.semi-tabs-tab-active{color:rgba(var(--coze-fg-4),var(--coze-fg-4-alpha));font-weight:500}.case-config-container--wdhvkCF79os2GfvW .content--fzMg4S5_poclpWB3 .item-info--Y6__zLKnyeMAxxEI .semi-tabs-bar-extra{margin-left:auto;padding:0}.case-config-container--wdhvkCF79os2GfvW .content--fzMg4S5_poclpWB3 .item-info--Y6__zLKnyeMAxxEI .auto-hide-last-sibling-br>div{border-radius:0}.case-config-container--wdhvkCF79os2GfvW .content--fzMg4S5_poclpWB3 .item-info--Y6__zLKnyeMAxxEI .auto-hide-last-sibling-br>div>div:first-child{display:none}.case-config-container--wdhvkCF79os2GfvW .content--fzMg4S5_poclpWB3 .item-info--Y6__zLKnyeMAxxEI .auto-hide-last-sibling-br>div>div:last-child{background:transparent}.case-config-container--wdhvkCF79os2GfvW .content--fzMg4S5_poclpWB3 .item-info--Y6__zLKnyeMAxxEI .flow-markdown-body{flex:1 1}.case-config-container--wdhvkCF79os2GfvW .content--fzMg4S5_poclpWB3 .item-info--Y6__zLKnyeMAxxEI .flow-markdown-body ::-moz-selection{background-color:rgba(var(--coze-brand-3),var(--coze-brand-3-alpha))}.case-config-container--wdhvkCF79os2GfvW .content--fzMg4S5_poclpWB3 .item-info--Y6__zLKnyeMAxxEI .flow-markdown-body ::selection{background-color:rgba(var(--coze-brand-3),var(--coze-brand-3-alpha))}.case-config-container--wdhvkCF79os2GfvW .content--fzMg4S5_poclpWB3 .item-info--Y6__zLKnyeMAxxEI .flow-markdown-body .language-json code{color:rgba(var(--coze-fg-3),var(--coze-fg-3-alpha))}.case-config-container--wdhvkCF79os2GfvW .content--fzMg4S5_poclpWB3 .item-info--Y6__zLKnyeMAxxEI .semi-image-img{width:100%}.case-config-container--wdhvkCF79os2GfvW .content--fzMg4S5_poclpWB3 .item-info--Y6__zLKnyeMAxxEI .css-1isoxrb{display:none}.case-config-container--wdhvkCF79os2GfvW .content--fzMg4S5_poclpWB3 .json-container--kcbnrBRBEEUeczid{width:100%}.case-config-container--wdhvkCF79os2GfvW .content--fzMg4S5_poclpWB3 .label-name--aIZHK04IHOYsOJ5h{color:rgba(var(--coze-fg-2),var(--coze-fg-2-alpha));font-size:14px;font-weight:500;line-height:20px;overflow:hidden;padding:8px 8px 8px 0;width:152px}.case-config-container--wdhvkCF79os2GfvW .content--fzMg4S5_poclpWB3 .label-info--jum7E6KPSH0RMA2C{align-items:flex-start;flex:1 1;overflow:hidden;padding:8px}.case-config-container--wdhvkCF79os2GfvW .content--fzMg4S5_poclpWB3 .label-info--jum7E6KPSH0RMA2C .label-value--AZGJg3pCfPQCEhmB{color:rgba(var(--coze-fg-3),var(--coze-fg-3-alpha));font-size:14px;font-weight:500;line-height:20px;min-height:20px;width:100%}.case-config-container--wdhvkCF79os2GfvW .content--fzMg4S5_poclpWB3 .label-info--jum7E6KPSH0RMA2C .label-desc--cqsxjuhwa3EmoF03{color:rgba(var(--coze-fg-1),var(--coze-fg-1-alpha));font-size:12px;font-weight:400;line-height:16px;width:100%}",""]),r.locals={"case-config-container":"case-config-container--wdhvkCF79os2GfvW",caseConfigContainer:"case-config-container--wdhvkCF79os2GfvW","left-container":"left-container--bVaDKzI7kscwZ5rk",leftContainer:"left-container--bVaDKzI7kscwZ5rk","content-primary":"content-primary--NbOJss_ZTw07DU7Q",contentPrimary:"content-primary--NbOJss_ZTw07DU7Q",title:"title--zoV24J4XplAF5cwA",divider:"divider--TCrLldWMN0S30OFt","right-container":"right-container--xDHWjca97Ybh4JE2",rightContainer:"right-container--xDHWjca97Ybh4JE2",content:"content--fzMg4S5_poclpWB3","item-info":"item-info--Y6__zLKnyeMAxxEI",itemInfo:"item-info--Y6__zLKnyeMAxxEI","json-container":"json-container--kcbnrBRBEEUeczid",jsonContainer:"json-container--kcbnrBRBEEUeczid","label-name":"label-name--aIZHK04IHOYsOJ5h",labelName:"label-name--aIZHK04IHOYsOJ5h","label-info":"label-info--jum7E6KPSH0RMA2C",labelInfo:"label-info--jum7E6KPSH0RMA2C","label-value":"label-value--AZGJg3pCfPQCEhmB",labelValue:"label-value--AZGJg3pCfPQCEhmB","label-desc":"label-desc--cqsxjuhwa3EmoF03",labelDesc:"label-desc--cqsxjuhwa3EmoF03"},o.Z=r},74551:function(e,o,t){var i=t(160052),l=t.n(i),n=t(570717),r=t.n(n)()(l());r.push([e.id,".container--_fbHsdMU90oVDa6v{height:100%;overflow:hidden;width:100%}.container--_fbHsdMU90oVDa6v .header-container--eKn0850i9p8o_TJc{border-bottom:1px solid rgba(6,7,9,.1);overflow:hidden;padding:17px 32px;width:100%}.container--_fbHsdMU90oVDa6v .content-container--J07clAhMSgUoShRj{flex:1 1;overflow:hidden;width:100%}.case-config-header--cXwycfJju7sDLy9f{height:24px;line-height:0}.case-config-header-text--fKeEE6NK4FwcKgJ9{align-items:center;color:rgba(var(--coze-fg-2),var(--coze-fg-2-alpha));display:flex;gap:4px;margin-right:24px;position:relative}.case-config-header-text--fKeEE6NK4FwcKgJ9 .text--JFtvAOEQmqUJR53f{color:rgba(var(--coze-fg-2),var(--coze-fg-2-alpha));cursor:pointer;font-size:16px;font-weight:500;line-height:22px;white-space:nowrap}.case-config-header-text--fKeEE6NK4FwcKgJ9.active--zJS0tk6ohOIZXiXU,.case-config-header-text--fKeEE6NK4FwcKgJ9.active--zJS0tk6ohOIZXiXU .text--JFtvAOEQmqUJR53f{color:rgba(var(--coze-brand-5),1)}.case-config-header-text--fKeEE6NK4FwcKgJ9 .warn-dot--H7ySz7eHygY8BOAl{background:#f22435;border-radius:5px;height:5px;position:absolute;right:-3px;top:1px;width:5px}",""]),r.locals={container:"container--_fbHsdMU90oVDa6v","header-container":"header-container--eKn0850i9p8o_TJc",headerContainer:"header-container--eKn0850i9p8o_TJc","content-container":"content-container--J07clAhMSgUoShRj",contentContainer:"content-container--J07clAhMSgUoShRj","case-config-header":"case-config-header--cXwycfJju7sDLy9f",caseConfigHeader:"case-config-header--cXwycfJju7sDLy9f","case-config-header-text":"case-config-header-text--fKeEE6NK4FwcKgJ9",caseConfigHeaderText:"case-config-header-text--fKeEE6NK4FwcKgJ9",text:"text--JFtvAOEQmqUJR53f",active:"active--zJS0tk6ohOIZXiXU","warn-dot":"warn-dot--H7ySz7eHygY8BOAl",warnDot:"warn-dot--H7ySz7eHygY8BOAl"},o.Z=r},763209:function(e,o,t){var i=t(160052),l=t.n(i),n=t(570717),r=t.n(n)()(l());r.push([e.id,".publish-plugin-title--kVx0F9ztLgkmkrVC{align-items:center;display:flex;padding-bottom:24px;padding-right:8px;width:100%}.publish-plugin-title--kVx0F9ztLgkmkrVC .title-tooltip--NcG9WX5GacI1yTAL{margin-left:8px}",""]),r.locals={"publish-plugin-title":"publish-plugin-title--kVx0F9ztLgkmkrVC",publishPluginTitle:"publish-plugin-title--kVx0F9ztLgkmkrVC","title-tooltip":"title-tooltip--NcG9WX5GacI1yTAL",titleTooltip:"title-tooltip--NcG9WX5GacI1yTAL"},o.Z=r},609708:function(e,o,t){var i=t(160052),l=t.n(i),n=t(570717),r=t.n(n)()(l());r.push([e.id,".select-tips--Z5vIXDbEKZkKF1wt{align-items:center;display:flex;gap:8px}.select-tips-text--pAL7zxUZVHw0Azu8{color:rgba(var(--coze-fg-2),var(--coze-fg-2-alpha));font-size:14px;font-style:normal;font-weight:400;line-height:20px;text-align:right}",""]),r.locals={"select-tips":"select-tips--Z5vIXDbEKZkKF1wt",selectTips:"select-tips--Z5vIXDbEKZkKF1wt","select-tips-text":"select-tips-text--pAL7zxUZVHw0Azu8",selectTipsText:"select-tips-text--pAL7zxUZVHw0Azu8"},o.Z=r},84229:function(e,o,t){var i=t(160052),l=t.n(i),n=t(570717),r=t.n(n)()(l());r.push([e.id,'.publish-product-title--mfcVwU2cokYakUPp{overflow:hidden;width:100%}.tooltip-content--R3wJxCTSY60tteFo{width:320px}.tooltip-content-desc--EZkZ85PMDCkHpPQ6{font-size:12px;font-weight:400;margin-top:8px;width:320px}.tooltip-content-desc--EZkZ85PMDCkHpPQ6 ul{margin:0;padding-left:16px}.publish-product-list--L2UDTgGYs1XaL2ne{height:100%;margin-top:-16px;overflow:auto}.publish-product-list--L2UDTgGYs1XaL2ne.is-empty--Egp5CkApJdIU8n56{min-height:300px}.publish-product-list--L2UDTgGYs1XaL2ne .semi-list-item{padding:10px 8px}.publish-product-list--L2UDTgGYs1XaL2ne .semi-list-item:not(:first-child){border-left:none;border-right:none;border-top:1px solid var(--light-usage-border-color-border-1,rgba(29,28,35,.12))}.publish-product-list--L2UDTgGYs1XaL2ne .semi-list-item:last-child{border-bottom:1px solid var(--light-usage-border-color-border-1,rgba(29,28,35,.12))}.publish-product-list--L2UDTgGYs1XaL2ne .semi-list-item:hover{background:rgba(46,47,56,.05);border-color:transparent;border-radius:8px;cursor:pointer;position:relative}.publish-product-list--L2UDTgGYs1XaL2ne .semi-list-item:hover:after{background:#f5f7fa;bottom:-2px;content:"";height:2px;left:0;position:absolute;width:100%;z-index:1}.publish-plugin-list-loading--VQhAShCUWoEwvbih{align-items:center;display:flex;justify-content:center}.publish-product-title-filter--zIDP0ouxoAzhAPSl{display:flex;justify-content:space-between;margin-top:32px;text-wrap:nowrap;width:100%}.publish-product-title-filter--zIDP0ouxoAzhAPSl p{max-width:300px;overflow:hidden;text-overflow:ellipsis}.workflow-panel-header--SbaS5_xOtNsQkIbp{align-items:center;display:flex;flex:1 1;flex-wrap:nowrap;font-weight:400;height:36px;min-width:0;width:0}.workflow-panel-header--SbaS5_xOtNsQkIbp .creator-icon--To94F9DLAooqdO35{border-radius:50%;display:flex;flex-shrink:0}.workflow-panel-header--SbaS5_xOtNsQkIbp .creator-icon--To94F9DLAooqdO35 img{height:14px;width:14px}.workflow-panel-header--SbaS5_xOtNsQkIbp .header-icon--PO93YMIew6IrGLfl{border-radius:4px;display:flex;flex-shrink:0;height:36px;margin-right:16px;position:relative;width:36px}.workflow-panel-header--SbaS5_xOtNsQkIbp .header-icon--PO93YMIew6IrGLfl:after{border:1px solid rgba(46,46,56,.08);border-radius:6px}.workflow-panel-header--SbaS5_xOtNsQkIbp .header-icon--PO93YMIew6IrGLfl:after,.workflow-panel-header--SbaS5_xOtNsQkIbp .header-icon--PO93YMIew6IrGLfl:before{content:"";height:calc(100% - 2px);position:absolute;width:calc(100% - 2px);z-index:1}.workflow-panel-header--SbaS5_xOtNsQkIbp .header-icon--PO93YMIew6IrGLfl:before{background:rgba(46,46,56,.08);border-radius:5px;left:1px;top:1px}.workflow-panel-header--SbaS5_xOtNsQkIbp .header-icon--PO93YMIew6IrGLfl img{height:36px;width:36px;z-index:2}.workflow-panel-header--SbaS5_xOtNsQkIbp .header-main--W9PYzBzPF2AEXqbv{flex:1 1;margin-right:16px;min-width:0;overflow:hidden;width:0}.workflow-panel-header--SbaS5_xOtNsQkIbp .header-main--W9PYzBzPF2AEXqbv .header-name--LI8dKPGPlp0CGHhS{display:flex;gap:4px;width:100%}.workflow-panel-header--SbaS5_xOtNsQkIbp .header-main--W9PYzBzPF2AEXqbv .header-name--LI8dKPGPlp0CGHhS .semi-typography{font-size:14px;font-weight:600;line-height:22px;word-wrap:break-word!important;color:rgba(var(--coze-fg-3),var(--coze-fg-3-alpha))}.workflow-panel-header--SbaS5_xOtNsQkIbp .header-main--W9PYzBzPF2AEXqbv .header-name--LI8dKPGPlp0CGHhS .semi-highlight-tag{background-color:transparent;color:#fda633}.workflow-panel-header--SbaS5_xOtNsQkIbp .header-main--W9PYzBzPF2AEXqbv .header-desc--GZn_Ded89MEAilay{color:rgba(var(--coze-fg-2),var(--coze-fg-2-alpha));display:flex;font-size:12px;font-style:normal;font-weight:400;line-height:16px;width:100%}',""]),r.locals={"publish-product-title":"publish-product-title--mfcVwU2cokYakUPp",publishProductTitle:"publish-product-title--mfcVwU2cokYakUPp","tooltip-content":"tooltip-content--R3wJxCTSY60tteFo",tooltipContent:"tooltip-content--R3wJxCTSY60tteFo","tooltip-content-desc":"tooltip-content-desc--EZkZ85PMDCkHpPQ6",tooltipContentDesc:"tooltip-content-desc--EZkZ85PMDCkHpPQ6","publish-product-list":"publish-product-list--L2UDTgGYs1XaL2ne",publishProductList:"publish-product-list--L2UDTgGYs1XaL2ne","is-empty":"is-empty--Egp5CkApJdIU8n56",isEmpty:"is-empty--Egp5CkApJdIU8n56","publish-plugin-list-loading":"publish-plugin-list-loading--VQhAShCUWoEwvbih",publishPluginListLoading:"publish-plugin-list-loading--VQhAShCUWoEwvbih","publish-product-title-filter":"publish-product-title-filter--zIDP0ouxoAzhAPSl",publishProductTitleFilter:"publish-product-title-filter--zIDP0ouxoAzhAPSl","workflow-panel-header":"workflow-panel-header--SbaS5_xOtNsQkIbp",workflowPanelHeader:"workflow-panel-header--SbaS5_xOtNsQkIbp","creator-icon":"creator-icon--To94F9DLAooqdO35",creatorIcon:"creator-icon--To94F9DLAooqdO35","header-icon":"header-icon--PO93YMIew6IrGLfl",headerIcon:"header-icon--PO93YMIew6IrGLfl","header-main":"header-main--W9PYzBzPF2AEXqbv",headerMain:"header-main--W9PYzBzPF2AEXqbv","header-name":"header-name--LI8dKPGPlp0CGHhS",headerName:"header-name--LI8dKPGPlp0CGHhS","header-desc":"header-desc--GZn_Ded89MEAilay",headerDesc:"header-desc--GZn_Ded89MEAilay"},o.Z=r}}]);
//# sourceMappingURL=https://sourcemap-redirect.coze.cn/obj/coze-sourcemap/ol-sourcemap/bot/1.0.2.2569/10491.546fd056.js.map