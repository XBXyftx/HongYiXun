/*! For license information please see 2526.a5cceb6a.js.LICENSE.txt */
(self.webpackChunkapp_botstudio_main=self.webpackChunkapp_botstudio_main||[]).push([["2526"],{546942:function(t,e,n){"use strict";function r(t){return!!t&&"element"===t.type}n.d(e,{Tv:function(){return r}})},135886:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(723530),i=Symbol();function o(t){var e=r.createContext(i);return{Provider:function(n){var i=t(n.initialState);return r.createElement(e.Provider,{value:i},n.children)},useContext:function(){var t=r.useContext(e);if(t===i)throw Error("Component must be wrapped with <Model.Provider>");return t}}}},105044:function(t,e,n){"use strict";var r=n(723530);e.Z=function(t){(0,r.useEffect)(function(){t()},[])}},341145:function(t){var e,n;e=0,n=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e||4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,(function(e){return t[e]}).bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";function r(t,e,n){for(var r=0;r<n.length;r++)t.setUint8(e+r,n.charCodeAt(r))}Object.defineProperty(e,"__esModule",{value:!0}),e.compress=function(t,e,n){for(var r=e/n,i=Math.max(r,1),o=t.left,a=t.right,u=Math.floor((o.length+a.length)/r),s=new Float32Array(u),c=0,f=0;c<u;){var l=Math.floor(f);s[c]=o[l],c++,a.length&&(s[c]=a[l],c++),f+=i}return s},e.encodePCM=function(t,e,n){void 0===n&&(n=!0);var r=0,i=new DataView(new ArrayBuffer(t.length*(e/8)));if(8===e)for(var o=0;o<t.length;o++,r++){var a=(u=Math.max(-1,Math.min(1,t[o])))<0?128*u:127*u;a=+a+128,i.setInt8(r,a)}else for(o=0;o<t.length;o++,r+=2){var u=Math.max(-1,Math.min(1,t[o]));i.setInt16(r,u<0?32768*u:32767*u,n)}return i},e.encodeWAV=function(t,e,n,i,o,a){void 0===a&&(a=!0);var u=n>e?e:n,s=new DataView(new ArrayBuffer(44+t.byteLength)),c=0;r(s,0,"RIFF"),c+=4,s.setUint32(c,36+t.byteLength,a),r(s,c+=4,"WAVE"),r(s,c+=4,"fmt "),c+=4,s.setUint32(c,16,a),c+=4,s.setUint16(c,1,a),c+=2,s.setUint16(c,i,a),c+=2,s.setUint32(c,u,a),c+=4,s.setUint32(c,i*u*(o/8),a),c+=4,s.setUint16(c,o/8*i,a),c+=2,s.setUint16(c,o,a),r(s,c+=2,"data"),c+=4,s.setUint32(c,t.byteLength,a),c+=4;for(var f=0;f<t.byteLength;)s.setUint8(c,t.getUint8(f)),c++,f++;return s}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),a=n(0),u=n(3),s=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.isrecording=!1,n.ispause=!1,n.isplaying=!1,n}return i(e,t),e.prototype.setOption=function(t){void 0===t&&(t={}),this.setNewOption(t)},e.prototype.start=function(){return this.isrecording?Promise.reject():(this.isrecording=!0,this.startRecord())},e.prototype.pause=function(){this.isrecording&&!this.ispause&&(this.ispause=!0,this.pauseRecord())},e.prototype.resume=function(){this.isrecording&&this.ispause&&(this.ispause=!1,this.resumeRecord())},e.prototype.stop=function(){this.isrecording&&(this.isrecording=!1,this.ispause=!1,this.stopRecord())},e.prototype.play=function(){this.stop(),this.isplaying=!0,this.onplay&&this.onplay(),u.default.addPlayEnd(this.onplayend);var t=this.getWAV();t.byteLength>44&&u.default.play(t.buffer)},e.prototype.getPlayTime=function(){return u.default.getPlayTime()},e.prototype.pausePlay=function(){!this.isrecording&&this.isplaying&&(this.isplaying=!1,this.onpauseplay&&this.onpauseplay(),u.default.pausePlay())},e.prototype.resumePlay=function(){this.isrecording||this.isplaying||(this.isplaying=!0,this.onresumeplay&&this.onresumeplay(),u.default.resumePlay())},e.prototype.stopPlay=function(){this.isrecording||(this.isplaying=!1,this.onstopplay&&this.onstopplay(),u.default.stopPlay())},e.prototype.destroy=function(){return u.default.destroyPlay(),this.destroyRecord()},e.prototype.getRecordAnalyseData=function(){return this.getAnalyseData()},e.prototype.getPlayAnalyseData=function(){return u.default.getAnalyseData()},e.prototype.getPCM=function(){this.stop();var t=this.getData();return t=a.compress(t,this.inputSampleRate,this.outputSampleRate),a.encodePCM(t,this.oututSampleBits,this.littleEdian)},e.prototype.getPCMBlob=function(){return new Blob([this.getPCM()])},e.prototype.downloadPCM=function(t){void 0===t&&(t="recorder");var e=this.getPCMBlob();o.downloadPCM(e,t)},e.prototype.getWAV=function(){var t=this.getPCM();return a.encodeWAV(t,this.inputSampleRate,this.outputSampleRate,this.config.numChannels,this.oututSampleBits,this.littleEdian)},e.prototype.getWAVBlob=function(){return new Blob([this.getWAV()],{type:"audio/wav"})},e.prototype.downloadWAV=function(t){void 0===t&&(t="recorder");var e=this.getWAVBlob();o.downloadWAV(e,t)},e.prototype.download=function(t,e,n){o.download(t,e,n)},e.prototype.getChannelData=function(){var t=this.getPCM(),e=t.byteLength,n=this.littleEdian,r={left:null,right:null};if(2===this.config.numChannels){var i=new DataView(new ArrayBuffer(e/2)),o=new DataView(new ArrayBuffer(e/2));if(16===this.config.sampleBits)for(var a=0;a<e/2;a+=2)i.setInt16(a,t.getInt16(2*a,n),n),o.setInt16(a,t.getInt16(2*a+2,n),n);else for(a=0;a<e/2;a+=2)i.setInt8(a,t.getInt8(2*a)),o.setInt8(a,t.getInt8(2*a+1));r.left=i,r.right=o}else r.left=t;return r},e}(n(5).default);e.default=s},function(t,e,n){"use strict";function r(t,e,n){var r=document.createElement("a");r.href=window.URL.createObjectURL(t),r.download=e+"."+n,r.click()}Object.defineProperty(e,"__esModule",{value:!0}),e.downloadWAV=function(t,e){void 0===e&&(e="recorder"),r(t,e,"wav")},e.downloadPCM=function(t,e){void 0===e&&(e="recorder"),r(t,e,"pcm")},e.download=function(t,e,n){return r(t,e,n)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=null,o=0,a=0,u=null,s=null,c=null,f=!1,l=0,d=function(){};function h(){return f=!1,u.decodeAudioData(c.slice(0),function(t){(i=u.createBufferSource()).onended=function(){f||(l=u.currentTime-a+o,d())},i.buffer=t,i.connect(s),s.connect(u.destination),i.start(0,o),a=u.currentTime},function(t){r.throwError(t)})}function p(){i&&(i.stop(),i=null)}var y=function(){function t(){}return t.play=function(t){return u||((s=(u=new(window.AudioContext||window.webkitAudioContext)).createAnalyser()).fftSize=2048),this.stopPlay(),c=t,l=0,h()},t.pausePlay=function(){p(),o+=u.currentTime-a,f=!0},t.resumePlay=function(){return h()},t.stopPlay=function(){o=0,c=null,p()},t.destroyPlay=function(){this.stopPlay()},t.getAnalyseData=function(){var t=new Uint8Array(s.frequencyBinCount);return s.getByteTimeDomainData(t),t},t.addPlayEnd=function(t){void 0===t&&(t=function(){}),d=t},t.getPlayTime=function(){var t=f?o:u.currentTime-a+o;return l||t},t}();e.default=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.throwError=function(t){throw Error(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=function(){function t(e){void 0===e&&(e={}),this.size=0,this.lBuffer=[],this.rBuffer=[],this.tempPCM=[],this.inputSampleBits=16,this.fileSize=0,this.duration=0,this.needRecord=!0;var n,r=new(window.AudioContext||window.webkitAudioContext);this.inputSampleRate=r.sampleRate,this.setNewOption(e),this.littleEdian=(new DataView(n=new ArrayBuffer(2)).setInt16(0,256,!0),256===new Int16Array(n)[0]),t.initUserMedia()}return t.prototype.setNewOption=function(t){void 0===t&&(t={}),this.config={sampleBits:~[8,16].indexOf(t.sampleBits)?t.sampleBits:16,sampleRate:~[8e3,11025,16e3,22050,24e3,44100,48e3].indexOf(t.sampleRate)?t.sampleRate:this.inputSampleRate,numChannels:~[1,2].indexOf(t.numChannels)?t.numChannels:1},this.outputSampleRate=this.config.sampleRate,this.oututSampleBits=this.config.sampleBits},t.prototype.startRecord=function(){var t=this;return this.context&&this.destroyRecord(),this.initRecorder(),navigator.mediaDevices.getUserMedia({audio:!0}).then(function(e){t.audioInput=t.context.createMediaStreamSource(e),t.stream=e}).then(function(){t.audioInput.connect(t.analyser),t.analyser.connect(t.recorder),t.recorder.connect(t.context.destination)})},t.prototype.pauseRecord=function(){this.needRecord=!1},t.prototype.resumeRecord=function(){this.needRecord=!0},t.prototype.stopRecord=function(){this.audioInput&&this.audioInput.disconnect(),this.source&&this.source.stop(),this.recorder.disconnect(),this.analyser.disconnect(),this.needRecord=!0},t.prototype.destroyRecord=function(){return this.clearRecordStatus(),this.stopStream(),this.closeAudioContext()},t.prototype.getAnalyseData=function(){var t=new Uint8Array(this.analyser.frequencyBinCount);return this.analyser.getByteTimeDomainData(t),t},t.prototype.getData=function(){return this.flat()},t.prototype.clearRecordStatus=function(){this.lBuffer.length=0,this.rBuffer.length=0,this.size=0,this.fileSize=0,this.PCM=null,this.audioInput=null,this.duration=0},t.prototype.flat=function(){var t=null,e=new Float32Array(0);1===this.config.numChannels?t=new Float32Array(this.size):(t=new Float32Array(this.size/2),e=new Float32Array(this.size/2));for(var n=0,r=0;r<this.lBuffer.length;r++)t.set(this.lBuffer[r],n),n+=this.lBuffer[r].length;for(r=0,n=0;r<this.rBuffer.length;r++)e.set(this.rBuffer[r],n),n+=this.rBuffer[r].length;return{left:t,right:e}},t.prototype.initRecorder=function(){var t=this;this.clearRecordStatus(),this.context=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.context.createAnalyser(),this.analyser.fftSize=2048;var e=this.context.createScriptProcessor||this.context.createJavaScriptNode;this.recorder=e.apply(this.context,[4096,this.config.numChannels,this.config.numChannels]),this.recorder.onaudioprocess=function(e){if(t.needRecord){var n,r=e.inputBuffer.getChannelData(0),i=null;t.lBuffer.push(new Float32Array(r)),t.size+=r.length,2===t.config.numChannels&&(i=e.inputBuffer.getChannelData(1),t.rBuffer.push(new Float32Array(i)),t.size+=i.length),t.fileSize=Math.floor(t.size/Math.max(t.inputSampleRate/t.outputSampleRate,1))*(t.oututSampleBits/8),n=100*Math.max.apply(Math,r),t.duration+=4096/t.inputSampleRate,t.onprocess&&t.onprocess(t.duration),t.onprogress&&t.onprogress({duration:t.duration,fileSize:t.fileSize,vol:n})}}},t.prototype.stopStream=function(){this.stream&&this.stream.getTracks&&(this.stream.getTracks().forEach(function(t){return t.stop()}),this.stream=null)},t.prototype.closeAudioContext=function(){return this.context&&this.context.close&&"closed"!==this.context.state?this.context.close():new Promise(function(t){t()})},t.initUserMedia=function(){void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(t){var e=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return e?new Promise(function(n,r){e.call(navigator,t,n,r)}):Promise.reject(Error("\u6D4F\u89C8\u5668\u4E0D\u652F\u6301 getUserMedia !"))})},t.prototype.transformIntoPCM=function(t,e){var n=new Float32Array(t),i=new Float32Array(e),o=r.compress({left:n,right:i},this.inputSampleRate,this.outputSampleRate);return r.encodePCM(o,this.oututSampleBits,this.littleEdian)},t.getPermission=function(){return this.initUserMedia(),navigator.mediaDevices.getUserMedia({audio:!0}).then(function(t){t&&t.getTracks().forEach(function(t){return t.stop()})})},t}();e.default=i}]).default},t.exports=n()},765796:function(t,e,n){t.exports=n(341145)},313886:function(t,e,n){"use strict";n.d(e,{Z:()=>b});var r=n("628697"),i=n("723530"),o=n("488178");n("307764");var a=n("516719"),u=n("452121"),s=n("661595"),c=n("174234"),f=i.createContext(null),l=n("871838"),d=new Map,h=new l.Z(function(t){t.forEach(function(t){var e,n=t.target;null===(e=d.get(n))||void 0===e||e.forEach(function(t){return t(n)})})}),p=n("14952"),y=n("348045"),g=n("743102"),v=n("924889"),m=function(t){(0,g.Z)(n,t);var e=(0,v.Z)(n);function n(){return(0,p.Z)(this,n),e.apply(this,arguments)}return(0,y.Z)(n,[{key:"render",value:function(){return this.props.children}}]),n}(i.Component),w=i.forwardRef(function(t,e){var n=t.children,r=t.disabled,o=i.useRef(null),l=i.useRef(null),p=i.useContext(f),y="function"==typeof n,g=y?n(o):n,v=i.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),w=!y&&i.isValidElement(g)&&(0,c.Yr)(g),P=w?(0,c.C4)(g):null,b=(0,c.x1)(P,o),M=function(){var t;return(0,s.ZP)(o.current)||(o.current&&"object"===(0,u.Z)(o.current)?(0,s.ZP)(null===(t=o.current)||void 0===t?void 0:t.nativeElement):null)||(0,s.ZP)(l.current)};i.useImperativeHandle(e,function(){return M()});var A=i.useRef(t);A.current=t;var R=i.useCallback(function(t){var e=A.current,n=e.onResize,r=e.data,i=t.getBoundingClientRect(),o=i.width,u=i.height,s=t.offsetWidth,c=t.offsetHeight,f=Math.floor(o),l=Math.floor(u);if(v.current.width!==f||v.current.height!==l||v.current.offsetWidth!==s||v.current.offsetHeight!==c){var d={width:f,height:l,offsetWidth:s,offsetHeight:c};v.current=d;var h=s===Math.round(o)?o:s,y=c===Math.round(u)?u:c,g=(0,a.Z)((0,a.Z)({},d),{},{offsetWidth:h,offsetHeight:y});null==p||p(g,t,r),n&&Promise.resolve().then(function(){n(g,t)})}},[]);return i.useEffect(function(){var t,e,n=M();if(n&&!r){;t=n,e=R,d.has(t)||(d.set(t,new Set),h.observe(t)),d.get(t).add(e)}return function(){var t,e;return t=n,e=R,void(d.has(t)&&(d.get(t).delete(e),!d.get(t).size&&(h.unobserve(t),d.delete(t))))}},[o.current,r]),i.createElement(m,{ref:l},w?i.cloneElement(g,{ref:b}):g)}),P=i.forwardRef(function(t,e){var n=t.children,a="function"==typeof n?[n]:(0,o.Z)(n);return a.map(function(n,o){var a=(null==n?void 0:n.key)||"".concat("rc-observer-key","-").concat(o);return i.createElement(w,(0,r.Z)({},t,{key:a,ref:0===o?e:void 0}),n)})});P.Collection=function(t){var e=t.children,n=t.onBatchResize,r=i.useRef(0),o=i.useRef([]),a=i.useContext(f),u=i.useCallback(function(t,e,i){r.current+=1;var u=r.current;o.current.push({size:t,element:e,data:i}),Promise.resolve().then(function(){u===r.current&&(null==n||n(o.current),o.current=[])}),null==a||a(t,e,i)},[n,a]);return i.createElement(f.Provider,{value:u},e)};var b=P},346636:function(t,e){"use strict";var n=function(t){return+setTimeout(t,16)},r=function(t){return clearTimeout(t)};"undefined"!=typeof window&&"requestAnimationFrame"in window&&(n=function(t){return window.requestAnimationFrame(t)},r=function(t){return window.cancelAnimationFrame(t)});var i=0,o=new Map;function a(t){o.delete(t)}var u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=i+=1;return!function e(i){if(0===i){var a;a=r,o.delete(a),t()}else{var u=n(function(){e(i-1)});o.set(r,u)}}(e),r};u.cancel=function(t){var e,n=o.get(t);return e=t,o.delete(e),r(n)};e.Z=u},980032:function(t,e,n){"use strict";n.d(e,{J:function(){return o}});var r=Object.prototype.hasOwnProperty;function i(t,e,n){for(n of t.keys())if(o(n,e))return n}function o(t,e){var n,a,u;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((a=t.length)===e.length)for(;a--&&o(t[a],e[a]););return -1===a}if(n===Set){if(t.size!==e.size)return!1;for(a of t)if((u=a)&&"object"==typeof u&&!(u=i(e,u))||!e.has(u))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(a of t)if((u=a[0])&&"object"==typeof u&&!(u=i(e,u))||!o(a[1],e.get(u)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((a=t.byteLength)===e.byteLength)for(;a--&&t.getInt8(a)===e.getInt8(a););return -1===a}if(ArrayBuffer.isView(t)){if((a=t.byteLength)===e.byteLength)for(;a--&&t[a]===e[a];);return -1===a}if(!n||"object"==typeof t){for(n in a=0,t)if(r.call(t,n)&&++a&&!r.call(e,n)||!(n in e)||!o(t[n],e[n]))return!1;return Object.keys(e).length===a}}return t!=t&&e!=e}},305847:function(t,e,n){"use strict";var r=n(388660),i=n(13111),o=n(491011),a=n(350227),u=(0,o.Z)(function(t){var e=(0,r.Z)(t,a.Z);return e.length&&e[0]===t[0]?(0,i.Z)(e):[]});e.Z=u}}]);
//# sourceMappingURL=https://sourcemap-redirect.coze.cn/obj/coze-sourcemap/ol-sourcemap/bot/1.0.2.2470/2526.a5cceb6a.js.map