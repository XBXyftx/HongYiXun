"use strict";(self.webpackChunkapp_botstudio_main=self.webpackChunkapp_botstudio_main||[]).push([["69182"],{228478:function(e,t,i){i.d(t,{zq:()=>e1,k4:()=>e6,EI:()=>e0,Zz:()=>eJ,hP:()=>e2,GH:()=>eO,o$:()=>eB,w_:()=>eX});var o=i("255721"),n=i("938809"),l=i("842197"),r=i("97146"),a=i("559293"),s=i("16242"),d=i("168074"),c=i("14014"),p=i("449001"),m=i("866466"),u=i.n(m),b=i("462669"),h=i.n(b),v=i("318249"),_=i.n(v),f=i("294754"),x=i.n(f),g=i("13355"),y=i.n(g),w=i("876846"),j=i.n(w),k=i("727760"),N={};N.styleTagTransform=j(),N.setAttributes=x(),N.insert=_().bind(null,"head"),N.domAPI=h(),N.insertStyleElement=y(),u()(k.Z,N);var T=k.Z&&k.Z.locals?k.Z.locals:void 0,Z=i("341333"),A=i("265489"),C=i("723530"),O=i("856306"),R=i.n(O),M=i("642385"),I=i("666428"),S=[{key:c.j5.Commit,title:"devops_publish_multibranch_Submit",value:[c.j5.Commit]},{key:c.j5.PrePublish,title:"bmv_ppe_lane",value:[c.j5.PrePublish]},{key:c.j5.Online,title:"devops_publish_multibranch_Publish",value:[c.j5.Online,c.j5.Rollback,c.j5.Gray]}],D=i("530198");function K(e){var{data:t}=e,{history_version_type:i,history_version_status:o,bot_version_operation:l}=t,r=o===c.Dq.Valid,a="";switch(l){case c.Wu.Modify:a="(".concat(s.o.t("bmv_workflow_publish_multibranch_modify"),")");break;case c.Wu.Offline:a="(".concat(s.o.t("bmv_bmv_take_offline"),")");break;case c.Wu.Rollback:a="(".concat(s.o.t("bmv_rollback"),")")}switch(i){case c.j5.Commit:return(0,n.jsxs)(d.Vp,{color:"green",children:[s.o.t("devops_publish_multibranch_Submit"),a]});case c.j5.PrePublish:return(0,n.jsxs)(d.Vp,{color:r?"green":"grey",children:[t.x_tt_env,a]});case c.j5.Gray:return(0,n.jsxs)(d.Vp,{color:r?"yellow":"grey",children:[s.o.t("bmv_the_dark_launch_version"),a]});case c.j5.Online:return(0,n.jsxs)(d.Vp,{color:r?"green":"grey",children:[s.o.t("bmv_official_version"),a]});case c.j5.Rollback:return(0,n.jsxs)(d.Vp,{color:r?"red":"grey",children:[s.o.t("bmv_rollback_version"),a]});default:return null}}var B=i("221968"),E=i.n(B),L=(e,t)=>{if(!!e){var i=(0,B.unix)(e);if(t)return i.format("YYYY-MM-DD HH:mm");var o=E()();return o.diff(i,"y")>=1?i.format("YYYY-MM-DD HH:mm"):o.isSame(i,"d")?i.format("HH:mm"):i.format("MM-DD HH:mm")}},F=i("10378"),z={};z.styleTagTransform=j(),z.setAttributes=x(),z.insert=_().bind(null,"head"),z.domAPI=h(),z.insertStyleElement=y(),u()(F.Z,z);var G=F.Z&&F.Z.locals?F.Z.locals:void 0;function V(e){var t,{type:i,connectorId:r,tabList:m,title:u,visible:b,onCancel:h,submit:v}=e,{space_id:_="",bot_id:f=""}=(0,l.useParams)(),x=(0,D.c2)(e=>e.inCollaboration),g=null!=m?m:x?S:S.slice(0),[y,w]=(0,C.useState)(0),[j,k]=(0,C.useState)(),{data:N,loading:T}=(0,a.Z)((0,o._)(function*(){return"version"===i?(yield p.bV.ListHistoryVersions({space_id:_,bot_id:f,version_types:g[y].value,connector_ids:r?[r]:void 0})).versions:(yield p.bV.ListOperationHistory({space_id:_,bot_id:f,version_types:g[y].value,connector_ids:r?[r]:void 0})).histories}),{refreshDeps:[y],ready:b});var{run:Z,loading:A}=(0,a.Z)((t=(0,o._)(function*(e){var t;return yield null==v?void 0:null===(t=v.onSubmit)||void 0===t?void 0:t.call(v,e)}),function(e){return t.apply(this,arguments)}),{manual:!0});return(0,C.useEffect)(()=>{b&&k(void 0)},[b]),(0,n.jsx)(d.Uu,{title:u,visible:b,onCancel:h,children:(0,n.jsxs)("div",{className:"flex flex-col h-full",children:[(0,n.jsx)("div",{className:G.tabs,children:g.map((e,t)=>(0,n.jsxs)(C.Fragment,{children:[(0,n.jsx)(d.ZT.Text,{className:R()(G["history-type-text"],{[G["history-type-text-active"]]:y===t}),onClick:()=>{w(t)},children:s.o.t(e.title)}),t!==g.length-1?(0,n.jsx)(d.iz,{layout:"vertical"}):null]},e.key))}),T?(0,n.jsx)("div",{className:R()(G["timeline-container"],G["timeline-container-spin"]),children:(0,n.jsx)(d.yC,{spinning:T})}):(0,n.jsx)(d.TY,{className:G["timeline-container"],children:null==N?void 0:N.map((e,t)=>{var i,o,l,r,a=!!e.offline_time;return(0,n.jsx)(d.TY.Item,{children:(0,n.jsxs)("div",{className:R()(G["timeline-item-content"],{[G.active]:j===e}),onClick:()=>k(e),children:[(0,n.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,n.jsx)(K,{data:e}),(0,n.jsx)("div",{className:R()(G.light,{[G["hover-hidden"]]:a}),children:L(Number(e.create_time))}),a?(0,n.jsxs)("div",{className:R()(G.light,G["hover-show"]),children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("span",{className:G.title,children:[s.o.t("bmv_launch_time"),":"]}),L(Number(e.create_time))]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("span",{className:G.title,children:[s.o.t("bmv_offline_time"),":"]}),L(Number(e.offline_time))]})]}):null]}),e.bot_version?(0,n.jsxs)("div",{children:[(0,n.jsxs)("span",{className:G.title,children:[s.o.t("bmv_version_number"),":"]}),(0,n.jsx)("span",{children:e.bot_version})]}):null,(0,n.jsxs)("div",{children:[(0,n.jsxs)("span",{className:G.title,children:[s.o.t("bmv_submit_id"),":"]}),(0,n.jsx)("span",{children:e.commit_version})]}),e.remark?(0,n.jsx)("div",{children:(0,n.jsxs)(d.ZT.Text,{ellipsis:{rows:2,showTooltip:{opts:{className:"break-all max-h-[500px] overflow-y-scroll"}}},children:[(0,n.jsxs)("span",{className:G.title,children:[s.o.t("bmv_explain"),":"]}),(0,n.jsx)("span",{children:e.remark})]})}):null,(null===(i=e.connector_infos)||void 0===i?void 0:i.length)?(0,n.jsx)("div",{className:"flex",children:e.connector_infos.map(e=>(0,n.jsx)("img",{className:G["connector-icon"],src:e.icon},e.id))}):null,(0,n.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center",children:[(0,n.jsx)("img",{className:G["user-avatar"],src:null==e?void 0:null===(o=e.creator)||void 0===o?void 0:o.avatar_url},null==e?void 0:null===(l=e.creator)||void 0===l?void 0:l.id),(0,n.jsx)("span",{className:G.light,children:null==e?void 0:null===(r=e.creator)||void 0===r?void 0:r.name})]}),(0,n.jsx)(d.ZT.Text,{link:{href:"/space/".concat(_,"/bot/").concat(f,"?version=").concat(e.commit_version).concat(e.history_version_type===c.j5.Gray?"&coze_extension_from_type=gray_version":""),target:"_blank"},children:s.o.t("bmv_view_version")})]})]})},t)})}),v?(0,n.jsx)("div",{className:G.bottom,children:(0,n.jsx)(d.y3,{theme:"solid",onClick:()=>{j&&Z(j)},disabled:!j,loading:A,children:v.title})}):null]})})}var q=i("448082"),P=i("973939"),Q=i("646411"),Y=e=>null==e?void 0:e.every(e=>J(e)),J=e=>{var t;return e.config_status!==Q._6.Configured||e.connector_status===Q.pV.InReview||!e.hasPublished||(null===(t=e.conflictInfo)||void 0===t?void 0:t.isConflicting)},U=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=[];return null==e||e.forEach(e=>{e.level=t,i.push(e),e.sub_nodes&&i.push(...U(e.sub_nodes,t+1))}),i},X=e=>{try{if(!e)return e;var t=e.match(/timestamp:"(\d{10,13})"/);if(t){var i=null==t?void 0:t[1],o="YYYY-MM-DD HH:mm:ss",n="".concat(i).length;if(10===n)return'"'.concat(E().unix(Number(i)).format(o),'"');if(13===n)return'"'.concat(E()(Number(i)).format(o),'"')}return e}catch(t){return e}},H=e=>{try{return JSON.parse(e||"")}catch(e){return""}};atob("aHR0cHM6Ly9ieXRlZGFuY2UubGFya29mZmljZS5jb20vZG9jeC9SazRqZFFSUENvTXN0Y3hvV1hrY0tIZkpuU1ojc2hhcmUtSWlDTWRaQzExb3d2eDR4ZFhNZmMyNHpGblNl");var W=i("353282"),$=i("182956"),ee=()=>{var e=(0,l.useParams)(),t=e.space_id||"",i=e.bot_id||"";return{sendViewDiffEvent:()=>{(0,M.Gg)(M.Kg.bot_diff_viewdetail,{workspace_id:t,bot_id:i})}}},et=i("188946"),ei={};ei.styleTagTransform=j(),ei.setAttributes=x(),ei.insert=_().bind(null,"head"),ei.domAPI=h(),ei.insertStyleElement=y(),u()(et.Z,ei);var eo=et.Z&&et.Z.locals?et.Z.locals:void 0,en=e=>{var t,{left:i,right:o,node:l}=e;if((null==l?void 0:null===(t=l.diff_res)||void 0===t?void 0:t.diff_style)===P.jY.TextDetail)return(0,n.jsx)(el,(0,Z._)({},e));var r=X(i),a=X(o),s=null==r?void 0:r.includes("template_NewLine"),c=e=>(0,n.jsx)(d.ZT.Text,{className:eo["multiline-text"],type:"secondary",size:"small",children:null==e?void 0:e.replaceAll("template_NewLine","\n")});return s?(0,n.jsxs)(d.ZT.Text,{className:eo["multiline-container"],type:"secondary",size:"small",children:[c(r),(0,n.jsx)(d.ZT.Text,{className:"mx-2",type:"secondary",size:"small",children:"->"}),c(a)]}):(0,n.jsx)(d.ZT.Text,{type:"secondary",size:"small",ellipsis:{showTooltip:{opts:{content:"".concat(r," -> ").concat(a),style:{wordBreak:"break-word"}}}},children:"".concat(r," -> ").concat(a)})},el=e=>{var t,i,o,l,{node:r}=e,[a,c]=(0,C.useState)(!1),p=H(null===(t=H(null==r?void 0:null===(i=r.diff_res)||void 0===i?void 0:i.origin_left))||void 0===t?void 0:t.OriginStr),m=H(null===(o=H(null==r?void 0:null===(l=r.diff_res)||void 0===l?void 0:l.origin_right))||void 0===o?void 0:o.OriginStr),{sendViewDiffEvent:u}=ee();return(0,n.jsxs)("div",{children:[(0,n.jsx)(d.ZT.Text,{link:!0,onClick:()=>{c(!0),u()},className:"text-xs",children:s.o.t("coze_bot_diff_btn_view_diff")}),(0,n.jsx)($.Modal,{visible:a,title:(0,n.jsx)("div",{className:"flex gap-1 items-center",children:s.o.t("coze_bot_diff_diffdetail_pagetitle")}),footer:null,width:1e3,onCancel:()=>{c(!1)},children:(0,n.jsxs)("div",{className:eo["editor-container"],children:[(0,n.jsxs)("div",{className:eo["editor-header"],children:[(0,n.jsx)("div",{className:eo["editor-title"],children:s.o.t("coze_bot_diff_diffdetail_onlineversion")}),(0,n.jsx)(d.iz,{className:eo["editor-divider"],layout:"vertical"}),(0,n.jsx)("div",{className:eo["editor-title"],children:s.o.t("coze_bot_diff_diffdetail_tobereleasedversion")})]}),(0,n.jsx)("div",{className:"h-[600px]",children:(0,n.jsx)(W.DiffEditor,{theme:"light",className:eo.editor,original:p,modified:m,language:"text",options:{minimap:{enabled:!1},wordWrap:"on",diffWordWrap:"on",lineNumbers:"on",readOnly:!0,scrollBeyondLastLine:!1,renderOverviewRuler:!1,enableSplitViewResizing:!1,unicodeHighlight:{ambiguousCharacters:!1},suggestLineHeight:32,lineHeight:20,fontSize:12},loading:(0,n.jsx)("div",{className:"h-[100%] w-[100%] flex items-center justify-center",children:(0,n.jsx)(d.yC,{})})})})]})})]})},er={[P.sv.Add]:"devops_publish_multibranch_changeset_add",[P.sv.Delete]:"devops_publish_multibranch_changeset_delete",[P.sv.Modify]:"devops_publish_multibranch_changeset_modify",[P.sv.Remove]:"devops_publish_multibranch_changeset_remove"},ea=e=>{var{diffData:t,hasError:i}=e;return(0,n.jsxs)("div",{className:eo.container,children:[(null==t?void 0:t.length)>0?t.map(e=>{var t,i;return(0,n.jsxs)("div",{className:eo["info-block"],children:[(0,n.jsx)("div",{className:eo["info-title"],children:e.display_name}),(null==e?void 0:null===(t=e.sub_nodes)||void 0===t?void 0:t.length)?null==e?void 0:null===(i=e.sub_nodes)||void 0===i?void 0:i.map((e,t)=>(0,n.jsx)(es,{node:e},t)):null]},e.display_name)}):(0,n.jsx)("div",{className:eo["empty-container"],children:(0,n.jsx)(d.ZT.Text,{className:eo["empty-info"],children:s.o.t(i?"devops_publish_multibranch_NetworkError":"devops_publish_multibranch_nodiff")})}),(0,n.jsx)("div",{className:"h-[32px]"}),(0,n.jsx)("div",{className:eo.mask})]})},es=e=>{var t,i,{node:o}=e,{display_name:l}=o;return l?(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:eo["info-subtitle"],children:l}),(null==o?void 0:null===(t=o.sub_nodes)||void 0===t?void 0:t.length)?(0,n.jsx)(ed,{blockDiffData:null==o?void 0:o.sub_nodes}):null]}):(null==o?void 0:null===(i=o.sub_nodes)||void 0===i?void 0:i.length)?(0,n.jsx)(ed,{blockDiffData:null==o?void 0:o.sub_nodes}):(0,n.jsx)(n.Fragment,{})},ed=e=>{var{blockDiffData:t}=e;if(!t)return null;var i=e=>(0,n.jsxs)(d.ZT.Text,{ellipsis:{showTooltip:{opts:{content:e.display_name,className:eo["property-tooltip"]}}},className:eo["property-title"],children:[void 0!==e.level&&e.level>0?(0,n.jsx)(d.ZT.Text,{style:{marginLeft:8+20*(e.level-1),marginRight:8},children:"-"}):null,e.display_name]}),o=e=>{var t,i,o,l;return e.diff_res&&(null===(t=e.diff_res)||void 0===t?void 0:t.action)!==P.sv.Unknown&&(null===(i=e.diff_res)||void 0===i?void 0:i.action)!==P.sv.Remain?(0,n.jsx)(d.fS,{className:eo["tag-".concat(null===(o=e.diff_res)||void 0===o?void 0:o.action)],children:s.o.t(er[null===(l=e.diff_res)||void 0===l?void 0:l.action])}):""},l=e=>{var t,i,o;return(null==e?void 0:null===(t=e.diff_res)||void 0===t?void 0:t.action)===P.sv.Modify?(0,n.jsx)(en,{left:(null==e?void 0:null===(i=e.diff_res)||void 0===i?void 0:i.display_left)||"",right:(null==e?void 0:null===(o=e.diff_res)||void 0===o?void 0:o.display_right)||"",node:e}):""};return(0,n.jsx)(d.aV,{dataSource:U(t),bordered:!0,className:eo.list,renderItem:e=>(0,n.jsx)(d.aV.Item,{children:(0,n.jsxs)("div",{className:eo["list-item"],children:[i(e),(0,n.jsxs)("div",{children:[" ",o(e)]}),l(e)]})})})},ec=i("50654"),ep={};ep.styleTagTransform=j(),ep.setAttributes=x(),ep.insert=_().bind(null,"head"),ep.domAPI=h(),ep.insertStyleElement=y(),u()(ec.Z,ep);var em=ec.Z&&ec.Z.locals?ec.Z.locals:void 0,eu={[P.sv.Add]:"devops_publish_multibranch_changeset_add",[P.sv.Delete]:"devops_publish_multibranch_changeset_delete",[P.sv.Modify]:"devops_publish_multibranch_changeset_modify",[P.sv.Remove]:"devops_publish_multibranch_changeset_remove"};function eb(e){var{left:t,right:i}=e,o=X(t),l=X(i),r=null==o?void 0:o.includes("template_NewLine"),a=e=>(0,n.jsx)(d.ZT.Text,{className:em["multiline-text"],children:null==e?void 0:e.replaceAll("template_NewLine","\n")});return r?(0,n.jsxs)(d.ZT.Text,{className:em["multiline-container"],children:[a(o),(0,n.jsx)(d.ZT.Text,{className:"mx-2",children:"->"}),a(l)]}):(0,n.jsx)(d.ZT.Text,{ellipsis:{showTooltip:{opts:{content:"".concat(o," -> ").concat(l),style:{wordBreak:"break-word"}}}},children:"".concat(o," -> ").concat(l)})}function eh(e){var{diffList:t}=e,i=[{title:s.o.t("devops_publish_multibranch_property"),width:280,render:e=>(0,n.jsxs)(d.ZT.Text,{ellipsis:{showTooltip:{opts:{content:e.display_name,className:em["property-tooltip"]}}},className:em["cell-span"],children:[e.level&&e.level>0?(0,n.jsx)(d.ZT.Text,{style:{marginLeft:8+20*(e.level-1),marginRight:8},children:"-"}):null,e.display_name]})},{title:s.o.t("devops_publish_multibranch_changetype"),render:e=>{if(!e.diff_res||(null===(t=e.diff_res)||void 0===t?void 0:t.action)===P.sv.Unknown)return"";var t,i=eu[e.diff_res.action];return(0,n.jsx)(d.fS,{className:em["tag-".concat(e.diff_res.action)],children:i?s.o.t(i):null})},width:120},{title:s.o.t("devops_publish_multibranch_changes"),render:e=>{var t,i,o;return(null==e?void 0:null===(t=e.diff_res)||void 0===t?void 0:t.action)===P.sv.Modify?(0,n.jsx)(eb,{left:(null==e?void 0:null===(i=e.diff_res)||void 0===i?void 0:i.display_left)||"",right:(null==e?void 0:null===(o=e.diff_res)||void 0===o?void 0:o.display_right)||""}):""},ellipsis:!0}];return(0,n.jsx)(d.iA,{dataSource:U(t),columns:i,pagination:!1,onRow:()=>({className:em["table-row"]}),className:em["diff-table"]})}var ev=e=>{var{diffData:t,hasError:i}=e;return(0,n.jsx)("div",{className:eo.container,children:(null==t?void 0:t.length)>0?t.map(e=>{var t;return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:eo["info-title"],children:e.display_name}),(null==e?void 0:null===(t=e.sub_nodes)||void 0===t?void 0:t.length)?(0,n.jsx)(eh,{diffList:e.sub_nodes}):null]},e.display_name)}):(0,n.jsx)("div",{className:eo["empty-container"],children:(0,n.jsx)(d.ZT.Text,{className:eo["empty-info"],children:s.o.t(i?"devops_publish_multibranch_NetworkError":"devops_publish_multibranch_nodiff")})})})},e_=()=>{var e,[t,i]=(0,C.useState)(),r=(0,l.useParams)(),c=(0,D.c2)(e=>e.inCollaboration),[m]=(0,q.V)(),u=!!(null==m?void 0:m["bot.devops.merge_prompt_diff"]);var{data:b,loading:h,run:v,mutate:_,error:f}=(0,a.Z)((e=(0,o._)(function*(e,t){var{bot_id:i="",space_id:o="",commit_version:n}=r;return(yield p.bV.BotDiff({space_id:o,bot_id:i,left:{branch:P.I0.Publish,connector_id:e.id},template_key:u?"diff_template_when_publish_v2":"",right:t||n||c?{branch:P.I0.Base,version_id:t||n}:{branch:P.I0.PersonalDraft}})).data}),function(t,i){return e.apply(this,arguments)}),{manual:!0}),x=()=>{_({origin_bot_dl:"",diff_display_node:[]}),w()},{modal:g,open:y,close:w}=(0,d.q0)({type:"info",okText:s.o.t("devops_publish_multibranch_done"),okType:"tertiary",okButtonProps:{className:"semi-button-light"},hasCancel:!1,className:eo["diff-modal"],onCancel:x,onOk:x,title:s.o.t("devops_publish_multibranch_diffwithin",{connectorName:(null==t?void 0:t.name)||""})});return{node:g((0,n.jsx)("div",{className:eo["diff-modal-container"],children:h?(0,n.jsx)(d.yC,{}):u?(0,n.jsx)(ea,{diffData:(null==b?void 0:b.diff_display_node)||[],hasError:void 0!==f}):(0,n.jsx)(ev,{diffData:(null==b?void 0:b.diff_display_node)||[],hasError:void 0!==f})})),open:(e,t)=>{i(e),v(e,t),y()},close:w}},ef=i("306769"),ex=i("204393"),eg={};eg.styleTagTransform=j(),eg.setAttributes=x(),eg.insert=_().bind(null,"head"),eg.domAPI=h(),eg.insertStyleElement=y(),u()(ex.Z,eg);var ey=ex.Z&&ex.Z.locals?ex.Z.locals:void 0;function ew(e){var{className:t,value:i,onChange:o,onChangeVersionData:r,initVersionData:a,disabled:c,emptyString:p,versionDrawerProps:m}=e,{space_id:u="",bot_id:b=""}=(0,l.useParams)(),[h,v]=(0,C.useState)(a),[_,f]=(0,C.useState)(!1);return(0,D.c2)(e=>e.inCollaboration)||h||p?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:R()(t,ey["select-content"]),children:[h?(0,n.jsxs)("div",{className:ey["select-data"],children:[(0,n.jsxs)("div",{className:"flex flex-row items-center",children:[(0,n.jsx)(K,{data:h}),(0,n.jsx)("span",{className:ey.time,children:L(Number(h.create_time))})]}),(0,n.jsxs)("div",{children:[h.bot_version?(0,n.jsxs)("span",{className:"inline-block mr-1",children:[(0,n.jsxs)("span",{className:ey.title,children:[s.o.t("bmv_version_number"),":"]}),(0,n.jsx)("span",{children:h.bot_version})]}):null,(0,n.jsxs)("span",{children:[(0,n.jsxs)("span",{className:ey.title,children:[s.o.t("bmv_submit_id"),":"]}),(0,n.jsx)("span",{children:h.commit_version})]})]}),(0,n.jsx)("div",{children:h.remark?(0,n.jsxs)(d.ZT.Text,{ellipsis:{rows:2,showTooltip:!0},children:[(0,n.jsxs)("span",{className:ey.title,children:[s.o.t("bmv_explain"),":"]}),(0,n.jsx)("span",{children:h.remark})]}):null})]}):(0,n.jsx)("div",{className:ey.simple,children:p||s.o.t("bmv_current_latest_submission")}),(0,n.jsx)(d.y3,{theme:"solid",onClick:()=>{(0,M.Gg)(M.Kg.bot_ppe_version_select,{environment:"".concat("cn","-").concat("release","-").concat("online"),workspace_id:u,bot_id:b,status:0}),f(!0)},disabled:c,children:s.o.t("bmv_switch_version")})]}),(0,n.jsx)(V,(0,Z._)({visible:_,onCancel:()=>f(!1),type:"version",title:s.o.t("bmv_version_selection"),submit:{title:s.o.t("bmv_card_builder_depsManager_panel_block_update_placeholder"),onSubmit:e=>{v(e),null==o||o(e.commit_version),null==r||r(e),f(!1)}}},m))]}):(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:R()(t,ey["select-content"]),children:(0,n.jsxs)("div",{className:ey.simple,children:[" ",s.o.t("bmv_current_draft_version")]})}),(0,n.jsx)("div",{className:ey["simple-desc"],children:s.o.t("bmv_enable_multi_player_collaboration_and_support_multi_version_selection")})]})}var ej=i("556923"),ek=e=>{var{record:t,partConnector:i,commitVersion:o}=e,l=(0,ej._)(e,["record","partConnector","commitVersion"]),{open:r,node:a}=e_();return t&&(t.config_status!==Q._6.Configured||t.connector_status===Q.pV.InReview||!t.hasPublished)?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.u,{content:s.o.t("devops_publish_multibranch_viewdiff"),children:(0,n.jsx)(d._3,(0,Z._)({onClick:()=>{var e=t||i;e&&r(e,o)},icon:(0,n.jsx)(I.k8G,{color:"#4D53E8"})},l))}),a]})};function eN(e){var{data:t,onOperateSuccess:i,tableDataSource:r,collaboratorStatus:m,inCollaboration:u}=e,{space_id:b="",bot_id:h=""}=(0,l.useParams)(),v=(0,l.useNavigate)(),{open:_,node:f}=e_(),{open:x,node:g}=function(e){var t,{data:i,tableDataSource:r,onOperateSuccess:m}=e,{space_id:u="",bot_id:b=""}=(0,l.useParams)(),[h,v]=(0,C.useState)(!1),[_,f]=(0,C.useState)(()=>(0,ef.x0)()),[x,g]=(0,C.useState)(),{data:y,run:w,loading:j}=(0,a.Z)((0,o._)(function*(){g(void 0);var e,t,o=null===(t=(yield p.bV.ListHistoryVersions({space_id:u,bot_id:b,version_types:[c.j5.Online],connector_ids:(null===(e=i.connector_info)||void 0===e?void 0:e.id)?[i.connector_info.id]:void 0})).versions)||void 0===t?void 0:t.find(e=>e.commit_version!==i.commit_version);if(o)return g(o),o}),{manual:!0}),{data:k,run:N,loading:T}=(0,a.Z)((0,o._)(function*(){return(yield p.bV.CheckBotInReviewWhiteList({space_id:u,bot_id:b})).in_white_list}),{manual:!0}),{runAsync:Z,loading:A}=(0,a.Z)((0,o._)(function*(){var e;x&&(null===(e=i.connector_info)||void 0===e?void 0:e.id)&&(yield p.bV.RollbackBot({space_id:u,bot_id:b,connector_ids:[i.connector_info.id],commit_version:x.commit_version,bot_version:x.bot_version,publish_id:_}),d.FN.success(s.o.t("bmv_rollback_successful")),null==m||m(),v(!1))}),{manual:!0});return{open:()=>{v(!0),w(),N(),f((0,ef.x0)())},node:(0,n.jsx)(d.u_,{size:"medium",visible:h,title:s.o.t("bmv_confirm_the_rollback_of_the_online_version?"),onCancel:()=>v(!1),okButtonProps:{type:"danger",disabled:j||T||!x,loading:A},okText:s.o.t("bmv_rollback"),onOk:()=>{r.find(e=>e.publish_version_type===c.E6.Gray)?d.u_.info({content:s.o.t("bmv_there_is_currently_the_dark_launch_version_running__and_the_rollback_will_affect"),onOk:Z}):Z()},keepDOM:!1,children:(0,n.jsxs)(d.yC,{spinning:j||T,children:[(0,n.jsx)("div",{children:s.o.t("bmv_please_proceed_with_caution_and_roll_back_to_the_historical_online_version_")}),!k&&(0,n.jsx)("div",{dangerouslySetInnerHTML:{__html:s.o.t("bmv_the_rollback_operation_will_be_reviewed_by_the_release__and_the_version_will_onl")}}),(0,n.jsxs)("div",{className:"my-2",children:[(0,n.jsx)(d.l0.Label,{required:!0,children:s.o.t("bmv_select_the_rollback_version")}),(0,n.jsxs)("div",{className:"flex flex-row items-center",children:[(0,n.jsx)(ew,{className:"flex-1",initVersionData:y,onChangeVersionData:g,emptyString:s.o.t("bmv_please_select_a_rollback_version"),versionDrawerProps:{connectorId:null===(t=i.connector_info)||void 0===t?void 0:t.id,tabList:[{key:c.j5.Online,title:"devops_publish_multibranch_Publish",value:[c.j5.Online]}]}},null==y?void 0:y.commit_version),i.connector_info?(0,n.jsx)(ek,{className:"shrink-0 ml-2",partConnector:i.connector_info,commitVersion:null==x?void 0:x.commit_version,disabled:!x}):null]})]})]})})}}({data:t,tableDataSource:r,onOperateSuccess:i}),{runAsync:y}=(0,a.Z)((0,o._)(function*(){t.rule_id&&(yield p.bV.InactivateMultiVersion({rule_id:t.rule_id,bot_id:h,space_id:b}),d.FN.success(s.o.t("bmv_the_offline_was_successful_")),null==i||i())}),{manual:!0,onSuccess:()=>{(0,M.Gg)(M.Kg.bot_ppe_offline,{environment:"".concat("cn","-").concat("release","-").concat("online"),workspace_id:b,bot_id:h,status:0,ppe_lane:(null==t?void 0:t.x_tt_env)||""})},onError:e=>{(0,M.Gg)(M.Kg.bot_ppe_offline,{environment:"".concat("cn","-").concat("release","-").concat("online"),workspace_id:b,bot_id:h,status:1,ppe_lane:(null==t?void 0:t.x_tt_env)||"",error_message:JSON.stringify(e)})}}),w=(0,C.useMemo)(()=>{var e=!(null==m?void 0:m.manageable)&&!(null==m?void 0:m.operateable)&&u,i={title:s.o.t("bmv_view_diff"),onClick:()=>{t.connector_info&&_(t.connector_info,t.commit_version)}},o={title:s.o.t("bmv_publish_to_online"),disable:e,onClick:()=>{v("/space/".concat(b,"/bot/").concat(h,"/publish/").concat(t.commit_version))}},n={title:s.o.t("bmv_view_version"),onClick:()=>{window.open("/space/".concat(b,"/bot/").concat(h,"?version=").concat(t.commit_version).concat(t.publish_version_type===c.E6.Gray?"&coze_extension_from_type=gray_version":""),"_blank")}},l={title:s.o.t("bmv_take_offline"),type:"danger",disable:e,onClick:()=>{d.u_.error({title:s.o.t("bmv_confirm_take_offline_pre_release"),content:s.o.t("bmv_offline_unaccessible_warning"),onOk:y,okText:s.o.t("bmv_take_offline"),okType:"danger"})}};switch(t.publish_version_type){case c.E6.PrePublish:return[i,o,n,l];case c.E6.Gray:return[i,o,n,{title:s.o.t("bmv_modify_grey_release_policy"),disable:e,onClick:()=>{v("/space/".concat(b,"/bot/").concat(h,"/publish-gray"),{state:{data:t}})}},l];case c.E6.Online:return[n,...t.support_rollback?[{title:s.o.t("bmv_rollback_release"),type:"danger",disable:e,onClick:()=>{x()}}]:[]]}},[t,null==m?void 0:m.manageable,null==m?void 0:m.operateable]);return w?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.Lt,{position:"bottomLeft",render:(0,n.jsx)(d.Lt.Menu,{children:w.map((e,t)=>(0,n.jsx)(d.Lt.Item,{onClick:e.onClick,disabled:e.disable,type:e.type,children:e.title},t))}),children:(0,n.jsx)(d.y3,{theme:"borderless",size:"small",icon:(0,n.jsx)(I.NKR,{size:"small"})},"more")}),f,g]}):null}var eT=i("16167"),eZ={};eZ.styleTagTransform=j(),eZ.setAttributes=x(),eZ.insert=_().bind(null,"head"),eZ.domAPI=h(),eZ.insertStyleElement=y(),u()(eT.Z,eZ);var eA=eT.Z&&eT.Z.locals?eT.Z.locals:void 0;function eC(e){var t,{data:i,onOperateSuccess:o,collaboratorStatus:r,inCollaboration:a}=e,{space_id:p="",bot_id:m=""}=(0,l.useParams)(),{connectorInfo:u,versions:b}=i,[h,v]=(0,C.useState)(!1),_=(null==b?void 0:null===(t=b[0])||void 0===t?void 0:t.publish_version_type)===c.E6.PrePublish,f=[{title:(0,n.jsxs)("div",{className:"flex flex-row items-center",children:[u.name,(0,n.jsx)(d.y3,{className:"ml-1",theme:"borderless",type:"tertiary",icon:(0,n.jsx)(I.HlI,{}),onClick:()=>{(0,M.Gg)(M.Kg.bot_history_show,{environment:"".concat("cn","-").concat("release","-").concat("online"),workspace_id:p,bot_id:m,status:0,from:1,channel:_?1:2}),v(!0)}})]}),width:220,render:(e,t)=>{var i=void 0;switch(t.publish_version_type){case c.E6.PrePublish:i=s.o.t("bmv_lane_{placeholder1}",{placeholder1:t.x_tt_env});break;case c.E6.Gray:i=s.o.t("bmv_the_dark_launch_version");break;case c.E6.Online:i=s.o.t("bmv_official_version")}return(0,n.jsxs)(d.T,{style:{width:"100%"},children:[(0,n.jsx)(d.qE,{size:"small",shape:"square",src:u.icon,className:eA["platform-avatar"]}),(0,n.jsx)(d.ZT.Text,{className:eA["platform-name"],ellipsis:{showTooltip:{opts:{content:i,style:{wordWrap:"break-word"}}}},children:i})]})}},{title:s.o.t("bmv_version_description"),dataIndex:"remark",ellipsis:{showTitle:!1},render:e=>(0,n.jsx)(d.ZT.Text,{ellipsis:{showTooltip:!0},children:e})},{title:s.o.t("bmv_version_number"),dataIndex:"bot_version",render:e=>e&&(0,n.jsx)(d.Vp,{children:e})},{title:s.o.t("bmv_publisher"),dataIndex:"creator",render:e=>(0,n.jsxs)("div",{className:"flex flex-row items-center",children:[(0,n.jsx)("img",{className:eA["user-avatar"],src:null==e?void 0:e.avatar_url},null==e?void 0:e.id),(0,n.jsx)("span",{children:null==e?void 0:e.name})]})},{title:s.o.t("bmv_Publish_time_1"),dataIndex:"create_time",render:e=>L(e,!0)},{title:s.o.t("bmv_workflow_detail_node_output_action"),render:(e,t)=>(0,n.jsx)(eN,{collaboratorStatus:r,data:t,tableDataSource:b,onOperateSuccess:o,inCollaboration:a})}];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.$,{tableProps:{dataSource:b,columns:f,className:R()(eA.table)},wrapperClassName:eA["table-wrapper"]}),(0,n.jsx)(V,{type:"history",connectorId:u.id,tabList:[(0,A._)((0,Z._)({},S[_?1:2]),{title:"".concat(u.name," ").concat(_?s.o.t("bmv_ppe_lane"):""," ").concat(s.o.t("bmv_card_builder_history_menu_release"))})],visible:h,onCancel:()=>v(!1),title:s.o.t("bmv_historical_version")})]})}function eO(){var e,t,{space_id:i="",bot_id:m=""}=(0,l.useParams)(),u=(0,l.useLocation)(),{data:b,loading:h,refresh:v}=(0,a.Z)((0,o._)(function*(){var e=yield p.bV.ListCurrentPublishVersions({space_id:i,bot_id:m});return(0,r.Z)(e.versions,e=>e.publish_version_type===c.E6.PrePublish).map(e=>{var t=[];return e.forEach(e=>{var i;if(null===(i=e.connector_info)||void 0===i?void 0:i.id){var o=e.connector_info.id,n=t.find(e=>{var t;return(null===(t=e.connectorInfo)||void 0===t?void 0:t.id)===o});n?n.versions.push(e):(n={connectorInfo:e.connector_info,versions:[e]},t.push(n))}}),t})})),{data:_}=(0,a.Z)((0,o._)(function*(){return(yield p.pr.GetDraftBotInfoAgw({bot_id:m})).data})),f=e=>(null==e?void 0:e.length)?e.map(e=>(0,n.jsx)(eC,{collaboratorStatus:null==_?void 0:_.collaborator_status,inCollaboration:!!(null==_?void 0:_.in_collaboration),data:e,onOperateSuccess:v})):(0,n.jsx)(d.YZ,{empty:{title:s.o.t("bmv_workflow_detail_node_nodata")}});return(0,n.jsx)(d.yC,{wrapperClassName:T["publish-wrapper"],spinning:h,children:(0,n.jsxs)(d.mQ,{defaultActiveKey:(null===(e=u.state)||void 0===e?void 0:e.tab)||"0",children:[(0,n.jsx)(d.mQ.TabPane,{tab:s.o.t("bmv_pre_release_environment"),itemKey:"0",children:f(null==b?void 0:b[0])}),(0,n.jsx)(d.mQ.TabPane,{tab:s.o.t("bmv_online_environment"),itemKey:"1",children:(0,n.jsxs)("div",{className:"mb-3",children:[(null==b?void 0:null===(t=b[1])||void 0===t?void 0:t.length)?(0,n.jsxs)("div",{className:T["published-connector"],children:[s.o.t("bmv_published_cnt_channels",{cnt:b[1].length}),b[1].map(e=>(0,n.jsx)("img",{className:T["connector-icon"],src:e.connectorInfo.icon},e.connectorInfo.id))]}):null,f(null==b?void 0:b[1])]})})]})})}var eR=i("537659"),eM=i("675614"),eI=i("347281"),eS=i("78420");function eD(e){var{space_id:t="",bot_id:i=""}=(0,l.useParams)(),n=(0,D.c2)(e=>e.inCollaboration),[r]=(0,q.V)(),d=!!(null==r?void 0:r["bot.devops.merge_prompt_diff"]),{data:c,loading:m}=(0,a.Z)((0,o._)(function*(){var[{publish_connector_list:e},{allowed_connectors:o}]=yield Promise.all([p.nA.PublishConnectorList({bot_id:i,space_id:t}),p.bV.GetMultiVersionAllowedConnectors({bot_id:i,space_id:t})]);if(e&&o){var n=[];return e.forEach(e=>{var{id:t}=e,i=null==o?void 0:o.find(e=>e.id===t);i&&n.push((0,Z._)({hasPublished:i.has_published},e))}),n}})),{data:u,loading:b}=(0,a.Z)((0,o._)(function*(){if(c){var l;return yield Promise.all(c.map((l=(0,o._)(function*(o){var{data:l}=yield p.bV.BotDiff({space_id:t,bot_id:i,left:{branch:P.I0.Publish,connector_id:o.id},right:n?{branch:P.I0.Base,version_id:e}:{branch:P.I0.PersonalDraft},filter:{Isolation:P.sR.Publish},template_key:d?"diff_template_when_publish_v2":""});if(!l)throw Error(s.o.t("bmv_get_release_channel_exception__please_refresh_and_try_again"));return(0,A._)((0,Z._)({},o),{conflictInfo:{diffList:l.diff_display_node||[],isConflicting:!(0,eS.Z)(l.diff_display_node)}})}),function(e){return l.apply(this,arguments)})))}}),{ready:!!(null==c?void 0:c.length),refreshDeps:[e]});return{platformList:u,platformListLoading:m||b}}var eK=i("299846");function eB(){var{space_id:e=""}=(0,l.useParams)(),{space:t}=(0,eK.$_)(e);return!1}var eE=atob("aHR0cHM6Ly9ieXRlZGFuY2UubGFya29mZmljZS5jb20vd2lraS9ZNjRFdzZCTHRpQjM2OGtQcjhtY2dvNVpuZmIjcGFydC1TVUtCZHJvUG9vcXp4eHhQYlMzY0dMam9uTmM="),eL=atob("aHR0cHM6Ly9ieXRlZGFuY2UubGFya29mZmljZS5jb20vd2lraS9ZNjRFdzZCTHRpQjM2OGtQcjhtY2dvNVpuZmIjUVNJcGQ2N0FUb1R2RU14YzBSOWNVc29vbkNn"),eF=e=>{var t,{record:i}=e,[o,l]=(0,C.useState)(!1),{config_status:r,connector_status:a,hasPublished:c,conflictInfo:p}=i;return r===Q._6.NotConfigured?t=s.o.t("bot_publish_disable_check_tip"):a===Q.pV.InReview?t=s.o.t("bot_publish_in_review_disable_check_tip"):c?(null==p?void 0:p.isConflicting)&&(t=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{children:s.o.t("bmv_unable_to_pre_release_due_to_incompatible_changes")}),(0,n.jsx)("span",{className:"inline-block font-medium text-sm text-[#3c7ae4] cursor-pointer",onClick:()=>l(!0),children:s.o.t("bmv_view_incompatible_changes")})]})):t=s.o.t("bmv_please_release_the_official_version_before_releasing_it_"),t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.u,{content:t,position:"topLeft",children:(0,n.jsx)("span",{className:"w-4 h-4 absolute top-0.5 left-0"})}),p?(0,n.jsx)(d.u_,{title:s.o.t("bmv_incompatible_modifications"),visible:o,centered:!0,onOk:()=>{window.open(eE)},okText:s.o.t("bmv_view_solutions"),onCancel:()=>l(!1),children:(0,n.jsx)(eh,{diffList:p.diffList})}):null]}):null},ez=i("116576"),eG={};eG.styleTagTransform=j(),eG.setAttributes=x(),eG.insert=_().bind(null,"head"),eG.domAPI=h(),eG.insertStyleElement=y(),u()(ez.Z,eG);var eV=ez.Z&&ez.Z.locals?ez.Z.locals:void 0,eq=e=>{var{showText:t,tip:i}=e;return(0,n.jsx)(d.u,{content:i,children:t?(0,n.jsxs)(d.Vp,{className:eV["orange-tag"],color:"orange",children:[t,(0,n.jsx)(I.Us8,{})]}):(0,n.jsx)(I.Us8,{className:eV["grey-info"]})})},eP=e=>{var{record:t,commitVersion:i}=e;if(t.config_status===Q._6.Disconnected)return(0,n.jsx)(d.T,{className:eV["config-status"],children:(0,n.jsx)(eq,{showText:s.o.t("bot_publish_columns_status_disconnected"),tip:s.o.t("bot_publish_token_expired_notice",{platform:t.name})})});var{config_status:o,bind_type:l}=t,r=o===Q._6.Configured,a=o===Q._6.Configured?s.o.t("bot_publish_columns_status_configured"):s.o.t("bot_publish_columns_status_not_configured"),c=o===Q._6.Configured?s.o.t("bot_publish_columns_status_authorized"):s.o.t("bot_publish_columns_status_unauthorized"),p=l===Q.P0.KvBind?a:c;return(0,n.jsxs)(d.T,{className:R()(eV["config-status"],"justify-between w-full"),children:[(0,n.jsx)(d.Vp,{color:r?"green":"grey",children:p}),(0,n.jsx)("div",{className:"mr-4",children:(0,n.jsx)(ek,{record:t,commitVersion:i})})]})};function eQ(e){var{loading:t,dataSource:i,value:o,onChange:l,commitVersion:a,disabled:c}=e,[p,m]=(0,C.useState)([]),[u,b]=(0,C.useMemo)(()=>(0,r.Z)(null!=i?i:[],e=>(null==e?void 0:e.bind_type)===Q.P0.ApiBind||(null==e?void 0:e.bind_type)===Q.P0.WebSDKBind),[i]),h=e=>[{title:(0,n.jsx)("div",{className:"-ml-8",children:"connector"===e?s.o.t("bot_publish_columns_platform"):s.o.t("api")}),width:220,render:e=>(0,n.jsxs)(d.T,{style:{width:"100%"},children:[(0,n.jsx)(d.qE,{size:"small",shape:"square",src:e.icon,className:eV["platform-avater"]}),(0,n.jsx)(d.ZT.Text,{className:eV["platform-name"],ellipsis:{showTooltip:{opts:{content:null==e?void 0:e.name,style:{wordWrap:"break-word"}}}},children:null==e?void 0:e.name}),(null==e?void 0:e.desc)?(0,n.jsx)(d.u,{content:null==e?void 0:e.desc,children:(0,n.jsx)(d._3,{icon:(0,n.jsx)(I.aUG,{style:{color:"#1D1C2399"}})})}):null]})},{render:e=>(0,n.jsx)(eP,{record:e,commitVersion:a})}],v={selectedRowKeys:o,onChange:e=>{null==l||l(e)},getCheckboxProps:e=>({disabled:c||J(e),id:e.id,children:(0,n.jsx)(eF,{record:e})})};return(0,C.useEffect)(()=>{!t&&o&&setTimeout(()=>m([]),100)},[t]),(0,n.jsxs)(d.yC,{spinning:t,children:[!!b.length&&(0,n.jsx)(d.$,{tableProps:{columns:h("connector"),dataSource:b,rowSelection:(0,Z._)({disabled:c||Y(b)},v),className:R()(eV["publish-table"]),rowKey:"id"},wrapperClassName:eV["publish-table-wrapper"]}),!!u.length&&(0,n.jsx)(d.$,{tableProps:{columns:h("api"),dataSource:u,rowSelection:(0,Z._)({disabled:c||Y(u)},v),className:R()(eV["publish-table"]),rowKey:"id"},wrapperClassName:eV["publish-table-wrapper"]})]})}function eY(){var e=(0,l.useNavigate)(),{space_id:t="",bot_id:i=""}=(0,l.useParams)(),r=(0,eR.G)(e=>e.name),[m]=(0,C.useState)(()=>(0,ef.x0)()),[u,b]=(0,C.useState)(),[h,v]=(0,C.useState)(""),_="ppe_"+h,[f,x]=(0,C.useState)(),g=!!h&&!!(null==f?void 0:f.length),{platformList:y,platformListLoading:w}=eD(u),{loading:j}=(0,a.Z)((0,o._)(function*(){var e,{params_map:o}=yield p.bV.GetMultiVersionLatestParams({bot_id:i,space_id:t});v((null!==(e=null==o?void 0:o[c.IA.XTtEnv])&&void 0!==e?e:"").slice(4)||"")})),{run:k,loading:N}=(0,a.Z)((0,o._)(function*(){if(!!g){var{active_rules:o=[]}=yield p.bV.GetMultiVersionActiveList({space_id:t,bot_id:i}),n=function(e){var{rules:t,selectedPlatforms:i,versionType:o,versionValue:n}=e,l=i.map(e=>[e,o,n]),r=t.map(e=>e?function(e){var{version_type:t,x_tt_env:i="",version_identifier:o="",connector_info:n}=e,{id:l=""}=n||{};return l&&t?[l,t,t===c.IA.XTtEnv?i:o]:null}(e):null).filter(Boolean);return(0,eM.Z)([...l,...r],eI.Z).length}({rules:o,selectedPlatforms:f,versionType:c.IA.XTtEnv,versionValue:_});if(n>8){d.FN.error(s.o.t("bmv_{placeholder0}_there_are_more_than_8_lane_versions__please_modify_the_lane_name_",{placeholder0:"PPE"}));return}yield p.bV.PublishMultiVersion({publish_id:m,bot_id:i,space_id:t,connector_ids:f,version_type:c.IA.XTtEnv,x_tt_env:_,commit_version:u}),d.FN.success(s.o.t("bmv_pre_release_success_ppe_lane")),setTimeout(()=>{e("/space/".concat(t,"/bot/").concat(i,"/publish-detail"),{replace:!0,state:{tab:"0"}})},1e3)}}),{manual:!0,onSuccess:()=>{(0,M.Gg)(M.Kg.bot_ppe_release_event,{environment:"".concat("cn","-").concat("release","-").concat("online"),workspace_id:t,bot_id:i,status:0,ppe_lane:_,is_incompatible:!1})},onError:e=>{(0,M.Gg)(M.Kg.bot_ppe_release_event,{environment:"".concat("cn","-").concat("release","-").concat("online"),workspace_id:t,bot_id:i,status:1,ppe_lane:_,error_message:JSON.stringify(e),is_incompatible:!1})}});return(0,n.jsxs)(d._n,{title:"".concat(r," - Publish - PPE"),children:[(0,n.jsx)(d._n.Header,{className:T["publish-header"],children:(0,n.jsxs)("div",{className:T.header,children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(d._3,{icon:(0,n.jsx)(I.D6v,{}),type:"tertiary",onClick:()=>{e(-1)}}),(0,n.jsx)("div",{className:T.exitbtn,children:s.o.t("card_builder_releaseBtn_release_btn")})]}),(0,n.jsx)(d.y3,{theme:"solid",disabled:!g,loading:N,onClick:k,children:s.o.t("bmv_pre_release_to_lane")})]})}),(0,n.jsx)(d._n.Content,{className:T["publish-content"],children:(0,n.jsxs)("div",{className:T["publish-wrapper"],children:[(0,n.jsx)(d.l0.Label,{required:!0,className:T["publish-title"],children:s.o.t("bmv_select_release_version")}),(0,n.jsx)(ew,{value:u,onChange:e=>b(e)}),(0,n.jsxs)(d.yC,{spinning:j,children:[(0,n.jsx)(d.l0.Label,{required:!0,className:T["publish-title"],children:s.o.t("bmv_ppe_lane")}),(0,n.jsx)(d.II,{addonBefore:"ppe_",value:h,onChange:v})]}),(0,n.jsx)(d.l0.Label,{required:!0,className:T["publish-title"],children:s.o.t("bot_publish_select_title")}),(0,n.jsx)(eQ,{loading:w,dataSource:y,value:f,onChange:x,commitVersion:u})]})})]})}function eJ(){return eB()?(0,n.jsx)(eY,{}):null}function eU(){var e,t,i,r,m,u,b,h,v,_,f=(0,l.useNavigate)(),{space_id:x="",bot_id:g=""}=(0,l.useParams)(),y=null===(e=(0,l.useLocation)().state)||void 0===e?void 0:e.data,w=!!y,j=(0,eR.G)(e=>e.name),[k]=(0,C.useState)(()=>(0,ef.x0)()),[N,Z]=(0,C.useState)(),[A,O]=(0,C.useState)(null!==(v=null==y?void 0:null===(i=y.gray_config)||void 0===i?void 0:null===(t=i.allow_list)||void 0===t?void 0:t.values)&&void 0!==v?v:[]),[R,S]=(0,C.useState)(null!==(_=null==y?void 0:null===(m=y.gray_config)||void 0===m?void 0:null===(r=m.block_list)||void 0===r?void 0:r.values)&&void 0!==_?_:[]),[D,K]=(0,C.useState)(Number(null==y?void 0:null===(b=y.gray_config)||void 0===b?void 0:null===(u=b.bucket)||void 0===u?void 0:u.in_gray)||0),[B,E]=(0,C.useState)((null==y?void 0:null===(h=y.connector_info)||void 0===h?void 0:h.id)?[y.connector_info.id]:[]),L=!!(null==B?void 0:B.length),{platformList:F,platformListLoading:z}=eD(N),{run:G,loading:V}=(0,a.Z)((0,o._)(function*(){if(!!L){var e={type:c.je.UID},t={bucket:{field:e,in_gray:D,size:1e4},allow_list:{field:e,values:A},block_list:{field:e,values:R}};w?(yield p.bV.UpdateGrayIDList({rule_id:y.rule_id,space_id:x,bot_id:g,gray_config:t}),d.FN.success(s.o.t("bmv_modified_grey_release_successfully"))):(yield p.bV.PublishMultiVersion({publish_id:k,bot_id:g,space_id:x,connector_ids:B,version_type:c.IA.Gray,commit_version:N,gray_config:t}),d.FN.success(s.o.t("bmv_grey_release"))),(0,M.Gg)(M.Kg.bot_gray_publish,{bot_id:g,space_id:x,host:window.location.host,type:w?"edit":"create"}),setTimeout(()=>{f("/space/".concat(x,"/bot/").concat(g,"/publish-detail"),{replace:!0,state:{tab:"1"}})},1e3)}}),{manual:!0});return(0,n.jsxs)(d._n,{title:"".concat(j," - Publish - Gray"),children:[(0,n.jsx)(d._n.Header,{className:T["publish-header"],children:(0,n.jsxs)("div",{className:T.header,children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(d._3,{icon:(0,n.jsx)(I.D6v,{}),type:"tertiary",onClick:()=>{f(-1)}}),(0,n.jsx)("div",{className:T.exitbtn,children:s.o.t("card_builder_releaseBtn_release_btn")})]}),(0,n.jsx)(d.y3,{theme:"solid",disabled:!L,loading:V,onClick:G,children:w?s.o.t("bmv_modify_grey_release"):s.o.t("bmv_pre_release_to_gray")})]})}),(0,n.jsx)(d._n.Content,{className:T["publish-content"],children:(0,n.jsxs)("div",{className:T["publish-wrapper"],children:[(0,n.jsx)(d.l0.Label,{required:!0,className:T["publish-title"],children:s.o.t("bmv_select_release_version")}),(0,n.jsx)(ew,{disabled:w,initVersionData:y,value:N,onChange:e=>Z(e)}),(0,n.jsx)(d.l0.Label,{required:!0,className:T["publish-title"],style:{display:"inline-flex"},extra:(0,n.jsx)(d.J2,{position:"right",showArrow:!0,className:"!py-2 !px-3 rounded-lg",content:s.o.t("bmv_gray_publish_help_tooltip",{link:(0,n.jsx)(d.ZT.Text,{link:{href:eL,target:"_blank"},className:"!text-blue italic",children:s.o.t("bmv_gray_doc")})}),children:(0,n.jsx)(I.eQN,{className:"cursor-pointer select-none text-[#A7A9B0]"})}),children:s.o.t("bmv_configure_gray_rule")}),(0,n.jsx)("div",{className:"text-sm font-medium mb-2",children:s.o.t("bmv_traffic_proportion")}),(0,n.jsx)(d.Rn,{value:D/1e4*100,onChange:e=>K(Math.floor(1e4*Number(e)/100)),precision:2,max:100,min:0,suffix:"%"}),(0,n.jsx)("div",{className:"text-sm font-medium mt-3",children:s.o.t("bmv_white_list")}),(0,n.jsx)(d.EG,{className:"mt-2",value:A,placeholder:s.o.t("bmv_id_list_placeholder"),onChange:O,separator:" ",addOnBlur:!0}),(0,n.jsx)("div",{className:"text-sm mt-2",children:s.o.t("bmv_a_total_of_{num}_whitelisted_users",{num:A.length})}),(0,n.jsx)("div",{className:"text-sm font-medium mt-3",children:s.o.t("bmv_black_list")}),(0,n.jsx)(d.EG,{className:"mt-2",value:R,placeholder:s.o.t("bmv_id_list_placeholder"),onChange:S,separator:" ",addOnBlur:!0}),(0,n.jsx)("div",{className:"text-sm mt-2",children:s.o.t("bmv_total_count_of_black_list",{num:R.length})}),(0,n.jsx)(d.l0.Label,{required:!0,className:T["publish-title"],children:s.o.t("bot_publish_select_title")}),(0,n.jsx)(eQ,{disabled:w,loading:z,dataSource:F,value:B,onChange:E,commitVersion:N})]})})]})}function eX(){return eB()?(0,n.jsx)(eU,{}):null}var eH=i("651932"),eW={};eW.styleTagTransform=j(),eW.setAttributes=x(),eW.insert=_().bind(null,"head"),eW.domAPI=h(),eW.insertStyleElement=y(),u()(eH.Z,eW);var e$=eH.Z&&eH.Z.locals?eH.Z.locals:void 0;function e0(e){var t,{from:i}=e,{space_id:r="",bot_id:a=""}=(0,l.useParams)(),[c,m]=(0,C.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.y3,{className:e$["history-btn"],icon:(0,n.jsx)(I.HlI,{}),onClick:()=>{(0,M.Gg)(M.Kg.bot_history_show,{environment:"".concat("cn","-").concat("release","-").concat("online"),workspace_id:r,bot_id:a,status:0,from:i,channel:0}),m(!0)},"data-test-id":"bot-edit-history-switch-button"}),(0,n.jsx)(V,{type:"history",visible:c,onCancel:()=>m(!1),title:s.o.t("bmv_historical_version"),submit:{title:s.o.t("bmv_load_to_draft"),onSubmit:(t=(0,o._)(function*(e){e.commit_version&&(yield p.nA.RevertDraftBot({space_id:r,bot_id:a,version:e.commit_version}),d.FN.success(s.o.t("bmv_loaded_successfully")),0===i&&setTimeout(()=>{window.location.reload()},500))}),function(e){return t.apply(this,arguments)})}})]})}var e1=e=>{var[t,i]=(0,C.useState)(!1);return(0,C.useEffect)(()=>{var t=window.matchMedia("(min-width: ".concat(e,"px)"));i(t.matches);var o=e=>i(e.matches);return t.addEventListener("change",o),()=>{t.removeEventListener("change",o)}},[]),t};function e2(){var e=(0,l.useNavigate)(),{space_id:t="",bot_id:i=""}=(0,l.useParams)(),o=e1(1600);return(0,n.jsx)(d.y3,{icon:(0,n.jsx)(I.FiN,{}),onClick:()=>{(0,M.Gg)(M.Kg.bot_deployment_details,{environment:"".concat("cn","-").concat("release","-").concat("online"),workspace_id:t,bot_id:i,status:0}),e("/space/".concat(t,"/bot/").concat(i,"/publish-detail"))},children:o?s.o.t("bmv_deployment_details"):null})}var e4=i("545145"),e6=e=>{var{inCollaboration:t,disableDeploy:i,spaceId:o,botId:r,type:a,btnText:c,handlePublish:p,customStyle:m,loading:u,collaboratorStatus:b}=e,h=(0,l.useNavigate)(),[v,{setTrue:_,setFalse:f}]=(0,e4.Z)(!1),x=()=>((null==b?!void 0:!b.operateable)||(null==b?!!void 0:!!b.manageable)||(null==b?!!void 0:!!b.commitable))&&((null==b?!!void 0:!!b.commitable)&&(null==b?!void 0:!b.operateable)&&(null==b?!void 0:!b.manageable)||i);return(0,n.jsx)(d.Lt,{trigger:"custom",position:"bottomRight",visible:v,onClickOutSide:f,render:(0,n.jsxs)(d.Lt.Menu,{children:[(0,n.jsx)(d.Lt.Item,{disabled:x(),onClick:()=>{(0,M.Gg)(M.Kg.bot_pre_release_ppe,{environment:"".concat("cn","-").concat("release","-").concat("online"),workspace_id:o||"",bot_id:r||"",status:0}),h("/space/".concat(o,"/bot/").concat(r,"/publish-ppe"))},children:s.o.t("bmv_pre_release_ppe_lane")}),(0,n.jsx)(d.Lt.Item,{disabled:x(),onClick:()=>{h("/space/".concat(o,"/bot/").concat(r,"/publish-gray"))},children:s.o.t("bmv_pre_release_gray_lane")})]}),children:(0,n.jsx)($.SplitButton,{theme:"solid",type:a,loading:u,style:m,disabled:x(),onClick:()=>{if(!e3({inCollaboration:t,collaboratorStatus:b,navigate:h,botId:r,spaceId:o}))p()},onIconClick:_,children:(0,n.jsx)("div",{className:"min-w-[66px]",children:c})})})},e3=e=>{var{inCollaboration:t,collaboratorStatus:i,spaceId:o,botId:n,navigate:l}=e;return!!t&&!(null==i?void 0:i.commitable)&&(null==i?!!void 0:!!i.operateable)&&!i.manageable&&(l("/space/".concat(o,"/bot/").concat(n,"/publish")),!0)}},14014:function(e,t,i){i.d(t,{Dq:function(){return p},E6:function(){return u},IA:function(){return b},Wu:function(){return d},j5:function(){return m},je:function(){return c}});var o,n,l,r,a,s,d=((o={})[o.Undefined=0]="Undefined",o[o.Publish=1]="Publish",o[o.Modify=2]="Modify",o[o.Offline=3]="Offline",o[o.Rollback=4]="Rollback",o);var c=((n={})[n.Undefined=0]="Undefined",n[n.UID=1]="UID",n[n.DID=2]="DID",n[n.CustomKey=3]="CustomKey",n);var p=((l={})[l.Undefined=0]="Undefined",l[l.Valid=1]="Valid",l[l.InValid=2]="InValid",l);var m=((r={})[r.Undefined=0]="Undefined",r[r.Commit=1]="Commit",r[r.Online=2]="Online",r[r.PrePublish=3]="PrePublish",r[r.Gray=4]="Gray",r[r.Rollback=5]="Rollback",r);var u=((a={})[a.Undefined=0]="Undefined",a[a.Online=1]="Online",a[a.PrePublish=2]="PrePublish",a[a.Gray=3]="Gray",a);var b=((s={})[s.UnDefined=0]="UnDefined",s[s.XTtEnv=1]="XTtEnv",s[s.VersionIdentifier=2]="VersionIdentifier",s[s.Gray=3]="Gray",s)},16167:function(e,t,i){var o=i(160052),n=i.n(o),l=i(570717),r=i.n(l)()(n());r.push([e.id,'.table-wrapper--JFtmjv7_4xET_2Dc{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;margin-bottom:24px}.table--oAJfMOJIrO4hTe53{margin-top:0}.table--oAJfMOJIrO4hTe53 .semi-table-container{background:#fff;border:1px solid rgba(29,28,35,.12);border-radius:12px}.table--oAJfMOJIrO4hTe53 .semi-table-thead>.semi-table-row>.semi-table-row-head:first-child .semi-table-selection-wrap{display:none}.table--oAJfMOJIrO4hTe53 .semi-table-header{border-top-left-radius:12px;border-top-right-radius:12px}.table--oAJfMOJIrO4hTe53 .semi-table-body{border-bottom-left-radius:12px;border-bottom-right-radius:12px}.table--oAJfMOJIrO4hTe53 .semi-table-tbody>.semi-table-row:hover>.semi-table-row-cell{border-radius:0!important}.table--oAJfMOJIrO4hTe53 .semi-table-thead>.semi-table-row>.semi-table-row-head{background-color:transparent;border-radius:unset;height:40px;padding:0;padding-left:16px}.table--oAJfMOJIrO4hTe53 .semi-table-row{background-color:#fff!important}.table--oAJfMOJIrO4hTe53 .semi-table-tbody .semi-table-row .semi-table-row-cell{line-height:14px;padding:10px 0!important;padding-left:16px!important}.table--oAJfMOJIrO4hTe53 .semi-table-tbody>.semi-table-row:last-child:hover>.semi-table-row-cell{border-bottom:none!important}.table--oAJfMOJIrO4hTe53 .semi-table .semi-table-selection-wrap{width:16px}.table--oAJfMOJIrO4hTe53 .semi-table-row:hover>.semi-table-row-cell:before{content:"";height:0;width:100%}.table--oAJfMOJIrO4hTe53 .semi-table-tbody>.semi-table-row:last-child>.semi-table-row-cell{border-bottom:none}.platform-avatar--czqT0mf20nAFxBAk{background:#fff;border:1px solid var(--light-usage-fill-color-fill-1,rgba(46,46,56,.08));border-radius:4px;flex-shrink:0;height:26px;width:26px}.platform-name--dCJrCMwzIvDHNsPz{color:var(--light-usage-text-color-text-0,#1c1d23);font-size:14px!important;font-weight:600!important;line-height:20px;max-width:140px!important}.user-avatar--AHdEZTBdaDMxAOu8{border-radius:50%;height:16px;margin-right:4px;width:16px}',""]),r.locals={"table-wrapper":"table-wrapper--JFtmjv7_4xET_2Dc",tableWrapper:"table-wrapper--JFtmjv7_4xET_2Dc",table:"table--oAJfMOJIrO4hTe53","platform-avatar":"platform-avatar--czqT0mf20nAFxBAk",platformAvatar:"platform-avatar--czqT0mf20nAFxBAk","platform-name":"platform-name--dCJrCMwzIvDHNsPz",platformName:"platform-name--dCJrCMwzIvDHNsPz","user-avatar":"user-avatar--AHdEZTBdaDMxAOu8",userAvatar:"user-avatar--AHdEZTBdaDMxAOu8"},t.Z=r},651932:function(e,t,i){var o=i(160052),n=i.n(o),l=i(570717),r=i.n(l)()(n());r.push([e.id,".history-btn--iulyNANzp_wOrMXq{background-color:transparent!important;border:1px solid var(--light-usage-border-color-border-1,rgba(29,28,35,.12))!important;color:#1d1c2399!important}.history-btn--iulyNANzp_wOrMXq:hover{background-color:var(--semi-color-fill-1)!important;border:1px solid transparent!important}",""]),r.locals={"history-btn":"history-btn--iulyNANzp_wOrMXq",historyBtn:"history-btn--iulyNANzp_wOrMXq"},t.Z=r},50654:function(e,t,i){var o=i(160052),n=i.n(o),l=i(570717),r=i.n(l)()(n());r.push([e.id,".multiline-container--qmBUPDgCDNEO2vlR{display:grid;flex:1 1;grid-template-columns:100px 36px 100px;overflow:hidden}.multiline-text--Y4zYSkXzTRkFjBCH{white-space:pre-wrap;word-break:break-word}.diff-table--eNVQinYmi60lYh_V{margin-bottom:24px}.diff-table--eNVQinYmi60lYh_V .semi-table-row-head{background-color:#2e2e380a!important;border-bottom:1px solid var(--semi-color-border);font-size:12px;padding:4px 8px!important}.diff-table--eNVQinYmi60lYh_V .semi-table-row-cell{font-size:12px;padding:10px 8px!important}.diff-table--eNVQinYmi60lYh_V .tag-1--jgl7w6x8yAobNZwG{background-color:#d2f3d5;color:#3ec254}.diff-table--eNVQinYmi60lYh_V .tag-2--lfdPpBA1_YIX_rDB,.diff-table--eNVQinYmi60lYh_V .tag-4--UPhW83y8KgYhiXhJ{background-color:#ffe0d2;color:#ff441e}.diff-table--eNVQinYmi60lYh_V .tag-3--ha2D9Njl_6oRgGh7{background-color:#fff1cc;color:#ff9600}.cell-span--c6TRLoZxeLkAwkRy{font-size:12px!important;font-weight:400}.cell-span--c6TRLoZxeLkAwkRy,.property-tooltip--V9dho4G9FKM9V2fa{word-break:break-word}",""]),r.locals={"multiline-container":"multiline-container--qmBUPDgCDNEO2vlR",multilineContainer:"multiline-container--qmBUPDgCDNEO2vlR","multiline-text":"multiline-text--Y4zYSkXzTRkFjBCH",multilineText:"multiline-text--Y4zYSkXzTRkFjBCH","diff-table":"diff-table--eNVQinYmi60lYh_V",diffTable:"diff-table--eNVQinYmi60lYh_V","tag-1":"tag-1--jgl7w6x8yAobNZwG",tag1:"tag-1--jgl7w6x8yAobNZwG","tag-2":"tag-2--lfdPpBA1_YIX_rDB",tag2:"tag-2--lfdPpBA1_YIX_rDB","tag-4":"tag-4--UPhW83y8KgYhiXhJ",tag4:"tag-4--UPhW83y8KgYhiXhJ","tag-3":"tag-3--ha2D9Njl_6oRgGh7",tag3:"tag-3--ha2D9Njl_6oRgGh7","cell-span":"cell-span--c6TRLoZxeLkAwkRy",cellSpan:"cell-span--c6TRLoZxeLkAwkRy","property-tooltip":"property-tooltip--V9dho4G9FKM9V2fa",propertyTooltip:"property-tooltip--V9dho4G9FKM9V2fa"},t.Z=r},188946:function(e,t,i){var o=i(160052),n=i.n(o),l=i(570717),r=i.n(l)()(n());r.push([e.id,'.info-title--ieHIl_55Z0K_zfAU{font-size:16px;font-weight:600;margin-bottom:8px}.info-subtitle--afivkxdgVegLk5nE{font-size:14px;font-weight:500;margin-bottom:8px;margin-top:12px}.container--EoJncdcmm6YZ1k69{height:100%;width:100%}.diff-table--qKodF2JiyY8tyxpm{margin-bottom:24px}.diff-table--qKodF2JiyY8tyxpm .semi-table-row-head{background-color:#2e2e380a!important;border-bottom:1px solid var(--semi-color-border);font-size:12px;padding:4px 8px!important}.diff-table--qKodF2JiyY8tyxpm .semi-table-row-cell{font-size:12px;padding:10px 8px!important}.cell-span--AV839ylbQZo0N9kv{font-size:12px!important;font-weight:400}.cell-span--AV839ylbQZo0N9kv,.property-tooltip--NFSqoHffTAZCFdLB{word-break:break-word}.empty-container--mssDfIDKRnMG8TSG{align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center;min-height:200px}.empty-info--xd5VT4pwuq0rviXI{margin-top:4px}.multiline-container--QAvs4FSNCOUG3PKS{display:grid;flex:1 1;grid-template-columns:100px 36px 100px;overflow:hidden}.multiline-text--QSH7sBAHNEgFYr3q{white-space:pre-wrap;word-break:break-word}.list--jU0Yp7c4RICKxAVL{background-color:#fff!important;border:1px solid var(--Stroke-COZ-stroke-plus,rgba(6,7,9,.15))!important;border-radius:8px}.list--jU0Yp7c4RICKxAVL .semi-list-item{border-bottom:1px solid var(--Stroke-COZ-stroke-plus,rgba(6,7,9,.15))!important}.list--jU0Yp7c4RICKxAVL .semi-list-item:last-child{border-bottom:none!important}.list-item--hDu09y8h1ZUwj2tu{align-items:center;display:grid;grid-template-columns:280px 120px 1fr}.tag-1--Mb4M16NNEmA4xNkZ{background-color:#d2f3d5;color:#3ec254}.tag-2--aU80vFh7oJYC1hz3,.tag-4--kTZeOaTb2APw6wge{background-color:#ffe0d2;color:#ff441e}.tag-3--cgLZB6HHRJUnA6Ss{background-color:#fff1cc;color:#ff9600}.property-title--L_YZAPscLk_7Xc7U{color:var(--Fg-COZ-fg-primary,rgba(6,7,9,.8));font-size:12px;font-weight:500}.editor-container--ju2BI8FtcIPKgFw_{border:1px solid var(--Stroke-COZ-stroke-primary,rgba(6,7,9,.1));border-radius:8px;margin-top:20px;min-height:400px}.editor-header--oElBSb49E30vMps6{border-bottom:1px solid var(--Stroke-COZ-stroke-primary,rgba(6,7,9,.1));display:flex;width:100%}.editor-title--lTYh9LGeXboRSvgj{color:var(--Fg-COZ-fg-primary,rgba(6,7,9,.8));flex:1 1;font-size:14px;font-weight:500;overflow:hidden;padding:12px}.editor-divider--wxGdL8a1NzAd9QBz{color:var(--Stroke-COZ-stroke-primary,rgba(6,7,9,.1));height:46px;width:1px}.info-block--cjKvrvgqM4wGRxtF:not(:first-child){margin-top:24px}.mask--ZkEQoEC0JoMKvbRX{background:linear-gradient(to top,rgba(var(--coze-bg-2),1) 0,rgba(var(--coze-bg-2),0) 100%);bottom:80px;height:32px;pointer-events:none;position:absolute;width:100%}.editor--aDoRMtqZJpA23KAO{background-color:transparent;max-height:600px;min-height:400px}.editor--aDoRMtqZJpA23KAO .monaco-editor-background{background-color:#f9f9f9!important}.editor--aDoRMtqZJpA23KAO .monaco-editor .vertical{box-shadow:0 0 0 0 var(--guide-color) inset!important}.editor--aDoRMtqZJpA23KAO .margin{background-color:#f9f9f9!important}.editor--aDoRMtqZJpA23KAO .monaco-diff-editor.side-by-side .editor.modified{border-left:1px solid var(--Stroke-COZ-stroke-primary,rgba(6,7,9,.1));box-shadow:none!important}.editor--aDoRMtqZJpA23KAO .mtk1{color:var(--Fg-COZ-fg-dim,rgba(6,7,9,.6))}.editor--aDoRMtqZJpA23KAO .margin-view-overlays .line-numbers{color:var(--Fg-COZ-fg-dim,rgba(6,7,9,.3));width:24px!important}.editor--aDoRMtqZJpA23KAO .monaco-editor .diagonal-fill{background-image:linear-gradient(-45deg,rgba(34,34,34,.1) 12.5%,#0000 0,#0000 50%,rgba(34,34,34,.1) 0,rgba(34,34,34,.1) 62.5%,#0000 0,#0000)!important;background-size:8px 8px}.editor--aDoRMtqZJpA23KAO .margin-view-overlays:after{background:var(--Stroke-COZ-stroke-primary,rgba(6,7,9,.1));bottom:0;content:" "!important;pointer-events:none;position:absolute;right:3px;top:0;width:1px}.editor--aDoRMtqZJpA23KAO .line-numbers.active-line-number{color:var(--Fg-COZ-fg-primary,rgba(6,7,9,.8))!important}.editor--aDoRMtqZJpA23KAO .monaco-editor .delete-sign,.editor--aDoRMtqZJpA23KAO .monaco-editor .insert-sign{color:var(--Fg-COZ-fg-dim,rgba(6,7,9,.3))!important;font-size:8px!important;font-weight:900!important;left:29px!important}.editor--aDoRMtqZJpA23KAO .monaco-editor .view-overlays .current-line{border:0!important}.editor--aDoRMtqZJpA23KAO .monaco-scrollable-element>.scrollbar>.slider{background:var(--Fg-COZ-fg-dim,rgba(6,7,9,.3));border-radius:3px;width:8px!important}.editor--aDoRMtqZJpA23KAO .decorationsOverviewRuler{display:none!important}.editor--aDoRMtqZJpA23KAO .modified .slider{left:6px!important}.editor--aDoRMtqZJpA23KAO .modified .presentation{right:-4px!important;width:12px!important}.editor--aDoRMtqZJpA23KAO .original .slider{left:6px!important}.editor--aDoRMtqZJpA23KAO .original .presentation{left:3px!important;width:12px!important}.editor--aDoRMtqZJpA23KAO .gutter-insert{background-color:var(--vscode-diffEditor-insertedLineBackground,var(--vscode-diffEditor-insertedTextBackground))!important}.editor--aDoRMtqZJpA23KAO .gutter-delete{background-color:var(--vscode-diffEditor-removedLineBackground,var(--vscode-diffEditor-removedTextBackground))!important}.diff-modal--AIUBOLZwicoQwkCW .semi-modal{width:960px}.diff-modal--AIUBOLZwicoQwkCW .semi-modal-content{height:740px}.diff-modal-container--anGMKRyBgo1P4Im2{align-items:center;display:flex;height:100%;justify-content:center;width:100%}',""]),r.locals={"info-title":"info-title--ieHIl_55Z0K_zfAU",infoTitle:"info-title--ieHIl_55Z0K_zfAU","info-subtitle":"info-subtitle--afivkxdgVegLk5nE",infoSubtitle:"info-subtitle--afivkxdgVegLk5nE",container:"container--EoJncdcmm6YZ1k69","diff-table":"diff-table--qKodF2JiyY8tyxpm",diffTable:"diff-table--qKodF2JiyY8tyxpm","cell-span":"cell-span--AV839ylbQZo0N9kv",cellSpan:"cell-span--AV839ylbQZo0N9kv","property-tooltip":"property-tooltip--NFSqoHffTAZCFdLB",propertyTooltip:"property-tooltip--NFSqoHffTAZCFdLB","empty-container":"empty-container--mssDfIDKRnMG8TSG",emptyContainer:"empty-container--mssDfIDKRnMG8TSG","empty-info":"empty-info--xd5VT4pwuq0rviXI",emptyInfo:"empty-info--xd5VT4pwuq0rviXI","multiline-container":"multiline-container--QAvs4FSNCOUG3PKS",multilineContainer:"multiline-container--QAvs4FSNCOUG3PKS","multiline-text":"multiline-text--QSH7sBAHNEgFYr3q",multilineText:"multiline-text--QSH7sBAHNEgFYr3q",list:"list--jU0Yp7c4RICKxAVL","list-item":"list-item--hDu09y8h1ZUwj2tu",listItem:"list-item--hDu09y8h1ZUwj2tu","tag-1":"tag-1--Mb4M16NNEmA4xNkZ",tag1:"tag-1--Mb4M16NNEmA4xNkZ","tag-2":"tag-2--aU80vFh7oJYC1hz3",tag2:"tag-2--aU80vFh7oJYC1hz3","tag-4":"tag-4--kTZeOaTb2APw6wge",tag4:"tag-4--kTZeOaTb2APw6wge","tag-3":"tag-3--cgLZB6HHRJUnA6Ss",tag3:"tag-3--cgLZB6HHRJUnA6Ss","property-title":"property-title--L_YZAPscLk_7Xc7U",propertyTitle:"property-title--L_YZAPscLk_7Xc7U","editor-container":"editor-container--ju2BI8FtcIPKgFw_",editorContainer:"editor-container--ju2BI8FtcIPKgFw_","editor-header":"editor-header--oElBSb49E30vMps6",editorHeader:"editor-header--oElBSb49E30vMps6","editor-title":"editor-title--lTYh9LGeXboRSvgj",editorTitle:"editor-title--lTYh9LGeXboRSvgj","editor-divider":"editor-divider--wxGdL8a1NzAd9QBz",editorDivider:"editor-divider--wxGdL8a1NzAd9QBz","info-block":"info-block--cjKvrvgqM4wGRxtF",infoBlock:"info-block--cjKvrvgqM4wGRxtF",mask:"mask--ZkEQoEC0JoMKvbRX",editor:"editor--aDoRMtqZJpA23KAO","diff-modal":"diff-modal--AIUBOLZwicoQwkCW",diffModal:"diff-modal--AIUBOLZwicoQwkCW","diff-modal-container":"diff-modal-container--anGMKRyBgo1P4Im2",diffModalContainer:"diff-modal-container--anGMKRyBgo1P4Im2"},t.Z=r},116576:function(e,t,i){var o=i(160052),n=i.n(o),l=i(570717),r=i.n(l)()(n());r.push([e.id,'.publish-table-wrapper--l1bbTfC2RVEQhjRu{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;margin-bottom:24px}.publish-table-wrapper--l1bbTfC2RVEQhjRu:last-child{margin-bottom:64px}.publish-table--Ob71BNX4_osWuqQ5{margin-top:0}.publish-table--Ob71BNX4_osWuqQ5 .diff-icon--uTsErHlNI1MrXt7e{cursor:pointer!important;width:14px}.publish-table--Ob71BNX4_osWuqQ5 .semi-table-container{background:#fff;border:1px solid rgba(29,28,35,.12);border-radius:12px}.publish-table--Ob71BNX4_osWuqQ5 .semi-table-thead>.semi-table-row>.semi-table-row-head:first-child .semi-table-selection-wrap{display:none}.publish-table--Ob71BNX4_osWuqQ5 .semi-table-header{border-top-left-radius:12px;border-top-right-radius:12px}.publish-table--Ob71BNX4_osWuqQ5 .semi-table-body{border-bottom-left-radius:12px;border-bottom-right-radius:12px}.publish-table--Ob71BNX4_osWuqQ5 .semi-table-tbody>.semi-table-row:hover>.semi-table-row-cell{border-radius:0!important}.publish-table--Ob71BNX4_osWuqQ5 .semi-table-thead>.semi-table-row>.semi-table-row-head{background-color:transparent;border-radius:unset;height:40px;padding:0}.publish-table--Ob71BNX4_osWuqQ5 .semi-table-row{background-color:#fff!important}.publish-table--Ob71BNX4_osWuqQ5 .semi-table-tbody .semi-table-row .semi-table-row-cell{line-height:14px;padding:10px 0!important}.publish-table--Ob71BNX4_osWuqQ5 .semi-table-tbody>.semi-table-row:last-child:hover>.semi-table-row-cell{border-bottom:none!important}.publish-table--Ob71BNX4_osWuqQ5 .semi-table .semi-table-selection-wrap{width:16px}.publish-table--Ob71BNX4_osWuqQ5 .semi-table-row:hover>.semi-table-row-cell:before{content:"";height:0;width:100%}.publish-table--Ob71BNX4_osWuqQ5 .semi-table-tbody>.semi-table-row:last-child>.semi-table-row-cell{border-bottom:none}.publish-table--Ob71BNX4_osWuqQ5 .orange-tag--vSFyKko_10u3WEsz{background:var(--light-color-orange-orange-1,#fff1cc);border-radius:6px;color:var(--light-color-orange-orange-5,#ff9600);font-size:12px;font-style:normal;font-weight:500;line-height:16px;margin-left:8px}.publish-table--Ob71BNX4_osWuqQ5 .orange-tag--vSFyKko_10u3WEsz svg{height:10px;margin-left:4px;width:10px}.publish-table--Ob71BNX4_osWuqQ5 .grey-info--qJwjOF3zrZATBpRx{background:var(--light-color-grey-grey-1,#f0f0f5);border-radius:6px;color:var(--light-color-grey-grey-5,#6b6b75);padding:5px}.publish-table--Ob71BNX4_osWuqQ5 .grey-info--qJwjOF3zrZATBpRx svg{height:10px;width:10px}.publish-table--Ob71BNX4_osWuqQ5 .disable-tooltip--B9Qo_bW7D0kd78jX{height:16px;left:0;position:absolute;top:2px;width:16px}.publish-table--Ob71BNX4_osWuqQ5 .platform-avater--q_qAkJRR06UsyrWG{background:#fff;border:1px solid var(--light-usage-fill-color-fill-1,rgba(46,46,56,.08));border-radius:4px;flex-shrink:0;height:26px;width:26px}.publish-table--Ob71BNX4_osWuqQ5 .platform-name--WTjRCgH07kUiDokt{color:var(--light-usage-text-color-text-0,#1c1d23);font-size:14px!important;font-weight:600!important;line-height:20px;max-width:140px!important}.publish-table--Ob71BNX4_osWuqQ5 .platform-info--lsrIgKz1J_wTuxZz{width:calc(100% - 50px)}.publish-table--Ob71BNX4_osWuqQ5 .platform-info--lsrIgKz1J_wTuxZz .platform-desc--fWyK8GnGrm42LXaN{color:var(--light-usage-text-color-text-1,rgba(28,29,35,.8));display:block;font-size:12px;line-height:16px}.publish-table--Ob71BNX4_osWuqQ5 .config-status--RXW886jxDUk32soN .markdown--iXsGAUAvHdwMX4Zf{color:var(--light-usage-text-color-text-0,#1d1c23);font-size:12px;line-height:16px;max-width:265px}.publish-table--Ob71BNX4_osWuqQ5 .config-status--RXW886jxDUk32soN .semi-tag{font-weight:500;margin-right:4px}.publish-table--Ob71BNX4_osWuqQ5 .config-status--RXW886jxDUk32soN .semi-tag svg{height:10px;margin-left:4px;width:10px}.publish-table--Ob71BNX4_osWuqQ5 .config-status--RXW886jxDUk32soN .semi-button-borderless{font-size:12px;height:24px;line-height:20px;padding:0 8px}',""]),r.locals={"publish-table-wrapper":"publish-table-wrapper--l1bbTfC2RVEQhjRu",publishTableWrapper:"publish-table-wrapper--l1bbTfC2RVEQhjRu","publish-table":"publish-table--Ob71BNX4_osWuqQ5",publishTable:"publish-table--Ob71BNX4_osWuqQ5","diff-icon":"diff-icon--uTsErHlNI1MrXt7e",diffIcon:"diff-icon--uTsErHlNI1MrXt7e","orange-tag":"orange-tag--vSFyKko_10u3WEsz",orangeTag:"orange-tag--vSFyKko_10u3WEsz","grey-info":"grey-info--qJwjOF3zrZATBpRx",greyInfo:"grey-info--qJwjOF3zrZATBpRx","disable-tooltip":"disable-tooltip--B9Qo_bW7D0kd78jX",disableTooltip:"disable-tooltip--B9Qo_bW7D0kd78jX","platform-avater":"platform-avater--q_qAkJRR06UsyrWG",platformAvater:"platform-avater--q_qAkJRR06UsyrWG","platform-name":"platform-name--WTjRCgH07kUiDokt",platformName:"platform-name--WTjRCgH07kUiDokt","platform-info":"platform-info--lsrIgKz1J_wTuxZz",platformInfo:"platform-info--lsrIgKz1J_wTuxZz","platform-desc":"platform-desc--fWyK8GnGrm42LXaN",platformDesc:"platform-desc--fWyK8GnGrm42LXaN","config-status":"config-status--RXW886jxDUk32soN",configStatus:"config-status--RXW886jxDUk32soN",markdown:"markdown--iXsGAUAvHdwMX4Zf"},t.Z=r},10378:function(e,t,i){var o=i(160052),n=i.n(o),l=i(570717),r=i.n(l)()(n());r.push([e.id,".tabs--q2e9IXpxgiEALdC3{display:flex;justify-content:space-evenly;margin:12px 0;padding:0 24px}.tabs--q2e9IXpxgiEALdC3 .history-type-text--rRw45OczFDwa5MdT{color:#1d1c2399;cursor:pointer;font-weight:600}.tabs--q2e9IXpxgiEALdC3 .history-type-text-active--f7AMWairUknlvWYv{color:#4d53e8}.timeline-container--lajYsHN3aQApH3ho{flex:1 1;overflow-y:auto}.timeline-container-spin--BF3iu2Te8kw1RnvV>div{margin:32px auto;width:100%}.timeline-item-content--iG2dxtTKMSgb8iR2{cursor:pointer;display:grid;grid-row-gap:4px;border-radius:8px;padding:8px}.timeline-item-content--iG2dxtTKMSgb8iR2.active--a1QNeaJh_F0IQIkQ{background:var(--Light-usage-fill---color-fill-0,rgba(46,46,56,.04))}.timeline-item-content--iG2dxtTKMSgb8iR2 .hover-show--yuDsP5L0jI89rNwx{display:none}.timeline-item-content--iG2dxtTKMSgb8iR2 .hover-hidden--WFMkGwHriMs4pig7{display:block}.timeline-item-content--iG2dxtTKMSgb8iR2:hover{background:var(--Light-usage-fill---color-fill-2,rgba(46,46,56,.08))}.timeline-item-content--iG2dxtTKMSgb8iR2:hover .hover-show--yuDsP5L0jI89rNwx{display:block;position:absolute;right:8px;top:8px}.timeline-item-content--iG2dxtTKMSgb8iR2:hover .hover-hidden--WFMkGwHriMs4pig7{visibility:hidden}.timeline-item-content--iG2dxtTKMSgb8iR2>div{white-space:pre-wrap;word-break:break-word}.timeline-item-content--iG2dxtTKMSgb8iR2 .title--dg7eZELYV0Ibft8C{display:inline-block;font-weight:700;margin-right:4px}.timeline-item-content--iG2dxtTKMSgb8iR2 .light--FT6MLqlbCBgJaBNZ{color:var(--semi-color-text-2);font-size:12px}.timeline-item-content--iG2dxtTKMSgb8iR2 .connector-icon--eaE3t8H_8TgxYlFM{border-radius:4px;height:24px;margin-right:4px;width:24px}.timeline-item-content--iG2dxtTKMSgb8iR2 .user-avatar--amPeYZhBtzQXub4D{border-radius:50%;height:16px;margin-right:4px;width:16px}.bottom--ggCAl2cIBjwgAYyG{display:flex;flex-direction:row;flex-shrink:0;justify-content:center;margin:24px 0;padding:0 24px;width:100%}",""]),r.locals={tabs:"tabs--q2e9IXpxgiEALdC3","history-type-text":"history-type-text--rRw45OczFDwa5MdT",historyTypeText:"history-type-text--rRw45OczFDwa5MdT","history-type-text-active":"history-type-text-active--f7AMWairUknlvWYv",historyTypeTextActive:"history-type-text-active--f7AMWairUknlvWYv","timeline-container":"timeline-container--lajYsHN3aQApH3ho",timelineContainer:"timeline-container--lajYsHN3aQApH3ho","timeline-container-spin":"timeline-container-spin--BF3iu2Te8kw1RnvV",timelineContainerSpin:"timeline-container-spin--BF3iu2Te8kw1RnvV","timeline-item-content":"timeline-item-content--iG2dxtTKMSgb8iR2",timelineItemContent:"timeline-item-content--iG2dxtTKMSgb8iR2",active:"active--a1QNeaJh_F0IQIkQ","hover-show":"hover-show--yuDsP5L0jI89rNwx",hoverShow:"hover-show--yuDsP5L0jI89rNwx","hover-hidden":"hover-hidden--WFMkGwHriMs4pig7",hoverHidden:"hover-hidden--WFMkGwHriMs4pig7",title:"title--dg7eZELYV0Ibft8C",light:"light--FT6MLqlbCBgJaBNZ","connector-icon":"connector-icon--eaE3t8H_8TgxYlFM",connectorIcon:"connector-icon--eaE3t8H_8TgxYlFM","user-avatar":"user-avatar--amPeYZhBtzQXub4D",userAvatar:"user-avatar--amPeYZhBtzQXub4D",bottom:"bottom--ggCAl2cIBjwgAYyG"},t.Z=r},204393:function(e,t,i){var o=i(160052),n=i.n(o),l=i(570717),r=i.n(l)()(n());r.push([e.id,".select-content--BKZyHFUQXQknwxja{align-items:center;background-color:var(--semi-color-fill-0);border-radius:8px;display:flex;flex-direction:row;justify-content:space-between;padding:8px}.simple--nnLb_KrElw84_Ovw{font-size:16px;padding:0 8px}.simple--nnLb_KrElw84_Ovw,.simple-desc--UNK0KgYZrrdct54N{color:var(--semi-color-text-2)}.simple-desc--UNK0KgYZrrdct54N{font-size:12px;margin-top:8px}.select-data--RsE3iCrFvL0vv6l1{display:grid;grid-row-gap:4px;font-size:14px;margin-right:8px}.select-data--RsE3iCrFvL0vv6l1>div{white-space:pre-wrap;word-break:break-word}.select-data--RsE3iCrFvL0vv6l1 .title--yKjtGrXM26svirO2{display:inline-block;font-weight:700;margin-right:4px}.select-data--RsE3iCrFvL0vv6l1 .time--bphms7bdjIVz_v32{color:var(--semi-color-text-2);font-size:12px;margin-left:4px}",""]),r.locals={"select-content":"select-content--BKZyHFUQXQknwxja",selectContent:"select-content--BKZyHFUQXQknwxja",simple:"simple--nnLb_KrElw84_Ovw","simple-desc":"simple-desc--UNK0KgYZrrdct54N",simpleDesc:"simple-desc--UNK0KgYZrrdct54N","select-data":"select-data--RsE3iCrFvL0vv6l1",selectData:"select-data--RsE3iCrFvL0vv6l1",title:"title--yKjtGrXM26svirO2",time:"time--bphms7bdjIVz_v32"},t.Z=r},727760:function(e,t,i){var o=i(160052),n=i.n(o),l=i(570717),r=i.n(l)()(n());r.push([e.id,".publish-header--slVZ0Cg1zA8aSQnc{background:#f7f7fa;box-shadow:0 2px 2px 0 rgba(29,28,35,.04),0 0 2px 0 rgba(29,28,35,.18)}.publish-header--slVZ0Cg1zA8aSQnc .exitbtn--ybTvlSGIQi0oqm3v{color:var(--light-color-black-black,#000);font-size:18px;font-style:normal;font-weight:600;line-height:24px;margin-left:12px}.header--ah4_KTn_bW43zFh1{align-items:center;align-self:stretch;background:#f7f7fa;display:flex;justify-content:space-between;width:100%}.publish-content--Lw6sseMQL1cAO6FQ{height:100%;margin:auto;overflow-y:auto;padding:0;padding-top:24px;width:100%}.publish-wrapper--u32Guod4vR8f5FvX{margin:0 auto;width:800px!important}.publish-wrapper--u32Guod4vR8f5FvX .publish-title--u_Dju7YKV2IZyvZ7{color:var(--light-usage-text-color-text-0,#1c1d23);display:block;font-size:18px;font-weight:600;line-height:24px;margin:0;margin-bottom:16px;margin-top:40px}.published-connector--Lnx5p_nEKqUIJuQQ{align-items:center;display:flex;flex-direction:row;font-size:12px;font-weight:400;justify-content:flex-end;margin:12px 0}.published-connector--Lnx5p_nEKqUIJuQQ .connector-icon--gB1EUabUYqEHhS5D{border-radius:4px;height:18px;margin-right:4px;width:18px}",""]),r.locals={"publish-header":"publish-header--slVZ0Cg1zA8aSQnc",publishHeader:"publish-header--slVZ0Cg1zA8aSQnc",exitbtn:"exitbtn--ybTvlSGIQi0oqm3v",header:"header--ah4_KTn_bW43zFh1","publish-content":"publish-content--Lw6sseMQL1cAO6FQ",publishContent:"publish-content--Lw6sseMQL1cAO6FQ","publish-wrapper":"publish-wrapper--u32Guod4vR8f5FvX",publishWrapper:"publish-wrapper--u32Guod4vR8f5FvX","publish-title":"publish-title--u_Dju7YKV2IZyvZ7",publishTitle:"publish-title--u_Dju7YKV2IZyvZ7","published-connector":"published-connector--Lnx5p_nEKqUIJuQQ",publishedConnector:"published-connector--Lnx5p_nEKqUIJuQQ","connector-icon":"connector-icon--gB1EUabUYqEHhS5D",connectorIcon:"connector-icon--gB1EUabUYqEHhS5D"},t.Z=r}}]);
//# sourceMappingURL=https://sourcemap-redirect.coze.cn/obj/coze-sourcemap/ol-sourcemap/bot/1.0.2.2457/69182.affef55b.js.map