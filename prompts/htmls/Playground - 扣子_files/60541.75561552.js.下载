/*! For license information please see 60541.75561552.js.LICENSE.txt */
"use strict";(self.webpackChunkapp_botstudio_main=self.webpackChunkapp_botstudio_main||[]).push([["60541"],{348376:function(t,e,n){n.d(e,{Cf:function(){return tH},DK:function(){return tD},EG:function(){return tg},FZ:function(){return tz},K9:function(){return tI},ML:function(){return tN},NB:function(){return tR},Nl:function(){return h},P1:function(){return b},S0:function(){return tB},hj:function(){return z},m7:function(){return v},nU:function(){return w},qv:function(){return td},vc:function(){return L},x2:function(){return tL},zK:function(){return tP}});var r=n(267774),o=n(800967),i=n(738193),s=n(462372),a=n(962221),l=n(609563),d=n(640085);function c(t){let{state:e,transaction:n}=t,{selection:r}=n,{doc:o}=n,{storedMarks:i}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,i=n.storedMarks,n}}}class u{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){let{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:o}=n,i=this.buildProps(o);return Object.fromEntries(Object.entries(t).map(([t,e])=>[t,(...t)=>{let n=e(...t)(i);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(o),n}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){let{rawCommands:n,editor:r,state:o}=this,{view:i}=r,s=[],a=!!t,l=t||o.tr,d={...Object.fromEntries(Object.entries(n).map(([t,n])=>[t,(...t)=>{let r=this.buildProps(l,e),o=n(...t)(r);return s.push(o),d}])),run:()=>(!a&&e&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(l),s.every(t=>!0===t))};return d}createCan(t){let{rawCommands:e,state:n}=this,r=t||n.tr,o=this.buildProps(r,!1);return{...Object.fromEntries(Object.entries(e).map(([t,e])=>[t,(...t)=>e(...t)({...o,dispatch:void 0})])),chain:()=>this.createChain(r,!1)}}buildProps(t,e=!0){let{rawCommands:n,editor:r,state:o}=this,{view:i}=r,s={tr:t,editor:r,view:i,state:c({state:o,transaction:t}),dispatch:e?()=>void 0:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([t,e])=>[t,(...t)=>e(...t)(s)]))}};return s}}class p{constructor(){this.callbacks={}}on(t,e){return!this.callbacks[t]&&(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){let n=this.callbacks[t];return n&&n.forEach(t=>t.apply(this,e)),this}off(t,e){let n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(t=>t!==e):delete this.callbacks[t]),this}once(t,e){let n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}}function h(t,e,n){return void 0===t.config[e]&&t.parent?h(t.parent,e,n):"function"==typeof t.config[e]?t.config[e].bind({...n,parent:t.parent?h(t.parent,e,n):null}):t.config[e]}function f(t){let e=t.filter(t=>"extension"===t.type),n=t.filter(t=>"node"===t.type);return{baseExtensions:e,nodeExtensions:n,markExtensions:t.filter(t=>"mark"===t.type)}}function m(t){let e=[],{nodeExtensions:n,markExtensions:r}=f(t),o=[...n,...r],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(t=>{let n={name:t.name,options:t.options,storage:t.storage,extensions:o},r=h(t,"addGlobalAttributes",n);if(!!r)r().forEach(t=>{t.types.forEach(n=>{Object.entries(t.attributes).forEach(([t,r])=>{e.push({type:n,name:t,attribute:{...i,...r}})})})})}),o.forEach(t=>{let n={name:t.name,options:t.options,storage:t.storage},r=h(t,"addAttributes",n);if(!!r)Object.entries(r()).forEach(([n,r])=>{let o={...i,...r};"function"==typeof(null==o?void 0:o.default)&&(o.default=o.default()),(null==o?void 0:o.isRequired)&&(null==o?void 0:o.default)===void 0&&delete o.default,e.push({type:t.name,name:n,attribute:o})})}),e}function g(t,e){if("string"==typeof t){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function b(...t){return t.filter(t=>!!t).reduce((t,e)=>{let n={...t};return Object.entries(e).forEach(([t,e])=>{if(!n[t]){n[t]=e;return}if("class"===t){let r=e?String(e).split(" "):[],o=n[t]?n[t].split(" "):[],i=r.filter(t=>!o.includes(t));n[t]=[...o,...i].join(" ")}else if("style"===t){let r=e?e.split(";").map(t=>t.trim()).filter(Boolean):[],o=n[t]?n[t].split(";").map(t=>t.trim()).filter(Boolean):[],i=new Map;o.forEach(t=>{let[e,n]=t.split(":").map(t=>t.trim());i.set(e,n)}),r.forEach(t=>{let[e,n]=t.split(":").map(t=>t.trim());i.set(e,n)}),n[t]=Array.from(i.entries()).map(([t,e])=>`${t}: ${e}`).join("; ")}else n[t]=e}),n},{})}function v(t,e){return e.filter(e=>e.type===t.type.name).filter(t=>t.attribute.rendered).map(e=>e.attribute.renderHTML?e.attribute.renderHTML(t.attrs)||{}:{[e.name]:t.attrs[e.name]}).reduce((t,e)=>b(t,e),{})}function y(t){return"function"==typeof t}function w(t,e,...n){if(y(t))return e?t.bind(e)(...n):t(...n);return t}function M(t,e){return"style"in t?t:{...t,getAttrs:n=>{let r=t.getAttrs?t.getAttrs(n):t.attrs;if(!1===r)return!1;let o=e.reduce((t,e)=>{var r;let o=e.attribute.parseHTML?e.attribute.parseHTML(n):"string"!=typeof(r=n.getAttribute(e.name))?r:r.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(r):"true"===r||"false"!==r&&r;return null==o?t:{...t,[e.name]:o}},{});return{...r,...o}}}}function C(t){return Object.fromEntries(Object.entries(t).filter(([t,e])=>!("attrs"===t&&function(t={}){return 0===Object.keys(t).length&&t.constructor===Object}(e))&&null!=e))}function k(t,e){return e.nodes[t]||e.marks[t]||null}function S(t,e){return Array.isArray(e)?e.some(e=>("string"==typeof e?e:e.name)===t.name):e}function x(t,e){let n=s.PW.fromSchema(e).serializeFragment(t),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(n),r.innerHTML}let A=(t,e=500)=>{let n="",r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(t,e,o,i)=>{var s,a;let l=(null===(a=(s=t.type.spec).toText)||void 0===a?void 0:a.call(s,{node:t,pos:e,parent:o,index:i}))||t.textContent||"%leaf%";n+=t.isAtom&&!t.isText?l:l.slice(0,Math.max(0,r-e))}),n};function E(t){return"[object RegExp]"===Object.prototype.toString.call(t)}class T{constructor(t){this.find=t.find,this.handler=t.handler}}let O=(t,e)=>{if(E(e))return e.exec(t);let n=e(t);if(!n)return null;let r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(!n.text.includes(n.replaceWith)&&console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function $(t){var e;let{editor:n,from:r,to:o,text:i,rules:s,plugin:a}=t,{view:l}=n;if(l.composing)return!1;let d=l.state.doc.resolve(r);if(d.parent.type.spec.code||(null===(e=d.nodeBefore||d.nodeAfter)||void 0===e?void 0:e.marks.find(t=>t.type.spec.code)))return!1;let p=!1,h=A(d)+i;return s.forEach(t=>{if(p)return;let e=O(h,t.find);if(!e)return;let s=l.state.tr,d=c({state:l.state,transaction:s}),f={from:r-(e[0].length-i.length),to:o},{commands:m,chain:g,can:b}=new u({editor:n,state:d});if(null!==t.handler({state:d,range:f,match:e,commands:m,chain:g,can:b})&&!!s.steps.length)s.setMeta(a,{transform:s,from:r,to:o,text:i}),l.dispatch(s),p=!0}),p}function N(t){var e;return"Object"===(e=t,Object.prototype.toString.call(e).slice(8,-1))&&t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function H(t,e){let n={...t};return N(t)&&N(e)&&Object.keys(e).forEach(r=>{N(e[r])&&N(t[r])?n[r]=H(t[r],e[r]):n[r]=e[r]}),n}class L{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=w(h(this,"addOptions",{name:this.name}))),this.storage=w(h(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new L(t)}configure(t={}){let e=this.extend({...this.config,addOptions:()=>H(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){let e=new L(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=w(h(e,"addOptions",{name:e.name})),e.storage=w(h(e,"addStorage",{name:e.name,options:e.options})),e}static handleExit({editor:t,mark:e}){let{tr:n}=t.state,r=t.state.selection.$from;if(r.pos===r.end()){let o=r.marks();if(!o.find(t=>(null==t?void 0:t.type.name)===e.name))return!1;let i=o.find(t=>(null==t?void 0:t.type.name)===e.name);return i&&n.removeStoredMark(i),n.insertText(" ",r.pos),t.view.dispatch(n),!0}return!1}}class P{constructor(t){this.find=t.find,this.handler=t.handler}}let B=(t,e,n)=>{if(E(e))return[...t.matchAll(e)];let r=e(t,n);return r?r.map(e=>{let n=[e.text];return n.index=e.index,n.input=t,n.data=e.data,e.replaceWith&&(!e.text.includes(e.replaceWith)&&console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(e.replaceWith)),n}):[]},R=null,D=t=>{var e;let n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return null===(e=n.clipboardData)||void 0===e||e.setData("text/html",t),n};class I{constructor(t,e){this.splittableMarks=[],this.editor=e,this.extensions=I.resolve(t),this.schema=function(t,e){var n;let r=m(t),{nodeExtensions:o,markExtensions:i}=f(t),a=null===(n=o.find(t=>h(t,"topNode")))||void 0===n?void 0:n.name,l=Object.fromEntries(o.map(n=>{let o=r.filter(t=>t.type===n.name),i={name:n.name,options:n.options,storage:n.storage,editor:e},s=C({...t.reduce((t,e)=>{let r=h(e,"extendNodeSchema",i);return{...t,...r?r(n):{}}},{}),content:w(h(n,"content",i)),marks:w(h(n,"marks",i)),group:w(h(n,"group",i)),inline:w(h(n,"inline",i)),atom:w(h(n,"atom",i)),selectable:w(h(n,"selectable",i)),draggable:w(h(n,"draggable",i)),code:w(h(n,"code",i)),whitespace:w(h(n,"whitespace",i)),linebreakReplacement:w(h(n,"linebreakReplacement",i)),defining:w(h(n,"defining",i)),isolating:w(h(n,"isolating",i)),attrs:Object.fromEntries(o.map(t=>{var e;return[t.name,{default:null===(e=null==t?void 0:t.attribute)||void 0===e?void 0:e.default}]}))}),a=w(h(n,"parseHTML",i));a&&(s.parseDOM=a.map(t=>M(t,o)));let l=h(n,"renderHTML",i);l&&(s.toDOM=t=>l({node:t,HTMLAttributes:v(t,o)}));let d=h(n,"renderText",i);return d&&(s.toText=d),[n.name,s]})),d=Object.fromEntries(i.map(n=>{let o=r.filter(t=>t.type===n.name),i={name:n.name,options:n.options,storage:n.storage,editor:e},s=C({...t.reduce((t,e)=>{let r=h(e,"extendMarkSchema",i);return{...t,...r?r(n):{}}},{}),inclusive:w(h(n,"inclusive",i)),excludes:w(h(n,"excludes",i)),group:w(h(n,"group",i)),spanning:w(h(n,"spanning",i)),code:w(h(n,"code",i)),attrs:Object.fromEntries(o.map(t=>{var e;return[t.name,{default:null===(e=null==t?void 0:t.attribute)||void 0===e?void 0:e.default}]}))}),a=w(h(n,"parseHTML",i));a&&(s.parseDOM=a.map(t=>M(t,o)));let l=h(n,"renderHTML",i);return l&&(s.toDOM=t=>l({mark:t,HTMLAttributes:v(t,o)})),[n.name,s]}));return new s.V_({topNode:a,nodes:l,marks:d})}(this.extensions,e),this.setupExtensions()}static resolve(t){var e;let n=I.sort(I.flatten(t));let r=Array.from(new Set((e=n.map(t=>t.name)).filter((t,n)=>e.indexOf(t)!==n)));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(t=>`'${t}'`).join(", ")}]. This can lead to issues.`),n}static flatten(t){return t.map(t=>{let e={name:t.name,options:t.options,storage:t.storage},n=h(t,"addExtensions",e);return n?[t,...this.flatten(n())]:t}).flat(10)}static sort(t){return t.sort((t,e)=>{let n=h(t,"priority")||100,r=h(e,"priority")||100;return n>r?-1:n<r?1:0})}get commands(){return this.extensions.reduce((t,e)=>{let n={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:k(e.name,this.schema)},r=h(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){let{editor:t}=this,e=I.sort([...this.extensions].reverse()),n=[],o=[],a=e.map(e=>{let r={name:e.name,options:e.options,storage:e.storage,editor:t,type:k(e.name,this.schema)},s=[],a=h(e,"addKeyboardShortcuts",r),l={};if("mark"===e.type&&h(e,"exitable",r)&&(l.ArrowRight=()=>L.handleExit({editor:t,mark:e})),a){let e=Object.fromEntries(Object.entries(a()).map(([e,n])=>[e,()=>n({editor:t})]));l={...l,...e}}let d=(0,i.h)(l);s.push(d);let c=h(e,"addInputRules",r);S(e,t.options.enableInputRules)&&c&&n.push(...c());let u=h(e,"addPasteRules",r);S(e,t.options.enablePasteRules)&&u&&o.push(...u());let p=h(e,"addProseMirrorPlugins",r);if(p){let t=p();s.push(...t)}return s}).flat();return[function(t){let{editor:e,rules:n}=t,o=new r.Sy({state:{init:()=>null,apply(t,r,i){let a=t.getMeta(o);if(a)return a;let l=t.getMeta("applyInputRules");return l&&setTimeout(()=>{let{text:t}=l;"string"==typeof t||(t=x(s.HY.from(t),i.schema));let{from:r}=l,a=r+t.length;$({editor:e,from:r,to:a,text:t,rules:n,plugin:o})}),t.selectionSet||t.docChanged?null:r}},props:{handleTextInput:(t,r,i,s)=>$({editor:e,from:r,to:i,text:s,rules:n,plugin:o}),handleDOMEvents:{compositionend:t=>(setTimeout(()=>{let{$cursor:r}=t.state.selection;r&&$({editor:e,from:r.pos,to:r.pos,text:"",rules:n,plugin:o})}),!1)},handleKeyDown(t,r){if("Enter"!==r.key)return!1;let{$cursor:i}=t.state.selection;return!!i&&$({editor:e,from:i.pos,to:i.pos,text:"\n",rules:n,plugin:o})}},isInputRules:!0});return o}({editor:t,rules:n}),...function(t){let e;let{editor:n,rules:o}=t,i=null,a=!1,l=!1,d="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null;try{e="undefined"!=typeof DragEvent?new DragEvent("drop"):null}catch{e=null}let p=({state:t,from:r,to:o,rule:i,pasteEvt:s})=>{let a=t.tr;if(!!function(t){let{editor:e,state:n,from:r,to:o,rule:i,pasteEvent:s,dropEvent:a}=t,{commands:l,chain:d,can:c}=new u({editor:e,state:n}),p=[];return n.doc.nodesBetween(r,o,(t,e)=>{if(!t.isTextblock||t.type.spec.code)return;let u=Math.max(r,e),h=Math.min(o,e+t.content.size);B(t.textBetween(u-e,h-e,void 0,"\uFFFC"),i.find,s).forEach(t=>{if(void 0===t.index)return;let e=u+t.index+1,r=e+t[0].length,o={from:n.tr.mapping.map(e),to:n.tr.mapping.map(r)},h=i.handler({state:n,range:o,match:t,commands:l,chain:d,can:c,pasteEvent:s,dropEvent:a});p.push(h)})}),p.every(t=>null!==t)}({editor:n,state:c({state:t,transaction:a}),from:Math.max(r-1,0),to:o.b-1,rule:i,pasteEvent:s,dropEvent:e})&&!!a.steps.length){try{e="undefined"!=typeof DragEvent?new DragEvent("drop"):null}catch{e=null}return d="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null,a}};return o.map(t=>new r.Sy({view(t){let e=e=>{var r;(i=(null===(r=t.dom.parentElement)||void 0===r?void 0:r.contains(e.target))?t.dom.parentElement:null)&&(R=n)},r=()=>{R&&(R=null)};return window.addEventListener("dragstart",e),window.addEventListener("dragend",r),{destroy(){window.removeEventListener("dragstart",e),window.removeEventListener("dragend",r)}}},props:{handleDOMEvents:{drop:(t,n)=>{if(l=i===t.dom.parentElement,e=n,!l){let t=R;(null==t?void 0:t.isEditable)&&setTimeout(()=>{let e=t.state.selection;e&&t.commands.deleteRange({from:e.from,to:e.to})},10)}return!1},paste:(t,e)=>{var n;let r=null===(n=e.clipboardData)||void 0===n?void 0:n.getData("text/html");return d=e,a=!!(null==r?void 0:r.includes("data-pm-slice")),!1}}},appendTransaction:(e,n,r)=>{let o=e[0],i="paste"===o.getMeta("uiEvent")&&!a,c="drop"===o.getMeta("uiEvent")&&!l,u=o.getMeta("applyPasteRules"),h=!!u;if(!i&&!c&&!h)return;if(h){let{text:e}=u;"string"==typeof e||(e=x(s.HY.from(e),r.schema));let{from:n}=u,o=n+e.length;return p({rule:t,state:r,from:n,to:{b:o},pasteEvt:D(e)})}let f=n.doc.content.findDiffStart(r.doc.content),m=n.doc.content.findDiffEnd(r.doc.content);if("number"==typeof f&&!!m&&f!==m.b)return p({rule:t,state:r,from:f,to:m,pasteEvt:d})}}))}({editor:t,rules:o}),...a]}get attributes(){return m(this.extensions)}get nodeViews(){let{editor:t}=this,{nodeExtensions:e}=f(this.extensions);return Object.fromEntries(e.filter(t=>!!h(t,"addNodeView")).map(e=>{let n=this.attributes.filter(t=>t.type===e.name),r={name:e.name,options:e.options,storage:e.storage,editor:t,type:g(e.name,this.schema)},o=h(e,"addNodeView",r);return o?[e.name,(r,i,s,a,l)=>{let d=v(r,n);return o()({node:r,view:i,getPos:s,decorations:a,innerDecorations:l,editor:t,extension:e,HTMLAttributes:d})}]:[]}))}setupExtensions(){this.extensions.forEach(t=>{var e;this.editor.extensionStorage[t.name]=t.storage;let n={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:k(t.name,this.schema)};"mark"===t.type&&(null===(e=w(h(t,"keepOnSplit",n)))||void 0===e||e)&&this.splittableMarks.push(t.name);let r=h(t,"onBeforeCreate",n),o=h(t,"onCreate",n),i=h(t,"onUpdate",n),s=h(t,"onSelectionUpdate",n),a=h(t,"onTransaction",n),l=h(t,"onFocus",n),d=h(t,"onBlur",n),c=h(t,"onDestroy",n);r&&this.editor.on("beforeCreate",r),o&&this.editor.on("create",o),i&&this.editor.on("update",i),s&&this.editor.on("selectionUpdate",s),a&&this.editor.on("transaction",a),l&&this.editor.on("focus",l),d&&this.editor.on("blur",d),c&&this.editor.on("destroy",c)})}}class z{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=w(h(this,"addOptions",{name:this.name}))),this.storage=w(h(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new z(t)}configure(t={}){let e=this.extend({...this.config,addOptions:()=>H(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){let e=new z({...this.config,...t});return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=w(h(e,"addOptions",{name:e.name})),e.storage=w(h(e,"addStorage",{name:e.name,options:e.options})),e}}function j(t,e,n){let{from:r,to:o}=e,{blockSeparator:i="\n\n",textSerializers:s={}}=n||{},a="";return t.nodesBetween(r,o,(t,n,l,d)=>{var c;t.isBlock&&n>r&&(a+=i);let u=null==s?void 0:s[t.type.name];if(u)return l&&(a+=u({node:t,pos:n,parent:l,index:d,range:e})),!1;t.isText&&(a+=null===(c=null==t?void 0:t.text)||void 0===c?void 0:c.slice(Math.max(r,n)-n,o-n))}),a}function _(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,t])=>t.spec.toText).map(([t,e])=>[t,e.spec.toText]))}let W=z.create({name:"clipboardTextSerializer",addOptions:()=>({blockSeparator:void 0}),addProseMirrorPlugins(){return[new r.Sy({key:new r.H$("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{let{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:o}=e,{ranges:i}=o,s=Math.min(...i.map(t=>t.$from.pos)),a=Math.max(...i.map(t=>t.$to.pos)),l=_(n);return j(r,{from:s,to:a},{...void 0!==this.options.blockSeparator?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}});function F(t,e,n={strict:!0}){let r=Object.keys(e);return!r.length||r.every(r=>n.strict?e[r]===t[r]:E(e[r])?e[r].test(t[r]):e[r]===t[r])}function K(t,e,n={}){return t.find(t=>t.type===e&&F(Object.fromEntries(Object.keys(n).map(e=>[e,t.attrs[e]])),n))}function V(t,e,n={}){return!!K(t,e,n)}function Y(t,e,n){var r;if(!t||!e)return;let o=t.parent.childAfter(t.parentOffset);if((!o.node||!o.node.marks.some(t=>t.type===e))&&(o=t.parent.childBefore(t.parentOffset)),!o.node||!o.node.marks.some(t=>t.type===e))return;if(n=n||(null===(r=o.node.marks[0])||void 0===r?void 0:r.attrs),!K([...o.node.marks],e,n))return;let i=o.index,s=t.start()+o.offset,a=i+1,l=s+o.node.nodeSize;for(;i>0&&V([...t.parent.child(i-1).marks],e,n);)i-=1,s-=t.parent.child(i).nodeSize;for(;a<t.parent.childCount&&V([...t.parent.child(a).marks],e,n);)l+=t.parent.child(a).nodeSize,a+=1;return{from:s,to:l}}function q(t,e){if("string"==typeof t){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}function U(t){return t instanceof r.Bs}function G(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function J(t,e=null){if(!e)return null;let n=r.Y1.atStart(t),o=r.Y1.atEnd(t);if("start"===e||!0===e)return n;if("end"===e)return o;let i=n.from,s=o.to;return"all"===e?r.Bs.create(t,G(0,i,s),G(t.content.size,i,s)):r.Bs.create(t,G(e,i,s),G(e,i,s))}function X(){return"Android"===navigator.platform||/android/i.test(navigator.userAgent)}function Z(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}let Q=t=>{let e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){let r=e[n];3===r.nodeType&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):1===r.nodeType&&Q(r)}return t};function tt(t){let e=`<body>${t}</body>`;return Q(new window.DOMParser().parseFromString(e,"text/html").body)}function te(t,e,n){if(t instanceof s.NB||t instanceof s.HY)return t;n={slice:!0,parseOptions:{},...n};let r="object"==typeof t&&null!==t,o="string"==typeof t;if(r)try{if(Array.isArray(t)&&t.length>0)return s.HY.fromArray(t.map(t=>e.nodeFromJSON(t)));let r=e.nodeFromJSON(t);return n.errorOnInvalidContent&&r.check(),r}catch(r){if(n.errorOnInvalidContent)throw Error("[tiptap error]: Invalid JSON content",{cause:r});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",r),te("",e,n)}if(o){if(n.errorOnInvalidContent){let r=!1,o="",i=new s.V_({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:t=>(r=!0,o="string"==typeof t?t:t.outerHTML,null)}]}})});if(n.slice?s.aw.fromSchema(i).parseSlice(tt(t),n.parseOptions):s.aw.fromSchema(i).parse(tt(t),n.parseOptions),n.errorOnInvalidContent&&r)throw Error("[tiptap error]: Invalid HTML content",{cause:Error(`Invalid element found: ${o}`)})}let r=s.aw.fromSchema(e);return n.slice?r.parseSlice(tt(t),n.parseOptions).content:r.parse(tt(t),n.parseOptions)}return te("",e,n)}let tn=t=>!("type"in t);function tr(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}function to(t,e,n={}){let{from:r,to:o,empty:i}=t.selection,s=e?g(e,t.schema):null,a=[];t.doc.nodesBetween(r,o,(t,e)=>{if(t.isText)return;let n=Math.max(r,e),i=Math.min(o,e+t.nodeSize);a.push({node:t,from:n,to:i})});let l=o-r,d=a.filter(t=>!s||s.name===t.node.type.name).filter(t=>F(t.node.attrs,n,{strict:!1}));return i?!!d.length:d.reduce((t,e)=>t+e.to-e.from,0)>=l}function ti(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function ts(t,e){let n="string"==typeof e?[e]:e;return Object.keys(t).reduce((e,r)=>(!n.includes(r)&&(e[r]=t[r]),e),{})}function ta(t,e,n={},r={}){return te(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}function tl(t,e){let n=q(e,t.schema),{from:r,to:o,empty:i}=t.selection,s=[];i?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,o,t=>{s.push(...t.marks)});let a=s.find(t=>t.type.name===n.name);return a?{...a.attrs}:{}}function td(t,e){for(let n=t.depth;n>0;n-=1){let r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function tc(t){return e=>td(e.$from,t)}function tu(t,e,n){let r=[];return t===e?n.resolve(t).marks().forEach(e=>{let o=Y(n.resolve(t),e.type);if(!!o)r.push({mark:e,...o})}):n.nodesBetween(t,e,(t,e)=>{if(!!t&&(null==t?void 0:t.nodeSize)!==void 0)r.push(...t.marks.map(n=>({from:e,to:e+t.nodeSize,mark:n})))}),r}function tp(t,e,n){return Object.fromEntries(Object.entries(n).filter(([n])=>{let r=t.find(t=>t.type===e&&t.name===n);return!!r&&r.attribute.keepOnSplit}))}function th(t,e,n={}){let{empty:r,ranges:o}=t.selection,i=e?q(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(t=>!i||i.name===t.type.name).find(t=>F(t.attrs,n,{strict:!1}));let s=0,a=[];if(o.forEach(({$from:e,$to:n})=>{let r=e.pos,o=n.pos;t.doc.nodesBetween(r,o,(t,e)=>{if(!t.isText&&!t.marks.length)return;let n=Math.max(r,e),i=Math.min(o,e+t.nodeSize);s+=i-n,a.push(...t.marks.map(t=>({mark:t,from:n,to:i})))})}),0===s)return!1;let l=a.filter(t=>!i||i.name===t.mark.type.name).filter(t=>F(t.mark.attrs,n,{strict:!1})).reduce((t,e)=>t+e.to-e.from,0),d=a.filter(t=>!i||t.mark.type!==i&&t.mark.type.excludes(i)).reduce((t,e)=>t+e.to-e.from,0);return(l>0?l+d:l)>=s}function tf(t,e){let{nodeExtensions:n}=f(e),r=n.find(e=>e.name===t);if(!r)return!1;let o={name:r.name,options:r.options,storage:r.storage},i=w(h(r,"group",o));return"string"==typeof i&&i.split(" ").includes("list")}function tm(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if("hardBreak"===t.type.name)return!0;if(t.isText)return/^\s*$/m.test(null!==(r=t.text)&&void 0!==r?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(0===t.content.childCount)return!0;if(e){let r=!0;return t.content.forEach(t=>{if(!1!==r)!tm(t,{ignoreWhitespace:n,checkChildren:e})&&(r=!1)}),r}return!1}function tg(t){return t instanceof r.qv}function tb(t,e){let n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){let r=n.filter(t=>null==e?void 0:e.includes(t.type.name));t.tr.ensureMarks(r)}}let tv=(t,e)=>{let n=tc(t=>t.type===e)(t.selection);if(!n)return!0;let r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===r)return!0;let o=t.doc.nodeAt(r);return!(n.node.type===(null==o?void 0:o.type)&&(0,a.Mn)(t.doc,n.pos))||(t.join(n.pos),!0)},ty=(t,e)=>{let n=tc(t=>t.type===e)(t.selection);if(!n)return!0;let r=t.doc.resolve(n.start).after(n.depth);if(void 0===r)return!0;let o=t.doc.nodeAt(r);return!(n.node.type===(null==o?void 0:o.type)&&(0,a.Mn)(t.doc,r))||(t.join(r),!0)};var tw=Object.freeze({__proto__:null,blur:()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;!t.isDestroyed&&(e.dom.blur(),null===(n=null==window?void 0:window.getSelection())||void 0===n||n.removeAllRanges())}),!0),clearContent:(t=!1)=>({commands:e})=>e.setContent("",t),clearNodes:()=>({state:t,tr:e,dispatch:n})=>{let{selection:r}=e,{ranges:o}=r;return!n||(o.forEach(({$from:n,$to:r})=>{t.doc.nodesBetween(n.pos,r.pos,(t,n)=>{if(t.type.isText)return;let{doc:r,mapping:o}=e,i=r.resolve(o.map(n)),s=r.resolve(o.map(n+t.nodeSize)),l=i.blockRange(s);if(!l)return;let d=(0,a.k9)(l);if(t.type.isTextblock){let{defaultType:t}=i.parent.contentMatchAt(i.index());e.setNodeMarkup(l.start,t)}(d||0===d)&&e.lift(l,d)})}),!0)},command:t=>e=>t(e),createParagraphNear:()=>({state:t,dispatch:e})=>(0,l.mD)(t,e),cut:(t,e)=>({editor:n,tr:o})=>{let{state:i}=n,s=i.doc.slice(t.from,t.to);o.deleteRange(t.from,t.to);let a=o.mapping.map(e);return o.insert(a,s.content),o.setSelection(new r.Bs(o.doc.resolve(Math.max(a-1,0)))),!0},deleteCurrentNode:()=>({tr:t,dispatch:e})=>{let{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;let o=t.selection.$anchor;for(let n=o.depth;n>0;n-=1)if(o.node(n).type===r.type){if(e){let e=o.before(n),r=o.after(n);t.delete(e,r).scrollIntoView()}return!0}return!1},deleteNode:t=>({tr:e,state:n,dispatch:r})=>{let o=g(t,n.schema),i=e.selection.$anchor;for(let t=i.depth;t>0;t-=1)if(i.node(t).type===o){if(r){let n=i.before(t),r=i.after(t);e.delete(n,r).scrollIntoView()}return!0}return!1},deleteRange:t=>({tr:e,dispatch:n})=>{let{from:r,to:o}=t;return n&&e.delete(r,o),!0},deleteSelection:()=>({state:t,dispatch:e})=>(0,l.NE)(t,e),enter:()=>({commands:t})=>t.keyboardShortcut("Enter"),exitCode:()=>({state:t,dispatch:e})=>(0,l.uo)(t,e),extendMarkRange:(t,e={})=>({tr:n,state:o,dispatch:i})=>{let s=q(t,o.schema),{doc:a,selection:l}=n,{$from:d,from:c,to:u}=l;if(i){let t=Y(d,s,e);if(t&&t.from<=c&&t.to>=u){let e=r.Bs.create(a,t.from,t.to);n.setSelection(e)}}return!0},first:t=>e=>{let n="function"==typeof t?t(e):t;for(let t=0;t<n.length;t+=1)if(n[t](e))return!0;return!1},focus:(t=null,e={})=>({editor:n,view:r,tr:o,dispatch:i})=>{e={scrollIntoView:!0,...e};let s=()=>{(Z()||X())&&r.dom.focus(),requestAnimationFrame(()=>{!n.isDestroyed&&(r.focus(),(null==e?void 0:e.scrollIntoView)&&n.commands.scrollIntoView())})};if(r.hasFocus()&&null===t||!1===t)return!0;if(i&&null===t&&!U(n.state.selection))return s(),!0;let a=J(o.doc,t)||n.state.selection,l=n.state.selection.eq(a);return i&&(!l&&o.setSelection(a),l&&o.storedMarks&&o.setStoredMarks(o.storedMarks),s()),!0},forEach:(t,e)=>n=>t.every((t,r)=>e(t,{...n,index:r})),insertContent:(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),insertContentAt:(t,e,n)=>({tr:o,dispatch:i,editor:l})=>{var d;if(i){let i,c;n={parseOptions:l.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let u=t=>{l.emit("contentError",{editor:l,error:t,disableCollaboration:()=>{l.storage.collaboration&&(l.storage.collaboration.isDisabled=!0)}})},p={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!l.options.enableContentCheck&&l.options.emitContentError)try{te(e,l.schema,{parseOptions:p,errorOnInvalidContent:!0})}catch(t){u(t)}try{i=te(e,l.schema,{parseOptions:p,errorOnInvalidContent:null!==(d=n.errorOnInvalidContent)&&void 0!==d?d:l.options.enableContentCheck})}catch(t){return u(t),!1}let{from:h,to:f}="number"==typeof t?{from:t,to:t}:{from:t.from,to:t.to},m=!0,g=!0;if((tn(i)?i:[i]).forEach(t=>{t.check(),m=!!m&&t.isText&&0===t.marks.length,g=!!g&&t.isBlock}),h===f&&g){let{parent:t}=o.doc.resolve(h);t.isTextblock&&!t.type.spec.code&&!t.childCount&&(h-=1,f+=1)}if(m){if(Array.isArray(e))c=e.map(t=>t.text||"").join("");else if(e instanceof s.HY){let t="";e.forEach(e=>{e.text&&(t+=e.text)}),c=t}else c="object"==typeof e&&e&&e.text?e.text:e;o.insertText(c,h,f)}else c=i,o.replaceWith(h,f,c);n.updateSelection&&!function(t,e,n){let o=t.steps.length-1;if(o<e)return;let i=t.steps[o];if(!(i instanceof a.Pu||i instanceof a.FC))return;let s=t.mapping.maps[o],l=0;s.forEach((t,e,n,r)=>{0===l&&(l=r)}),t.setSelection(r.Y1.near(t.doc.resolve(l),-1))}(o,o.steps.length-1,-1),n.applyInputRules&&o.setMeta("applyInputRules",{from:h,text:c}),n.applyPasteRules&&o.setMeta("applyPasteRules",{from:h,text:c})}return!0},joinBackward:()=>({state:t,dispatch:e})=>(0,l.al)(t,e),joinDown:()=>({state:t,dispatch:e})=>(0,l.Ig)(t,e),joinForward:()=>({state:t,dispatch:e})=>(0,l.Y_)(t,e),joinItemBackward:()=>({state:t,dispatch:e,tr:n})=>{try{let r=(0,a.GJ)(t.doc,t.selection.$from.pos,-1);if(null==r)return!1;return n.join(r,2),e&&e(n),!0}catch{return!1}},joinItemForward:()=>({state:t,dispatch:e,tr:n})=>{try{let r=(0,a.GJ)(t.doc,t.selection.$from.pos,1);if(null==r)return!1;return n.join(r,2),e&&e(n),!0}catch{return!1}},joinTextblockBackward:()=>({state:t,dispatch:e})=>(0,l.rr)(t,e),joinTextblockForward:()=>({state:t,dispatch:e})=>(0,l.cR)(t,e),joinUp:()=>({state:t,dispatch:e})=>(0,l.MI)(t,e),keyboardShortcut:t=>({editor:e,view:n,tr:r,dispatch:o})=>{let i=(function(t){let e,n,r,o;let i=t.split(/-(?!$)/),s=i[i.length-1];"Space"===s&&(s=" ");for(let t=0;t<i.length-1;t+=1){let s=i[t];if(/^(cmd|meta|m)$/i.test(s))o=!0;else if(/^a(lt)?$/i.test(s))e=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else if(/^s(hift)?$/i.test(s))r=!0;else if(/^mod$/i.test(s))Z()||tr()?o=!0:n=!0;else throw Error(`Unrecognized modifier name: ${s}`)}return e&&(s=`Alt-${s}`),n&&(s=`Ctrl-${s}`),o&&(s=`Meta-${s}`),r&&(s=`Shift-${s}`),s})(t).split(/-(?!$)/),s=i.find(t=>!["Alt","Ctrl","Meta","Shift"].includes(t)),a=new KeyboardEvent("keydown",{key:"Space"===s?" ":s,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",t=>t(n,a))});return null==l||l.steps.forEach(t=>{let e=t.map(r.mapping);e&&o&&r.maybeStep(e)}),!0},lift:(t,e={})=>({state:n,dispatch:r})=>{let o=g(t,n.schema);return!!to(n,o,e)&&(0,l.xb)(n,r)},liftEmptyBlock:()=>({state:t,dispatch:e})=>(0,l.X0)(t,e),liftListItem:t=>({state:e,dispatch:n})=>{let r=g(t,e.schema);return(0,d.IB)(r)(e,n)},newlineInCode:()=>({state:t,dispatch:e})=>(0,l.QK)(t,e),resetAttributes:(t,e)=>({tr:n,state:r,dispatch:o})=>{let i=null,s=null,a=ti("string"==typeof t?t:t.name,r.schema);return!!a&&("node"===a&&(i=g(t,r.schema)),"mark"===a&&(s=q(t,r.schema)),o&&n.selection.ranges.forEach(t=>{r.doc.nodesBetween(t.$from.pos,t.$to.pos,(t,r)=>{i&&i===t.type&&n.setNodeMarkup(r,void 0,ts(t.attrs,e)),s&&t.marks.length&&t.marks.forEach(o=>{s===o.type&&n.addMark(r,r+t.nodeSize,s.create(ts(o.attrs,e)))})})}),!0)},scrollIntoView:()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),selectAll:()=>({tr:t,dispatch:e})=>{if(e){let e=new r.C1(t.doc);t.setSelection(e)}return!0},selectNodeBackward:()=>({state:t,dispatch:e})=>(0,l._M)(t,e),selectNodeForward:()=>({state:t,dispatch:e})=>(0,l.o)(t,e),selectParentNode:()=>({state:t,dispatch:e})=>(0,l.N0)(t,e),selectTextblockEnd:()=>({state:t,dispatch:e})=>(0,l.nw)(t,e),selectTextblockStart:()=>({state:t,dispatch:e})=>(0,l.U9)(t,e),setContent:(t,e=!1,n={},r={})=>({editor:o,tr:i,dispatch:s,commands:a})=>{var l,d;let{doc:c}=i;if("full"!==n.preserveWhitespace){let a=ta(t,o.schema,n,{errorOnInvalidContent:null!==(l=r.errorOnInvalidContent)&&void 0!==l?l:o.options.enableContentCheck});return s&&i.replaceWith(0,c.content.size,a).setMeta("preventUpdate",!e),!0}return s&&i.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:c.content.size},t,{parseOptions:n,errorOnInvalidContent:null!==(d=r.errorOnInvalidContent)&&void 0!==d?d:o.options.enableContentCheck})},setMark:(t,e={})=>({tr:n,state:r,dispatch:o})=>{let{selection:i}=n,{empty:s,ranges:a}=i,l=q(t,r.schema);if(o){if(s){let t=tl(r,l);n.addStoredMark(l.create({...t,...e}))}else a.forEach(t=>{let o=t.$from.pos,i=t.$to.pos;r.doc.nodesBetween(o,i,(t,r)=>{let s=Math.max(r,o),a=Math.min(r+t.nodeSize,i);t.marks.find(t=>t.type===l)?t.marks.forEach(t=>{l===t.type&&n.addMark(s,a,l.create({...t.attrs,...e}))}):n.addMark(s,a,l.create(e))})})}return function(t,e,n){var r;let{selection:o}=e,i=null;if(U(o)&&(i=o.$cursor),i){let e=null!==(r=t.storedMarks)&&void 0!==r?r:i.marks();return!!n.isInSet(e)||!e.some(t=>t.type.excludes(n))}let{ranges:s}=o;return s.some(({$from:e,$to:r})=>{let o=0===e.depth&&t.doc.inlineContent&&t.doc.type.allowsMarkType(n);return t.doc.nodesBetween(e.pos,r.pos,(t,e,r)=>{if(o)return!1;if(t.isInline){let e=!r||r.type.allowsMarkType(n),i=!!n.isInSet(t.marks)||!t.marks.some(t=>t.type.excludes(n));o=e&&i}return!o}),o})}(r,n,l)},setMeta:(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),setNode:(t,e={})=>({state:n,dispatch:r,chain:o})=>{let i;let s=g(t,n.schema);return(n.selection.$anchor.sameParent(n.selection.$head)&&(i=n.selection.$anchor.parent.attrs),s.isTextblock)?o().command(({commands:t})=>!!(0,l.uJ)(s,{...i,...e})(n)||t.clearNodes()).command(({state:t})=>(0,l.uJ)(s,{...i,...e})(t,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection:t=>({tr:e,dispatch:n})=>{if(n){let{doc:n}=e,o=G(t,0,n.content.size),i=r.qv.create(n,o);e.setSelection(i)}return!0},setTextSelection:t=>({tr:e,dispatch:n})=>{if(n){let{doc:n}=e,{from:o,to:i}="number"==typeof t?{from:t,to:t}:t,s=r.Bs.atStart(n).from,a=r.Bs.atEnd(n).to,l=G(o,s,a),d=G(i,s,a),c=r.Bs.create(n,l,d);e.setSelection(c)}return!0},sinkListItem:t=>({state:e,dispatch:n})=>{let r=g(t,e.schema);return(0,d.bw)(r)(e,n)},splitBlock:({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:o,editor:i})=>{let{selection:s,doc:l}=e,{$from:d,$to:c}=s,u=tp(i.extensionManager.attributes,d.node().type.name,d.node().attrs);if(s instanceof r.qv&&s.node.isBlock)return!!(d.parentOffset&&(0,a.Ax)(l,d.pos))&&(o&&(t&&tb(n,i.extensionManager.splittableMarks),e.split(d.pos).scrollIntoView()),!0);if(!d.parent.isBlock)return!1;let p=c.parentOffset===c.parent.content.size,h=0===d.depth?void 0:function(t){for(let e=0;e<t.edgeCount;e+=1){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}(d.node(-1).contentMatchAt(d.indexAfter(-1))),f=p&&h?[{type:h,attrs:u}]:void 0,m=(0,a.Ax)(e.doc,e.mapping.map(d.pos),1,f);if(!f&&!m&&(0,a.Ax)(e.doc,e.mapping.map(d.pos),1,h?[{type:h}]:void 0)&&(m=!0,f=h?[{type:h,attrs:u}]:void 0),o){if(m&&(s instanceof r.Bs&&e.deleteSelection(),e.split(e.mapping.map(d.pos),1,f),h&&!p&&!d.parentOffset&&d.parent.type!==h)){let t=e.mapping.map(d.before()),n=e.doc.resolve(t);d.node(-1).canReplaceWith(n.index(),n.index()+1,h)&&e.setNodeMarkup(e.mapping.map(d.before()),h)}t&&tb(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return m},splitListItem:(t,e={})=>({tr:n,state:o,dispatch:i,editor:l})=>{var d;let c=g(t,o.schema),{$from:u,$to:p}=o.selection,h=o.selection.node;if(h&&h.isBlock||u.depth<2||!u.sameParent(p))return!1;let f=u.node(-1);if(f.type!==c)return!1;let m=l.extensionManager.attributes;if(0===u.parent.content.size&&u.node(-1).childCount===u.indexAfter(-1)){if(2===u.depth||u.node(-3).type!==c||u.index(-2)!==u.node(-2).childCount-1)return!1;if(i){let t=s.HY.empty,o=u.index(-1)?1:u.index(-2)?2:3;for(let e=u.depth-o;e>=u.depth-3;e-=1)t=s.HY.from(u.node(e).copy(t));let i=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,a={...tp(m,u.node().type.name,u.node().attrs),...e},l=(null===(d=c.contentMatch.defaultType)||void 0===d?void 0:d.createAndFill(a))||void 0;t=t.append(s.HY.from(c.createAndFill(null,l)||void 0));let p=u.before(u.depth-(o-1));n.replace(p,u.after(-i),new s.p2(t,4-o,0));let h=-1;n.doc.nodesBetween(p,n.doc.content.size,(t,e)=>{if(h>-1)return!1;t.isTextblock&&0===t.content.size&&(h=e+1)}),h>-1&&n.setSelection(r.Bs.near(n.doc.resolve(h))),n.scrollIntoView()}return!0}let b=p.pos===u.end()?f.contentMatchAt(0).defaultType:null,v={...tp(m,f.type.name,f.attrs),...e},y={...tp(m,u.node().type.name,u.node().attrs),...e};n.delete(u.pos,p.pos);let w=b?[{type:c,attrs:v},{type:b,attrs:y}]:[{type:c,attrs:v}];if(!(0,a.Ax)(n.doc,u.pos,2))return!1;if(i){let{selection:t,storedMarks:e}=o,{splittableMarks:r}=l.extensionManager,s=e||t.$to.parentOffset&&t.$from.marks();if(n.split(u.pos,2,w).scrollIntoView(),!s||!i)return!0;let a=s.filter(t=>r.includes(t.type.name));n.ensureMarks(a)}return!0},toggleList:(t,e,n,r={})=>({editor:o,tr:i,state:s,dispatch:a,chain:l,commands:d,can:c})=>{let{extensions:u,splittableMarks:p}=o.extensionManager,h=g(t,s.schema),f=g(e,s.schema),{selection:m,storedMarks:b}=s,{$from:v,$to:y}=m,w=v.blockRange(y),M=b||m.$to.parentOffset&&m.$from.marks();if(!w)return!1;let C=tc(t=>tf(t.type.name,u))(m);if(w.depth>=1&&C&&w.depth-C.depth<=1){if(C.node.type===h)return d.liftListItem(f);if(tf(C.node.type.name,u)&&h.validContent(C.node.content)&&a)return l().command(()=>(i.setNodeMarkup(C.pos,h),!0)).command(()=>tv(i,h)).command(()=>ty(i,h)).run()}return n&&M&&a?l().command(()=>{let t=c().wrapInList(h,r),e=M.filter(t=>p.includes(t.type.name));return i.ensureMarks(e),!!t||d.clearNodes()}).wrapInList(h,r).command(()=>tv(i,h)).command(()=>ty(i,h)).run():l().command(()=>!!c().wrapInList(h,r)||d.clearNodes()).wrapInList(h,r).command(()=>tv(i,h)).command(()=>ty(i,h)).run()},toggleMark:(t,e={},n={})=>({state:r,commands:o})=>{let{extendEmptyMarkRange:i=!1}=n,s=q(t,r.schema);return th(r,s,e)?o.unsetMark(s,{extendEmptyMarkRange:i}):o.setMark(s,e)},toggleNode:(t,e,n={})=>({state:r,commands:o})=>{let i;let s=g(t,r.schema),a=g(e,r.schema),l=to(r,s,n);return(r.selection.$anchor.sameParent(r.selection.$head)&&(i=r.selection.$anchor.parent.attrs),l)?o.setNode(a,i):o.setNode(s,{...i,...n})},toggleWrap:(t,e={})=>({state:n,commands:r})=>{let o=g(t,n.schema);return to(n,o,e)?r.lift(o):r.wrapIn(o,e)},undoInputRule:()=>({state:t,dispatch:e})=>{let n=t.plugins;for(let r=0;r<n.length;r+=1){let o;let i=n[r];if(i.spec.isInputRules&&(o=i.getState(t))){if(e){let e=t.tr,n=o.transform;for(let t=n.steps.length-1;t>=0;t-=1)e.step(n.steps[t].invert(n.docs[t]));if(o.text){let n=e.doc.resolve(o.from).marks();e.replaceWith(o.from,o.to,t.schema.text(o.text,n))}else e.delete(o.from,o.to)}return!0}}return!1},unsetAllMarks:()=>({tr:t,dispatch:e})=>{let{selection:n}=t,{empty:r,ranges:o}=n;return!!r||(e&&o.forEach(e=>{t.removeMark(e.$from.pos,e.$to.pos)}),!0)},unsetMark:(t,e={})=>({tr:n,state:r,dispatch:o})=>{var i;let{extendEmptyMarkRange:s=!1}=e,{selection:a}=n,l=q(t,r.schema),{$from:d,empty:c,ranges:u}=a;if(!o)return!0;if(c&&s){let{from:t,to:e}=a,r=null===(i=d.marks().find(t=>t.type===l))||void 0===i?void 0:i.attrs,o=Y(d,l,r);o&&(t=o.from,e=o.to),n.removeMark(t,e,l)}else u.forEach(t=>{n.removeMark(t.$from.pos,t.$to.pos,l)});return n.removeStoredMark(l),!0},updateAttributes:(t,e={})=>({tr:n,state:r,dispatch:o})=>{let i=null,s=null,a=ti("string"==typeof t?t:t.name,r.schema);return!!a&&("node"===a&&(i=g(t,r.schema)),"mark"===a&&(s=q(t,r.schema)),o&&n.selection.ranges.forEach(t=>{let o,a,l,d;let c=t.$from.pos,u=t.$to.pos;n.selection.empty?r.doc.nodesBetween(c,u,(t,e)=>{i&&i===t.type&&(l=Math.max(e,c),d=Math.min(e+t.nodeSize,u),o=e,a=t)}):r.doc.nodesBetween(c,u,(t,r)=>{r<c&&i&&i===t.type&&(l=Math.max(r,c),d=Math.min(r+t.nodeSize,u),o=r,a=t),r>=c&&r<=u&&(i&&i===t.type&&n.setNodeMarkup(r,void 0,{...t.attrs,...e}),s&&t.marks.length&&t.marks.forEach(o=>{if(s===o.type){let i=Math.max(r,c),a=Math.min(r+t.nodeSize,u);n.addMark(i,a,s.create({...o.attrs,...e}))}}))}),a&&(void 0!==o&&n.setNodeMarkup(o,void 0,{...a.attrs,...e}),s&&a.marks.length&&a.marks.forEach(t=>{s===t.type&&n.addMark(l,d,s.create({...t.attrs,...e}))}))}),!0)},wrapIn:(t,e={})=>({state:n,dispatch:r})=>{let o=g(t,n.schema);return(0,l.ym)(o,e)(n,r)},wrapInList:(t,e={})=>({state:n,dispatch:r})=>{let o=g(t,n.schema);return(0,d.KI)(o,e)(n,r)}});let tM=z.create({name:"commands",addCommands:()=>({...tw})}),tC=z.create({name:"drop",addProseMirrorPlugins(){return[new r.Sy({key:new r.H$("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),tk=z.create({name:"editable",addProseMirrorPlugins(){return[new r.Sy({key:new r.H$("editable"),props:{editable:()=>this.editor.options.editable}})]}}),tS=new r.H$("focusEvents"),tx=z.create({name:"focusEvents",addProseMirrorPlugins(){let{editor:t}=this;return[new r.Sy({key:tS,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;let r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;let r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),tA=z.create({name:"keymap",addKeyboardShortcuts(){let t=()=>this.editor.commands.first(({commands:t})=>[()=>t.undoInputRule(),()=>t.command(({tr:e})=>{let{selection:n,doc:o}=e,{empty:i,$anchor:s}=n,{pos:a,parent:l}=s,d=s.parent.isTextblock&&a>0?e.doc.resolve(a-1):s,c=d.parent.type.spec.isolating,u=s.pos-s.parentOffset,p=c&&1===d.parent.childCount?u===s.pos:r.Y1.atStart(o).from===a;return!!i&&!!l.type.isTextblock&&!l.textContent.length&&!!p&&(!p||"paragraph"!==s.parent.type.name)&&t.clearNodes()}),()=>t.deleteSelection(),()=>t.joinBackward(),()=>t.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:t})=>[()=>t.deleteSelection(),()=>t.deleteCurrentNode(),()=>t.joinForward(),()=>t.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:t})=>[()=>t.newlineInCode(),()=>t.createParagraphNear(),()=>t.liftEmptyBlock(),()=>t.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...n},i={...n,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Z()||tr()?i:o},addProseMirrorPlugins(){return[new r.Sy({key:new r.H$("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(t=>t.getMeta("composition")))return;let o=t.some(t=>t.docChanged)&&!e.doc.eq(n.doc),i=t.some(t=>t.getMeta("preventClearDocument"));if(!o||i)return;let{empty:s,from:a,to:l}=e.selection,d=r.Y1.atStart(e.doc).from,p=r.Y1.atEnd(e.doc).to;if(s||!(a===d&&l===p)||!tm(n.doc))return;let h=n.tr,f=c({state:n,transaction:h}),{commands:m}=new u({editor:this.editor,state:f});if(m.clearNodes(),!!h.steps.length)return h}})]}}),tE=z.create({name:"paste",addProseMirrorPlugins(){return[new r.Sy({key:new r.H$("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),tT=z.create({name:"tabindex",addProseMirrorPlugins(){return[new r.Sy({key:new r.H$("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class tO{get name(){return this.node.type.name}constructor(t,e,n=!1,r=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=t,this.editor=e,this.currentNode=r}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return null!==(t=this.actualDepth)&&void 0!==t?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let e=this.from,n=this.to;if(this.isBlock){if(0===this.content.size){console.error(`You can\u{2019}t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}e=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:e,to:n},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(0===this.depth)return null;let t=this.resolvedPos.start(this.resolvedPos.depth-1);return new tO(this.resolvedPos.doc.resolve(t),this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new tO(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new tO(t,this.editor)}get children(){let t=[];return this.node.content.forEach((e,n)=>{let r=e.isBlock&&!e.isTextblock,o=e.isAtom&&!e.isText,i=this.pos+n+(o?0:1);if(i<0||i>this.resolvedPos.doc.nodeSize-2)return;let s=this.resolvedPos.doc.resolve(i);if(!r&&s.depth<=this.depth)return;let a=new tO(s,this.editor,r,r?e:null);r&&(a.actualDepth=this.depth+1),t.push(new tO(s,this.editor,r,r?e:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){let t=this.children;return t[t.length-1]||null}closest(t,e={}){let n=null,r=this.parent;for(;r&&!n;){if(r.node.type.name===t){if(Object.keys(e).length>0){let t=r.node.attrs,n=Object.keys(e);for(let r=0;r<n.length;r+=1){let o=n[r];if(t[o]!==e[o])break}}else n=r}r=r.parent}return n}querySelector(t,e={}){return this.querySelectorAll(t,e,!0)[0]||null}querySelectorAll(t,e={},n=!1){let r=[];if(!this.children||0===this.children.length)return r;let o=Object.keys(e);return this.children.forEach(i=>{if(n&&r.length>0)return;if(i.node.type.name===t&&o.every(t=>e[t]===i.node.attrs[t])&&r.push(i),!n||!(r.length>0))r=r.concat(i.querySelectorAll(t,e,n))}),r}setAttribute(t){let{tr:e}=this.editor.state;e.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(e)}}let t$=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;class tN extends p{constructor(t={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:e,moved:n})=>this.options.onDrop(t,e,n)),this.on("paste",({event:t,slice:e})=>this.options.onPaste(t,e)),window.setTimeout(()=>{if(!this.isDestroyed)this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=function(t,e,n){let r=document.querySelector("style[data-tiptap-style]");if(null!==r)return r;let o=document.createElement("style");return e&&o.setAttribute("nonce",e),o.setAttribute(`data-tiptap-style${n?`-${n}`:""}`,""),o.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(o),o}(t$,this.options.injectNonce))}setOptions(t={}){if(this.options={...this.options,...t},!!this.view&&!!this.state&&!this.isDestroyed)this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state)}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(t,e){let n=y(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;let e=this.state.plugins,n=e;if([].concat(t).forEach(t=>{let e="string"==typeof t?`${t}$`:t.key;n=n.filter(t=>!t.key.startsWith(e))}),e.length===n.length)return;let r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;let n=[...this.options.enableCoreExtensions?[tk,W.configure({blockSeparator:null===(e=null===(t=this.options.coreExtensionOptions)||void 0===t?void 0:t.clipboardTextSerializer)||void 0===e?void 0:e.blockSeparator}),tM,tx,tA,tT,tC,tE].filter(t=>"object"!=typeof this.options.enableCoreExtensions||!1!==this.options.enableCoreExtensions[t.name]):[],...this.options.extensions].filter(t=>["extension","node","mark"].includes(null==t?void 0:t.type));this.extensionManager=new I(n,this)}createCommandManager(){this.commandManager=new u({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var t;let e;try{e=ta(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(t=>"collaboration"!==t.name),this.createExtensionManager()}}),e=ta(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}let n=J(e,this.options.autofocus);this.view=new o.tk(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...null===(t=this.options.editorProps)||void 0===t?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:r.yy.create({doc:e,selection:n||void 0})});let i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass(),this.view.dom.editor=this}createNodeViews(){if(!this.view.isDestroyed)this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;let e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(t=>{var e;return null===(e=this.capturedTransaction)||void 0===e?void 0:e.step(t)});return}let e=this.state.apply(t),n=!this.state.selection.eq(e.selection);this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t}),n&&this.emit("selectionUpdate",{editor:this,transaction:t});let r=t.getMeta("focus"),o=t.getMeta("blur");if(r&&this.emit("focus",{editor:this,event:r.event,transaction:t}),o&&this.emit("blur",{editor:this,event:o.event,transaction:t}),!(!t.docChanged||t.getMeta("preventUpdate")))this.emit("update",{editor:this,transaction:t})}getAttributes(t){return function(t,e){let n=ti("string"==typeof e?e:e.name,t.schema);return"node"===n?function(t,e){let n=g(e,t.schema),{from:r,to:o}=t.selection,i=[];t.doc.nodesBetween(r,o,t=>{i.push(t)});let s=i.reverse().find(t=>t.type.name===n.name);return s?{...s.attrs}:{}}(t,e):"mark"===n?tl(t,e):{}}(this.state,t)}isActive(t,e){let n="string"==typeof t?t:null,r="string"==typeof t?e:t;return function(t,e,n={}){if(!e)return to(t,null,n)||th(t,null,n);let r=ti(e,t.schema);return"node"===r?to(t,e,n):"mark"===r&&th(t,e,n)}(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return x(this.state.doc.content,this.schema)}getText(t){let{blockSeparator:e="\n\n",textSerializers:n={}}=t||{};return function(t,e){let n={from:0,to:t.content.size};return j(t,n,e)}(this.state.doc,{blockSeparator:e,textSerializers:{..._(this.schema),...n}})}get isEmpty(){return tm(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){let t=this.view.dom;t&&t.editor&&delete t.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var t;return!(null===(t=this.view)||void 0===t?void 0:t.docView)}$node(t,e){var n;return(null===(n=this.$doc)||void 0===n?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return(null===(n=this.$doc)||void 0===n?void 0:n.querySelectorAll(t,e))||null}$pos(t){return new tO(this.state.doc.resolve(t),this)}get $doc(){return this.$pos(0)}}function tH(t){return new T({find:t.find,handler:({state:e,range:n,match:r})=>{let o=w(t.getAttributes,void 0,r);if(!1===o||null===o)return null;let{tr:i}=e,s=r[r.length-1],a=r[0];if(s){let r=a.search(/\S/),l=n.from+a.indexOf(s),d=l+s.length;if(tu(n.from,n.to,e.doc).filter(e=>e.mark.type.excluded.find(n=>n===t.type&&n!==e.mark.type)).filter(t=>t.to>l).length)return null;d<n.to&&i.delete(d,n.to),l>n.from&&i.delete(n.from+r,l);let c=n.from+r+s.length;i.addMark(n.from+r,c,t.type.create(o||{})),i.removeStoredMark(t.type)}}})}function tL(t){return new T({find:t.find,handler:({state:e,range:n,match:r})=>{let o=w(t.getAttributes,void 0,r)||{},{tr:i}=e,s=n.from,a=n.to,l=t.type.create(o);if(r[1]){let t=s+r[0].lastIndexOf(r[1]);t>a?t=a:a=t+r[1].length;let e=r[0][r[0].length-1];i.insertText(e,s+r[0].length-1),i.replaceWith(t,a,l)}else if(r[0]){let e=t.type.isInline?s:s-1;i.insert(e,t.type.create(o)).delete(i.mapping.map(s),i.mapping.map(a))}i.scrollIntoView()}})}function tP(t){return new T({find:t.find,handler:({state:e,range:n,match:r})=>{let o=e.doc.resolve(n.from),i=w(t.getAttributes,void 0,r)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,i)}})}function tB(t){return new T({find:t.find,handler:({state:e,range:n,match:r,chain:o})=>{let i=w(t.getAttributes,void 0,r)||{},s=e.tr.delete(n.from,n.to),l=s.doc.resolve(n.from).blockRange(),d=l&&(0,a.nd)(l,t.type,i);if(!d)return null;if(s.wrap(l,d),t.keepMarks&&t.editor){let{selection:n,storedMarks:r}=e,{splittableMarks:o}=t.editor.extensionManager,i=r||n.$to.parentOffset&&n.$from.marks();if(i){let t=i.filter(t=>o.includes(t.type.name));s.ensureMarks(t)}}if(t.keepAttributes){let e="bulletList"===t.type.name||"orderedList"===t.type.name?"listItem":"taskList";o().updateAttributes(e,i).run()}let c=s.doc.resolve(n.from-1).nodeBefore;c&&c.type===t.type&&(0,a.Mn)(s.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,c))&&s.join(n.from-1)}})}class tR{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=w(h(this,"addOptions",{name:this.name}))),this.storage=w(h(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new tR(t)}configure(t={}){let e=this.extend({...this.config,addOptions:()=>H(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){let e=new tR(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=w(h(e,"addOptions",{name:e.name})),e.storage=w(h(e,"addStorage",{name:e.name,options:e.options})),e}}class tD{constructor(t,e,n){this.isDragging=!1,this.component=t,this.editor=e.editor,this.options={stopEvent:null,ignoreMutation:null,...n},this.extension=e.extension,this.node=e.node,this.decorations=e.decorations,this.innerDecorations=e.innerDecorations,this.view=e.view,this.HTMLAttributes=e.HTMLAttributes,this.getPos=e.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(t){var e,n,o,i,s,a,l;let{view:d}=this.editor,c=t.target,u=3===c.nodeType?null===(e=c.parentElement)||void 0===e?void 0:e.closest("[data-drag-handle]"):c.closest("[data-drag-handle]");if(!this.dom||(null===(n=this.contentDOM)||void 0===n?void 0:n.contains(c))||!u)return;let p=0,h=0;if(this.dom!==u){let e=this.dom.getBoundingClientRect(),n=u.getBoundingClientRect(),r=null!==(o=t.offsetX)&&void 0!==o?o:null===(i=t.nativeEvent)||void 0===i?void 0:i.offsetX,l=null!==(s=t.offsetY)&&void 0!==s?s:null===(a=t.nativeEvent)||void 0===a?void 0:a.offsetY;p=n.x-e.x+r,h=n.y-e.y+l}let f=this.dom.cloneNode(!0);null===(l=t.dataTransfer)||void 0===l||l.setDragImage(f,p,h);let m=this.getPos();if("number"!=typeof m)return;let g=r.qv.create(d.state.doc,m),b=d.state.tr.setSelection(g);d.dispatch(b)}stopEvent(t){var e;if(!this.dom)return!1;if("function"==typeof this.options.stopEvent)return this.options.stopEvent({event:t});let n=t.target;if(!(this.dom.contains(n)&&!(null===(e=this.contentDOM)||void 0===e?void 0:e.contains(n))))return!1;let o=t.type.startsWith("drag"),i="drop"===t.type;if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(n.tagName)||n.isContentEditable)&&!i&&!o)return!0;let{isEditable:s}=this.editor,{isDragging:a}=this,l=!!this.node.type.spec.draggable,d=r.qv.isSelectable(this.node),c="copy"===t.type,u="paste"===t.type,p="cut"===t.type,h="mousedown"===t.type;if(!l&&d&&o&&t.target===this.dom&&t.preventDefault(),l&&o&&!a&&t.target===this.dom)return t.preventDefault(),!1;if(l&&s&&!a&&h){let t=n.closest("[data-drag-handle]");t&&(this.dom===t||this.dom.contains(t))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!a&&!i&&!c&&!u&&!p&&(!h||!d)&&!0}ignoreMutation(t){return!this.dom||!this.contentDOM||("function"==typeof this.options.ignoreMutation?this.options.ignoreMutation({mutation:t}):!!this.node.isLeaf||!!this.node.isAtom||!("selection"===t.type||this.dom.contains(t.target)&&"childList"===t.type&&(Z()||X())&&this.editor.isFocused&&[...Array.from(t.addedNodes),...Array.from(t.removedNodes)].every(t=>t.isContentEditable))&&(this.contentDOM===t.target&&"attributes"===t.type||!this.contentDOM.contains(t.target)&&!0))}updateAttributes(t){this.editor.commands.command(({tr:e})=>{let n=this.getPos();return"number"==typeof n&&(e.setNodeMarkup(n,void 0,{...this.node.attrs,...t}),!0)})}deleteNode(){let t=this.getPos();if("number"!=typeof t)return;let e=t+this.node.nodeSize;this.editor.commands.deleteRange({from:t,to:e})}}function tI(t){return new P({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:o})=>{let i=w(t.getAttributes,void 0,r,o);if(!1===i||null===i)return null;let{tr:s}=e,a=r[r.length-1],l=r[0],d=n.to;if(a){let r=l.search(/\S/),o=n.from+l.indexOf(a),c=o+a.length;if(tu(n.from,n.to,e.doc).filter(e=>e.mark.type.excluded.find(n=>n===t.type&&n!==e.mark.type)).filter(t=>t.to>o).length)return null;c<n.to&&s.delete(c,n.to),o>n.from&&s.delete(n.from+r,o),d=n.from+r+a.length,s.addMark(n.from+r,d,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}function tz(t,e){let{selection:n}=t,{$from:o}=n;if(n instanceof r.qv){let t=o.index();return o.parent.canReplaceWith(t,t+1,e)}let i=o.depth;for(;i>=0;){let t=o.index(i);if(o.node(i).contentMatchAt(t).matchType(e))return!0;i-=1}return!1}},611920:function(t,e,n){n.d(e,{ZP:function(){return i}});var r=n(348376);let o=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,i=r.NB.create({name:"image",addOptions:()=>({inline:!1,allowBase64:!1,HTMLAttributes:{}}),inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes:()=>({src:{default:null},alt:{default:null},title:{default:null}}),parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",(0,r.P1)(this.options.HTMLAttributes,t)]},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[(0,r.x2)({find:o,type:this.type,getAttributes:t=>{let[,,e,n,r]=t;return{src:n,alt:e,title:r}}})]}})},336153:function(t,e,n){n.d(e,{Z:function(){return o}});var r=n(348376);let o=r.NB.create({name:"tableCell",addOptions:()=>({HTMLAttributes:{}}),content:"block+",addAttributes:()=>({colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{let e=t.getAttribute("colwidth");return e?e.split(",").map(t=>parseInt(t,10)):null}}}),tableRole:"cell",isolating:!0,parseHTML:()=>[{tag:"td"}],renderHTML({HTMLAttributes:t}){return["td",(0,r.P1)(this.options.HTMLAttributes,t),0]}})},368629:function(t,e,n){n.d(e,{Z:function(){return o}});var r=n(348376);let o=r.NB.create({name:"tableHeader",addOptions:()=>({HTMLAttributes:{}}),content:"block+",addAttributes:()=>({colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{let e=t.getAttribute("colwidth");return e?e.split(",").map(t=>parseInt(t,10)):null}}}),tableRole:"header_cell",isolating:!0,parseHTML:()=>[{tag:"th"}],renderHTML({HTMLAttributes:t}){return["th",(0,r.P1)(this.options.HTMLAttributes,t),0]}})},300441:function(t,e,n){n.d(e,{Z:function(){return o}});var r=n(348376);let o=r.NB.create({name:"tableRow",addOptions:()=>({HTMLAttributes:{}}),content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML:()=>[{tag:"tr"}],renderHTML({HTMLAttributes:t}){return["tr",(0,r.P1)(this.options.HTMLAttributes,t),0]}})},321143:function(t,e,n){n.d(e,{ZP:()=>tu});var r,o,i=n("348376"),s=n("267774"),a=n("462372"),l=n("800967"),d=n("738193"),c=n("962221");if("undefined"!=typeof WeakMap){let t=new WeakMap;r=e=>t.get(e),o=(e,n)=>(t.set(e,n),n)}else{let t=[],e=0;r=e=>{for(let n=0;n<t.length;n+=2)if(t[n]==e)return t[n+1]},o=(n,r)=>(10==e&&(e=0),t[e++]=n,t[e++]=r)}var u=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){let n=this.map[e];if(n!=t)continue;let r=e%this.width,o=e/this.width|0,i=r+1,s=o+1;for(let t=1;i<this.width&&this.map[e+t]==n;t++)i++;for(let t=1;s<this.height&&this.map[e+this.width*t]==n;t++)s++;return{left:r,top:o,right:i,bottom:s}}throw RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){let{left:r,right:o,top:i,bottom:s}=this.findCell(t);if("horiz"==e)return(n<0?0==r:o==this.width)?null:this.map[i*this.width+(n<0?r-1:o)];return(n<0?0==i:s==this.height)?null:this.map[r+this.width*(n<0?i-1:s)]}rectBetween(t,e){let{left:n,right:r,top:o,bottom:i}=this.findCell(t),{left:s,right:a,top:l,bottom:d}=this.findCell(e);return{left:Math.min(n,s),top:Math.min(o,l),right:Math.max(r,a),bottom:Math.max(i,d)}}cellsInRect(t){let e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let o=t.left;o<t.right;o++){let i=r*this.width+o,s=this.map[i];if(!n[s]){if(n[s]=!0,o==t.left&&o&&this.map[i-1]==s||r==t.top&&r&&this.map[i-this.width]==s)continue;e.push(s)}}return e}positionAt(t,e,n){for(let r=0,o=0;;r++){let i=o+n.child(r).nodeSize;if(r==t){let n=e+t*this.width,r=(t+1)*this.width;for(;n<r&&this.map[n]<o;)n++;return n==r?i-1:this.map[n]}o=i}}static get(t){return r(t)||o(t,function(t){if("table"!=t.type.spec.tableRole)throw RangeError("Not a table node: "+t.type.name);let e=function(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){let o=t.child(r),i=0;if(n)for(let e=0;e<r;e++){let n=t.child(e);for(let t=0;t<n.childCount;t++){let o=n.child(t);e+o.attrs.rowspan>r&&(i+=o.attrs.colspan)}}for(let t=0;t<o.childCount;t++){let e=o.child(t);i+=e.attrs.colspan,e.attrs.rowspan>1&&(n=!0)}-1==e?e=i:e!=i&&(e=Math.max(e,i))}return e}(t),n=t.childCount,r=[],o=0,i=null,s=[];for(let t=0,o=e*n;t<o;t++)r[t]=0;for(let a=0,l=0;a<n;a++){let d=t.child(a);l++;for(let t=0;;t++){for(;o<r.length&&0!=r[o];)o++;if(t==d.childCount)break;let c=d.child(t),{colspan:u,rowspan:p,colwidth:h}=c.attrs;for(let t=0;t<p;t++){if(t+a>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:l,n:p-t});break}let d=o+t*e;for(let t=0;t<u;t++){0==r[d+t]?r[d+t]=l:(i||(i=[])).push({type:"collision",row:a,pos:l,n:u-t});let n=h&&h[t];if(n){let r=(d+t)%e*2,o=s[r];null==o||o!=n&&1==s[r+1]?(s[r]=n,s[r+1]=1):o==n&&s[r+1]++}}}o+=u,l+=c.nodeSize}let c=(a+1)*e,u=0;for(;o<c;)0==r[o++]&&u++;u&&(i||(i=[])).push({type:"missing",row:a,n:u}),l++}(0===e||0===n)&&(i||(i=[])).push({type:"zero_sized"});let a=new u(e,n,r,i),l=!1;for(let t=0;!l&&t<s.length;t+=2)null!=s[t]&&s[t+1]<n&&(l=!0);return l&&function(t,e,n){!t.problems&&(t.problems=[]);let r={};for(let o=0;o<t.map.length;o++){let i=t.map[o];if(r[i])continue;r[i]=!0;let s=n.nodeAt(i);if(!s)throw RangeError(`No cell with offset ${i} found`);let a=null,l=s.attrs;for(let n=0;n<l.colspan;n++){let r=e[2*((o+n)%t.width)];null!=r&&(!l.colwidth||l.colwidth[n]!=r)&&((a||(a=function(t){if(t.colwidth)return t.colwidth.slice();let e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}(l)))[n]=r)}a&&t.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:a})}}(a,s,t),a}(t))}};function p(t){let e=t.cached.tableNodeTypes;if(!e)for(let n in e=t.cached.tableNodeTypes={},t.nodes){let r=t.nodes[n],o=r.spec.tableRole;o&&(e[o]=r)}return e}var h=new s.H$("selectingCells");function f(t){for(let e=t.depth-1;e>0;e--)if("row"==t.node(e).type.spec.tableRole)return t.node(0).resolve(t.before(e+1));return null}function m(t){let e=t.selection.$head;for(let t=e.depth;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return!0;return!1}function g(t){let e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&"cell"==e.node.type.spec.tableRole)return e.$anchor;let n=f(e.$head)||function(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){let r=e.type.spec.tableRole;if("cell"==r||"header_cell"==r)return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){let r=e.type.spec.tableRole;if("cell"==r||"header_cell"==r)return t.doc.resolve(n-e.nodeSize)}}(e.$head);if(n)return n;throw RangeError(`No cell found around position ${e.head}`)}function b(t){return"row"==t.parent.type.spec.tableRole&&!!t.nodeAfter}function v(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function y(t,e,n){let r=t.node(-1),o=u.get(r),i=t.start(-1),s=o.nextCell(t.pos-i,e,n);return null==s?null:t.node(0).resolve(i+s)}function w(t,e,n=1){let r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),!r.colwidth.some(t=>t>0)&&(r.colwidth=null)),r}function M(t,e,n=1){let r={...t,colspan:t.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let t=0;t<n;t++)r.colwidth.splice(e,0,0)}return r}var C=class t extends s.Y1{constructor(t,e=t){let n=t.node(-1),r=u.get(n),o=t.start(-1),i=r.rectBetween(t.pos-o,e.pos-o),a=t.node(0),l=r.cellsInRect(i).filter(t=>t!=e.pos-o);l.unshift(e.pos-o);let d=l.map(t=>{let e=n.nodeAt(t);if(!e)throw RangeError(`No cell with offset ${t} found`);let r=o+t+1;return new s.xm(a.resolve(r),a.resolve(r+e.content.size))});super(d[0].$from,d[0].$to,d),this.$anchorCell=t,this.$headCell=e}map(e,n){let r=e.resolve(n.map(this.$anchorCell.pos)),o=e.resolve(n.map(this.$headCell.pos));if(b(r)&&b(o)&&v(r,o)){let e=this.$anchorCell.node(-1)!=r.node(-1);return e&&this.isRowSelection()?t.rowSelection(r,o):e&&this.isColSelection()?t.colSelection(r,o):new t(r,o)}return s.Bs.between(r,o)}content(){let t=this.$anchorCell.node(-1),e=u.get(t),n=this.$anchorCell.start(-1),r=e.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),o={},i=[];for(let n=r.top;n<r.bottom;n++){let s=[];for(let i=n*e.width+r.left,a=r.left;a<r.right;a++,i++){let n=e.map[i];if(o[n])continue;o[n]=!0;let a=e.findCell(n),l=t.nodeAt(n);if(!l)throw RangeError(`No cell with offset ${n} found`);let d=r.left-a.left,c=a.right-r.right;if(d>0||c>0){let t=l.attrs;if(d>0&&(t=w(t,0,d)),c>0&&(t=w(t,t.colspan-c,c)),a.left<r.left){if(!(l=l.type.createAndFill(t)))throw RangeError(`Could not create cell with attrs ${JSON.stringify(t)}`)}else l=l.type.create(t,l.content)}if(a.top<r.top||a.bottom>r.bottom){let t={...l.attrs,rowspan:Math.min(a.bottom,r.bottom)-Math.max(a.top,r.top)};l=a.top<r.top?l.type.createAndFill(t):l.type.create(t,l.content)}s.push(l)}i.push(t.child(n).copy(a.HY.from(s)))}let s=this.isColSelection()&&this.isRowSelection()?t:i;return new a.p2(a.HY.from(s),1,1)}replace(t,e=a.p2.empty){let n=t.steps.length,r=this.ranges;for(let o=0;o<r.length;o++){let{$from:i,$to:s}=r[o],l=t.mapping.slice(n);t.replace(l.map(i.pos),l.map(s.pos),o?a.p2.empty:e)}let o=s.Y1.findFrom(t.doc.resolve(t.mapping.slice(n).map(this.to)),-1);o&&t.setSelection(o)}replaceWith(t,e){this.replace(t,new a.p2(a.HY.from(e),0,0))}forEachCell(t){let e=this.$anchorCell.node(-1),n=u.get(e),r=this.$anchorCell.start(-1),o=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r));for(let n=0;n<o.length;n++)t(e.nodeAt(o[n]),r+o[n])}isColSelection(){let t=this.$anchorCell.index(-1),e=this.$headCell.index(-1);if(Math.min(t,e)>0)return!1;let n=t+this.$anchorCell.nodeAfter.attrs.rowspan;return Math.max(n,e+this.$headCell.nodeAfter.attrs.rowspan)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){let r=e.node(-1),o=u.get(r),i=e.start(-1),s=o.findCell(e.pos-i),a=o.findCell(n.pos-i),l=e.node(0);return s.top<=a.top?(s.top>0&&(e=l.resolve(i+o.map[s.left])),a.bottom<o.height&&(n=l.resolve(i+o.map[o.width*(o.height-1)+a.right-1]))):(a.top>0&&(n=l.resolve(i+o.map[a.left])),s.bottom<o.height&&(e=l.resolve(i+o.map[o.width*(o.height-1)+s.right-1]))),new t(e,n)}isRowSelection(){let t=this.$anchorCell.node(-1),e=u.get(t),n=this.$anchorCell.start(-1),r=e.colCount(this.$anchorCell.pos-n),o=e.colCount(this.$headCell.pos-n);if(Math.min(r,o)>0)return!1;let i=r+this.$anchorCell.nodeAfter.attrs.colspan;return Math.max(i,o+this.$headCell.nodeAfter.attrs.colspan)==e.width}eq(e){return e instanceof t&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){let r=e.node(-1),o=u.get(r),i=e.start(-1),s=o.findCell(e.pos-i),a=o.findCell(n.pos-i),l=e.node(0);return s.left<=a.left?(s.left>0&&(e=l.resolve(i+o.map[s.top*o.width])),a.right<o.width&&(n=l.resolve(i+o.map[o.width*(a.top+1)-1]))):(a.left>0&&(n=l.resolve(i+o.map[a.top*o.width])),s.right<o.width&&(e=l.resolve(i+o.map[o.width*(s.top+1)-1]))),new t(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new t(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new t(e.resolve(n),e.resolve(r))}getBookmark(){return new k(this.$anchorCell.pos,this.$headCell.pos)}};C.prototype.visible=!1,s.Y1.jsonID("cell",C);var k=class t{constructor(t,e){this.anchor=t,this.head=e}map(e){return new t(e.map(this.anchor),e.map(this.head))}resolve(t){let e=t.resolve(this.anchor),n=t.resolve(this.head);return"row"==e.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&e.index()<e.parent.childCount&&n.index()<n.parent.childCount&&v(e,n)?new C(e,n):s.Y1.near(n,1)}};function S(t){if(!(t.selection instanceof C))return null;let e=[];return t.selection.forEachCell((t,n)=>{e.push(l.p.node(n,n+t.nodeSize,{class:"selectedCell"}))}),l.EH.create(t.doc,e)}var x=new s.H$("fix-tables");function A(t,e){let n;let r=(e,r)=>{"table"==e.type.spec.tableRole&&(n=function(t,e,n,r){let o,i;let s=u.get(e);if(!s.problems)return r;!r&&(r=t.tr);let a=[];for(let t=0;t<s.height;t++)a.push(0);for(let t=0;t<s.problems.length;t++){let o=s.problems[t];if("collision"==o.type){let t=e.nodeAt(o.pos);if(!t)continue;let i=t.attrs;for(let t=0;t<i.rowspan;t++)a[o.row+t]+=o.n;r.setNodeMarkup(r.mapping.map(n+1+o.pos),null,w(i,i.colspan-o.n,o.n))}else if("missing"==o.type)a[o.row]+=o.n;else if("overlong_rowspan"==o.type){let t=e.nodeAt(o.pos);if(!t)continue;r.setNodeMarkup(r.mapping.map(n+1+o.pos),null,{...t.attrs,rowspan:t.attrs.rowspan-o.n})}else if("colwidth mismatch"==o.type){let t=e.nodeAt(o.pos);if(!t)continue;r.setNodeMarkup(r.mapping.map(n+1+o.pos),null,{...t.attrs,colwidth:o.colwidth})}else if("zero_sized"==o.type){let t=r.mapping.map(n);r.delete(t,t+e.nodeSize)}}for(let t=0;t<a.length;t++)a[t]&&(null==o&&(o=t),i=t);for(let l=0,d=n+1;l<s.height;l++){let n=e.child(l),s=d+n.nodeSize,c=a[l];if(c>0){let e="cell";n.firstChild&&(e=n.firstChild.type.spec.tableRole);let a=[];for(let n=0;n<c;n++){let n=p(t.schema)[e].createAndFill();n&&a.push(n)}let u=(0==l||o==l-1)&&i==l?d+1:s-1;r.insert(r.mapping.map(u),a)}d=s}return r.setMeta(x,{fixTables:!0})}(t,e,r,n))};return e?e.doc!=t.doc&&!function t(e,n,r,o){let i=e.childCount,s=n.childCount;t:for(let a=0,l=0;a<s;a++){let s=n.child(a);for(let t=l,n=Math.min(i,a+3);t<n;t++)if(e.child(t)==s){l=t+1,r+=s.nodeSize;continue t}o(s,r),l<i&&e.child(l).sameMarkup(s)?t(e.child(l),s,r+1,o):s.nodesBetween(0,s.content.size,o,r+1),r+=s.nodeSize}}(e.doc,t.doc,0,r):t.doc.descendants(r),n}function E(t){let e=t.selection,n=g(t),r=n.node(-1),o=n.start(-1),i=u.get(r);return{...e instanceof C?i.rectBetween(e.$anchorCell.pos-o,e.$headCell.pos-o):i.findCell(n.pos-o),tableStart:o,map:i,table:r}}function T(t,{map:e,tableStart:n,table:r},o){let i=o>0?-1:0;(function(t,e,n){let r=p(e.type.schema).header_cell;for(let o=0;o<t.height;o++)if(e.nodeAt(t.map[n+o*t.width]).type!=r)return!1;return!0})(e,r,o+i)&&(i=0==o||o==e.width?null:0);for(let s=0;s<e.height;s++){let a=s*e.width+o;if(o>0&&o<e.width&&e.map[a-1]==e.map[a]){let i=e.map[a],l=r.nodeAt(i);t.setNodeMarkup(t.mapping.map(n+i),null,M(l.attrs,o-e.colCount(i))),s+=l.attrs.rowspan-1}else{let l=null==i?p(r.type.schema).cell:r.nodeAt(e.map[a+i]).type,d=e.positionAt(s,o,r);t.insert(t.mapping.map(n+d),l.createAndFill())}}return t}function O(t,{map:e,tableStart:n,table:r},o){var i;let s=n;for(let t=0;t<o;t++)s+=r.child(t).nodeSize;let a=[],l=o>0?-1:0;(function(t,e,n){var r;let o=p(e.type.schema).header_cell;for(let i=0;i<t.width;i++)if((null==(r=e.nodeAt(t.map[i+n*t.width]))?void 0:r.type)!=o)return!1;return!0})(e,r,o+l)&&(l=0==o||o==e.height?null:0);for(let s=0,d=e.width*o;s<e.width;s++,d++)if(o>0&&o<e.height&&e.map[d]==e.map[d-e.width]){let o=e.map[d],i=r.nodeAt(o).attrs;t.setNodeMarkup(n+o,null,{...i,rowspan:i.rowspan+1}),s+=i.colspan-1}else{let t=null==l?p(r.type.schema).cell:null==(i=r.nodeAt(e.map[d+l*e.width]))?void 0:i.type,n=null==t?void 0:t.createAndFill();n&&a.push(n)}return t.insert(s,p(r.type.schema).row.create(null,a)),t}function $(t){let e=t.content;return 1==e.childCount&&e.child(0).isTextblock&&0==e.child(0).childCount}function N(t,e){let n=t.selection;if(!(n instanceof C)||n.$anchorCell.pos==n.$headCell.pos)return!1;let r=E(t),{map:o}=r;if(function({width:t,height:e,map:n},r){let o=r.top*t+r.left,i=o,s=(r.bottom-1)*t+r.left,a=o+(r.right-r.left-1);for(let e=r.top;e<r.bottom;e++){if(r.left>0&&n[i]==n[i-1]||r.right<t&&n[a]==n[a+1])return!0;i+=t,a+=t}for(let i=r.left;i<r.right;i++){if(r.top>0&&n[o]==n[o-t]||r.bottom<e&&n[s]==n[s+t])return!0;o++,s++}return!1}(o,r))return!1;if(e){let n,i;let s=t.tr,l={},d=a.HY.empty;for(let t=r.top;t<r.bottom;t++)for(let e=r.left;e<r.right;e++){let a=o.map[t*o.width+e],c=r.table.nodeAt(a);if(!l[a]&&c){if(l[a]=!0,null==n)n=a,i=c;else{!$(c)&&(d=d.append(c.content));let t=s.mapping.map(a+r.tableStart);s.delete(t,t+c.nodeSize)}}}if(null==n||null==i)return!0;if(s.setNodeMarkup(n+r.tableStart,null,{...M(i.attrs,i.attrs.colspan,r.right-r.left-i.attrs.colspan),rowspan:r.bottom-r.top}),d.size){let t=n+1+i.content.size,e=$(i)?n+1:t;s.replaceWith(e+r.tableStart,t+r.tableStart,d)}s.setSelection(new C(s.doc.resolve(n+r.tableStart))),e(s)}return!0}function H(t,e){let n=p(t.schema);return(function(t){return(e,n)=>{var r;let o,i;let s=e.selection;if(s instanceof C){if(s.$anchorCell.pos!=s.$headCell.pos)return!1;o=s.$anchorCell.nodeAfter,i=s.$anchorCell.pos}else{if(!(o=function(t){for(let e=t.depth;e>0;e--){let n=t.node(e).type.spec.tableRole;if("cell"===n||"header_cell"===n)return t.node(e)}return null}(s.$from)))return!1;i=null==(r=f(s.$from))?void 0:r.pos}if(null==o||null==i||1==o.attrs.colspan&&1==o.attrs.rowspan)return!1;if(n){let r,a=o.attrs,l=[],d=a.colwidth;a.rowspan>1&&(a={...a,rowspan:1}),a.colspan>1&&(a={...a,colspan:1});let c=E(e),u=e.tr;for(let t=0;t<c.right-c.left;t++)l.push(d?{...a,colwidth:d&&d[t]?[d[t]]:null}:a);for(let e=c.top;e<c.bottom;e++){let n=c.map.positionAt(e,c.left,c.table);e==c.top&&(n+=o.nodeSize);for(let i=c.left,s=0;i<c.right;i++,s++)(i!=c.left||e!=c.top)&&u.insert(r=u.mapping.map(n+c.tableStart,1),t({node:o,row:e,col:i}).createAndFill(l[s]))}u.setNodeMarkup(i,t({node:o,row:c.top,col:c.left}),l[0]),s instanceof C&&u.setSelection(new C(u.doc.resolve(s.$anchorCell.pos),r?u.doc.resolve(r):void 0)),n(u)}return!0}})(({node:t})=>n[t.type.spec.tableRole])(t,e)}function L(t,e,n){let r=e.map.cellsInRect({left:0,top:0,right:"row"==t?e.map.width:1,bottom:"column"==t?e.map.height:1});for(let t=0;t<r.length;t++){let o=e.table.nodeAt(r[t]);if(o&&o.type!==n.header_cell)return!1}return!0}function P(t,e){if((e=e||{useDeprecatedLogic:!1}).useDeprecatedLogic){var n;return n=t,function(t,e){if(!m(t))return!1;if(e){let r=p(t.schema),o=E(t),i=t.tr,s=o.map.cellsInRect("column"==n?{left:o.left,top:0,right:o.right,bottom:o.map.height}:"row"==n?{left:0,top:o.top,right:o.map.width,bottom:o.bottom}:o),a=s.map(t=>o.table.nodeAt(t));for(let t=0;t<s.length;t++)a[t].type==r.header_cell&&i.setNodeMarkup(o.tableStart+s[t],r.cell,a[t].attrs);if(0==i.steps.length)for(let t=0;t<s.length;t++)i.setNodeMarkup(o.tableStart+s[t],r.header_cell,a[t].attrs);e(i)}return!0}}return function(e,n){if(!m(e))return!1;if(n){let r=p(e.schema),o=E(e),i=e.tr,s=L("row",o,r),a=L("column",o,r),l=("column"===t?s:"row"===t&&a)?1:0,d="column"==t?{left:0,top:l,right:1,bottom:o.map.height}:"row"==t?{left:l,top:0,right:o.map.width,bottom:1}:o,c="column"==t?a?r.cell:r.header_cell:"row"==t?s?r.cell:r.header_cell:r.cell;o.map.cellsInRect(d).forEach(t=>{let e=t+o.tableStart,n=i.doc.nodeAt(e);n&&i.setNodeMarkup(e,c,n.attrs)}),n(i)}return!0}}P("row",{useDeprecatedLogic:!0}),P("column",{useDeprecatedLogic:!0});var B=P("cell",{useDeprecatedLogic:!0});function R(t){return function(e,n){if(!m(e))return!1;let r=function(t,e){if(e<0){let e=t.nodeBefore;if(e)return t.pos-e.nodeSize;for(let e=t.index(-1)-1,n=t.before();e>=0;e--){let r=t.node(-1).child(e),o=r.lastChild;if(o)return n-1-o.nodeSize;n-=r.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;let e=t.node(-1);for(let n=t.indexAfter(-1),r=t.after();n<e.childCount;n++){let t=e.child(n);if(t.childCount)return r+1;r+=t.nodeSize}}return null}(g(e),t);if(null==r)return!1;if(n){var o;let t=e.doc.resolve(r);n(e.tr.setSelection(s.Bs.between(t,(o=t).node(0).resolve(o.pos+o.nodeAfter.nodeSize))).scrollIntoView())}return!0}}function D(t,e){let n=t.selection;if(!(n instanceof C))return!1;if(e){let r=t.tr,o=p(t.schema).cell.createAndFill().content;n.forEachCell((t,e)=>{!t.content.eq(o)&&r.replace(r.mapping.map(e+1),r.mapping.map(e+t.nodeSize-1),new a.p2(o,0,0))}),r.docChanged&&e(r)}return!0}function I(t,e){let n=t.createAndFill();return new c.wx(n).replace(0,n.content.size,e).doc}function z(t,e,n,r,o,i,s,a){if(0==s||s==e.height)return!1;let l=!1;for(let d=o;d<i;d++){let o=s*e.width+d,i=e.map[o];if(e.map[o-e.width]==i){l=!0;let o=n.nodeAt(i),{top:c,left:u}=e.findCell(i);t.setNodeMarkup(t.mapping.slice(a).map(i+r),null,{...o.attrs,rowspan:s-c}),t.insert(t.mapping.slice(a).map(e.positionAt(s,u,n)),o.type.createAndFill({...o.attrs,rowspan:c+o.attrs.rowspan-s})),d+=o.attrs.colspan-1}}return l}function j(t,e,n,r,o,i,s,a){if(0==s||s==e.width)return!1;let l=!1;for(let d=o;d<i;d++){let o=d*e.width+s,i=e.map[o];if(e.map[o-1]==i){l=!0;let o=n.nodeAt(i),c=e.colCount(i),u=t.mapping.slice(a).map(i+r);t.setNodeMarkup(u,null,w(o.attrs,s-c,o.attrs.colspan-(s-c))),t.insert(u+o.nodeSize,o.type.createAndFill(w(o.attrs,0,s-c))),d+=o.attrs.rowspan-1}}return l}function _(t,e,n,r,o){let i=n?t.doc.nodeAt(n-1):t.doc;if(!i)throw Error("No table found");let s=u.get(i),{top:l,left:d}=r,c=d+o.width,h=l+o.height,f=t.tr,m=0;function g(){if(!(i=n?f.doc.nodeAt(n-1):f.doc))throw Error("No table found");s=u.get(i),m=f.mapping.maps.length}(function(t,e,n,r,o,i,s){let l,d;let c=p(t.doc.type.schema);if(o>e.width)for(let i=0,a=0;i<e.height;i++){let u;let p=n.child(i);a+=p.nodeSize;let h=[];u=null==p.lastChild||p.lastChild.type==c.cell?l||(l=c.cell.createAndFill()):d||(d=c.header_cell.createAndFill());for(let t=e.width;t<o;t++)h.push(u);t.insert(t.mapping.slice(s).map(a-1+r),h)}if(i>e.height){let u=[];for(let t=0,r=(e.height-1)*e.width;t<Math.max(e.width,o);t++){let o=!(t>=e.width)&&n.nodeAt(e.map[r+t]).type==c.header_cell;u.push(o?d||(d=c.header_cell.createAndFill()):l||(l=c.cell.createAndFill()))}let p=c.row.create(null,a.HY.from(u)),h=[];for(let t=e.height;t<i;t++)h.push(p);t.insert(t.mapping.slice(s).map(r+n.nodeSize-2),h)}return!!(l||d)})(f,s,i,n,c,h,0)&&g(),z(f,s,i,n,d,c,l,m)&&g(),z(f,s,i,n,d,c,h,m)&&g(),j(f,s,i,n,l,h,d,m)&&g(),j(f,s,i,n,l,h,c,m)&&g();for(let t=l;t<h;t++){let e=s.positionAt(t,d,i),r=s.positionAt(t,c,i);f.replace(f.mapping.slice(m).map(e+n),f.mapping.slice(m).map(r+n),new a.p2(o.rows[t-l],0,0))}g(),f.setSelection(new C(f.doc.resolve(n+s.positionAt(l,d,i)),f.doc.resolve(n+s.positionAt(h-1,c-1,i)))),e(f)}var W=(0,d.$)({ArrowLeft:K("horiz",-1),ArrowRight:K("horiz",1),ArrowUp:K("vert",-1),ArrowDown:K("vert",1),"Shift-ArrowLeft":V("horiz",-1),"Shift-ArrowRight":V("horiz",1),"Shift-ArrowUp":V("vert",-1),"Shift-ArrowDown":V("vert",1),Backspace:D,"Mod-Backspace":D,Delete:D,"Mod-Delete":D});function F(t,e,n){return!n.eq(t.selection)&&(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function K(t,e){return(n,r,o)=>{if(!o)return!1;let i=n.selection;if(i instanceof C)return F(n,r,s.Y1.near(i.$headCell,e));if("horiz"!=t&&!i.empty)return!1;let a=G(o,t,e);if(null==a)return!1;if("horiz"==t)return F(n,r,s.Y1.near(n.doc.resolve(i.head+e),e));{let o;let i=n.doc.resolve(a),l=y(i,t,e);return o=l?s.Y1.near(l,1):e<0?s.Y1.near(n.doc.resolve(i.before(-1)),-1):s.Y1.near(n.doc.resolve(i.after(-1)),1),F(n,r,o)}}}function V(t,e){return(n,r,o)=>{let i;if(!o)return!1;let s=n.selection;if(s instanceof C)i=s;else{let r=G(o,t,e);if(null==r)return!1;i=new C(n.doc.resolve(r))}let a=y(i.$headCell,t,e);return!!a&&F(n,r,new C(i.$anchorCell,a))}}function Y(t,e){let n=f(t.state.doc.resolve(e));return!!n&&(t.dispatch(t.state.tr.setSelection(new C(n))),!0)}function q(t,e,n){if(!m(t.state))return!1;let r=function(t){if(!t.size)return null;let{content:e,openStart:n,openEnd:r}=t;for(;1==e.childCount&&(n>0&&r>0||"table"==e.child(0).type.spec.tableRole);)n--,r--,e=e.child(0).content;let o=e.child(0),i=o.type.spec.tableRole,s=o.type.schema,l=[];if("row"==i)for(let t=0;t<e.childCount;t++){let o=e.child(t).content,i=t?0:Math.max(0,n-1),d=t<e.childCount-1?0:Math.max(0,r-1);(i||d)&&(o=I(p(s).row,new a.p2(o,i,d)).content),l.push(o)}else{if("cell"!=i&&"header_cell"!=i)return null;l.push(n||r?I(p(s).row,new a.p2(e,n,r)).content:e)}return function(t,e){let n=[];for(let t=0;t<e.length;t++){let r=e[t];for(let e=r.childCount-1;e>=0;e--){let{rowspan:o,colspan:i}=r.child(e).attrs;for(let e=t;e<t+o;e++)n[e]=(n[e]||0)+i}}let r=0;for(let t=0;t<n.length;t++)r=Math.max(r,n[t]);for(let o=0;o<n.length;o++)if(o>=e.length&&e.push(a.HY.empty),n[o]<r){let i=p(t).cell.createAndFill(),s=[];for(let t=n[o];t<r;t++)s.push(i);e[o]=e[o].append(a.HY.from(s))}return{height:e.length,width:r,rows:e}}(s,l)}(n),o=t.state.selection;if(o instanceof C){!r&&(r={width:1,height:1,rows:[a.HY.from(I(p(t.state.schema).cell,n))]});let e=o.$anchorCell.node(-1),i=o.$anchorCell.start(-1),s=u.get(e).rectBetween(o.$anchorCell.pos-i,o.$headCell.pos-i);return r=function({width:t,height:e,rows:n},r,o){if(t!=r){let e=[],o=[];for(let t=0;t<n.length;t++){let i=n[t],s=[];for(let n=e[t]||0,o=0;n<r;o++){let a=i.child(o%i.childCount);n+a.attrs.colspan>r&&(a=a.type.createChecked(w(a.attrs,a.attrs.colspan,n+a.attrs.colspan-r),a.content)),s.push(a),n+=a.attrs.colspan;for(let n=1;n<a.attrs.rowspan;n++)e[t+n]=(e[t+n]||0)+a.attrs.colspan}o.push(a.HY.from(s))}n=o,t=r}if(e!=o){let t=[];for(let r=0,i=0;r<o;r++,i++){let s=[],l=n[i%e];for(let t=0;t<l.childCount;t++){let e=l.child(t);r+e.attrs.rowspan>o&&(e=e.type.create({...e.attrs,rowspan:Math.max(1,o-e.attrs.rowspan)},e.content)),s.push(e)}t.push(a.HY.from(s))}n=t,e=o}return{width:t,height:e,rows:n}}(r,s.right-s.left,s.bottom-s.top),_(t.state,t.dispatch,i,s,r),!0}if(!r)return!1;{let e=g(t.state),n=e.start(-1);return _(t.state,t.dispatch,n,u.get(e.node(-1)).findCell(e.pos-n),r),!0}}function U(t,e){var n;let r;if(e.ctrlKey||e.metaKey)return;let o=J(t,e.target);if(e.shiftKey&&t.state.selection instanceof C)i(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&o&&null!=(r=f(t.state.selection.$anchor))&&(null==(n=X(t,e))?void 0:n.pos)!=r.pos)i(r,e),e.preventDefault();else if(!o)return;function i(e,n){let r=X(t,n),o=null==h.getState(t.state);if(!r||!v(e,r)){if(!o)return;r=e}let i=new C(e,r);if(o||!t.state.selection.eq(i)){let n=t.state.tr.setSelection(i);o&&n.setMeta(h,e.pos),t.dispatch(n)}}function s(){t.root.removeEventListener("mouseup",s),t.root.removeEventListener("dragstart",s),t.root.removeEventListener("mousemove",a),null!=h.getState(t.state)&&t.dispatch(t.state.tr.setMeta(h,-1))}function a(n){let r;let a=h.getState(t.state);if(null!=a)r=t.state.doc.resolve(a);else if(J(t,n.target)!=o&&!(r=X(t,e)))return s();r&&i(r,n)}t.root.addEventListener("mouseup",s),t.root.addEventListener("dragstart",s),t.root.addEventListener("mousemove",a)}function G(t,e,n){if(!(t.state.selection instanceof s.Bs))return null;let{$head:r}=t.state.selection;for(let o=r.depth-1;o>=0;o--){let i=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:i.childCount))break;if("cell"==i.type.spec.tableRole||"header_cell"==i.type.spec.tableRole){let i=r.before(o),s="vert"==e?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(s)?i:null}}return null}function J(t,e){for(;e&&e!=t.dom;e=e.parentNode)if("TD"==e.nodeName||"TH"==e.nodeName)return e;return null}function X(t,e){let n=t.posAtCoords({left:e.clientX,top:e.clientY});return n?n?f(t.state.doc.resolve(n.pos)):null:null}var Z=class{constructor(t,e){this.node=t,this.defaultCellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${e}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Q(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type==this.node.type&&(this.node=t,Q(t,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(t){return"attributes"==t.type&&(t.target==this.table||this.colgroup.contains(t.target))}};function Q(t,e,n,r,o,i){var s;let a=0,l=!0,d=e.firstChild,c=t.firstChild;if(c){for(let t=0,n=0;t<c.childCount;t++){let{colspan:s,colwidth:u}=c.child(t).attrs;for(let t=0;t<s;t++,n++){let s=o==n?i:u&&u[t],c=s?s+"px":"";if(a+=s||r,!s&&(l=!1),d)d.style.width!=c&&(d.style.width=c),d=d.nextSibling;else{let t=document.createElement("col");t.style.width=c,e.appendChild(t)}}}for(;d;){let t=d.nextSibling;null==(s=d.parentNode)||s.removeChild(d),d=t}l?(n.style.width=a+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=a+"px")}}var tt=new s.H$("tableColumnResizing"),te=class t{constructor(t,e){this.activeHandle=t,this.dragging=e}apply(e){let n=e.getMeta(tt);if(n&&null!=n.setHandle)return new t(n.setHandle,!1);if(n&&void 0!==n.setDragging)return new t(this.activeHandle,n.setDragging);if(this.activeHandle>-1&&e.docChanged){let n=e.mapping.map(this.activeHandle,-1);return!b(e.doc.resolve(n))&&(n=-1),new t(n,this.dragging)}return this}};function tn(t,e,n,r){let o=t.posAtCoords({left:e.clientX+("right"==n?-r:r),top:e.clientY});if(!o)return -1;let{pos:i}=o,s=f(t.state.doc.resolve(i));if(!s)return -1;if("right"==n)return s.pos;let a=u.get(s.node(-1)),l=s.start(-1),d=a.map.indexOf(s.pos-l);return d%a.width==0?-1:l+a.map[d-1]}function tr(t,e,n){let r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function to(t,e){t.dispatch(t.state.tr.setMeta(tt,{setHandle:e}))}function ti(t,e,n,r){let o=t.state.doc.resolve(e),i=o.node(-1),s=o.start(-1),a=u.get(i).colCount(o.pos-s)+o.nodeAfter.attrs.colspan-1,l=t.domAtPos(o.start(-1)).node;for(;l&&"TABLE"!=l.nodeName;)l=l.parentNode;l&&Q(i,l.firstChild,l,r,a,n)}function ts(t,e){return e?["width",`${Math.max(e,t)}px`]:["min-width",`${t}px`]}function ta(t,e,n,r,o,i){var s;let a=0,l=!0,d=e.firstChild,c=t.firstChild;if(null!==c)for(let t=0,n=0;t<c.childCount;t+=1){let{colspan:s,colwidth:u}=c.child(t).attrs;for(let t=0;t<s;t+=1,n+=1){let s=o===n?i:u&&u[t],c=s?`${s}px`:"";if(a+=s||r,!s&&(l=!1),d){if(d.style.width!==c){let[t,e]=ts(r,s);d.style.setProperty(t,e)}d=d.nextSibling}else{let t=document.createElement("col"),[n,o]=ts(r,s);t.style.setProperty(n,o),e.appendChild(t)}}}for(;d;){let t=d.nextSibling;null===(s=d.parentNode)||void 0===s||s.removeChild(d),d=t}l?(n.style.width=`${a}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${a}px`)}class tl{constructor(t,e){this.node=t,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),ta(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type===this.node.type&&(this.node=t,ta(t,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(t){return"attributes"===t.type&&(t.target===this.table||this.colgroup.contains(t.target))}}function td(t,e){return e?t.createChecked(null,e):t.createAndFill()}let tc=({editor:t})=>{let{selection:e}=t.state;if(!(e instanceof C))return!1;let n=0,r=(0,i.qv)(e.ranges[0].$from,t=>"table"===t.type.name);return null==r||r.node.descendants(t=>{if("table"===t.type.name)return!1;["tableCell","tableHeader"].includes(t.type.name)&&(n+=1)}),n===e.ranges.length&&(t.commands.deleteTable(),!0)},tu=i.NB.create({name:"table",addOptions:()=>({HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:tl,lastColumnResizable:!0,allowTableNodeSelection:!1}),content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML:()=>[{tag:"table"}],renderHTML({node:t,HTMLAttributes:e}){let{colgroup:n,tableWidth:r,tableMinWidth:o}=function(t,e,n,r){let o=0,i=!0,s=[],a=t.firstChild;if(!a)return{};for(let t=0,n=0;t<a.childCount;t+=1){let{colspan:r,colwidth:l}=a.child(t).attrs;for(let t=0;t<r;t+=1,n+=1){let r=void 0===n?void 0:l&&l[t];o+=r||e,!r&&(i=!1);let[a,d]=ts(e,r);s.push(["col",{style:`${a}: ${d}`}])}}let l=i?`${o}px`:"";return{colgroup:["colgroup",{},...s],tableWidth:l,tableMinWidth:i?"":`${o}px`}}(t,this.options.cellMinWidth);return["table",(0,i.P1)(this.options.HTMLAttributes,e,{style:r?`width: ${r}`:`min-width: ${o}`}),n,["tbody",0]]},addCommands:()=>({insertTable:({rows:t=3,cols:e=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:o,editor:i})=>{let a=function(t,e,n,r,o){let i=function(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;let e={};return Object.keys(t.nodes).forEach(n=>{let r=t.nodes[n];r.spec.tableRole&&(e[r.spec.tableRole]=r)}),t.cached.tableNodeTypes=e,e}(t),s=[],a=[];for(let t=0;t<n;t+=1){let t=td(i.cell,void 0);if(t&&a.push(t),r){let t=td(i.header_cell,o);t&&s.push(t)}}let l=[];for(let t=0;t<e;t+=1)l.push(i.row.createChecked(null,r&&0===t?s:a));return i.table.createChecked(null,l)}(i.schema,t,e,n);if(o){let t=r.selection.from+1;r.replaceSelectionWith(a).scrollIntoView().setSelection(s.Bs.near(r.doc.resolve(t)))}return!0},addColumnBefore:()=>({state:t,dispatch:e})=>(function(t,e){if(!m(t))return!1;if(e){let n=E(t);e(T(t.tr,n,n.left))}return!0})(t,e),addColumnAfter:()=>({state:t,dispatch:e})=>(function(t,e){if(!m(t))return!1;if(e){let n=E(t);e(T(t.tr,n,n.right))}return!0})(t,e),deleteColumn:()=>({state:t,dispatch:e})=>(function(t,e){if(!m(t))return!1;if(e){let n=E(t),r=t.tr;if(0==n.left&&n.right==n.map.width)return!1;for(let t=n.right-1;!function(t,{map:e,table:n,tableStart:r},o){let i=t.mapping.maps.length;for(let s=0;s<e.height;){let a=s*e.width+o,l=e.map[a],d=n.nodeAt(l),c=d.attrs;if(o>0&&e.map[a-1]==l||o<e.width-1&&e.map[a+1]==l)t.setNodeMarkup(t.mapping.slice(i).map(r+l),null,w(c,o-e.colCount(l)));else{let e=t.mapping.slice(i).map(r+l);t.delete(e,e+d.nodeSize)}s+=c.rowspan}}(r,n,t),t!=n.left;t--){;let t=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!t)throw RangeError("No table found");n.table=t,n.map=u.get(t)}e(r)}return!0})(t,e),addRowBefore:()=>({state:t,dispatch:e})=>(function(t,e){if(!m(t))return!1;if(e){let n=E(t);e(O(t.tr,n,n.top))}return!0})(t,e),addRowAfter:()=>({state:t,dispatch:e})=>(function(t,e){if(!m(t))return!1;if(e){let n=E(t);e(O(t.tr,n,n.bottom))}return!0})(t,e),deleteRow:()=>({state:t,dispatch:e})=>(function(t,e){if(!m(t))return!1;if(e){let n=E(t),r=t.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(let t=n.bottom-1;!function(t,{map:e,table:n,tableStart:r},o){let i=0;for(let t=0;t<o;t++)i+=n.child(t).nodeSize;let s=i+n.child(o).nodeSize,a=t.mapping.maps.length;t.delete(i+r,s+r);let l=new Set;for(let i=0,s=o*e.width;i<e.width;i++,s++){let d=e.map[s];if(!l.has(d)){if(l.add(d),o>0&&d==e.map[s-e.width]){let e=n.nodeAt(d).attrs;t.setNodeMarkup(t.mapping.slice(a).map(d+r),null,{...e,rowspan:e.rowspan-1}),i+=e.colspan-1}else if(o<e.height&&d==e.map[s+e.width]){let s=n.nodeAt(d),l=s.attrs,c=s.type.create({...l,rowspan:s.attrs.rowspan-1},s.content),u=e.positionAt(o+1,i,n);t.insert(t.mapping.slice(a).map(r+u),c),i+=l.colspan-1}}}}(r,n,t),t!=n.top;t--){;let t=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!t)throw RangeError("No table found");n.table=t,n.map=u.get(n.table)}e(r)}return!0})(t,e),deleteTable:()=>({state:t,dispatch:e})=>(function(t,e){let n=t.selection.$anchor;for(let r=n.depth;r>0;r--)if("table"==n.node(r).type.spec.tableRole)return e&&e(t.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1})(t,e),mergeCells:()=>({state:t,dispatch:e})=>N(t,e),splitCell:()=>({state:t,dispatch:e})=>H(t,e),toggleHeaderColumn:()=>({state:t,dispatch:e})=>P("column")(t,e),toggleHeaderRow:()=>({state:t,dispatch:e})=>P("row")(t,e),toggleHeaderCell:()=>({state:t,dispatch:e})=>B(t,e),mergeOrSplit:()=>({state:t,dispatch:e})=>!!N(t,e)||H(t,e),setCellAttribute:(t,e)=>({state:n,dispatch:r})=>{var o,i;return(o=t,i=e,function(t,e){if(!m(t))return!1;let n=g(t);if(n.nodeAfter.attrs[o]===i)return!1;if(e){let r=t.tr;t.selection instanceof C?t.selection.forEachCell((t,e)=>{t.attrs[o]!==i&&r.setNodeMarkup(e,null,{...t.attrs,[o]:i})}):r.setNodeMarkup(n.pos,null,{...n.nodeAfter.attrs,[o]:i}),e(r)}return!0})(n,r)},goToNextCell:()=>({state:t,dispatch:e})=>R(1)(t,e),goToPreviousCell:()=>({state:t,dispatch:e})=>R(-1)(t,e),fixTables:()=>({state:t,dispatch:e})=>(e&&A(t),!0),setCellSelection:t=>({tr:e,dispatch:n})=>{if(n){let n=C.create(e.doc,t.anchorCell,t.headCell);e.setSelection(n)}return!0}}),addKeyboardShortcuts(){return{Tab:()=>!!this.editor.commands.goToNextCell()||!!this.editor.can().addRowAfter()&&this.editor.chain().addRowAfter().goToNextCell().run(),"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:tc,"Mod-Backspace":tc,Delete:tc,"Mod-Delete":tc}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[function({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:n=100,View:r=Z,lastColumnResizable:o=!0}={}){let i=new s.Sy({key:tt,state:{init(t,e){var o,s;let a=null==(s=null==(o=i.spec)?void 0:o.props)?void 0:s.nodeViews,l=p(e.schema).table.name;return r&&a&&(a[l]=(t,e)=>new r(t,n,e)),new te(-1,!1)},apply:(t,e)=>e.apply(t)},props:{attributes:t=>{let e=tt.getState(t);return e&&e.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(e,n)=>{(function(t,e,n,r){if(!t.editable)return;let o=tt.getState(t.state);if(o&&!o.dragging){let i=function(t){for(;t&&"TD"!=t.nodeName&&"TH"!=t.nodeName;)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}(e.target),s=-1;if(i){let{left:r,right:o}=i.getBoundingClientRect();e.clientX-r<=n?s=tn(t,e,"left",n):o-e.clientX<=n&&(s=tn(t,e,"right",n))}if(s!=o.activeHandle){if(!r&&-1!==s){let e=t.state.doc.resolve(s),n=e.node(-1),r=u.get(n),o=e.start(-1);if(r.colCount(e.pos-o)+e.nodeAfter.attrs.colspan-1==r.width-1)return}to(t,s)}}})(e,n,t,o)},mouseleave:t=>{(function(t){if(!t.editable)return;let e=tt.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&to(t,-1)})(t)},mousedown:(t,r)=>{(function(t,e,n,r){var o;if(!t.editable)return;let i=null!=(o=t.dom.ownerDocument.defaultView)?o:window,s=tt.getState(t.state);if(!s||-1==s.activeHandle||s.dragging)return;let a=t.state.doc.nodeAt(s.activeHandle),l=function(t,e,{colspan:n,colwidth:r}){let o=r&&r[r.length-1];if(o)return o;let i=t.domAtPos(e),s=i.node.childNodes[i.offset].offsetWidth,a=n;if(r)for(let t=0;t<n;t++)r[t]&&(s-=r[t],a--);return s/a}(t,s.activeHandle,a.attrs);function d(e){i.removeEventListener("mouseup",d),i.removeEventListener("mousemove",c);let r=tt.getState(t.state);(null==r?void 0:r.dragging)&&(function(t,e,n){let r=t.state.doc.resolve(e),o=r.node(-1),i=u.get(o),s=r.start(-1),a=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,l=t.state.tr;for(let t=0;t<i.height;t++){let e=t*i.width+a;if(t&&i.map[e]==i.map[e-i.width])continue;let r=i.map[e],d=o.nodeAt(r).attrs,c=1==d.colspan?0:a-i.colCount(r);if(d.colwidth&&d.colwidth[c]==n)continue;let u=d.colwidth?d.colwidth.slice():function(t){return Array(t).fill(0)}(d.colspan);u[c]=n,l.setNodeMarkup(s+r,null,{...d,colwidth:u})}l.docChanged&&t.dispatch(l)}(t,r.activeHandle,tr(r.dragging,e,n)),t.dispatch(t.state.tr.setMeta(tt,{setDragging:null})))}function c(e){if(!e.which)return d(e);let o=tt.getState(t.state);if(o&&o.dragging){let i=tr(o.dragging,e,n);ti(t,o.activeHandle,i,r)}}t.dispatch(t.state.tr.setMeta(tt,{setDragging:{startX:e.clientX,startWidth:l}})),ti(t,s.activeHandle,l,r),i.addEventListener("mouseup",d),i.addEventListener("mousemove",c),e.preventDefault()})(t,r,e,n)}},decorations:t=>{let e=tt.getState(t);if(e&&e.activeHandle>-1)return function(t,e){var n;let r=[],o=t.doc.resolve(e),i=o.node(-1);if(!i)return l.EH.empty;let s=u.get(i),a=o.start(-1),d=s.colCount(o.pos-a)+o.nodeAfter.attrs.colspan-1;for(let e=0;e<s.height;e++){let o=d+e*s.width;if((d==s.width-1||s.map[o]!=s.map[o+1])&&(0==e||s.map[o]!=s.map[o-s.width])){let e=s.map[o],d=a+e+i.nodeAt(e).nodeSize-1,c=document.createElement("div");c.className="column-resize-handle",(null==(n=tt.getState(t))?void 0:n.dragging)&&r.push(l.p.node(a+e,a+e+i.nodeAt(e).nodeSize,{class:"column-resize-dragging"})),r.push(l.p.widget(d,c))}}return l.EH.create(t.doc,r)}(t,e.activeHandle)},nodeViews:{}}});return i}({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],function({allowTableNodeSelection:t=!1}={}){return new s.Sy({key:h,state:{init:()=>null,apply(t,e){let n=t.getMeta(h);if(null!=n)return -1==n?null:n;if(null==e||!t.docChanged)return e;let{deleted:r,pos:o}=t.mapping.mapResult(e);return r?null:o}},props:{decorations:S,handleDOMEvents:{mousedown:U},createSelectionBetween:t=>null!=h.getState(t.state)?t.state.selection:null,handleTripleClick:Y,handleKeyDown:W,handlePaste:q},appendTransaction:(e,n,r)=>(function(t,e,n){let r,o;let i=(e||t).selection,a=(e||t).doc;if(i instanceof s.qv&&(o=i.node.type.spec.tableRole)){if("cell"==o||"header_cell"==o)r=C.create(a,i.from);else if("row"==o){let t=a.resolve(i.from+1);r=C.rowSelection(t,t)}else if(!n){let t=u.get(i.node),e=i.from+1,n=e+t.map[t.width*t.height-1];r=C.create(a,e+1,n)}}else i instanceof s.Bs&&function({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let n=t.pos,r=e.pos,o=t.depth;for(;o>=0&&!(t.after(o+1)<t.end(o));o--,n++);for(let t=e.depth;t>=0&&!(e.before(t+1)>e.start(t));t--,r--);return n==r&&/row|table/.test(t.node(o).type.spec.tableRole)}(i)?r=s.Bs.create(a,i.from):i instanceof s.Bs&&function({$from:t,$to:e}){let n,r;for(let e=t.depth;e>0;e--){let r=t.node(e);if("cell"===r.type.spec.tableRole||"header_cell"===r.type.spec.tableRole){n=r;break}}for(let t=e.depth;t>0;t--){let n=e.node(t);if("cell"===n.type.spec.tableRole||"header_cell"===n.type.spec.tableRole){r=n;break}}return n!==r&&0===e.parentOffset}(i)&&(r=s.Bs.create(a,i.$from.start(),i.$from.end()));return r&&(e||(e=t.tr)).setSelection(r),e})(r,A(r,n),t)})}({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(t){let e={name:t.name,options:t.options,storage:t.storage};return{tableRole:(0,i.nU)((0,i.Nl)(t,"tableRole",e))}}})},990488:function(t,e,n){n.d(e,{jE:function(){return A},kg:function(){return g}});var r,o,i,s=n(723530),a=n(453341),l=n(348376),d={exports:{}},c={};d.exports=function(){if(o)return c;o=1;var t="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},e=s.useState,n=s.useEffect,r=s.useLayoutEffect,i=s.useDebugValue;function a(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!t(e,r)}catch(t){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(t,e){return e()}:function(t,o){var s=o(),l=e({inst:{value:s,getSnapshot:o}}),d=l[0].inst,c=l[1];return r(function(){d.value=s,d.getSnapshot=o,a(d)&&c({inst:d})},[t,s,o]),n(function(){return a(d)&&c({inst:d}),t(function(){a(d)&&c({inst:d})})},[t]),i(s),s};return c.useSyncExternalStore=void 0!==s.useSyncExternalStore?s.useSyncExternalStore:l,c}();var u=d.exports;let p=(...t)=>e=>{t.forEach(t=>{"function"==typeof t?t(e):t&&(t.current=e)})},h=({contentComponent:t})=>{let e=u.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return s.createElement(s.Fragment,null,Object.values(e))};class f extends s.Component{constructor(t){var e;super(t),this.editorContentRef=s.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(null===(e=t.editor)||void 0===e?void 0:e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){let t=this.props.editor;if(t&&!t.isDestroyed&&t.options.element){if(t.contentComponent)return;let e=this.editorContentRef.current;e.append(...t.options.element.childNodes),t.setOptions({element:e}),t.contentComponent=function(){let t=new Set,e={};return{subscribe:e=>(t.add(e),()=>{t.delete(e)}),getSnapshot:()=>e,getServerSnapshot:()=>e,setRenderer(n,r){e={...e,[n]:a.createPortal(r.reactElement,r.element,n)},t.forEach(t=>t())},removeRenderer(n){let r={...e};delete r[n],e=r,t.forEach(t=>t())}}}(),!this.state.hasContentComponentInitialized&&(this.unsubscribeToContentComponent=t.contentComponent.subscribe(()=>{this.setState(t=>t.hasContentComponentInitialized?t:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){let t=this.props.editor;if(!t)return;if(this.initialized=!1,!t.isDestroyed&&t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null,!t.options.element.firstChild)return;let e=document.createElement("div");e.append(...t.options.element.childNodes),t.setOptions({element:e})}render(){let{editor:t,innerRef:e,...n}=this.props;return s.createElement(s.Fragment,null,s.createElement("div",{ref:p(e,this.editorContentRef),...n}),(null==t?void 0:t.contentComponent)&&s.createElement(h,{contentComponent:t.contentComponent}))}}let m=(0,s.forwardRef)((t,e)=>{let n=s.useMemo(()=>Math.floor(0xffffffff*Math.random()).toString(),[t.editor]);return s.createElement(f,{key:n,innerRef:e,...t})}),g=s.memo(m);var b=(r=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(e.constructor!==n.constructor)return!1;if(Array.isArray(e)){if((r=e.length)!=n.length)return!1;for(o=r;0!=o--;)if(!t(e[o],n[o]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(o of e.entries())if(!n.has(o[0]))return!1;for(o of e.entries())if(!t(o[1],n.get(o[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(o of e.entries())if(!n.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if((r=e.length)!=n.length)return!1;for(o=r;0!=o--;)if(e[o]!==n[o])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((r=(i=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(o=r;0!=o--;)if(!Object.prototype.hasOwnProperty.call(n,i[o]))return!1;for(o=r;0!=o--;){var r,o,i,s=i[o];if("_owner"!==s||!e.$$typeof){if(!t(e[s],n[s]))return!1}}return!0}return e!=e&&n!=n},r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default"))?r.default:r,v={exports:{}},y={};v.exports=function(){if(i)return y;i=1;var t="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},e=u.useSyncExternalStore,n=s.useRef,r=s.useEffect,o=s.useMemo,a=s.useDebugValue;return y.useSyncExternalStoreWithSelector=function(i,s,l,d,c){var u=n(null);if(null===u.current){var p={hasValue:!1,value:null};u.current=p}else p=u.current;var h=e(i,(u=o(function(){function e(e){if(!o){if(o=!0,n=e,e=d(e),void 0!==c&&p.hasValue){var i=p.value;if(c(i,e))return r=i}return r=e}if(i=r,t(n,e))return i;var s=d(e);return void 0!==c&&c(i,s)?i:(n=e,r=s)}var n,r,o=!1,i=void 0===l?null:l;return[function(){return e(s())},null===i?void 0:function(){return e(i())}]},[s,l,d,c]))[0],u[1]);return r(function(){p.hasValue=!0,p.value=h},[h]),a(h),h},y}();var w=v.exports;let M="undefined"!=typeof window?s.useLayoutEffect:s.useEffect;class C{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){let t=()=>{this.transactionNumber+=1,this.subscribers.forEach(t=>t())},e=this.editor;return e.on("transaction",t),()=>{e.off("transaction",t)}}}}let k="undefined"==typeof window,S=k||!!("undefined"!=typeof window&&window.next);class x{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){if(void 0===this.options.current.immediatelyRender)return k||S?null:this.createEditor();this.options.current.immediatelyRender;return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){let t={...this.options.current,onBeforeCreate:(...t)=>{var e,n;return null===(n=(e=this.options.current).onBeforeCreate)||void 0===n?void 0:n.call(e,...t)},onBlur:(...t)=>{var e,n;return null===(n=(e=this.options.current).onBlur)||void 0===n?void 0:n.call(e,...t)},onCreate:(...t)=>{var e,n;return null===(n=(e=this.options.current).onCreate)||void 0===n?void 0:n.call(e,...t)},onDestroy:(...t)=>{var e,n;return null===(n=(e=this.options.current).onDestroy)||void 0===n?void 0:n.call(e,...t)},onFocus:(...t)=>{var e,n;return null===(n=(e=this.options.current).onFocus)||void 0===n?void 0:n.call(e,...t)},onSelectionUpdate:(...t)=>{var e,n;return null===(n=(e=this.options.current).onSelectionUpdate)||void 0===n?void 0:n.call(e,...t)},onTransaction:(...t)=>{var e,n;return null===(n=(e=this.options.current).onTransaction)||void 0===n?void 0:n.call(e,...t)},onUpdate:(...t)=>{var e,n;return null===(n=(e=this.options.current).onUpdate)||void 0===n?void 0:n.call(e,...t)},onContentError:(...t)=>{var e,n;return null===(n=(e=this.options.current).onContentError)||void 0===n?void 0:n.call(e,...t)},onDrop:(...t)=>{var e,n;return null===(n=(e=this.options.current).onDrop)||void 0===n?void 0:n.call(e,...t)},onPaste:(...t)=>{var e,n;return null===(n=(e=this.options.current).onPaste)||void 0===n?void 0:n.call(e,...t)}};return new l.ML(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,e){return Object.keys(t).every(n=>{if(["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n))return!0;if("extensions"===n&&t.extensions&&e.extensions)return t.extensions.length===e.extensions.length&&t.extensions.every((t,n)=>{var r;return t===(null===(r=e.extensions)||void 0===r?void 0:r[n])&&!0});return t[n]===e[n]&&!0})}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&0===t.length?!x.compareOptions(this.options.current,this.editor.options)&&this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(null===this.previousDeps){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((e,n)=>e===t[n]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){let t=this.instanceId,e=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){e&&e.setOptions(this.options.current);return}e&&!e.isDestroyed&&(e.destroy(),this.instanceId===t&&this.setEditor(null))},1)}}function A(t={},e=[]){let n=(0,s.useRef)(t);n.current=t;let[r]=(0,s.useState)(()=>new x(n)),o=u.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return(0,s.useDebugValue)(o),(0,s.useEffect)(r.onRender(e)),!function(t){var e;let[n]=(0,s.useState)(()=>new C(t.editor)),r=w.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,null!==(e=t.equalityFn)&&void 0!==e?e:b);M(()=>n.watch(t.editor),[t.editor,n]),(0,s.useDebugValue)(r)}({editor:o,selector:({transactionNumber:e})=>!1===t.shouldRerenderOnTransaction?null:t.immediatelyRender&&0===e?0:e+1}),o}(0,s.createContext)({editor:null}).Consumer;let E=(0,s.createContext)({onDragStart:void 0}),T=()=>(0,s.useContext)(E);s.forwardRef((t,e)=>{let{onDragStart:n}=T(),r=t.as||"div";return s.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})})},579142:function(t,e,n){n.d(e,{Z:()=>V});var r=n("348376");let o=/^\s*>\s$/,i=r.NB.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML({HTMLAttributes:t}){return["blockquote",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[(0,r.S0)({find:o,type:this.type})]}}),s=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,a=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,l=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,d=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,c=r.vc.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>"normal"!==t.style.fontWeight&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[(0,r.Cf)({find:s,type:this.type}),(0,r.Cf)({find:l,type:this.type})]},addPasteRules(){return[(0,r.K9)({find:a,type:this.type}),(0,r.K9)({find:d,type:this.type})]}}),u="textStyle",p=/^\s*([-+*])\s$/,h=r.NB.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:t}){return["ul",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes("listItem",this.editor.getAttributes(u)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=(0,r.S0)({find:p,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=(0,r.S0)({find:p,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(u),editor:this.editor})),[t]}}),f=/(^|[^`])`([^`]+)`(?!`)/,m=/(^|[^`])`([^`]+)`(?!`)/g,g=r.vc.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,exitable:!0,parseHTML:()=>[{tag:"code"}],renderHTML({HTMLAttributes:t}){return["code",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[(0,r.Cf)({find:f,type:this.type})]},addPasteRules(){return[(0,r.K9)({find:m,type:this.type})]}});var b=n("267774");let v=/^```([a-z]+)?[\s\n]$/,y=/^~~~([a-z]+)?[\s\n]$/,w=r.NB.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;let{languageClassPrefix:n}=this.options,r=[...(null===(e=t.firstElementChild)||void 0===e?void 0:e.classList)||[]].filter(t=>t.startsWith(n)).map(t=>t.replace(n,""))[0];return r?r:null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML({node:t,HTMLAttributes:e}){return["pre",(0,r.P1)(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{let{empty:t,$anchor:e}=this.editor.state.selection,n=1===e.pos;return!!t&&e.parent.type.name===this.name&&(!!n||!e.parent.textContent.length)&&this.editor.commands.clearNodes()},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;let{state:e}=t,{selection:n}=e,{$from:r,empty:o}=n;if(!o||r.parent.type!==this.type)return!1;let i=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith("\n\n");return!!i&&!!s&&t.chain().command(({tr:t})=>(t.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;let{state:e}=t,{selection:n,doc:r}=e,{$from:o,empty:i}=n;if(!i||o.parent.type!==this.type||o.parentOffset!==o.parent.nodeSize-2)return!1;let s=o.after();return void 0!==s&&(r.nodeAt(s)?t.commands.command(({tr:t})=>(t.setSelection(b.Y1.near(r.resolve(s))),!0)):t.commands.exitCode())}}},addInputRules(){return[(0,r.zK)({find:v,type:this.type,getAttributes:t=>({language:t[1]})}),(0,r.zK)({find:y,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new b.Sy({key:new b.H$("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;let n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),o=r?JSON.parse(r):void 0,i=null==o?void 0:o.mode;if(!n||!i)return!1;let{tr:s,schema:a}=t.state,l=a.text(n.replace(/\r\n?/g,"\n"));return s.replaceSelectionWith(this.type.create({language:i},l)),s.selection.$from.parent.type!==this.type&&s.setSelection(b.Bs.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}}),M=r.NB.create({name:"doc",topNode:!0,content:"block+"});var C=n("426351");let k=r.hj.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:void 0}),addProseMirrorPlugins(){return[(0,C.q)(this.options)]}});var S=n("181004");let x=r.hj.create({name:"gapCursor",addProseMirrorPlugins:()=>[(0,S.d)()],extendNodeSchema(t){var e;let n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:null!==(e=(0,r.nU)((0,r.Nl)(t,"allowGapCursor",n)))&&void 0!==e?e:null}}}),A=r.NB.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:t}){return["br",(0,r.P1)(this.options.HTMLAttributes,t)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{let{selection:t,storedMarks:o}=n;if(t.$from.parent.type.spec.isolating)return!1;let{keepMarks:i}=this.options,{splittableMarks:s}=r.extensionManager,a=o||t.$to.parentOffset&&t.$from.marks();return e().insertContent({type:this.name}).command(({tr:t,dispatch:e})=>{if(e&&a&&i){let e=a.filter(t=>s.includes(t.type.name));t.ensureMarks(e)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),E=r.NB.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){let n=this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0];return[`h${n}`,(0,r.P1)(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>!!this.options.levels.includes(t.level)&&e.setNode(this.name,t),toggleHeading:t=>({commands:e})=>!!this.options.levels.includes(t.level)&&e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>(0,r.zK)({find:RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var T=n("697503");let O=r.hj.create({name:"history",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>({state:t,dispatch:e})=>(0,T.Yw)(t,e),redo:()=>({state:t,dispatch:e})=>(0,T.KX)(t,e)}),addProseMirrorPlugins(){return[(0,T.m8)(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-\u044F":()=>this.editor.commands.undo(),"Shift-Mod-\u044F":()=>this.editor.commands.redo()}}}),$=r.NB.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{}}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML({HTMLAttributes:t}){return["hr",(0,r.P1)(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!(0,r.FZ)(e,e.schema.nodes[this.name]))return!1;let{selection:n}=e,{$from:o,$to:i}=n,s=t();return 0===o.parentOffset?s.insertContentAt({from:Math.max(o.pos-1,0),to:i.pos},{type:this.name}):(0,r.EG)(n)?s.insertContentAt(i.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:t,dispatch:e})=>{var n;if(e){let{$to:e}=t.selection,r=e.end();if(e.nodeAfter)e.nodeAfter.isTextblock?t.setSelection(b.Bs.create(t.doc,e.pos+1)):e.nodeAfter.isBlock?t.setSelection(b.qv.create(t.doc,e.pos)):t.setSelection(b.Bs.create(t.doc,e.pos));else{let o=null===(n=e.parent.type.contentMatch.defaultType)||void 0===n?void 0:n.create();o&&(t.insert(r,o),t.setSelection(b.Bs.create(t.doc,r+1)))}t.scrollIntoView()}return!0}).run()}}},addInputRules(){return[(0,r.x2)({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),N=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,H=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,L=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,P=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,B=r.vc.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>"normal"!==t.style.fontStyle&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[(0,r.Cf)({find:N,type:this.type}),(0,r.Cf)({find:L,type:this.type})]},addPasteRules(){return[(0,r.K9)({find:H,type:this.type}),(0,r.K9)({find:P,type:this.type})]}}),R=r.NB.create({name:"listItem",addOptions:()=>({HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:t}){return["li",(0,r.P1)(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),D="textStyle",I=/^(\d+)\.\s$/,z=r.NB.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:t}){let{start:e,...n}=t;return 1===e?["ol",(0,r.P1)(this.options.HTMLAttributes,n),0]:["ol",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes("listItem",this.editor.getAttributes(D)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=(0,r.S0)({find:I,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,e)=>e.childCount+e.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=(0,r.S0)({find:I,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(D)}),joinPredicate:(t,e)=>e.childCount+e.attrs.start===+t[1],editor:this.editor})),[t]}}),j=r.NB.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:t}){return["p",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),_=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,W=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,F=r.vc.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>!!t.includes("line-through")&&{}}],renderHTML({HTMLAttributes:t}){return["s",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[(0,r.Cf)({find:_,type:this.type})]},addPasteRules(){return[(0,r.K9)({find:W,type:this.type})]}}),K=r.NB.create({name:"text",group:"inline"}),V=r.hj.create({name:"starterKit",addExtensions(){let t=[];return!1!==this.options.bold&&t.push(c.configure(this.options.bold)),!1!==this.options.blockquote&&t.push(i.configure(this.options.blockquote)),!1!==this.options.bulletList&&t.push(h.configure(this.options.bulletList)),!1!==this.options.code&&t.push(g.configure(this.options.code)),!1!==this.options.codeBlock&&t.push(w.configure(this.options.codeBlock)),!1!==this.options.document&&t.push(M.configure(this.options.document)),!1!==this.options.dropcursor&&t.push(k.configure(this.options.dropcursor)),!1!==this.options.gapcursor&&t.push(x.configure(this.options.gapcursor)),!1!==this.options.hardBreak&&t.push(A.configure(this.options.hardBreak)),!1!==this.options.heading&&t.push(E.configure(this.options.heading)),!1!==this.options.history&&t.push(O.configure(this.options.history)),!1!==this.options.horizontalRule&&t.push($.configure(this.options.horizontalRule)),!1!==this.options.italic&&t.push(B.configure(this.options.italic)),!1!==this.options.listItem&&t.push(R.configure(this.options.listItem)),!1!==this.options.orderedList&&t.push(z.configure(this.options.orderedList)),!1!==this.options.paragraph&&t.push(j.configure(this.options.paragraph)),!1!==this.options.strike&&t.push(F.configure(this.options.strike)),!1!==this.options.text&&t.push(K.configure(this.options.text)),t}})}}]);
//# sourceMappingURL=https://sourcemap-redirect.coze.cn/obj/coze-sourcemap/ol-sourcemap/bot/1.0.2.2395/60541.75561552.js.map