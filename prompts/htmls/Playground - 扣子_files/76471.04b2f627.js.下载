"use strict";(self.webpackChunkapp_botstudio_main=self.webpackChunkapp_botstudio_main||[]).push([["76471"],{141421:function(e,o,r){r.d(o,{st:()=>ev,DM:()=>ep,hI:()=>e_,Ly:()=>v,tU:()=>ed,iv:()=>eo,Hx:()=>J,tZ:()=>p,W8:()=>B,Q0:()=>Y,kS:()=>ee,uX:()=>eu,o$:()=>_.o$,x8:()=>ec});var t,n,a=r("938809"),l=r("16242"),i=r("168074"),s=r("897538"),{Text:c}=i.ZT,d=()=>(0,a.jsx)(c,{link:{href:"https://bytedance.larkoffice.com/docx/Rk4jdQRPCoMstcxoWXkcKHfJnSZ",target:"_blank"},children:(0,a.jsx)("span",{className:"text-blue-200",children:l.o.t("codedev_about_dev_mode")})}),v=e=>{var{spaceMode:o}=e;return null},u=r("723530"),_=r("228478"),p=()=>{var[e,o]=(0,u.useState)(),r=(0,_.o$)();return{remark:r?e:void 0,node:r?(0,a.jsx)("div",{className:"mt-2 mb-2",children:(0,a.jsx)(i.Kx,{value:e,onChange:o,placeholder:l.o.t("bmv_enter_version_description"),rows:2,maxCount:2e3,maxLength:2e3,showClear:!0})}):null,setRemark:o}},g=r("842197"),h=r("255721"),m=r("341333"),x=r("14014"),b=r("449001");var f=((t={}).MultiVersion="multi_version",t.GrayVersion="gray_version",t);var j=(n=(0,h._)(function*(e){var{spaceId:o,botId:r,version:t,isFromGray:n}=e;if(!o||!r||!t)return{};var{active_rules:a}=yield b.bV.GetMultiVersionActiveList((0,m._)({space_id:o,bot_id:r,version:t},n?{query_type:x.IA.Gray}:{}));return{xTtEnvContent:null==a?void 0:a.filter(e=>e.version===t&&e.version_type===x.IA.XTtEnv).map(e=>e.x_tt_env).join("\u3001")}}),function(e){return n.apply(this,arguments)}),y=r("78420"),T=r("559293"),w=e=>{var{spaceId:o,botId:r,version:t,isFromGray:n}=e,{data:a}=(0,T.Z)((0,h._)(function*(){return yield j({spaceId:o,botId:r,version:t,isFromGray:n})}),{ready:!(0,y.Z)(r)&&!(0,y.Z)(t)}),{xTtEnvContent:l}=a||{};return{xTtEnvContent:l}},P=r("265489"),z=r("556923"),C="".concat("flow-devops-csui","#").concat("flow-devops-debugger"),S="#".concat("flow-devops-extension-page-container");function k(){var e,o;return null===(o=document.querySelector(C))||void 0===o?void 0:null===(e=o.shadowRoot)||void 0===e?void 0:e.querySelector(S)}var{Text:A}=i.ZT;function E(e){var{children:o,tooltipProps:r}=e,t=(0,z._)(e,["children","tooltipProps"]),n=(0,u.useCallback)((e,o)=>{var t;return(0,a.jsx)(i.u,(0,P._)((0,m._)({},r),{content:e,getPopupContainer:null!==(t=null==r?void 0:r.getPopupContainer)&&void 0!==t?t:k,children:o}))},[]);return(0,a.jsx)(A,(0,P._)((0,m._)({},t),{ellipsis:{showTooltip:{renderTooltip:n}},children:o}))}var Z=r("866466"),N=r.n(Z),R=r("462669"),q=r.n(R),U=r("318249"),$=r.n(U),L=r("294754"),V=r.n(L),W=r("13355"),I=r.n(W),G=r("876846"),M=r.n(G),X=r("133292"),F={};F.styleTagTransform=M(),F.setAttributes=V(),F.insert=$().bind(null,"head"),F.domAPI=q(),F.insertStyleElement=I(),N()(X.Z,F);var H=X.Z&&X.Z.locals?X.Z.locals:void 0,D=e=>{var{isCozeDevSpace:o,isFromGray:r,version:t,xTtEnvContent:n,versionTag:l}=e;return o&&r?(0,a.jsx)(K,{version:t}):o&&!r&&n?(0,a.jsx)(O,{xTtEnvContent:n}):l?(0,a.jsx)(Q,{version:l}):(0,a.jsx)(Q,{version:t})},K=e=>{var{version:o}=e;return(0,a.jsx)("div",{className:H["version-tag"],children:"".concat(l.o.t("devops_publish_current_gray_release_version_id")).concat(o)})},O=e=>{var{xTtEnvContent:o}=e,r=(0,u.useRef)(null);return(0,a.jsxs)("div",{ref:r,className:H["version-tag"],children:[l.o.t("devops_publish_current_version_active_lane_identifier"),(0,a.jsx)(E,{tooltipProps:{getPopupContainer:()=>{var e;return null!==(e=r.current)&&void 0!==e?e:k()},position:"bottom"},className:H["gray-tag"],children:o})]})},Q=e=>{var{version:o}=e;return(0,a.jsx)("div",{className:H["version-tag"],children:"".concat(l.o.t("cozedev_debug_preview_note")).concat(o)})},B=()=>{var e,o=(0,_.o$)(),r=new URLSearchParams(location.search),t=r.get("version"),n=null!==(e=r.get("versionTag"))&&void 0!==e?e:"",l=r.get("coze_extension_from_type")===f.GrayVersion,{space_id:i,bot_id:s}=(0,g.useParams)(),{xTtEnvContent:c}=w({spaceId:i,botId:s,version:t,isFromGray:l});return t?(0,a.jsx)(D,{isCozeDevSpace:o,isFromGray:l,version:t,versionTag:n,xTtEnvContent:c}):null},J=e=>{var o=new URLSearchParams(location.search);return o.get("version")?!o.get("version"):e},Y=()=>{var e=new URLSearchParams(location.search);return e.get("version")?{biz_kind:"commit_version_".concat(e.get("version"))}:{}},ee=()=>{var e=new URLSearchParams(location.search);return e.get("version")?{commit_version:e.get("version")}:{}},eo=e=>!new URLSearchParams(location.search).get("version")&&e,er=r("345305"),et=r("530198"),en=r("988726"),ea=r("182956"),el=r("431009"),ei=r("274372"),es=()=>[{label:l.o.t("cozedev_roles_developer"),value:ei.El.bot_developer,tooltip:l.o.t("cozedev_roles_developer_info")},{label:l.o.t("cozedev_roles_operator"),value:ei.El.bot_operator,tooltip:l.o.t("cozedev_roles_operator_info")},{label:l.o.t("cozedev_roles_manager"),value:ei.El.bot_editor,tooltip:l.o.t("cozedev_roles_manager_info")}],ec=e=>{var o=(0,_.o$)(),[r,t]=(0,u.useState)([ei.El.bot_developer]),{collaboratorStatus:n}=(0,et.c2)((0,er.N)(e=>({collaboratorStatus:e.collaboratorStatus})));return o&&e!==el._.Project?{node:(0,a.jsx)(i.Ph,{multiple:!0,clickToHide:!0,maxTagCount:1,disabled:!(null==n?void 0:n.manageable),showRestTagsPopover:!0,restTagsPopoverProps:{position:"top"},className:"w-150 flex-shrink-0 flex-grow-0",defaultValue:r,placeholder:l.o.t("cozedev_roles_select_info"),onChange:e=>{t(e)},renderSelectedItem:(e,o)=>{var r,{onClose:t}=o;return{isRenderInTag:!1,content:(0,a.jsx)(ea.Tag,{avatarShape:"square",closable:!0,disabled:!(null==n?void 0:n.manageable),onClose:t,children:null===(r=e.label)||void 0===r?void 0:r.at(0)})}},children:es().map(e=>(0,a.jsxs)(i.Ph.Option,{value:e.value,children:[e.label,(0,a.jsx)(ea.Tooltip,{content:e.tooltip,children:(0,a.jsx)(en.UoC,{className:"ml-1"})})]},"".concat(e.value,"select_role")))}),roles:r,notAllowAdd:!(Array.isArray(r)&&r.length>0)||(null==n?void 0:n.manageable)===!1}:{node:null,roles:void 0,notAllowAdd:!1}},ed=e=>{var{roles:o,onConfirm:r,loading:t}=e,[n,s]=(0,u.useState)(null!=o?o:[]);return(0,_.o$)()?((0,u.useEffect)(()=>{s(null!=o?o:[])},[o]),(0,a.jsx)(i.gn,{title:l.o.t("cozedev_collaborator_modify_confirm_title"),okText:l.o.t("cozedev_collaborator_btn_confirm"),cancelText:l.o.t("cozedev_collaborator_btn_cancel"),content:()=>(0,a.jsx)(i.cO,{defaultValue:n,direction:"horizontal",onChange:e=>{s(e)},children:es().map(e=>(0,a.jsx)(i.XZ,{value:e.value,children:(0,a.jsx)(ea.Tooltip,{content:e.tooltip,children:e.label})},"".concat(e.value,"edit_role")))}),okButtonProps:{disabled:0===n.length},onConfirm:()=>{null==r||r(n)},onVisibleChange:e=>{!e&&s(null!=o?o:[])},children:(0,a.jsx)(i.y3,{loading:t,className:"!min-w-0",type:"primary",size:"small",children:l.o.t("cozedev_collaborator_btn_modify")})})):null},ev=e=>{var{roles:o}=e;return(0,_.o$)()?(0,a.jsx)(a.Fragment,{children:es().map(e=>(null==o?void 0:o.includes(e.value))?(0,a.jsx)(ea.Tag,{color:"brand",children:e.label},"".concat(e.value,"role_list")):null)}):null},eu=e=>{var{collaborator:o,children:r}=e,t=(0,_.o$)(),{roles:n}=null!=o?o:{};return t&&o?(0,a.jsx)(a.Fragment,{children:es().map(e=>(null==n?void 0:n.includes(e.value))?(0,a.jsx)("div",{className:"text-xs leading-4 text-gray-400 ml-1",children:e.label},"".concat(e.value,"role_list_info")):null)}):r},e_=e=>{var o=(0,_.o$)(),{collaboratorStatus:r}=(0,et.c2)((0,er.N)(e=>({collaboratorStatus:e.collaboratorStatus})));return e!==el._.Project&&o&&(null==r?void 0:r.manageable)},ep=e=>{var o=(0,_.o$)(),r=e_(e);return e===el._.Project||!o||r}},133292:function(e,o,r){var t=r(160052),n=r.n(t),a=r(570717),l=r.n(a)()(n());l.push([e.id,".version-tag--wAicq2qxz8UbrW67{background:rgba(186,192,255,.2);display:flex;font-size:12px;justify-content:center;padding:8px 0}.gray-tag--Pdo9j1ihTy837jWE{font-size:12px;line-height:18px;max-width:280px!important}",""]),l.locals={"version-tag":"version-tag--wAicq2qxz8UbrW67",versionTag:"version-tag--wAicq2qxz8UbrW67","gray-tag":"gray-tag--Pdo9j1ihTy837jWE",grayTag:"gray-tag--Pdo9j1ihTy837jWE"},o.Z=l}}]);
//# sourceMappingURL=https://sourcemap-redirect.coze.cn/obj/coze-sourcemap/ol-sourcemap/bot/1.0.2.2232/76471.04b2f627.js.map