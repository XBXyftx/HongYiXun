"use strict";(self.webpackChunkapp_botstudio_main=self.webpackChunkapp_botstudio_main||[]).push([["38198"],{91250:function(e,o,i){i.d(o,{gP:()=>w,bp:()=>eC,wd:()=>eU,xL:()=>eh,Mi:()=>eW});var r,t,a,l=i("938809"),n=i("723530"),c=i("255721"),s=i("341333"),d=i("265489"),u=i("688813"),p=i.n(u),x=i("559293"),m=i("799682"),v=i("498842"),g=i("16242"),h=i("182956"),_=i("646411"),j=i("449001"),f=i("886073"),b=i("808656"),y=()=>({0x2acbbc0f:g.o.t("coze_voice_personal_insufficient_credits"),0x2acbbc10:g.o.t("coze_voice_enterprise_overdue"),0x2acba8d5:g.o.t("coze_voice_no_permission"),717995e3:g.o.t("coze_voice_internal_error"),0x2acbbc0d:g.o.t("coze_voice_clone_in_progress"),0x2acbbc11:g.o.t("coze_voice_balance_insufficient")}),A=()=>{var{loading:e,data:{data:{languages:o=[]}={languages:[]}}={data:{languages:[]}}}=(0,x.Z)(()=>j.lv.APIGetVoiceMenu());return{loading:e,languageOptions:o.map(e=>{var o;return{label:null!==(o=e.language_name)&&void 0!==o?o:"",value:e.language_code}})}},N=new(p()),k=e=>{if(!!e)return[{url:e||"",uid:void 0}]},C=e=>{var o,i,r,t,{mode:a="add",visible:u=!1,onVisibleChange:p,onComplete:C,spaceId:w,initValue:I,voiceId:B}=e,[z,E]=(0,n.useState)(!1),[T,P]=(0,n.useState)({name:"",desc:""}),{languageOptions:D}=A(),M=(0,n.useRef)(null);var S=(o=(0,c._)(function*(){var e,o,i,r,t,a=null===(e=M.current)||void 0===e?void 0:e.formApi;yield null==a?void 0:a.validate();var l=null==a?void 0:a.getValues();return{icon_uri:null==l?void 0:null===(i=l.icon_uri)||void 0===i?void 0:null===(o=i[0])||void 0===o?void 0:o.uid,voice_name:null!==(r=null==l?void 0:l.voice_name)&&void 0!==r?r:"",voice_desc:null==l?void 0:l.voice_desc,language_code:null!==(t=null==l?void 0:l.language_code)&&void 0!==t?t:""}}),function(){return o.apply(this,arguments)}),{loading:F,runAsync:R}=(0,x.Z)(e=>j.lv.APICreateVoice(e,{__disableErrorToast:!0}),{manual:!0}),{loading:L,runAsync:Z}=(0,x.Z)(e=>j.lv.APIUpdateVoice(e,{__disableErrorToast:!0}),{manual:!0});var H=(i=(0,c._)(function*(){var e,o=null!==(e=yield S())&&void 0!==e?e:{};try{var{data:{voice_id:i=""}={}}=yield R((0,d._)((0,s._)({},o),{space_id:null!=w?w:""}));null==C||C(i),null==p||p(!1)}catch(e){var r=y()[e.code];throw h.Toast.error({content:r||(0,m.u)(g.o.t("project_library_voice_add_toast_create_fail")),showClose:!1}),v.E7.errorEvent({eventName:"create_voice_error",error:e}),e}}),function(){return i.apply(this,arguments)});var V=(r=(0,c._)(function*(){var e,o=null!==(e=yield S())&&void 0!==e?e:{};try{yield Z((0,d._)((0,s._)({},o),{voice_id:null!=B?B:""})),null==C||C(null!=B?B:""),null==p||p(!1)}catch(e){throw h.Toast.error({content:(0,m.u)(g.o.t("project_library_voice_add_toast_update_fail")),showClose:!1}),v.E7.errorEvent({eventName:"update_voice_error",error:e}),e}}),function(){return r.apply(this,arguments)});return(0,l.jsx)(h.Modal,{"data-testid":"bot.ide.bot_creator.create_voice_modal",visible:u,maskClosable:!1,onCancel:()=>{null==p||p(!1)},title:"add"===a?g.o.t("project_library_voice_add_title"):g.o.t("project_library_voice_update_title"),okText:g.o.t("project_library_voice_add_confirm"),cancelText:g.o.t("project_library_voice_add_cancel"),okButtonProps:{disabled:z,loading:F||L},keepDOM:!1,icon:null,onOk:()=>{"add"===a?H():V()},children:(0,l.jsxs)(h.Form,{ref:M,showValidateIcon:!1,onValueChange:e=>{var o,i,{voice_name:r,voice_desc:t}=e;P({name:null!==(o=null==r?void 0:r.trim())&&void 0!==o?o:"",desc:null!==(i=null==t?void 0:t.trim())&&void 0!==i?i:""})},children:[(0,l.jsx)(h.FormInput,{initValue:null==I?void 0:I.voice_name,field:"voice_name",label:g.o.t("project_library_voice_add_name"),noErrorMessage:!0,maxLength:50,rules:[{required:!0}],placeholder:g.o.t("project_library_voice_add_name_placeholder"),getValueLength:e=>N.countGraphemes(null!=e?e:"")}),(0,l.jsx)(h.FormSelect,{initValue:null!==(t=null==I?void 0:I.language_code)&&void 0!==t?t:"zh",optionList:D,field:"language_code",label:g.o.t("project_library_voice_add_language"),noErrorMessage:!0,rules:[{required:!0}],className:"w-full"}),(0,l.jsx)(h.FormTextArea,{field:"voice_desc",initValue:null==I?void 0:I.voice_desc,label:g.o.t("project_library_voice_add_describe"),placeholder:g.o.t("project_library_voice_add_describe_placeholder"),maxCount:800,maxLength:800,getValueLength:e=>N.countGraphemes(null!=e?e:"")}),(0,l.jsx)(f.s,{accept:".jpeg,.jpg,.png,.gif",label:g.o.t("project_library_voice_add_icon"),field:"icon_uri",initValue:k(null==I?void 0:I.icon_url),rules:[{required:!0}],fileBizType:_.ym.BIZ_LIBRARY_VOICE_ICON,iconType:_.Tu.Voice,withAutoGenerate:!0,renderAutoGenerate:e=>{var{showAiAvatar:o,setShowAiAvatar:i,onChange:r,generateTooltip:t,maxCandidateCount:a}=e;return(0,l.jsx)(b.h,{generateInfo:T,showAiAvatar:o,onChange:e=>{i(!0),e&&(null==r||r(e))},maxCandidateCount:a,generateTooltip:t})},generateInfo:T,beforeUploadCustom:()=>{E(!0)},afterUploadCustom:()=>{E(!1)}}),"add"===a?(0,l.jsx)(h.Typography.Paragraph,{className:"text-right",children:g.o.t("voice_create_tips")}):null]})})},w=e=>{var{onComplete:o,spaceId:i,mode:r="add",initValue:t,voiceId:a}=e,[c,s]=(0,n.useState)(!1);return{open:()=>{s(!0)},modal:c?(0,l.jsx)(C,{mode:r,spaceId:i,visible:c,onVisibleChange:e=>{s(e)},onComplete:o,initValue:t,voiceId:a}):null}},{Text:I,Title:B}=h.Typography,z=i("988726"),E=i("64249"),T=i("866466"),P=i.n(T),D=i("462669"),M=i.n(D),S=i("318249"),F=i.n(S),R=i("294754"),L=i.n(R),Z=i("13355"),H=i.n(Z),V=i("876846"),U=i.n(V),J=i("248833"),Y={};Y.styleTagTransform=U(),Y.setAttributes=L(),Y.insert=F().bind(null,"head"),Y.domAPI=M(),Y.insertStyleElement=H(),P()(J.Z,Y);var O=J.Z&&J.Z.locals?J.Z.locals:void 0;var X=((r={}).InputVoice="input-voice",r.CloneTimbre="clone-timbre",r);var Q=((t={}).UploadVoice="upload-voice",t.RecordVoice="record-voice",t);var K=((a={}).Upload="upload",a.Record="record",a),G=e=>{var{children:o,onChange:i,onError:r,onSuccess:t}=e;return(0,l.jsx)(h.Upload,{action:"",limit:1,accept:".wav,.mp3,.m4a",maxSize:8192,showReplace:!1,showUploadList:!1,onFileChange:e=>{e.length>0?(null==i||i(e[0]),null==t||t(e[0])):null==r||r(Error("no file"))},onError:r,children:o})},q=i("522093"),W=(0,i("993897").q9)("studio/recording.gif"),{Title:$,Text:ee}=h.Typography,eo=(e,o)=>{var i=new Date().getTime();return new File([e],o,{type:e.type,lastModified:i})},ei=e=>{var{onRecordingComplete:o,filename:i="recording.wav",voice:{language_code:r="zh"}}=e,{startRecording:t,recordingTime:a,stopRecording:c}=(0,q.I)({onRecordingComplete:e=>{var r=eo(e,i);null==o||o(r)}});return(0,n.useEffect)(()=>(t().catch(()=>{h.Toast.error(g.o.t("project_library_voice_add_toast_microphone_fail"))}),()=>{c()}),[t,c]),(0,n.useEffect)(()=>{a>=30&&c()},[a,c]),(0,l.jsxs)("div",{className:"text-center h-[362px] flex flex-col justify-between mb-[24px]",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-[16px] mb-12px",children:g.o.t("project_library_voice_add_record_title")}),(0,l.jsx)($,{fontSize:"28px",className:"mb-[16px]",children:g.o.t("project_library_voice_add_record_content_".concat(r))})]}),(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)(h.Image,{width:500,src:W})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{children:(0,l.jsx)(ee,{size:"normal",color:"#313957",className:"opacity-[0.72]",children:g.o.t("project_library_voice_add_record_time",{time:a})})}),(0,l.jsx)(h.Button,{icon:(0,l.jsx)(z.R3$,{}),size:"large",type:"primary",className:"mt-[16px]",onClick:()=>{c()},children:g.o.t("project_library_voice_add_record_end")})]})]})},{Title:er}=h.Typography,et=e=>{var{onChange:o,onError:i,onSuccess:r,inputStage:t=Q.UploadVoice,setInputStage:a,voice:n}=e,s=n.state===E.lV.Pending;return t===Q.UploadVoice?(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsxs)("div",{className:"px-[40px]",children:[(0,l.jsx)(er,{fontSize:"28px",children:g.o.t("project_library_voice_add_start_title")}),(0,l.jsx)("div",{className:"mt-[16px]",children:(0,l.jsx)("div",{className:"text-[16px]",children:g.o.t("project_library_voice_add_start_content")})})]}),(0,l.jsxs)(h.Space,{className:"mt-[50px] mb-[24px]",children:[(0,l.jsx)(G,{onChange:o,onSuccess:e=>{null==r||r(e,K.Upload)},onError:i,children:(0,l.jsx)(h.Tooltip,{theme:"dark",content:g.o.t("voice_clone_create_loading"),className:s?"":"hidden",children:(0,l.jsx)(h.Button,{icon:(0,l.jsx)(z.Isu,{}),size:"large",type:"primary",disabled:s,children:g.o.t("project_library_voice_add_start_upload")})})}),(0,l.jsx)(h.Tooltip,{theme:"dark",content:g.o.t("voice_clone_create_loading"),className:s?"":"hidden",children:(0,l.jsx)(h.Button,{icon:(0,l.jsx)(z.R3$,{}),size:"large",type:"primary",disabled:s,onClick:(0,c._)(function*(){if("denied"===(yield navigator.permissions.query({name:"microphone"})).state){h.Toast.error(g.o.t("project_library_voice_add_toast_microphone_fail"));return}null==a||a(Q.RecordVoice)}),children:g.o.t("project_library_voice_add_start_record")})})]})]}):(0,l.jsx)(ei,{onRecordingComplete:e=>{null==o||o(e),null==r||r(e,K.Record)},voice:n})},ea=i("856306"),el=i.n(ea),{Title:en,Text:ec}=h.Typography,es=e=>{var o=Math.max(0,Math.floor(e)),i=Math.floor(o/60);return"".concat(i.toString().padStart(2,"0"),":").concat((o%60).toString().padStart(2,"0"))},ed=e=>{var o,{audio:i,className:r="",rightPanel:t,onDurationChange:a}=e,{isPlaying:c,togglePlayPause:s,currentTime:d,duration:u}=(0,q.x)(i),p="unknown";return i instanceof File?p=i.name:"string"==typeof i&&(p=null!==(o=i.split("/").pop())&&void 0!==o?o:""),(0,n.useEffect)(()=>{null==a||a(u)},[u,a]),(0,l.jsxs)("div",{className:el()("flex justify-between border rounded-lg border-[#5E6AAD29] border-solid p-[24px]",r),children:[(0,l.jsxs)("div",{className:"flex",children:[c?(0,l.jsx)(z.U_3,{width:"40px",height:"40px",color:"#4E40E5",className:"cursor-pointer",onClick:()=>{s()}}):(0,l.jsx)(z.h$h,{width:"40px",height:"40px",color:"#4E40E5",className:"cursor-pointer",onClick:()=>{s()}}),(0,l.jsxs)("div",{className:"ml-[12px] text-left",children:[(0,l.jsx)(en,{fontSize:"14px",children:p}),(0,l.jsx)(ec,{color:"#313957",className:"opacity-[0.72]",children:"".concat(es(d),"/").concat(es(u))})]})]}),(0,l.jsx)("div",{children:null==t?void 0:t()})]})},{Title:eu,Text:ep}=h.Typography,ex=e=>new Promise((o,i)=>{var r=new FileReader;r.onload=()=>{o(r.result.split(",")[1])},r.onerror=()=>{i(Error("\u6587\u4EF6\u8BFB\u53D6\u5931\u8D25"))},r.readAsDataURL(e)}),em=e=>{var{children:o,tooltip:i,onClick:r}=e;return(0,l.jsx)(h.Tooltip,{content:i,theme:"dark",children:(0,l.jsx)("div",{className:"w-[40px] h-[40px] bg-[#23293D]/[.11] rounded-lg flex justify-center items-center cursor-pointer",onClick:r,children:o})})},ev=e=>{var{onStageChange:o,audio:i,onAudioChange:r,voice:t,voiceId:a,spaceId:s,onComplete:d,inputSourceType:u,onInputSourceTypeChange:p}=e,{total_training_times:m=0,available_training_times:_=10}=t,{loading:f,runAsync:b}=(0,x.Z)(e=>j.lv.APICloneVoice({space_id:s,voice_id:e.voiceId,audio_format:e.format,audio_bytes:e.audioURL},{__disableErrorToast:!0}),{manual:!0}),[A,N]=(0,n.useState)(0),k=A<10,C=(0,l.jsx)(h.AIButton,{size:"large",color:"aiplus",loading:f,disabled:k,onClick:(0,c._)(function*(){if(!k){if(i)try{var e,o,r,t=yield ex(i),{data:{voice:l}={}}=yield b({voiceId:a,format:null!==(r=null===(o=i.name.split(".").pop())||void 0===o?void 0:null===(e=o.trim())||void 0===e?void 0:e.toLowerCase())&&void 0!==r?r:"mp3",audioURL:t});l&&(null==d||d(l))}catch(e){var n=y()[e.code];h.Toast.error(n||g.o.t("coze_voice_clone_failed")),v.E7.errorEvent({eventName:"clone_timbre_error",error:e})}}}),children:g.o.t("project_library_voice_add_finished_replicate")});return(0,l.jsxs)("div",{className:"text-center h-[362px] flex flex-col justify-between mb-[24px]",children:[(0,l.jsxs)(eu,{fontSize:"28px",className:"mb-[16px]",children:[u===K.Upload?g.o.t("project_library_voice_add_finished_title_upload"):g.o.t("project_library_voice_add_finished_title_record"),(0,l.jsx)(eu,{fontSize:"28px",className:"inline-block bg-gradient-to-r from-[#533FEF]/[0.96] to-[#BA00FF]/[0.96] bg-clip-text text-transparent",children:g.o.t("project_library_voice_add_finished_title_start")})]}),(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)(ed,{audio:i,className:"w-[512px]",onDurationChange:N,rightPanel:()=>(0,l.jsxs)(h.Space,{children:[(0,l.jsx)(em,{tooltip:g.o.t("project_library_voice_add_finished_hover_delete"),onClick:()=>{null==o||o(X.InputVoice)},children:(0,l.jsx)(z.dVD,{className:"text-xxl cursor-pointer"})}),(0,l.jsx)(h.Divider,{layout:"vertical"}),(0,l.jsx)(G,{onSuccess:e=>{null==r||r(e),null==p||p(K.Upload)},children:(0,l.jsx)(em,{tooltip:g.o.t("project_library_voice_add_finished_hover_re_upload"),children:(0,l.jsx)(z.Isu,{className:"text-xxl cursor-pointer"})})}),(0,l.jsx)(em,{tooltip:g.o.t("project_library_voice_add_finished_hover_re_record"),onClick:(0,c._)(function*(){if("denied"===(yield navigator.permissions.query({name:"microphone"})).state){h.Toast.error(g.o.t("project_library_voice_add_toast_microphone_fail"));return}null==o||o(X.InputVoice,Q.RecordVoice)}),children:(0,l.jsx)(z.R3$,{className:"text-xxl cursor-pointer"})})]})})}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"mb-[16px] flex flex-col",children:[t.speaker_id?null:(0,l.jsx)(ep,{type:"secondary",children:g.o.t("voice_clone_history_unpay")}),(0,l.jsx)(ep,{type:"secondary",children:g.o.t("project_library_voice_add_finished_chances",{leftChangce:_,allChance:m})})]}),k?(0,l.jsx)(h.Tooltip,{content:g.o.t("project_library_voice_toast_longer"),theme:"dark",children:C}):C]})]})},eg=e=>{var o,i,{visible:r,onVisibleChange:t,onComplete:a,voiceId:c,spaceId:s}=e,[d,u]=(0,n.useState)(X.InputVoice),[p,m]=(0,n.useState)(K.Upload),[v,g]=(0,n.useState)(Q.UploadVoice),[_,f]=(0,n.useState)(null),{data:b,cancel:y}=(0,x.Z)(()=>j.lv.APIMGetVoice({voice_ids:[c]}),{refreshDeps:[c],pollingInterval:3e3,onSuccess:e=>{var o,i,r,t=null===(r=e.data)||void 0===r?void 0:null===(i=r.voices)||void 0===i?void 0:null===(o=i[0])||void 0===o?void 0:o.state;"number"==typeof t&&t!==E.lV.Pending&&y()}}),A=null==b?void 0:null===(i=b.data)||void 0===i?void 0:null===(o=i.voices)||void 0===o?void 0:o[0];return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(h.Modal,{width:800,"data-testid":"bot.ide.bot_creator.clone_timbre_modal",visible:r,maskClosable:!1,closable:!0,onCancel:()=>{null==t||t(!1)},className:O.voiceResourceModal,header:(0,l.jsx)("div",{className:"flex justify-end",children:(0,l.jsx)(h.IconButton,{color:"secondary",icon:(0,l.jsx)(z.rmE,{className:"text-xxl",width:"20",height:"20"}),iconPosition:"left",onClick:()=>{null==t||t(!1)}})}),footer:null,keepDOM:!1,children:A?((e,o)=>{switch(e){case X.InputVoice:return(0,l.jsx)(et,{onSuccess:(e,o)=>{f(e),m(o),u(X.CloneTimbre)},inputStage:v,setInputStage:g,voice:o});case X.CloneTimbre:return(0,l.jsx)(ev,{audio:_,inputSourceType:p,onAudioChange:e=>{f(e)},onStageChange:function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q.UploadVoice;u(e),o&&g(o)},onComplete:e=>{null==t||t(!1),null==a||a(e)},onInputSourceTypeChange:m,voice:o,voiceId:c,spaceId:s});default:return null}})(d,A):(0,l.jsx)("div",{className:"w-full h-[210px] flex items-center justify-center",children:(0,l.jsx)(h.Loading,{loading:!0})})})})},eh=e=>{var{spaceId:o,onComplete:i}=e,[r,t]=(0,n.useState)(!1),[a,c]=(0,n.useState)(null);return{open:e=>{c(e),t(!0)},modal:r&&a?(0,l.jsx)(eg,{visible:r,onVisibleChange:e=>{t(e)},onComplete:i,voiceId:a,spaceId:o}):null}},e_=i("213305"),ej=i("338348"),ef={};ef.styleTagTransform=U(),ef.setAttributes=L(),ef.insert=F().bind(null,"head"),ef.domAPI=M(),ef.insertStyleElement=H(),P()(ej.Z,ef);var eb=ej.Z&&ej.Z.locals?ej.Z.locals:void 0,ey=e=>{var{url:o,onEnded:i,className:r}=e,{isPlaying:t,currentTime:a,duration:c,togglePlayPause:s,seek:d}=(0,q.x)(o,{onEnded:i}),u=(0,n.useRef)(!1),p=(0,n.useRef)(null),[x,m]=(0,n.useState)(0),v=e=>{var o=Math.floor(e/60),i=Math.floor(e%60);return"".concat(o,":").concat(i.toString().padStart(2,"0"))},g=u.current?100*x:c?a/c*100:0,h=u.current?x*c:a,_=e=>{if(p.current){var o=p.current.getBoundingClientRect();return Math.max(0,Math.min(1,(e-o.left)/o.width))}return 0},j=e=>{u.current&&m(_(e.clientX))},f=e=>{e&&d(_(e.clientX)*c),u.current=!1,document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",f)};return(0,n.useEffect)(()=>()=>{document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",f)},[]),(0,l.jsxs)("div",{className:el()(eb.audioPlayer,r),children:[(0,l.jsx)("div",{className:eb.playIconContainer,children:t?(0,l.jsx)(z.T0r,{width:"16px",height:"16px",color:"#4E40E5",onClick:()=>{s()}}):(0,l.jsx)(z.NvC,{width:"16px",height:"16px",color:"#4E40E5",onClick:()=>{s()}})}),(0,l.jsxs)("div",{className:eb.progressContainer,children:[(0,l.jsx)("div",{className:eb.timeText,children:v(h)}),(0,l.jsxs)("div",{ref:p,className:eb.progressBar,onClick:e=>{d(_(e.clientX)*c)},children:[(0,l.jsx)("div",{className:eb.progressFill,style:{width:"".concat(g,"%")}}),(0,l.jsx)("div",{className:eb.progressDot,style:{left:"".concat(g,"%")},onMouseDown:e=>{u.current=!0,document.addEventListener("mousemove",j),document.addEventListener("mouseup",f)}})]}),(0,l.jsx)("div",{className:eb.timeText,children:v(c)})]})]})},eA=e=>{var{initText:o,voiceId:i,className:r}=e,[t,a]=(0,n.useState)(o),[s,d]=(0,n.useState)(null),{loading:u,runAsync:p}=(0,x.Z)(e=>j.lv.APIAudioSpeech({voice_id:e.voiceId,input:e.text,response_format:"mp3",response_data_type:E.Vi.URL}),{manual:!0});return(0,n.useEffect)(()=>{a(o)},[o]),(0,l.jsxs)("div",{className:r,children:[(0,l.jsx)(h.TextArea,{maxCount:200,maxLength:200,rows:5,value:t,onChange:a,prefix:(0,l.jsx)(h.Tooltip,{theme:"dark",style:{maxWidth:"none"},content:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{children:g.o.t("project_library_voice_add_listen_generate_text")}),(0,l.jsx)(e_.A,{dark:!0,description:g.o.t("charge_by_characters"),dismissKey:"voice_resource_tts",className:"mt-[12px]"})]}),children:(0,l.jsx)(h.AIButton,{size:"default",color:"aiplus",loading:u,disabled:!t,onClick:(0,c._)(function*(){if(t){var{data:{audio_url:e}={}}=yield p({voiceId:i,text:t});e&&d(e)}}),children:g.o.t("project_library_voice_add_listen_generate_text")})})}),s?(0,l.jsx)(ey,{url:s,className:"mt-[8px]"}):null]})},{Title:eN}=h.Typography,ek=e=>{var{visible:o,onVisibleChange:i,voice:{preview_audio:r,preview_text:t,voice_id:a},onComplete:n,onReClone:c}=e;return(0,l.jsxs)(h.Modal,{width:800,"data-testid":"bot.ide.bot_creator.synthesize_voice_modal",visible:o,maskClosable:!1,closable:!0,onCancel:()=>{null==c||c(a),null==i||i(!1)},className:O.voiceResourceModal,header:(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)(eN,{fontSize:"20px",color:"#181E2E",children:g.o.t("project_library_voice_add_listen_title")}),(0,l.jsx)(h.IconButton,{color:"secondary",icon:(0,l.jsx)(z.rmE,{className:"text-xxl",width:"20",height:"20"}),iconPosition:"left",onClick:()=>{null==i||i(!1)}})]}),okText:g.o.t("project_library_voice_add_listen_confirm"),cancelText:g.o.t("project_library_voice_add_listen_re_replicatex"),keepDOM:!1,onOk:()=>{null==n||n()},children:[(0,l.jsx)(eN,{fontSize:"14px",className:"opacity-[.89]",color:"#23293D",children:g.o.t("project_library_voice_add_listen_content")}),(0,l.jsx)(ed,{className:"!p-[12px] mt-[4px] mb-[16px]",audio:r}),(0,l.jsx)(eN,{fontSize:"14px",className:"opacity-[.89]",color:"#23293D",children:g.o.t("project_library_voice_add_listen_generate_title")}),(0,l.jsx)(eA,{className:"mt-[4px]",initText:t,voiceId:a})]})},eC=function(){var{onComplete:e,onReClone:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[i,r]=(0,n.useState)(!1),[t,a]=(0,n.useState)(null);return{open:e=>{a(e),r(!0)},modal:i&&t?(0,l.jsx)(ek,{visible:i,voice:t,onVisibleChange:e=>{r(e)},onComplete:()=>{r(!1),null==e||e(t)},onReClone:e=>{r(!1),null==o||o(e)}}):null}},ew=i("842197"),eI=i("826498"),eB=i("299846"),ez=(0,n.createContext)({canEdit:!1}),eE=ez.Provider,eT=()=>(0,n.useContext)(ez),eP=i("221968"),eD=i.n(eP),eM=e=>e?eD().unix(e).format("YYYY-MM-DD HH:mm:ss"):"-",eS=e=>{var{voice:{voice_id:o,create_time:i,create_user_info:r,last_clone_time_unix:t,total_training_times:a,available_training_times:n,language_name:c},className:s}=e;return(0,l.jsxs)("div",{className:el()("p-[24px] flex justify-between items-center text-[14px]","rounded-xl border-[0.5px] border-solid border-[var(--Stroke-COZ-stroke-primary,rgba(87,107,183,0.16))] bg-white",s),children:[(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)("div",{className:"text-[var(--Fg-COZ-fg-secondary,rgba(44,58,92,0.72))]",children:g.o.t("project_library_voice_detail_voice_id")}),(0,l.jsx)("div",{className:"coz-fg-primary font-medium mt-[4px]",children:o})]}),(0,l.jsx)(h.Divider,{layout:"vertical",className:"h-[24px]"}),(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)("div",{className:"text-[var(--Fg-COZ-fg-secondary,rgba(44,58,92,0.72))]",children:g.o.t("project_library_voice_detail_language")}),(0,l.jsx)("div",{className:"coz-fg-primary font-medium mt-[4px]",children:c})]}),(0,l.jsx)(h.Divider,{layout:"vertical",className:"h-[24px]"}),(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)("div",{className:"text-[var(--Fg-COZ-fg-secondary,rgba(44,58,92,0.72))]",children:g.o.t("project_library_voice_detail_time")}),(0,l.jsx)("div",{className:"coz-fg-primary font-medium mt-[4px]",children:eM(i)})]}),(0,l.jsx)(h.Divider,{layout:"vertical",className:"h-[24px]"}),(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)("div",{className:"text-[var(--Fg-COZ-fg-secondary,rgba(44,58,92,0.72))]",children:g.o.t("project_library_voice_detail_latest_time")}),(0,l.jsx)("div",{className:"coz-fg-primary font-medium mt-[4px]",children:eM(t)})]}),(0,l.jsx)(h.Divider,{layout:"vertical",className:"h-[24px]"}),(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)("div",{className:"text-[var(--Fg-COZ-fg-secondary,rgba(44,58,92,0.72))]",children:g.o.t("project_library_voice_detail_chances")}),(0,l.jsx)("div",{className:"coz-fg-primary font-medium mt-[4px]",children:"".concat(n," / ").concat(a)})]}),(0,l.jsx)(h.Divider,{layout:"vertical",className:"h-[24px]"}),(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)("div",{className:"text-[var(--Fg-COZ-fg-secondary,rgba(44,58,92,0.72))]",children:g.o.t("project_library_voice_detail_creator")}),(0,l.jsxs)("div",{className:"flex items-center gap-1 mt-[4px]",children:[(null==r?void 0:r.avatar_url)?(0,l.jsx)(h.Image,{width:14,height:14,className:"rounded-[8px]",src:null==r?void 0:r.avatar_url,fallback:(0,l.jsx)("img",{src:"data:image/png;base64,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",width:"100%",height:"100%"}),preview:!1}):null,r?(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("div",{className:"coz-fg-primary font-medium",children:null==r?void 0:r.nickname}),(0,l.jsxs)("div",{className:"coz-fg-secondary font-medium",children:["@",null==r?void 0:r.name]})]}):null]})]})]})},eF=i("765337"),{Title:eR}=h.Typography,eL=e=>{var{voice:{state:o,preview_audio:i,preview_text:r,voice_id:t},onCloneTimbre:a,className:n}=e,{canEdit:c}=eT();return(0,l.jsx)("div",{className:el()("p-[24px] bg-white","rounded-xl border-[0.5px] border-solid border-[var(--Stroke-COZ-stroke-primary,rgba(87,107,183,0.16))]",n),children:o===E.lV.Cloned?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"coz-fg-primary font-medium leading-5 mb-[4px] text-sm",children:g.o.t("project_library_voice_add_listen_content")}),(0,l.jsx)(ed,{className:"!p-[12px]",audio:i})]}),c?(0,l.jsxs)("div",{className:"mt-6",children:[(0,l.jsx)("div",{className:"coz-fg-primary font-medium leading-5 mb-[4px] text-sm",children:g.o.t("project_library_voice_add_listen_generate_title")}),(0,l.jsx)(eA,{initText:r,voiceId:t})]}):null]}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"w-full h-full flex justify-center pt-[180px]",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)(eF.YC,{width:"120",height:"120"}),(0,l.jsx)(eR,{className:"!mt-[16px]",fontSize:"16px",children:g.o.t("project_library_voice_detail_null_title")}),c?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"text-[var(--Fg-COZ-fg-secondary,rgba(44,58,92,0.72))]",children:g.o.t("project_library_voice_detail_null_content")}),(0,l.jsx)(h.Button,{className:"!mt-[16px]",type:"primary",size:"default",onClick:()=>{null==a||a()},children:g.o.t("project_library_voice_detail_null_button")})]}):null]})})})})},{Header:eZ,Content:eH}=h.Layout,{Text:eV}=h.Typography,eU=e=>{var o,i,r,t,{voiceId:a}=e,n=(0,ew.useNavigate)(),c=(0,eB.rY)(e=>e.space.id),{loading:s,data:d,run:u}=(0,x.Z)(()=>j.lv.APIMGetVoice({voice_ids:[a]})),p=null!==(r=null==d?void 0:null===(i=d.data)||void 0===i?void 0:null===(o=i.voices)||void 0===o?void 0:o[0])&&void 0!==r?r:{},{voice_name:m="",voice_desc:v,icon_url:_,available_training_times:f,create_user_info:b,language_code:y="zh"}=p,{user_id_str:A}=null!==(t=(0,eI.Pc)())&&void 0!==t?t:{},N=A===(null==b?void 0:b.id),k=Number(f)>0,{open:C,modal:I}=w({mode:"update",initValue:{voice_name:m,language_code:y,voice_desc:v,icon_url:_},voiceId:a,onComplete:()=>{u()}}),{open:B,modal:E}=eC({onComplete:()=>{u()},onReClone(e){T(e)}}),{open:T,modal:P}=eh({spaceId:null!=c?c:"",onComplete:B});return(0,l.jsx)(eE,{value:{canEdit:N},children:(0,l.jsxs)(h.Layout,{children:[(0,l.jsxs)(eZ,{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(h.IconButton,{color:"secondary",icon:(0,l.jsx)(z.$1i,{className:"text-[16px]"}),iconPosition:"left",onClick:()=>n("/space/".concat(c,"/library"),{replace:!0})}),s?null:(0,l.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,l.jsx)(h.Avatar,{src:_,className:"w-[36px] h-[36px] rounded-[9px]",shape:"square"}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)(eV,{className:"!font-medium coz-fg-plus",ellipsis:{showTooltip:!1,rows:1},children:m}),N?(0,l.jsx)(z.JAz,{fontSize:16,className:"cursor-pointer",color:"#313957B8",onClick:()=>{C()}}):null]}),v?(0,l.jsx)(eV,{ellipsis:{showTooltip:!0,rows:1},fontSize:"12px",className:"coz-fg-primary mt-[4px]",children:v}):null]})]})]}),!s&&N?(0,l.jsx)("div",{children:k?(0,l.jsx)(h.Button,{onClick:()=>{T(a)},children:g.o.t("project_library_voice_detail_re_replicate")}):(0,l.jsx)(h.Tooltip,{content:g.o.t("project_library_voice_detail_re_replicate_no_chances"),position:"right",children:(0,l.jsx)(h.Button,{disabled:!0,children:g.o.t("project_library_voice_detail_re_replicate")})})}):null]}),(0,l.jsx)(eH,{className:"flex flex-col !pb-6",children:s?(0,l.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,l.jsx)(h.Loading,{loading:!0})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eS,{voice:p,className:"grow-0"}),(0,l.jsx)(eL,{voice:p,className:"mt-[16px] grow",onCloneTimbre:()=>{T(a)}}),I,P,E]})})]})})},eJ=i("462458"),eY=i("244189"),eO=i("618016"),eX=i("280067"),eQ=i("698363"),eK=e=>{var{title:o,price:i,unit:r,desc:t,className:a}=e;return(0,l.jsxs)("div",{className:el()("rounded-[12px] border border-solid coz-stroke-primary\n            coz-bg-max flex items-center px-[16px] pt-[16px] pb-[20px]",a),children:[(0,l.jsx)("img",{src:"data:image/png;base64,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",width:72,height:72}),(0,l.jsxs)("div",{className:"ml-[16px]",children:[(0,l.jsx)("div",{className:"text-[18px]/[32px] font-medium coz-fg-primary h-[32px]",children:o}),(0,l.jsxs)("div",{className:"mt-[8px]",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-[24px] font-semibold coz-fg-primary",children:void 0===i?"-":i}),(0,l.jsx)("span",{className:"text-[14px] font-medium coz-fg-secondary",children:r})]}),(0,l.jsx)("div",{className:"text-[12px] coz-fg-secondary",children:t})]})]})]})},eG=e=>{var{usePersonal:o,visible:i=!1,onVisibleChange:r}=e,[t,a]=(0,n.useState)(1),s=(0,eX.LZ)(e=>{var o,i=null===(o=e.benefit.benefit_type_infos)||void 0===o?void 0:o[eY.Sj.VoiceCloneNumber];return(0,eJ.Z)(null==i?void 0:i.total)||(0,eJ.Z)(null==i?void 0:i.used)?0:i.total-i.used}),d=(0,eQ.HU)(),u=(0,n.useRef)(null),p=(0,eI.Pc)(),m=o?null==p?void 0:p.user_id_str:null==d?void 0:d.organization_id,{loading:_,data:f}=(0,x.Z)(()=>{if(!(d||o))throw new eO.sH("normal_error","[VoiceScalingModal] cannot get enterpriseInfo");return Promise.all([j.c3.PublicGetPricingRules({scene:eY.xs.VoiceClone,coze_account_id:m,coze_account_type:o?eY.j7.Personal:eY.j7.Organization}),j.c3.PublicGetPricingRules({scene:eY.xs.VoiceCloneStorage,coze_account_id:m,coze_account_type:o?eY.j7.Personal:eY.j7.Organization})]).then(e=>{var o,i,r,t,a,l,n,c,[s,d]=e,u=null===(t=s.data)||void 0===t?void 0:null===(r=t.rules)||void 0===r?void 0:null===(i=r[0])||void 0===i?void 0:null===(o=i.unit_price)||void 0===o?void 0:o.amount,p=null===(c=d.data)||void 0===c?void 0:null===(n=c.rules)||void 0===n?void 0:null===(l=n[0])||void 0===l?void 0:null===(a=l.unit_price)||void 0===a?void 0:a.amount;if(!u||!p)throw new eO.sH("normal_error","[VoiceScalingModal] get price failed");return{clone:Number(u),storage:Number(p)}})}),b=(0,n.useMemo)(()=>{if(!f)return"-";var e=f.clone*(t||1),o=f.storage*(t||1);return(e+o).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")},[f,t]);return(0,l.jsxs)(h.Modal,{"data-testid":"bot.ide.bot_creator.voice_scaling_modal",visible:i,maskClosable:!1,onCancel:()=>null==r?void 0:r(!1),title:g.o.t("coze_voice_expansion"),keepDOM:!1,icon:null,width:720,footer:(0,l.jsxs)("div",{children:[(0,l.jsx)(h.Button,{color:"primary",onClick:()=>null==r?void 0:r(!1),children:g.o.t("Cancel")}),(0,l.jsx)(eq,{disabled:!t||_,onConfirm:(0,c._)(function*(){var e,i=null===(e=u.current)||void 0===e?void 0:e.formApi,t=yield null==i?void 0:i.validate();if(!(null==d?void 0:d.organization_id)&&!o)throw new eO.sH("normal_error","[VoiceScalingModal] cannot get enterpriseInfo");if(!m)throw new eO.sH("normal_error","[VoiceScalingModal] cannot get cozeAccountID");try{yield j.lv.APIPurchaseVoiceClonePackage({coze_account_id:m,number:(null==t?void 0:t.scaling_count)||1},{__disableErrorToast:!0}),null==r||r(!1),h.Toast.success({content:g.o.t("coze_voice_expansion_success")})}catch(e){var a=y()[e.code];throw h.Toast.error({content:a||g.o.t("coze_voice_expansion_failed")}),v.E7.errorEvent({eventName:"scale_voice_error",error:e}),e}})})]}),children:[(0,l.jsx)(eK,{title:g.o.t("coze_voice_clone_title"),price:null==f?void 0:f.clone,unit:g.o.t("coze_voice_price_per_tone"),desc:g.o.t("coze_voice_training_limit")}),(0,l.jsx)(eK,{className:"mt-[8px]",title:g.o.t("coze_voice_storage_fee_title"),price:null==f?void 0:f.storage,unit:g.o.t("coze_voice_price_per_month"),desc:g.o.t("coze_voice_initial_monthly_fee")}),(0,l.jsxs)(h.Form,{ref:u,showValidateIcon:!1,onValueChange:e=>{a(e.scaling_count)},children:[(0,l.jsx)(h.FormInputNumber,{field:"scaling_count",className:"w-full",fieldClassName:"[&_.semi-form-field-extra]:coz-fg-primary",label:g.o.t("coze_voice_expansion_quantity"),extraText:g.o.t("coze_voice_remaining_quota",{count:s}),precision:0,initValue:1,min:1,max:6e3,rules:[{required:!0}],noErrorMessage:!0}),(0,l.jsx)(h.Banner,{className:"rounded px-[16px] py-[12px]",closeIcon:!1,justify:"start",description:(0,l.jsxs)("ul",{className:"p-0 m-0 list-inside",children:[(0,l.jsx)("li",{children:g.o.t("voice_clone_expand_tips_step1")}),(0,l.jsx)("li",{children:g.o.t("voice_clone_expand_tips_step2")})]})}),(0,l.jsxs)("div",{className:"mt-[24px] rounded-[8px] border border-solid coz-stroke-primary justify-between\n            coz-bg-max flex items-center p-[12px]\n            shadow-[0px_2px_6px_0px_rgba(0,0,0,0.04),_0px_4px_12px_0px_rgba(0,0,0,0.02)]",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"font-medium coz-fg-primary",children:g.o.t("coze_voice_price")}),(0,l.jsx)(h.Divider,{layout:"vertical",margin:8,className:"h-[12px]"}),(0,l.jsx)("div",{className:"coz-fg-secondary",children:g.o.t("coze_voice_credit_deduction_rule")})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"coz-fg-plus font-medium text-[28px]",children:b}),(0,l.jsx)("span",{className:"text-[12px] coz-fg-secondary",children:g.o.t("coze_voice_price_unit_yuan")})]})]})]})]})};function eq(e){var{disabled:o,onConfirm:i}=e,[r,t]=(0,n.useState)(!1);return(0,l.jsx)(h.Popconfirm,{trigger:o?"custom":"click",title:g.o.t("coze_voice_enable_expansion_prompt"),content:g.o.t("coze_voice_enable_expansion_notice"),cancelText:g.o.t("cancel"),okText:g.o.t("coze_voice_enable"),onConfirm:()=>{t(!0),i().finally(()=>{t(!1)})},position:"leftTop",children:(0,l.jsx)(h.Button,{color:"hgltplus",loading:r,disabled:o,children:g.o.t("coze_voice_enable")})},String(o))}var eW=e=>{var{usePersonal:o}=e,[i,r]=(0,n.useState)(!1);return{open:()=>{r(!0)},modal:i?(0,l.jsx)(eG,{usePersonal:o,visible:i,onVisibleChange:e=>{r(e)}}):null}};i("596598")},338348:function(e,o,i){var r=i(160052),t=i.n(r),a=i(570717),l=i.n(a)()(t());l.push([e.id,".audio-player--XjN0xDxC6VQwxIbQ{align-items:center;background:var(--Bg-COZ-bg-plus,#fbfbfd);border-radius:8px;display:flex;font-size:14px;gap:8px;padding:8px;width:100%}.play-icon-container--n0X5s9TIOK4DbHwq{align-items:center;background:linear-gradient(90deg,rgba(185,192,255,.2),rgba(240,182,255,.2));border:none;border-radius:6.4px;cursor:pointer;display:flex;height:32px;justify-content:center;width:32px}.progress-container--mkpcXvP6ZKw0hd4b{align-items:center;display:flex;flex:1 1;gap:8px}.time-text--XPYdgFxxkwv8hvTp{color:var(--Fg-COZ-fg-secondary,rgba(44,58,92,.72));flex:0 0 60px;font-size:14px;text-align:center}.progress-bar--dAeLgghwK1gNkE6k{background:var(--Mg-COZ-mg-primary,rgba(97,97,196,.11));border-radius:2px;cursor:pointer;flex:1 1;height:4px;position:relative}.progress-fill--ipgidf6REEMdSiZB{background:var(--Fg-COZ-fg-hglt,#543ef7);border-radius:2px;height:100%;position:absolute}.progress-dot--rq52m4cGHoEJSt_u{background:#fff;border:1px solid var(--Fg-COZ-fg-hglt,#543ef7);border-radius:50%;cursor:pointer;display:block;height:12px;position:absolute;top:50%;transform:translate(-50%,-50%);width:12px;z-index:2}.progress-dot--rq52m4cGHoEJSt_u:hover{transform:translate(-50%,-50%) scale(1.2)}.progress-dot--rq52m4cGHoEJSt_u:active{transform:translate(-50%,-50%) scale(1.1)}",""]),l.locals={"audio-player":"audio-player--XjN0xDxC6VQwxIbQ",audioPlayer:"audio-player--XjN0xDxC6VQwxIbQ","play-icon-container":"play-icon-container--n0X5s9TIOK4DbHwq",playIconContainer:"play-icon-container--n0X5s9TIOK4DbHwq","progress-container":"progress-container--mkpcXvP6ZKw0hd4b",progressContainer:"progress-container--mkpcXvP6ZKw0hd4b","time-text":"time-text--XPYdgFxxkwv8hvTp",timeText:"time-text--XPYdgFxxkwv8hvTp","progress-bar":"progress-bar--dAeLgghwK1gNkE6k",progressBar:"progress-bar--dAeLgghwK1gNkE6k","progress-fill":"progress-fill--ipgidf6REEMdSiZB",progressFill:"progress-fill--ipgidf6REEMdSiZB","progress-dot":"progress-dot--rq52m4cGHoEJSt_u",progressDot:"progress-dot--rq52m4cGHoEJSt_u"},o.Z=l},248833:function(e,o,i){var r=i(160052),t=i.n(r),a=i(570717),l=i.n(a)()(t());l.push([e.id,".voice-resource-modal--R15iT4I07438avJc .semi-modal-content{background:linear-gradient(180deg,#eceeff,#fff 42.76%)}",""]),l.locals={"voice-resource-modal":"voice-resource-modal--R15iT4I07438avJc",voiceResourceModal:"voice-resource-modal--R15iT4I07438avJc"},o.Z=l}}]);
//# sourceMappingURL=https://sourcemap-redirect.coze.cn/obj/coze-sourcemap/ol-sourcemap/bot/1.0.2.2232/38198.19c7c28e.js.map