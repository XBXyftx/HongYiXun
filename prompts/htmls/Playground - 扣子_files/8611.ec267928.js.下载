"use strict";(self.webpackChunkapp_botstudio_main=self.webpackChunkapp_botstudio_main||[]).push([["8611"],{606862:function(e,M,i){i.d(M,{U:()=>O});var t=i("938809"),s=i("723530"),n=i("856306"),l=i.n(n),r=i("16242"),N=i("182956"),u=i("274372"),a=i("646411"),j=i("886073"),g=i("730444"),o=i("698363"),D=i("345305"),c=i("801368"),I=i("448082"),x=i("764256"),z=i("797029"),y=e=>{var{superAdminList:M}=e;return M.length?(0,t.jsx)("div",{className:"flex items-center justify-center mb-[30px]",children:(0,t.jsx)("div",{className:"flex items-center flex-col gap-2",children:M.slice(0,2).map(e=>{var M,i;return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(N.Avatar,{size:"small",src:null==e?void 0:e.avatar_url,className:"w-[28px] h-[28px]"}),(0,t.jsx)("span",{className:"text-sm coz-fg-secondary font-medium",children:null==e?void 0:e.nick_name}),(null==e?void 0:null===(M=e.user_label)||void 0===M?void 0:M.icon_url)?(0,t.jsx)(N.Avatar,{src:null==e?void 0:null===(i=e.user_label)||void 0===i?void 0:i.icon_url,className:"w-4 h-4"}):null,(0,t.jsxs)("span",{className:"text-sm coz-fg-dim",children:["@",null==e?void 0:e.name]}),(0,t.jsx)(N.Tag,{color:"yellow",size:"small",children:r.o.t("enterprise_role_super_admin2")})]})})})}):null},d=e=>{var M,i,{initData:t,createEnterpriseError:n,formApi:l}=e,[r,N]=(0,s.useState)(""),[u,a]=(0,s.useState)([]),[j,g]=(0,s.useState)(n),[o,D]=(0,s.useState)(!1);(0,s.useEffect)(()=>{N(t.name)},[t.name]),(0,s.useEffect)(()=>{g(n)},[n]),(0,s.useEffect)(()=>{if(!!l.current){var{errors:e}=l.current.getFormState();D(0===Object.keys(null!=e?e:{}).length)}},[r,u,l]);var c=x.oV.includes(null!==(M=null==j?void 0:j.code)&&void 0!==M?M:"");return{name:r,uploadInfo:u,onNameChange:e=>{g(null),N(e)},onUploadInfoChange:e=>{g(null),a(e)},isFormValid:o,isUploadAvatarError:c,isEnterpriseNameError:x.GQ.includes(null!==(i=null==j?void 0:j.code)&&void 0!==i?i:""),createEnterpriseError:j}},T=i("255721"),A=i("559293"),p=i("449001"),m=e=>{var M,i,{formApi:t,onSuccess:s,redirectToWorkspace:n}=e,l=(0,o.y8)();var{runAsync:r,loading:N,error:u}=(0,A.Z)((M=(0,T._)(function*(e){var M=yield p.f_.CreateEnterprise(e);return 0x2e513559===M.code&&(null==n||n(M.data.enterprise_id)),M.data}),function(e){return M.apply(this,arguments)}),{manual:!0,onSuccess:e=>{var M;s({enterprise_id:e.enterprise_id,organization_id:null!==(M=null==l?void 0:l.organization_id)&&void 0!==M?M:""})}});return{loading:N,createEnterprise:(i=(0,T._)(function*(){if(!!t.current&&!!(yield null===(e=t.current)||void 0===e?void 0:e.validate())){var e,M,i,s,{name:n,upload_info:l}=null!==(i=null===(M=t.current)||void 0===M?void 0:M.getValues())&&void 0!==i?i:{};yield r({name:n,icon_uri:null!==(s=l[0].uid)&&void 0!==s?s:""})}}),function(){return i.apply(this,arguments)}),error:u}},L=e=>{var M,i,t,{formApi:n}=e,l={[u.aC.team]:r.o.t("team_info_settings_title_created"),[u.aC.enterprise]:r.o.t("enterprise_info_settings_title_created")},{data:N,loading:a,error:j}=(0,A.Z)((0,T._)(function*(){var{certification_info:e,level:M,super_admin_list:i=[]}=(yield p.f_.GetCertificationInfo()).data;return{certification_info:e,level:M,super_admin_list:i}}),{manual:!1});return(0,s.useEffect)(()=>{if(!!n.current)n.current.setValue("name",(null==N?void 0:N.certification_info)||"")},[N,n]),{name:(null==N?void 0:N.certification_info)||"",isLoading:a,error:j,level:null!==(M=null==N?void 0:N.level)&&void 0!==M?M:u.aC.free,isValidLevel:!!((null==N?void 0:N.level)&&x.fp.includes(null==N?void 0:N.level)),versionText:l[null!==(i=null==N?void 0:N.level)&&void 0!==i?i:u.aC.free],superAdminList:null!==(t=null==N?void 0:N.super_admin_list)&&void 0!==t?t:[]}},E=i.p+"static/image/enterprise-bg.a1568410.png",_=e=>{var[M]=(0,I.V)(),{redirectToWorkspace:i,checkEnterpriseExist:t}=e,n=(0,s.useCallback)((0,T._)(function*(){var e,M,[i,t]=yield Promise.all([p.f_.CheckEnterpriseExist({},{__disableErrorToast:!0}),p.f_.ListEnterprise({contain_enterprise_of_user:!0})]);return[null!==(M=null==i?void 0:null===(e=i.data)||void 0===e?void 0:e.enterprise_exist)&&void 0!==M&&M,null==t?void 0:t.data]}),[]),{cancel:l}=(0,A.Z)((0,T._)(function*(){if(!!M["bot.community.opt_enterprise_user_experience"]){var[e,s]=yield n(),r=null==t?void 0:t({isEnterpriseExist:e,enterpriseList:s});r&&(null==i||i(r),l())}}),{pollingInterval:5e3});(0,s.useEffect)(()=>()=>l(),[])},O=e=>{var{onCallback:M}=e,i=(0,s.useRef)(null),[n]=(0,I.V)(),[T,A]=(0,s.useState)(!n["bot.community.opt_enterprise_user_experience"]),p=L({formApi:i}),{versionText:O,superAdminList:f,isValidLevel:v,level:C}=p,k=(0,s.useCallback)(e=>{N.Toast.info({content:r.o.t("enterprise_auto_create_success_toast")});var M,i="coze-create-enterprise-success",t=(null===(M=c.D.getValue(i))||void 0===M?void 0:M.split(","))||[];!t.includes(e)&&(t.push(e),c.D.setValue(i,t.join(","))),window.location.href="/enterprise/".concat(e,"/enterprise/workspace")},[]),S=(0,s.useCallback)(e=>{if(!e.isEnterpriseExist||!e.enterpriseList)return"";var M,i=null===(M=e.enterpriseList.enterprise_info_list)||void 0===M?void 0:M.find(e=>!e.enterprise_role_type_list.includes(u.gY.guest)),t=null==i?void 0:i.enterprise_id;return t?t:""},[]),{loading:Y,createEnterprise:w,error:h}=m({formApi:i,onSuccess:M,redirectToWorkspace:k}),{isEnterpriseExist:Q,enterpriseList:U}=(0,o.ff)((0,D.N)(e=>({isEnterpriseExist:e.isEnterpriseExist,enterpriseList:e.enterpriseList}))),{isFormValid:b,onNameChange:Z,onUploadInfoChange:V,isUploadAvatarError:F,isEnterpriseNameError:J}=d({initData:p,createEnterpriseError:null!=h?h:null,formApi:i});return(_({checkEnterpriseExist:S,redirectToWorkspace:k}),(0,g.Z)(()=>{if((0,z.Z)(U)||!n["bot.community.opt_enterprise_user_experience"])return;setTimeout(()=>{A(!0)});var e=S({isEnterpriseExist:Q,enterpriseList:U});if(!!e)k(e)},[Q,U,k,S]),T)?(0,t.jsxs)("div",{className:"flex flex-col justify-start items-center min-h-screen bg-center bg-no-repeat w-full relative",style:{background:"\n          linear-gradient(178deg, rgba(245, 245, 245, 0.00) 1.86%, #F6F4F7 50%),\n          linear-gradient(90deg, rgba(220, 228, 255, 0.60) 14.64%, rgba(231, 216, 255, 0.60) 100%)\n        "},children:[(0,t.jsxs)("div",{className:"flex items-center justify-center absolute top-[32px] left-[32px] gap-[10px]",children:[(0,t.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCAzNiAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTI5LjUzOTEgMEg2LjQ2MDlDMi44OTI2NSAwIDAgMi44OTI2NCAwIDYuNDYwOVYyOS41MzkxQzAgMzMuMTA3NCAyLjg5MjY1IDM2IDYuNDYwOSAzNkgyOS41MzkxQzMzLjEwNzMgMzYgMzYgMzMuMTA3NCAzNiAyOS41MzkxVjYuNDYwOUMzNiAyLjg5MjY0IDMzLjEwNzMgMCAyOS41MzkxIDBaIiBmaWxsPSIjNEQ1M0U4Ii8+CjxwYXRoIGQ9Ik0zMC44NjUzIDE3Ljk0ODVDMzAuODIwNCAxNy45NDg1IDMwLjc3NTUgMTcuOTQ4NSAzMC43MzA2IDE3Ljk1MThDMzAuMDM2NyAxNy45OTM0IDI3Ljk1NTIgMTguMTIzMiAyNy45NTUyIDE4LjEyMzJMMjcuOTYxOSAxNC41ODI0QzI3Ljk2MTkgOS4wNzgyNCAyMy41MDEgNC42MTU2OCAxNy45OTY4IDQuNjE0MDFDMTIuNDkyNiA0LjYxNTY4IDguMDMxNzUgOS4wNzgyNCA4LjAzMTc1IDE0LjU4MjRMOC4wMzg0IDE4LjEyMzJDOC4wMzg0IDE4LjEyMzIgNS45NTY4NyAxNy45OTM0IDUuMjYzMDMgMTcuOTUxOEM1LjIxODEgMTcuOTQ4NSA1LjE3MzE4IDE3Ljk0ODUgNS4xMjgyNSAxNy45NDg1QzMuODI1NDIgMTcuOTQ4NSAyLjc3MDUxIDE5LjAwNSAyLjc3MDUxIDIwLjMwNjJDMi43NzA1MSAyMS4zMjk1IDMuNDI0NDIgMjIuMTk5NyA0LjMzNDU3IDIyLjUyNzVDNS4yNTgwMyAyMi44NjAzIDguMDIxNzcgMjMuODY4NiA4LjAyMTc3IDIzLjg2ODZMNy45NzM1MSAyNS45NjE4QzcuOTczNTEgMjcuNzk3IDkuNDYxMDIgMjkuMjg2MiAxMS4yOTggMjkuMjg2MkMxMi4xMjQ5IDI5LjI4NjIgMTIuODgwMyAyOC45ODM0IDEzLjQ2MjcgMjguNDg0MkMxNC4yNTQ3IDMwLjE5NjQgMTUuOTg4NSAzMS4zODI3IDE3Ljk5ODUgMzEuMzgyN0MyMC4wMDg0IDMxLjM4MjcgMjEuNzQwNiAzMC4xOTQ3IDIyLjUzNDIgMjguNDg0MkMyMy4xMTY2IDI4Ljk4MzQgMjMuODcyIDI5LjI4NjIgMjQuNjk5IDI5LjI4NjJDMjYuNTM0MiAyOS4yODYyIDI4LjAyMzQgMjcuNzk4NyAyOC4wMjM0IDI1Ljk2MThMMjcuOTc1MiAyMy44Njg2QzI3Ljk3NTIgMjMuODY4NiAzMC43Mzg5IDIyLjg2MDMgMzEuNjYyNCAyMi41Mjc1QzMyLjU3MjUgMjIuMTk5NyAzMy4yMjY0IDIxLjMyOTUgMzMuMjI2NCAyMC4zMDYyQzMzLjIyNjQgMTkuMDAzNCAzMi4xNjk4IDE3Ljk0ODUgMzAuODY4NyAxNy45NDg1SDMwLjg2NTNaTTEzLjI4NjMgMjAuMDI4M1YxOC4wNDVDMTMuMjg2MyAxNy41MDkyIDEzLjcyMDYgMTcuMDc0OSAxNC4yNTY0IDE3LjA3NDlDMTQuNzkyMSAxNy4wNzQ5IDE1LjIyNjQgMTcuNTA5MiAxNS4yMjY0IDE4LjA0NVYyMC4wMjgzQzE1LjIyNjQgMjAuNTY0MSAxNC43OTIxIDIwLjk5ODQgMTQuMjU2NCAyMC45OTg0QzEzLjcyMDYgMjAuOTk4NCAxMy4yODYzIDIwLjU2NDEgMTMuMjg2MyAyMC4wMjgzWk0yMS40NTI3IDIzLjMyNjJDMjAuNjA5MSAyNC4zODYxIDE5LjM0OTUgMjQuOTkzNCAxNy45OTY4IDI0Ljk5MzRDMTYuNjQ0MSAyNC45OTM0IDE1LjM4MjggMjQuMzg0NCAxNC41MzkyIDIzLjMyMjhDMTQuMjM5NyAyMi45NDY4IDE0LjMwMyAyMi4zOTk0IDE0LjY3OSAyMi4xMDE1QzE1LjA1NSAyMS44MDIgMTUuNjAyNSAyMS44NjUzIDE1LjkwMDMgMjIuMjQxM0MxNi40MTExIDIyLjg4NTIgMTcuMTc0OCAyMy4yNTQ2IDE3Ljk5NjggMjMuMjU0NkMxOC44MTg4IDIzLjI1NDYgMTkuNTgwOCAyMi44ODUyIDIwLjA5MTYgMjIuMjQzQzIwLjM5MTEgMjEuODY2OSAyMC45MzY5IDIxLjgwNTQgMjEuMzEyOSAyMi4xMDMyQzIxLjY4OSAyMi40MDI3IDIxLjc1MDUgMjIuOTQ4NSAyMS40NTI3IDIzLjMyNDVWMjMuMzI2MlpNMjEuNzMwNiAyMC45OTg0QzIxLjExMTYgMjAuOTk4NCAyMC42MTA4IDIwLjQ5NzUgMjAuNjEwOCAxOS44Nzg2QzIwLjYxMDggMTkuMjU5NiAyMS4xMTE2IDE4Ljc1ODggMjEuNzMwNiAxOC43NTg4QzIyLjM0OTYgMTguNzU4OCAyMi44NTA0IDE5LjI1OTYgMjIuODUwNCAxOS44Nzg2QzIyLjg1MDQgMjAuNDk3NSAyMi4zNDk2IDIwLjk5ODQgMjEuNzMwNiAyMC45OTg0WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg==",className:"w-[36px] h-[36px]"}),(0,t.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDQiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCA0NCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTUuNjA3MTIgMC4zNDc2NTZIMi41NjcxOFYzLjE1NDY0SDAuMjE5NDMyVjUuOTczMjhIMi41NzA1MVYxMC40MDA5SDAuMjE5NDMyVjEzLjIxOTVIMi41NzA1MVYxNi4yNzI4QzIuNTcwNTEgMTYuNDkyNCAyLjM5MjQ4IDE2LjY3MDUgMi4xNzI4NCAxNi42NzA1SDAuMTI3OTNWMTkuNzA1NEgyLjE3Mjg0QzQuMDY4MDIgMTkuNzA1NCA1LjYxMjEyIDE4LjE2NDYgNS42MTIxMiAxNi4yNzI4VjExLjIwMTJINy45NTY1NFY4LjM4MjZINS42MTIxMlY1Ljk3ODI3SDcuOTU2NTRWMy4xNTk2NEg1LjYxMjEyVjAuMzQ5MzIySDUuNjA3MTJWMC4zNDc2NTZaIiBmaWxsPSJibGFjayIvPgo8cGF0aCBkPSJNMTcuNTg1MyAwLjI1NzgxMkgxMi4yMDc2QzEwLjQxNTYgMC4yNTc4MTIgOC45NTgwMSAxLjcxMzcyIDguOTU4MDEgMy41MDA3NFYxNi40NTQyQzguOTU4MDEgMTguMjQ0NSAxMC40MTg5IDE5LjY5NzEgMTIuMjA3NiAxOS42OTcxSDE3LjU4NTNDMTkuMzc3MyAxOS42OTcxIDIwLjgzNDkgMTguMjQxMiAyMC44MzQ5IDE2LjQ1NDJWMy41MDA3NEMyMC44MzQ5IDEuNzEwMzkgMTkuMzc0IDAuMjU3ODEyIDE3LjU4NTMgMC4yNTc4MTJaTTE3Ljc5MzMgMTYuNDU0MkMxNy43OTMzIDE2LjU3MjMgMTcuNjk4NCAxNi42NjIxIDE3LjU4NTMgMTYuNjYyMUgxMi4yMDc2QzEyLjA5MTEgMTYuNjYyMSAxMS45OTk2IDE2LjU2NzMgMTEuOTk5NiAxNi40NTQyVjMuNTAwNzRDMTEuOTk5NiAzLjM4MjYxIDEyLjA5NDUgMy4yOTI3NiAxMi4yMDc2IDMuMjkyNzZIMTcuNTg1M0MxNy43MDE4IDMuMjkyNzYgMTcuNzkzMyAzLjM4NzYgMTcuNzkzMyAzLjUwMDc0VjE2LjQ1NDJaIiBmaWxsPSJibGFjayIvPgo8cGF0aCBkPSJNNDMuNzIwNiA4LjE3MzAxSDM2LjkwODZMNDAuNzk1NSAzLjIzNDU3TDQwLjc2ODkgMC41MDc0NDZIMjYuMDU2N1YzLjU0MjM5SDM2LjY4OUwzMy4wNDM0IDguMTc0NjdIMjQuMDY4NFYxMS4yMDk2SDMyLjkwN1YxNi4yNjk1QzMyLjkwNyAxNi40ODkxIDMyLjcyODkgMTYuNjY3MiAzMi41MDkzIDE2LjY2NzJIMjguMTA4M1YxOS43MDIxSDMyLjUwOTNDMzQuNDA0NSAxOS43MDIxIDM1Ljk0ODUgMTguMTYxNCAzNS45NDg1IDE2LjI2OTVWMTEuMjA5Nkg0My43MjU2VjguMTc0NjdINDMuNzIwNlY4LjE3MzAxWiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==",alt:"coze-txt",className:"w-[43px] h-[20px]"})]}),(0,t.jsxs)("div",{className:"relative flex flex-col items-center justify-center w-full",children:[(0,t.jsx)("img",{src:E,className:l()("pointer-events-none select-none opacity-80","relative top-[20px] left-[17px] h-[221px] w-[1470px] object-contain")}),(0,t.jsx)("div",{className:"text-[28px] font-medium text-center mb-4 coz-fg-plus",children:O}),(0,t.jsx)(y,{superAdminList:f}),(0,t.jsxs)("div",{className:"w-[420px] coz-bg-max rounded-xl shadow-lg px-8 pb-8 pt-6",children:[(0,t.jsx)("div",{className:"text-[20px] font-medium text-center mb-12 coz-fg-plus",children:C===u.aC.team?r.o.t("team_info_settings_desc"):r.o.t("enterprise_info_settings_desc")}),(0,t.jsxs)(N.Form,{getFormApi:e=>i.current=e,className:"[&_.semi-form-field]:!p-0 [&_.semi-form-field-help-text]:!coz-fg-hglt-red",children:[(0,t.jsx)("div",{className:l()("flex justify-center [&_.semi-upload]:!w-[80px] [&_.semi-upload]:!h-[80px] mb-6",F&&"[&_.semi-upload]:!w-[88px] [&_.semi-upload]:!h-[88px]"),children:(0,t.jsx)(j.s,{accept:x.KF,noLabel:!0,fileBizType:a.ym.BIZ_ENTERPRISE_ICON,iconType:a.Tu.Enterprise,rules:[{required:!0}],maxSize:x.Qz,field:"upload_info",triggerClassName:l()("!w-[80px] !h-[80px] !box-content",F&&"!coz-stroke-hglt-red border border-solid rounded-[14px] p-[3px]"),avatarClassName:l()("!w-[80px] !h-[80px]"),helpText:(0,t.jsx)("div",{className:"coz-fg-hglt-red",children:F?r.o.t("info_moderation_result_logo"):""}),validateStatus:F?"error":void 0,onChange:V,onSizeError:()=>{N.Toast.error({content:r.o.t("upload_image_size_limit",{max_size:"10MB"},"Please upload an image less than 10MB"),showClose:!1})}})}),(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)(N.Form.Input,{autoFocus:!0,noLabel:!0,maxLength:x._d,prefix:(0,t.jsxs)("div",{className:"flex items-center text-sm font-medium coz-fg-plus",children:[(0,t.jsx)("div",{className:"w-[85px] pl-4 pr-3 ",children:C===u.aC.team?r.o.t("team_info_settings_name"):r.o.t("enterprise_info_settings_name")}),(0,t.jsx)(N.Divider,{layout:"vertical",className:"w-[1px] h-[16px] mr-3"})]}),autoComplete:"off",size:"large",rules:[{required:!0,message:C===u.aC.team?r.o.t("team_info_settings_name_placeholder"):r.o.t("enterprise_info_settings_name_placeholder")},{pattern:/^[\u4e00-\u9fa5A-Za-z0-9@&\\{}.,，·\-－_（）()<>《》、'—' ]{0,100}$/,message:r.o.t("info_moderation_result_name")}],placeholder:C===u.aC.team?r.o.t("team_info_settings_name_placeholder"):r.o.t("enterprise_info_settings_name_placeholder"),className:"w-full rounded-lg !coz-fg-plus",field:"name",validateStatus:J?"error":void 0,helpText:(0,t.jsx)("div",{className:"coz-fg-hglt-red",children:J?r.o.t("info_moderation_result_name"):""}),onChange:Z})}),(0,t.jsx)(N.Button,{theme:"solid",type:"primary",size:"large",className:"w-full h-12 rounded-lg",loading:Y,disabled:!b||!v,onClick:w,children:C===u.aC.team?r.o.t("team_info_settings_create_button"):r.o.t("enterprise_info_settings_create_button")})]})]})]})]}):(0,t.jsx)(N.Spin,{spinning:!0,wrapperClassName:"h-full w-full"})}}}]);
//# sourceMappingURL=https://sourcemap-redirect.coze.cn/obj/coze-sourcemap/ol-sourcemap/bot/1.0.2.2232/8611.ec267928.js.map