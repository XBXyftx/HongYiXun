"use strict";(self.webpackChunkapp_botstudio_main=self.webpackChunkapp_botstudio_main||[]).push([["98501"],{385678:function(e,t,n){n.d(t,{Y:()=>ei});var o=n("938809"),i=n("139210"),r=n("396842"),a=n("723530"),s=n("856306"),l=n.n(s),d=n("583976"),c=n("728971"),u=n("172378"),v=n("310341"),h=n("138510"),p=n("182956"),m=n("412788"),f=()=>{var e=(0,c.Ul)(e=>e.voiceInfoList);return(0,a.useMemo)(()=>{var t,n=null==e?void 0:e.find(e=>m.oc.language.includes(e.language_code));return(null==n?void 0:n.voice_id)||(null==e?void 0:null===(t=e[0])||void 0===t?void 0:t.voice_id)},[e,m.oc.language])},g=n("866466"),b=n.n(g),x=n("462669"),_=n.n(x),y=n("318249"),C=n.n(y),k=n("294754"),I=n.n(k),w=n("13355"),N=n.n(w),E=n("876846"),A=n.n(E),M=n("31018"),j={};j.styleTagTransform=A(),j.setAttributes=I(),j.insert=C().bind(null,"head"),j.domAPI=_(),j.insertStyleElement=N(),b()(M.Z,j);var T=M.Z&&M.Z.locals?M.Z.locals:void 0,S=e=>{var{isRenderAnswerAction:t}=e,{meta:n}=(0,r.dH)(),{message:i}=(0,r.dH)(),{readonly:a}=(0,c.HE)(),s=n.isGroupLastMessage&&n.isFromLatestGroup&&(null==i?void 0:i.type)==="answer";return!t||s||a?null:(0,o.jsx)(B,{})},B=()=>{var[e,t]=(0,a.useState)(!1),n=(0,a.useRef)(null),i=(0,a.useRef)(null),{message:s}=(0,r.dH)(),c=f(),{showHoverText:p,isMultiMessage:m}=(0,u.H9)(),{isShowDelete:g,isShowFeedback:b,messageId:x,isNeedQuote:_}=(0,u.$w)(),y=g||b||!!p,C="answer"===s.type&&!!p&&_,{width:k}=(0,d.Z)(i)||{},I=(0,a.useMemo)(()=>{var e,t,n=null===(t=i.current)||void 0===t?void 0:null===(e=t.closest(".coze-chat-hover-message-wrapper"))||void 0===e?void 0:e.clientWidth;return n&&m?(n+=44,k&&n&&k>n?k-n:0):0},[k]);return y?(console.log("actionBarSize:",{actionBarSize:k,actionBarLeft:I}),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:l()("w-full flex",m?"justify-start":"justify-end"),style:{},children:(0,o.jsxs)(h.r5,{style:{width:"fit-content",zIndex:2,position:"relative",left:I},ref:i,children:[b?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(u.FN,{popoverContainerRef:n}),(0,o.jsx)(u.dX,{onDetailPanelVisibleChange:t,popoverContainerRef:n})]}):null,p?(0,o.jsxs)(o.Fragment,{children:[c?(0,o.jsx)(v.w,{defaultVoiceId:c,isUseExternalContent:!0,externalContent:p,isMustGroupLastAnswerMessage:!1,detectLang:{disabled:!0,voiceId:c||""}}):null,(0,o.jsx)(h.p4,{wrapperClass:"flex justify-center items-center",isUseExternalContent:!0,externalContent:p,isMustGroupLastAnswerMessage:!1})]}):null,g?(0,o.jsx)(u.pD,{}):null,C?(0,o.jsx)(h.VH,{}):null]})}),b?(0,o.jsx)(z,{cozeApiMessageId:x,visible:e,hidePanel:()=>{t(!1)},popoverContainerRef:n}):null,(0,o.jsx)("div",{ref:n,style:{width:0,height:0,position:"relative"}})]})):null},z=e=>{var t,n,{cozeApiMessageId:i,visible:r,popoverContainerRef:s,hidePanel:l}=e,d=(0,a.useRef)(null),{chatConfig:v}=(0,c.HE)(),h=(0,a.useMemo)(()=>{if(r){var e,t,n;return(null===(t=d.current)||void 0===t?void 0:null===(e=t.closest(".coze-chat-message-wrapper"))||void 0===e?void 0:e.clientWidth)||(null===(n=d.current)||void 0===n?void 0:n.clientWidth)}return 0},[r]);return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(p.Popover,{content:(0,o.jsx)("div",{style:{width:h?"".concat(h,"px"):void 0},children:(0,o.jsx)(u.PM,{cozeApiMessageId:i,hidePanel:l,feedbackConfig:null===(n=v.ui)||void 0===n?void 0:null===(t=n.chatBot)||void 0===t?void 0:t.feedback})}),trigger:"custom",position:"bottomLeft",className:T["feedback-detail-popover"],getPopupContainer:()=>(null==s?void 0:s.current)||document.body,visible:r,spacing:{x:0,y:-2},style:{padding:0},children:(0,o.jsx)("div",{ref:d,className:T["feedback-detail-position"]})})})},D=()=>{var{lastMessageText:e}=(0,u.GA)(),t=f(),n=(0,c.VJ)(),i=(0,c.Ul)(e=>e.updateLastGroupFeedbackInfo),{isShowDelete:r,isShowFeedback:a,messageId:s,isNeedQuote:d}=(0,u.$w)(),p=n?"!coz-fg-images-white":"",m=!!e&&!!t;return e||r||a||m?(0,o.jsx)(h.qO,{leftContent:[a&&(0,o.jsx)(u.FN,{iconClassName:p}),a&&(0,o.jsx)(u.dX,{iconClassName:p,onDetailPanelVisibleChange:e=>{e?i(s,!0):i(s,!1)}}),m&&(0,o.jsx)(v.w,{className:l()(p,{"!coz-bg-images-white":n}),isUseExternalContent:!0,externalContent:e,defaultVoiceId:t||"",detectLang:{disabled:!0,voiceId:t||""}},"tts"),!!e&&(0,o.jsx)(h.p4,{className:p,isUseExternalContent:!0,externalContent:e},"copy"),r&&(0,o.jsx)(u.pD,{className:l()(p)},"delete"),!!e&&d&&(0,o.jsx)(h.VH,{className:l()(p)})],rightContent:[]}):null},R=e=>{var{refreshContainerWidth:t,isRenderAnswerAction:n}=e,{meta:i}=(0,r.dH)(),{message:s}=(0,r.dH)(),{useWaitingStore:l}=(0,r.NN)(),{readonly:d}=(0,c.HE)(),u=l(e=>!!e.waiting),v="answer"===s.type,h=i.isGroupLastMessage&&i.isFromLatestGroup;return((0,a.useEffect)(()=>{if(!!n)t()},[n]),n&&h&&v&&!u&&!d)?(0,o.jsx)(D,{}):null},U=n("436665"),H=n("696591"),P=n("273268"),q=n("16242"),Z=n("988726"),L=n("482677"),V={};V.styleTagTransform=A(),V.setAttributes=I(),V.insert=C().bind(null,"head"),V.domAPI=_(),V.insertStyleElement=N(),b()(L.Z,V);var O=L.Z&&L.Z.locals?L.Z.locals:void 0,F=()=>{var e,t,n=(0,c.VJ)(),{chatConfig:i}=(0,c.HE)(),r=(null===(t=i.ui)||void 0===t?void 0:null===(e=t.base)||void 0===e?void 0:e.layout)===H.Ar.MOBILE,{chatActions:a,enableVoiceChat:s}=(0,U.useChatInstance)(),d=(0,c.Ir)(),{readonly:u}=(0,c.HE)();return d&&s?(0,o.jsx)("div",{className:O["chat-input-right-slot"],children:(0,o.jsx)(P.t5,{content:q.o.t("voice_tooltip_coze_call1"),hideToolTip:r,children:(0,o.jsx)(P.Hg,{"data-testid":"bot-edit-debug-chat-clear-button",showBackground:n,icon:(0,o.jsx)(Z.AH9,{width:"18px",height:"18px"}),disabled:u,onClick:e=>{a.userCall(U.MultimediaMode.Audio)},className:l()("ml-12px","!rounded-full",n?"!coz-fg-images-white":"",{[O.disabled]:u})})})}):null},X=n("341333"),K=n("265489"),W=n("126819"),Y=n("473698"),G=n("41352"),Q={};Q.styleTagTransform=A(),Q.setAttributes=I(),Q.insert=C().bind(null,"head"),Q.domAPI=_(),Q.insertStyleElement=N(),b()(G.Z,Q);var J=G.Z&&G.Z.locals?G.Z.locals:void 0,$=()=>(0,o.jsx)("div",{className:J["unfocus-text"],children:q.o.t("chat_voice_input_need_focus")}),ee=e=>{var{target:t,layout:n}=e,i=(0,c.Ul)(e=>e.defaultInputMode),r=(0,c.Ul)(e=>e.setDefaultInputMode),s=(0,a.useRef)(0),[l,d]=(0,a.useState)(()=>n===H.Ar.MOBILE?m.oc.t("chat_voice_input_tip_press_to_speak_inMobile"):(0,o.jsx)($,{}));return(0,Y.Z)(t,{onFocus:()=>{n===H.Ar.MOBILE?d(m.oc.t("chat_voice_input_tip_press_to_speak_inMobile")):d(m.oc.t("chat_voice_input_tip_press_to_speak"))},onBlur:()=>{n===H.Ar.MOBILE?d(m.oc.t("chat_voice_input_tip_press_to_speak_inMobile")):s.current=setTimeout(()=>{d((0,o.jsx)($,{}))},50)}}),{audioText:l,defaultInputMode:i,onInputModeChange:(0,a.useCallback)(e=>{r("audio"===e?H.Ti.Voice:H.Ti.Text),setTimeout(()=>{if(s.current&&clearTimeout(s.current),t.current.tabIndex=1e3,"audio"===e){var n;null===(n=t.current)||void 0===n||n.focus()}},50)},[])}},et=e=>{var t,n,i,{controller:r}=e,{layout:a,chatConfig:s}=(0,c.HE)(),l=null===(i=null==s?void 0:null===(n=s.ui)||void 0===n?void 0:null===(t=n.chatBot)||void 0===t?void 0:t.isNeedAudio)||void 0===i||i,{audioText:d,onInputModeChange:u,defaultInputMode:v}=ee({target:r.getChatContainer,layout:a});return(0,o.jsx)(W.U3,{value:{inputMode:l&&v===H.Ti.Voice?"audio":"input",onInputModeChange:u,enableAudio:l},children:(0,W.CV)((0,K._)((0,X._)({},r),{shortcutKeyElement:r.getChatContainer,text:d}))})},en=e=>{var{controller:t}=e,{renderChatInputTopSlot:n}=(0,c.HE)();return(0,o.jsxs)(o.Fragment,{children:[null==n?void 0:n(),(0,o.jsx)(u.RV,{controller:t})]})};class eo extends r.x1{constructor(...e){super(...e),this.pluginMode=r.tf.Writeable,this.pluginName="ChatSDKActionAndInputPlugin",this.customComponents=(0,r.S3)({ContentBox:i.b,MessageBoxFooter:R,MessageBoxHoverSlot:S,ChatInputIntegration:{renderChatInputSlot:e=>(0,o.jsx)(et,{controller:e}),renderChatInputTopSlot:e=>(0,o.jsx)(en,{controller:e})},InputRightSlot:F})}}n("87353");var ei={createPluginBizContext:()=>({}),Plugin:eo}},353774:function(e,t,n){n.d(t,{W:function(){return l}});var o=n(938809),i=n(611),r=n(120482),a=n(723530),s=(0,a.createContext)({isInProvider:!1}),l=e=>{var{children:t}=e,n=(0,a.useContext)(s);return(0,o.jsx)(s.Provider,{value:{isInProvider:!0},children:n.isInProvider?t:(0,o.jsx)(r.W,{backend:i.PD,context:window,children:t})})}},61888:function(e,t,n){n.d(t,{a:function(){return a}});var o=n(380094),i=n(87530),r=n(723530),a=e=>{var{id:t,type:n,direction:a="verticle",enabled:s=!0,onMove:l}=e,d=(0,r.useRef)(),c=(0,r.useRef)(s);c.current=s;var[{isHovered:u},v]=(0,o.L)({accept:n,collect:e=>({isHovered:e.isOver()}),canDrop:()=>c.current,hover:(e,n)=>{if(!!d.current&&e.id!==t){var o,i=n.getClientOffset(),r=null===(o=d.current)||void 0===o?void 0:o.getBoundingClientRect(),s=!1;if("verticle"===a){if((null==i?void 0:i.y)===void 0)return;var c=(r.top+r.bottom)/2;s=(null==i?void 0:i.y)<c,l(e.id,t,s)}if("horizontal"===a){if((null==i?void 0:i.x)===void 0)return;var u=(r.left+r.right)/2;s=(null==i?void 0:i.x)<u,l(e.id,t,s)}}}}),[{isDragging:h},p,m]=(0,i.c)({type:n,item:()=>({id:t}),canDrag:()=>c.current,collect:e=>({isDragging:e.isDragging()})});return{isHovered:u,isDragging:h,connect:(0,r.useMemo)(()=>(e,t)=>{v(e),p(null!=t?t:e),m(e),d.current=e.current},[v,p])}}},272391:function(e,t,n){n.d(t,{c:function(){return c}});var o=n(341333),i=n(265489),r=n(938809),a=n(353774),s=n(61888),l=e=>{var{id:t,type:n,data:a,itemRender:l,enabled:d,onMove:c,direction:u}=e,v=(0,s.a)({id:t,type:n,onMove:c,enabled:d,direction:u});return(0,r.jsx)(l,(0,i._)((0,o._)({},v),{data:a}))},d=e=>e.id,c=e=>{var{list:t,type:n,getId:o=d,onChange:i,enabled:s,itemRender:c,direction:u}=e;return(0,r.jsx)(a.W,{children:t.map(e=>{var a=o(e);return(0,r.jsx)(l,{type:n,id:a,data:e,itemRender:c,enabled:s,direction:u,onMove:(e,n,r)=>{var a=[...t],s=a.findIndex(t=>o(t)===e),l=a.splice(s,1)[0],d=a.findIndex(e=>o(e)===n)+(r?0:1);if(s!==d)l&&a.splice(d,0,l),i(a)}},a)})})}},172378:function(e,t,n){n.d(t,{FN:()=>ef,H9:()=>tt,i:()=>e0,dX:()=>ev,$w:()=>el,RV:()=>ey,O4:()=>to,pD:()=>ex,GA:()=>te,b_:()=>e8,lt:()=>tn,vS:()=>e6,c4:()=>eW,PM:()=>L});var o=n("341333"),i=n("396842"),r=e=>({}),a=n("255721"),s=n("265489"),l=n("696591"),d=n("182956"),c=e=>{var t,n,i="";return{onSendMessageError:(t=(0,a._)(function*(t){var n=t.error;if(n instanceof Error){var o=(0,l.QQ)(n.message,{});(null==o?void 0:o.code)&&(null==o?void 0:o.msg)&&d.Toast.error({content:o.msg,showClose:!1})}if((0,l.f1)((null==n?void 0:null===(r=n.ext)||void 0===r?void 0:r.code)||0)||(null==n?void 0:null===(a=n.stack)||void 0===a?void 0:a.includes("401"))){yield null===(c=e.pluginBizContext)||void 0===c?void 0:null===(s=c.refreshToken)||void 0===s?void 0:s.call(c);var r,a,s,c,u,v,h,p=t.message.message_id||(null===(v=t.message)||void 0===v?void 0:null===(u=v.extra_info)||void 0===u?void 0:u.local_message_id);p!==i&&(i=p,null===(h=e.pluginBizContext.refChatFunc.current)||void 0===h||h.regenerateMessageByUserMessageId(p))}}),function(e){return t.apply(this,arguments)}),onBeforeSendMessage:(n=(0,a._)(function*(t){var n,i,r=t.message.content.slice(0,100);yield null===(n=e.pluginBizContext.refChatFunc.current)||void 0===n?void 0:n.handleUpdateConversationNameByMessage({query:r,conversationId:e.chatAreaPluginContext.writeableAPI.conversationId.getConversationIdInstantValues().conversationId||""});var{options:a={}}=t,l=Object.assign({},a,{extendFiled:(0,s._)((0,o._)({},null==a?void 0:a.extendFiled),{extra:(0,o._)({},(null==a?void 0:null===(i=a.extendFiled)||void 0===i?void 0:i.extra)||{},e.pluginBizContext.extraBody||{})})});return(0,s._)((0,o._)({},t),{options:l})}),function(e){return n.apply(this,arguments)})}},u=e=>{var t,n;return{onImageClick:(t=(0,a._)(function*(t){var n,o,i=t.url;yield null===(n=(o=e.pluginBizContext).onImageClick)||void 0===n?void 0:n.call(o,{url:i})}),function(e){return t.apply(this,arguments)}),onAfterClearHistory:(n=(0,a._)(function*(t){var n;yield null===(n=e.pluginBizContext.refChatFunc.current)||void 0===n?void 0:n.addConversation(t)}),function(e){return n.apply(this,arguments)})}},v=e=>({onInitialError:()=>{e.pluginBizContext.setInitError(!0)}}),h=e=>({appLifeCycleService:v(e),messageLifeCycleService:c(e),commandLifeCycleService:u(e),renderLifeCycleService:r(e)}),p=n("938809"),m=n("728971"),f=n("723530"),g=e=>{var t=(0,m.Ul)(e=>e.feedbackInfo),{useMessagesStore:n}=(0,i.NN)(),{findMessage:o}=n.getState(),r=(0,m.Ul)(e=>e.lastGroupFeedbackInfo),{messageId:a}=r,s=o(a||""),l=(null==s?void 0:s.message_id)||"";return{isShowFeedbackInLastGroup:(0,f.useMemo)(()=>!!r.isShowCustomPanel&&!!a&&"thumbDown"===t[l]&&e.memberSet.llmAnswerMessageIdList.includes(a),[t,r,e]),cozeApiMessageId:l}},b=e=>{var t,n;return e&&(null==e?void 0:e.isNeedFeedback)&&(null===(n=e.feedbackPanel)||void 0===n?void 0:null===(t=n.tags)||void 0===t?void 0:t.filter(e=>!!e.label).length)},x=()=>{var e,t,{chatConfig:n}=(0,m.HE)();return!!b(null===(t=n.ui)||void 0===t?void 0:null===(e=t.chatBot)||void 0===e?void 0:e.feedback)},_=n("856306"),y=n.n(_),C=n("16242"),k=n("988726"),I={thumbUp:"like",thumbDown:"unlike"},w=()=>{var{useGlobalInitStore:e}=(0,i.NN)(),{openApiService:t}=(0,m.ph)(),{chatCore:n}=e.getState(),o=(0,m.Ul)(e=>e.updateFeedbackInfo);return(e,i)=>{if(o(e,i.feedbackType),"default"===i.feedbackType)return t.DeleteMessageFeedback({conversation_id:(null==n?void 0:n.conversation_id)||"",message_id:e});var r,a=I[i.feedbackType];return t.ReportMessageFeedback({conversation_id:(null==n?void 0:n.conversation_id)||"",message_id:e,feedback_type:a,comment:i.feedbackText,reason_types:null===(r=i.feedbackTagList)||void 0===r?void 0:r.map(e=>e.label)})}},N=n("866466"),E=n.n(N),A=n("462669"),M=n.n(A),j=n("318249"),T=n.n(j),S=n("294754"),B=n.n(S),z=n("13355"),D=n.n(z),R=n("876846"),U=n.n(R),H=n("311092"),P={};P.styleTagTransform=U(),P.setAttributes=B(),P.insert=T().bind(null,"head"),P.domAPI=M(),P.insertStyleElement=D(),E()(H.Z,P);var q=H.Z&&H.Z.locals?H.Z.locals:void 0,Z=1e3,L=e=>{var t,n,{cozeApiMessageId:o,hidePanel:i,feedbackConfig:r}=e,[a,s]=(0,f.useState)(""),[l,c]=(0,f.useState)([]),u=w(),v=e=>l.some(t=>t.id===e),h=(0,f.useMemo)(()=>null==l?void 0:l.some(e=>e.isNeedDetail),[l]),m=(0,f.useMemo)(()=>{var e,t,n,o=!1;return((null==r?void 0:null===(n=r.feedbackPanel)||void 0===n?void 0:null===(t=n.tags)||void 0===t?void 0:null===(e=t.filter(e=>!!e.label))||void 0===e?void 0:e.map(e=>{var t=!1;return e.isNeedDetail&&!1===o&&(t=!0,o=!0),{id:Z++,label:e.label.slice(0,30),isNeedDetail:t}}))||[]).slice(0,10)},[r]);return(0,p.jsxs)("div",{className:q["feedback-thumb-down-detail-container"],children:[(0,p.jsxs)("div",{className:q.header,children:[(0,p.jsx)(d.Typography.Text,{className:q["header-title"],ellipsis:{rows:1,showTooltip:!1},children:(null==r?void 0:null===(t=r.feedbackPanel)||void 0===t?void 0:t.title)||C.o.t("dislike_feedback_title")}),(0,p.jsx)(k.rmE,{width:"16px",height:"16px",className:"cursor-pointer",onClick:i})]}),(0,p.jsx)("div",{children:m.map(e=>(0,p.jsx)(d.Button,{color:v(e.id)?"brand":"primary",className:y()(q.btn,{[q["btn-selected"]]:v(e.id)}),contentClassName:q["btn-content"],onClick:()=>{c(t=>v(e.id)?t.filter(t=>t.id!==e.id):[...t,e])},children:(0,p.jsx)(d.Typography.Text,{className:q["btn-txt"],ellipsis:{rows:1,showTooltip:!0},children:e.label})}))}),h?(0,p.jsx)("div",{children:(0,p.jsx)(d.TextArea,{maxCount:250,rows:2,className:q.textarea,value:a,placeholder:(null==r?void 0:null===(n=r.feedbackPanel)||void 0===n?void 0:n.placeholder)||C.o.t("dislike_feedback_placeholder"),onChange:e=>{s(e)}})}):null,(0,p.jsx)("div",{className:"flex justify-end m-[12px]",children:(0,p.jsx)(d.Button,{disabled:!(null==l?void 0:l.length),onClick:()=>{console.log("tag:",l,a),null==i||i(),u(o,{feedbackType:"thumbDown",feedbackText:a,feedbackTagList:l})},children:C.o.t("report_confirm")})})]})},V=e=>{var t,n,{messageGroup:o}=e,{isLatest:i}=o,{isShowFeedbackInLastGroup:r,cozeApiMessageId:a}=g(o),{chatConfig:s}=(0,m.HE)(),l=x(),d=(0,m.Ul)(e=>e.updateLastGroupFeedbackInfo);return i&&r&&l&&a?(0,p.jsx)("div",{className:"ml-[24px] mr-[24px]",children:(0,p.jsx)(L,{cozeApiMessageId:a,hidePanel:()=>{d("",!1)},feedbackConfig:null===(n=s.ui)||void 0===n?void 0:null===(t=n.chatBot)||void 0===t?void 0:t.feedback})}):null},O=n("556923"),F=n("273268"),X=n("13831"),K={};K.styleTagTransform=U(),K.setAttributes=B(),K.insert=T().bind(null,"head"),K.domAPI=M(),K.insertStyleElement=D(),E()(X.Z,K);var W=X.Z&&X.Z.locals?X.Z.locals:void 0,Y=e=>{var{messageType:t,classname:n}=e,i=(0,O._)(e,["messageType","classname"]);return(0,p.jsx)(F._p,(0,s._)((0,o._)({},i),{classname:y()(n,"w-full"),isHoverShowUserInfo:!1,messageBoxWrapperClassname:y()("coze-chat-message-wrapper",W["message-box-wrapper"]),messageHoverWrapperClassName:"w-full flex justify-end right-[0px] coze-chat-hover-message-wrapper"}))},G=n("464242"),Q=e=>{var{width:t,height:n,className:o}=e;return(0,p.jsx)(G.ZPm,{svg:(0,p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18",fill:"currentColor",children:(0,p.jsx)("path",{d:"M13.4997 16.5H4.49881C2.84338 16.5 1.5 15.1574 1.5 13.5013V4.50088C1.5 2.84333 2.84338 1.5 4.49881 1.5H13.4997C15.158 1.5 16.5 2.84331 16.5 4.50088V13.5013C16.5 15.1574 15.158 16.5 13.4997 16.5ZM15.0013 5.25092C15.0013 4.00792 13.9919 3.00008 12.7496 3.00008H5.24889C4.00657 3.00008 2.99864 4.00792 2.99864 5.25092V12.7498C2.99864 13.9943 4.00657 15.0007 5.24889 15.0007H12.7496C13.9919 15.0007 15.0013 13.9943 15.0013 12.7498V5.25092ZM9.74933 11.9997C9.74933 12.414 9.41351 12.7498 8.99925 12.7498C8.585 12.7498 8.24918 12.414 8.24918 11.9997V9.75115H5.99967C5.58503 9.75115 5.24889 9.41502 5.24889 9.00037C5.24889 8.58572 5.58503 8.24958 5.99967 8.24958H8.24918V6.00099C8.24918 5.58674 8.585 5.25092 8.99925 5.25092C9.41351 5.25092 9.74933 5.58674 9.74933 6.001V8.24958H11.9988C12.4135 8.24958 12.7496 8.58572 12.7496 9.00037C12.7496 9.41502 12.4135 9.75115 11.9988 9.75115H9.74933V11.9997Z",fill:"currentColor"})}),className:o,style:{width:t,height:n}})},J=()=>{var e,t,n,o,i,r,a,s,l,d,c,u,v,h,p,f,g,b,{chatConfig:x}=(0,m.HE)(),_=[],y=[];return console.log("useChatOpInfo:",x),(null==x?void 0:null===(t=x.ui)||void 0===t?void 0:null===(e=t.header)||void 0===e?void 0:e.isShow)?(null==x?void 0:null===(o=x.ui)||void 0===o?void 0:null===(n=o.chatBot)||void 0===n?void 0:n.isNeedClearContext)?(_.push("clearContext"),(null==x?void 0:null===(r=x.ui)||void 0===r?void 0:null===(i=r.chatBot)||void 0===i?void 0:i.isNeedClearMessage)?y.push("clearMessage"):(null==x?void 0:null===(s=x.ui)||void 0===s?void 0:null===(a=s.chatBot)||void 0===a?void 0:a.isNeedAddNewConversation)&&y.push("addNewConversation")):(null==x?void 0:null===(d=x.ui)||void 0===d?void 0:null===(l=d.chatBot)||void 0===l?void 0:l.isNeedClearMessage)?_.push("clearMessage"):(null==x?void 0:null===(u=x.ui)||void 0===u?void 0:null===(c=u.chatBot)||void 0===c?void 0:c.isNeedAddNewConversation)&&_.push("addNewConversation"):((null==x?void 0:null===(h=x.ui)||void 0===h?void 0:null===(v=h.chatBot)||void 0===v?void 0:v.isNeedClearContext)&&_.push("clearContext"),(null==x?void 0:null===(f=x.ui)||void 0===f?void 0:null===(p=f.chatBot)||void 0===p?void 0:p.isNeedClearMessage)?_.push("clearMessage"):(null==x?void 0:null===(b=x.ui)||void 0===b?void 0:null===(g=b.chatBot)||void 0===g?void 0:g.isNeedAddNewConversation)&&_.push("addNewConversation")),{chatInputLeftOps:_,headerTopLeftOps:y}},$=e=>{var{isClearHistoryButtonDisabled:t,isClearContextButtonDisabled:n}=(0,i.$V)({}),{readonly:o}=(0,m.HE)(),{clearHistory:r}=(0,i.bU)(),a=(0,i.rw)();return(0,f.useMemo)(()=>e.map(e=>"addNewConversation"===e?{icon:(0,p.jsx)(Q,{width:"18px",height:"18px"}),text:C.o.t("web_sdk_add_new_conversation"),disabled:t||o,dataTestId:"chat.add-new-conversation-btn",onClick:()=>{null==r||r()}}:"clearContext"===e?{icon:(0,p.jsx)(k.zd$,{width:"18px",height:"18px"}),text:C.o.t("store_start_new_chat"),dataTestId:"chat.clear-context-btn",disabled:n||o,onClick:()=>{a()}}:{icon:(0,p.jsx)(k.bGR,{width:"18px",height:"18px"}),text:C.o.t("coze_home_delete_btn"),dataTestId:"chat.clear-message-btn",disabled:t||o,onClick:()=>{null==r||r()}}),[e,n,t,o,r,a])},ee=n("393292"),et={};et.styleTagTransform=U(),et.setAttributes=B(),et.insert=T().bind(null,"head"),et.domAPI=M(),et.insertStyleElement=D(),E()(ee.Z,et);var en=ee.Z&&ee.Z.locals?ee.Z.locals:void 0,eo=e=>{var{buttonList:t}=e,n=(0,m.VJ)(),[o,i]=(0,f.useState)(!1),{readonly:r}=(0,m.HE)();return(0,f.useEffect)(()=>(document.addEventListener("click",()=>{i(!1)}),()=>{i(!1)}),[]),(0,p.jsx)(d.Popover,{content:(0,p.jsx)(d.Space,{className:en.container,vertical:!0,spacing:0,children:null==t?void 0:t.map((e,t)=>(0,p.jsx)(d.Button,{color:"secondary",className:en.button,icon:null==e?void 0:e.icon,iconPosition:"left",onClick:null==e?void 0:e.onClick,disabled:null==e?void 0:e.disabled,children:null==e?void 0:e.text},t))}),trigger:"custom",visible:o,position:"topLeft",style:{borderRadius:"4px"},children:(0,p.jsx)(F.Hg,{"data-testid":"bot-edit-debug-chat-clear-button",showBackground:n,disabled:r,icon:(0,p.jsx)(k.NsR,{className:"text-18px"}),size:"default",onClick:e=>{e.stopPropagation(),i(e=>!e)},className:y()("mr-12px","!rounded-full")})})},ei=()=>{var e,t,{chatInputLeftOps:n}=J(),o=(0,m.VJ)(),{chatConfig:i}=(0,m.HE)(),r=(null===(t=i.ui)||void 0===t?void 0:null===(e=t.base)||void 0===e?void 0:e.layout)===l.Ar.MOBILE,a=$(n);return 0===n.length?null:(0,p.jsxs)("div",{className:en["chat-input-left-slot"],children:[a.length>1?(0,p.jsx)(eo,{buttonList:a}):null,1===a.length?(0,p.jsx)(F.t5,{content:a[0].text,hideToolTip:r,children:(0,p.jsx)(F.Hg,{"data-testid":"bot-edit-debug-chat-clear-button",showBackground:o,disabled:a[0].disabled,icon:a[0].icon,onClick:e=>{var t,n;null===(t=(n=a[0]).onClick)||void 0===t||t.call(n)},className:y()("mr-12px","!rounded-full",o?"!coz-fg-images-white":"",{[en.disabled]:a[0].disabled})})}):null]})};class er extends i.x1{constructor(...e){super(...e),this.pluginMode=i.tf.Writeable,this.pluginName="ChatSDKCommonPlugin",this.lifeCycleServices=(0,i.BO)(this,h),this.customComponents=(0,i.S3)({UIKitMessageBoxPlugin:Y,MessageGroupFooter:V,InputLeftActions:ei})}}var ea=n("967370"),es=n("415692"),el=()=>{var e,t,n,{message:o}=(0,i.dH)(),{chatConfig:r}=(0,m.HE)(),a=x(),s=o.extra_info.coze_api_chatId_id;return{messageId:o.message_id,cozeApiChatId:s,isShowDelete:!1,isNeedQuote:null!==(n=null===(t=r.ui)||void 0===t?void 0:null===(e=t.chatBot)||void 0===e?void 0:e.isNeedQuote)&&void 0!==n&&n,isShowFeedback:!!o.message_id&&a&&"answer"===o.type}},ed=n("634863"),ec={};ec.styleTagTransform=U(),ec.setAttributes=B(),ec.insert=T().bind(null,"head"),ec.domAPI=M(),ec.insertStyleElement=D(),E()(ed.Z,ec);var eu=ed.Z&&ed.Z.locals?ed.Z.locals:void 0,ev=e=>{var t,n,{iconClassName:o,onDetailPanelVisibleChange:i,popoverContainerRef:r}=e,a=(0,f.useRef)(null),s=(0,ea.Z)(a),[c,u]=(0,f.useState)(!1),{messageId:v,isShowFeedback:h}=el(),g="thumbDown"===(0,m.Ul)(e=>e.feedbackInfo)[v],b=w(),x=(0,es.Z)(()=>{var e=g?"default":"thumbDown";"thumbDown"===e&&(null==i||i(!0)),b(v,{feedbackType:e})});(0,f.useEffect)(()=>{!g&&(null==i||i(!1)),u(!1),setTimeout(()=>{u(!0)},100)},[g]),(0,f.useEffect)(()=>()=>{null==i||i(!1)},[]);var{chatConfig:_}=(0,m.HE)(),I=(null===(n=_.ui)||void 0===n?void 0:null===(t=n.base)||void 0===t?void 0:t.layout)!==l.Ar.MOBILE;return v&&h?(0,p.jsx)("div",{ref:a,children:(0,p.jsx)(d.Tooltip,{content:C.o.t("dislike"),trigger:"custom",visible:s&&c&&I,getPopupContainer:()=>(null==r?void 0:r.current)||document.body,children:(0,p.jsx)(d.IconButton,{"data-testid":"chat-area.answer-action.copy-button",size:"small",onClick:x,icon:g?(0,p.jsx)(k.vgK,{className:y()(eu.icon,o)}):(0,p.jsx)(k.Oad,{className:y()(eu.icon,o)}),color:"secondary"})})}):null},eh=n("338039"),ep={};ep.styleTagTransform=U(),ep.setAttributes=B(),ep.insert=T().bind(null,"head"),ep.domAPI=M(),ep.insertStyleElement=D(),E()(eh.Z,ep);var em=eh.Z&&eh.Z.locals?eh.Z.locals:void 0,ef=e=>{var t,n,{iconClassName:o,popoverContainerRef:i}=e,r=(0,f.useRef)(null),{messageId:a,isShowFeedback:s}=el(),c=(0,m.Ul)(e=>e.feedbackInfo),u=(0,ea.Z)(r),[v,h]=(0,f.useState)(!1),g=w(),b="thumbUp"===c[a],x=(0,es.Z)(()=>{g(a,{feedbackType:b?"default":"thumbUp"})});(0,f.useEffect)(()=>{h(!1),setTimeout(()=>{h(!0)},200)},[b]);var{chatConfig:_}=(0,m.HE)(),I=(null===(n=_.ui)||void 0===n?void 0:null===(t=n.base)||void 0===t?void 0:t.layout)!==l.Ar.MOBILE;return a&&s?(0,p.jsx)("div",{ref:r,children:(0,p.jsx)(d.Tooltip,{content:C.o.t("like"),trigger:"custom",visible:u&&v&&I,getPopupContainer:()=>(null==i?void 0:i.current)||document.body,children:(0,p.jsx)(d.IconButton,{"data-testid":"chat-area.answer-action.copy-button",size:"small",icon:b?(0,p.jsx)(k.zqY,{onClick:x,className:y()(em.icon,o)}):(0,p.jsx)(k.piD,{onClick:x,className:y()(em.icon,o)}),color:"secondary"})})}):null},eg=n("923026"),eb=()=>{var e,t=(0,i.NN)(),n=(0,eg.O)(),{openApiService:o}=(0,m.ph)();return e=(0,a._)(function*(e,i){if(!i||!e)return;var{useMessagesStore:r,useSuggestionsStore:a}=t,{findMessage:s,isLastMessageGroup:l}=r.getState(),{clearSuggestions:c}=a.getState(),u=s(i),v=null==u?void 0:u.reply_id;if(!u||!v)throw Error("message not found, id: ".concat(i));if(!n.answerAction.getIsLock(v,"deleteMessageGroup")){n.answerAction.lock(v,"deleteMessageGroup");var h=l(v),{deleteMessageById:p}=r.getState();try{yield o.DeleteMessage({conversation_id:e,message_id:i}),p(i),h&&c()}catch(e){console.error(e),d.Toast.error(C.o.t("Delete_failed"))}finally{n.answerAction.unlock(v,"deleteMessageGroup")}}}),function(t,n){return e.apply(this,arguments)}},ex=e=>{var t,n,{className:r}=e,a=(0,O._)(e,["className"]),{useGlobalInitStore:s}=(0,i.NN)(),{groupId:c}=(0,i.dH)(),u=(0,i.Nd)(c),{chatConfig:v}=(0,m.HE)(),h=eb(),f=s(e=>e.conversationId),{messageId:g,isShowDelete:b}=el(),x=(null===(n=v.ui)||void 0===n?void 0:null===(t=n.base)||void 0===t?void 0:t.layout)===l.Ar.MOBILE?"custom":"hover";return b&&g?(0,p.jsx)(d.Tooltip,{trigger:x,content:C.o.t("Delete"),children:(0,p.jsx)(d.IconButton,(0,o._)({"data-testid":"chat-area.answer-action.delete-message-button",disabled:u,size:"small",icon:(0,p.jsx)(k.dVD,{className:y()("coz-fg-hglt-red",r,"w-[14px] h-[14px]")}),onClick:()=>{h(f||"",g)},color:"secondary"},a))}):null},e_=n("620785"),ey=e=>{var t,{controller:n,onShortcutActive:o}=e,i=(0,f.useRef)(void 0),r=(0,m.VJ)(),a=(0,m.Ul)(e=>e.shortcuts),s=null===(t=a.at(0))||void 0===t?void 0:t.command_id;return(null==a?void 0:a.length)?(0,p.jsx)(e_.RV,{shortcuts:a,wrapperClassName:y()("w-full pl-[68px] pr-[24px] pb-[10px]"),uiMode:(0,e_.i9)({bizScene:"websdk",showBackground:r}),defaultId:s,onActiveShortcutChange:(e,t)=>{i.current=e;n.setChatInputSlotVisible(!t),null==o||o(e)}}):null},eC=n("345305"),ek=n("221968"),eI=n.n(ek),ew=n("559293"),eN=e=>{var t,n,{requestFn:i,requestParams:r,pageSize:l=20,initialPageNum:d=1,autoLoad:c=!0}=e,[u,v]=(0,f.useState)(d),[h,p]=(0,f.useState)([]),[m,g]=(0,f.useState)(!0);var{loading:b,error:x,run:_}=(0,ew.Z)((t=(0,a._)(function*(e){var t=(0,s._)((0,o._)({},r),{page_size:l,page_num:null!=e?e:u});return yield i(t)}),function(e){return t.apply(this,arguments)}),{manual:!0,onSuccess:(e,t)=>{var[n]=t,o=null!=n?n:u,i=e.data,r=!!e.has_more;1===o?p(i):p(e=>[...e,...i]),g(r),v(o)},onError:e=>{console.error("\u5206\u9875\u8BF7\u6C42\u5931\u8D25:",e)}}),y=(0,f.useCallback)((0,a._)(function*(){!b&&m&&(yield _(u+1))}),[b,m,u,_]),C=(0,f.useCallback)((0,a._)(function*(){p([]),v(1),yield _(1)}),[_]);var k=(0,f.useCallback)((n=(0,a._)(function*(e){e>=1&&(yield _(e))}),function(e){return n.apply(this,arguments)}),[_]),I=(0,f.useCallback)((0,a._)(function*(){p([]),v(d),yield g(!1)}),[d]);return(0,f.useEffect)(()=>{c&&_(d)},[c,d,_]),{data:h,loading:b,error:x,hasMore:m,currentPage:u,loadMore:y,refresh:C,setPageNum:k,reset:I}},eE=e=>{var t,{pageSize:n=20,initialPageNum:o=1,order:i="updated_at"}=null!=e?e:{},{chatConfig:{bot_id:r,auth:{connectorId:s}={}}}=(0,m.HE)(),{updateConversationsModalInfoByImmediate:l,conversations:d,updateConversations:c}=(0,m.Ul)((0,eC.N)(e=>({conversations:e.conversations,updateConversationsModalInfoByImmediate:e.updateConversationsModalInfoByImmediate,updateConversations:e.updateConversations}))),{openApiService:u}=(0,m.ph)();var{data:v,hasMore:h,loadMore:p,loading:g}=eN({requestFn:(t=(0,a._)(function*(e){if(!r)return{data:[],has_more:!1};try{var t=yield u.GetConversationList(e);return{data:t.data.conversations,has_more:t.data.has_more}}catch(e){return console.error(e),{data:[],has_more:!1}}}),function(e){return t.apply(this,arguments)}),requestParams:{bot_id:r||"",connector_id:s,sort_field:i},pageSize:n,initialPageNum:o,autoLoad:!!u&&!!r});return(0,f.useEffect)(()=>{v&&c(v,"replace")},[v]),(0,f.useEffect)(()=>{var e=document.querySelector(".coze-chat-sdk");e&&e.offsetWidth>=780?l(e=>{e.conversationListVisible=!0,e.isLargeWidth=!0}):l(e=>{e.isLargeWidth=!1})},[]),{conversations:d,loading:g,hasMore:h,loadMore:p}},eA=e=>{var t=(0,f.useMemo)(()=>{var t=new Date,n=2592e6;return e.map(e=>{var i=e.updated_at||e.created_at||0,r=eI().unix(Number(i)).toDate(),a=t.getTime()-r.getTime();return t.toLocaleDateString()===r.toLocaleDateString()?(0,s._)((0,o._)({},e),{sort:l.io.Today}):a<n?(0,s._)((0,o._)({},e),{sort:l.io.In30days}):(0,s._)((0,o._)({},e),{sort:l.io.Others})}).sort((e,t)=>e.sort!==t.sort?e.sort-t.sort:eI().unix(Number(t.updated_at||t.created_at||0)).valueOf()-eI().unix(Number(e.updated_at||e.created_at||0)).valueOf())},[e]);return(0,f.useMemo)(()=>{var e=new Map;return t.forEach(t=>{var n;!e.has(t.sort)&&e.set(t.sort,[]),null===(n=e.get(t.sort))||void 0===n||n.push(t)}),e},[t])},eM=e=>{var{children:t,onRename:n,onDelete:o,visible:i,setVisible:r}=e;return(0,p.jsx)(d.Menu,{trigger:"custom",position:"bottomLeft",visible:i,onClickOutSide:()=>r(!1),render:(0,p.jsxs)(d.Menu.SubMenu,{mode:"menu",children:[(0,p.jsx)(d.Menu.Item,{onClick:(e,t)=>{t.stopPropagation(),t.preventDefault(),n()},icon:(0,p.jsx)(k.JAz,{}),children:C.o.t("workflow_detail_node_rename",{},"\u91CD\u547D\u540D")}),(0,p.jsx)(d.Menu.Item,{onClick:(e,t)=>{t.stopPropagation(),t.preventDefault(),o()},icon:(0,p.jsx)(k.dVD,{color:"var(--coz-fg-hglt-red)"}),children:(0,p.jsx)("span",{style:{color:"var(--coz-fg-hglt-red)"},children:C.o.t("web_sdk_delete",{},"\u5220\u9664")})})]}),children:t})},ej=n("300135"),eT={};eT.styleTagTransform=U(),eT.setAttributes=B(),eT.insert=T().bind(null,"head"),eT.domAPI=M(),eT.insertStyleElement=D(),E()(ej.Z,eT);var eS=ej.Z&&ej.Z.locals?ej.Z.locals:void 0,eB=e=>{var{isActive:t,item:n,shouldDisplayTime:o,onConversationChange:i,onRename:r,onDelete:a}=e,[s,c]=(0,f.useState)(!1);return(0,p.jsxs)("div",{className:eS["conversation-item"],children:[o?(0,p.jsx)("div",{className:eS["conversation-item-time"],children:l.cI.get(n.sort)}):null,(0,p.jsxs)("div",{className:y()(eS["conversation-item-content"],{[eS["conversation-item-content-active"]]:t}),onClick:()=>i(n),children:[(0,p.jsx)(d.Typography.Text,{style:{flex:1},ellipsis:{showTooltip:{opts:{content:n.name,style:{wordBreak:"break-all"},position:"top",spacing:4}}},children:n.name||C.o.t("web_sdk_conversation_default_name",{},"\u65B0\u521B\u5EFA\u7684\u4F1A\u8BDD")}),(0,p.jsx)(eM,{onRename:()=>{r(n),c(!1)},onDelete:()=>{a(n),c(!1)},visible:s,setVisible:c,children:(0,p.jsx)(d.IconButton,{className:eS["conversation-operate"],onClick:e=>{e.stopPropagation(),e.preventDefault(),c(!0)},size:"small",icon:(0,p.jsx)(k.NsR,{}),color:"secondary"})})]})]})},ez=e=>{var{onRename:t,onDelete:n,visible:o,children:i}=e;return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(d.Menu,{trigger:"custom",position:"bottom",visible:o,render:(0,p.jsxs)(d.Menu.SubMenu,{mode:"menu",children:[(0,p.jsx)(d.Menu.Item,{onClick:(e,n)=>{n.stopPropagation(),n.preventDefault(),t()},icon:(0,p.jsx)(k.JAz,{}),children:C.o.t("workflow_detail_node_rename",{},"\u91CD\u547D\u540D")}),(0,p.jsx)(d.Menu.Item,{onClick:(e,t)=>{t.stopPropagation(),t.preventDefault(),n()},icon:(0,p.jsx)(k.dVD,{color:"var(--coz-fg-hglt-red)"}),children:(0,p.jsx)("span",{style:{color:"var(--coz-fg-hglt-red)"},children:C.o.t("web_sdk_delete",{},"\u5220\u9664")})})]}),children:i})})},eD=n("93400"),eR={};eR.styleTagTransform=U(),eR.setAttributes=B(),eR.insert=T().bind(null,"head"),eR.domAPI=M(),eR.insertStyleElement=D(),E()(eD.Z,eR);var eU=eD.Z&&eD.Z.locals?eD.Z.locals:void 0,eH=e=>{var{isActive:t,item:n,shouldDisplayTime:o,onConversationChange:i,onRename:r,onDelete:a}=e,[s,c]=(0,f.useState)(!1),[u,v]=(0,f.useState)(!1),h=(0,f.useRef)(null),m=(0,f.useRef)(null),g=()=>{c(!1),v(!1)},b=(0,f.useCallback)(e=>{h.current=setTimeout(()=>{c(!0)},500),m.current=setTimeout(()=>{v(!0)},300)},[]),x=(0,f.useCallback)(e=>{m.current&&(clearTimeout(m.current),m.current=null),h.current&&(clearTimeout(h.current),h.current=null)},[]),_=(0,f.useCallback)(()=>{m.current&&(clearTimeout(m.current),m.current=null),h.current&&(clearTimeout(h.current),g(),h.current=null)},[]);return(0,p.jsxs)("div",{className:eU["conversation-item"],children:[o?(0,p.jsx)("div",{className:eU["conversation-item-time"],children:l.cI.get(n.sort)}):null,(0,p.jsx)(ez,{onRename:()=>{r(n),g()},onDelete:()=>{a(n),g()},visible:s,children:(0,p.jsx)("div",{className:y()(eU["conversation-item-content"],{[eU["conversation-item-content-active"]]:t,[eU["conversation-item-content-touched"]]:u,[eU["conversation-item-content-operate-visible"]]:s}),onClick:()=>{if(!s)i(n)},onTouchStart:b,onTouchEnd:x,onTouchMove:_,onContextMenu:e=>{e.preventDefault()},children:(0,p.jsx)(d.Typography.Text,{style:{flex:1},ellipsis:{showTooltip:{opts:{content:n.name,style:{wordBreak:"break-all"},position:"top",spacing:4}}},children:n.name||C.o.t("web_sdk_conversation_default_name",{},"\u65B0\u521B\u5EFA\u7684\u4F1A\u8BDD")})})}),s?(0,p.jsx)("div",{onClick:e=>{e.stopPropagation(),e.preventDefault(),g()},className:eU["conversation-item-mask"]}):null]})},eP=n("559968"),eq={};eq.styleTagTransform=U(),eq.setAttributes=B(),eq.insert=T().bind(null,"head"),eq.domAPI=M(),eq.insertStyleElement=D(),E()(eP.Z,eq);var eZ=eP.Z&&eP.Z.locals?eP.Z.locals:void 0,eL=e=>{var{isMobile:t,isActive:n,item:o,shouldDisplayTime:i,onConversationChange:r,onRename:a,onDelete:s}=e;return t?(0,p.jsx)(eH,{isActive:n,item:o,shouldDisplayTime:i,onConversationChange:r,onRename:a,onDelete:s}):(0,p.jsx)(eB,{isActive:n,item:o,shouldDisplayTime:i,onConversationChange:r,onRename:a,onDelete:s})},eV=e=>{var t,{onRename:n,onDelete:o,loading:i,groupedConversations:r,loadMore:s,handleCreateConversation:c,handleConversationChange:u,currentConversationId:v}=e,{updateConversationsModalInfoByImmediate:h}=(0,m.Ul)((0,eC.N)(e=>({updateConversationsModalInfoByImmediate:e.updateConversationsModalInfoByImmediate}))),[g,b]=(0,f.useState)(!1),[x,_]=(0,f.useState)(!1),{layout:y}=(0,m.HE)(),I=(0,f.useMemo)(()=>y===l.Ar.MOBILE,[y]),w=(0,f.useRef)(null),N=(0,f.useRef)(null);var E=(t=(0,a._)(function*(e){try{_(!0),yield u(e),_(!1)}catch(e){console.error(e),_(!1)}}),function(e){return t.apply(this,arguments)});return(0,f.useEffect)(()=>{var e=new IntersectionObserver(e=>{var[t]=e;t.isIntersecting&&s()},{root:w.current,threshold:.5}),t=N.current;return t&&e.observe(t),()=>{t&&e.unobserve(t)}},[s]),(0,p.jsxs)("div",{className:eZ.conversations,children:[(0,p.jsxs)("div",{className:eZ["conversations-header"],children:[(0,p.jsx)("span",{className:eZ["conversations-header-title"],children:C.o.t("web_sdk_conversation_history",{},"\u4F1A\u8BDD\u5386\u53F2")}),(0,p.jsx)(d.IconButton,{color:"secondary",onClick:()=>{h(e=>e.conversationListVisible=!1)},icon:(0,p.jsx)(k.Ib0,{width:"18px",height:"18px"})})]}),(0,p.jsx)(d.Button,{size:"large",icon:(0,p.jsx)(k.PwN,{}),iconPosition:"left",color:"highlight",className:eZ["conversations-create-button"],onClick:(0,a._)(function*(){b(!0),yield c(),b(!1)}),disabled:x||g,loading:g,children:C.o.t("web_sdk_add_new_conversation",{},"\u521B\u5EFA\u65B0\u4F1A\u8BDD")}),(0,p.jsx)("div",{style:{width:"100%",flex:1,overflow:"hidden"},children:(0,p.jsx)(d.Spin,{style:{width:"100%",height:"100%"},childStyle:{width:"100%",height:"100%"},spinning:x,children:(0,p.jsxs)("div",{ref:w,className:eZ["conversations-list"],children:[Array.from(r.entries()).map(e=>{var[t,i]=e;return(0,p.jsx)("div",{className:eZ["conversations-list-group"],children:i.map((e,t)=>(0,p.jsx)(eL,{isMobile:I,isActive:e.id===v,item:e,shouldDisplayTime:0===t,onConversationChange:E,onRename:n,onDelete:o}))},t)}),(0,p.jsx)(d.Spin,{style:{width:"100%",height:"fit-content"},spinning:i,children:(0,p.jsx)("div",{ref:N,style:{height:"40px"}})})]})})})]})},eO=n("114488"),eF={};eF.styleTagTransform=U(),eF.setAttributes=B(),eF.insert=T().bind(null,"head"),eF.domAPI=M(),eF.insertStyleElement=D(),E()(eO.Z,eF);var eX=eO.Z&&eO.Z.locals?eO.Z.locals:void 0,eK=()=>{var e,t,n,r,l,{conversationsModalInfo:c,updateConversations:u}=(0,m.Ul)((0,eC.N)(e=>({conversationsModalInfo:e.conversationsModalInfo,updateConversations:e.updateConversations}))),{useGlobalInitStore:v}=(0,i.NN)(),h=v((0,eC.N)(e=>e.conversationId)),{chatConfig:{bot_id:g,auth:{connectorId:b}}}=(0,m.HE)(),{openApiService:x}=(0,m.ph)(),{loading:_,conversations:y,loadMore:I}=eE(),w=eA(y),N=(0,i.DW)(),[E,A]=(0,f.useState)(!1),[M,j]=(0,f.useState)(null),T=e=>{j({visible:!0,type:"rename",conversation:e})},S=e=>{j({visible:!0,type:"delete",conversation:e})};var B=(e=(0,a._)(function*(){if(!!M){A(!0);try{(null==M?void 0:M.type)==="rename"?yield U(M.conversation):M.conversation.id===h?(yield R(M.conversation))&&(yield z()):yield R(M.conversation),A(!1),j(null)}catch(e){console.error(e),A(!1)}}}),function(){return e.apply(this,arguments)});var z=(t=(0,a._)(function*(){try{var e=yield x.CreateConversation({bot_id:g,connector_id:b});e.data.id&&(yield N({conversationId:e.data.id,lastSectionId:e.data.last_section_id||""}),u([e.data],"add"),d.Toast.info({content:C.o.t("web_sdk_create_conversation",{},"\u5DF2\u521B\u5EFA\u65B0\u4F1A\u8BDD"),showClose:!1}))}catch(e){console.error(e)}}),function(){return t.apply(this,arguments)});var D=(n=(0,a._)(function*(e){if(e.id!==h)try{var t=yield x.RetrieveConversation({conversation_id:e.id});if(!t.data.last_section_id)return;yield N({conversationId:e.id,lastSectionId:t.data.last_section_id})}catch(e){console.error(e)}}),function(e){return n.apply(this,arguments)});var R=(r=(0,a._)(function*(e){try{var t=yield x.DeleteConversation({conversation_id:e.id});if(0!==t.code)return!1;return yield u([e],"remove"),!0}catch(e){return console.error(e),!1}}),function(e){return r.apply(this,arguments)});var U=(l=(0,a._)(function*(e){try{var t=yield x.UpdateConversation({conversation_id:e.id,name:e.name||""});if(0!==t.code)return;yield u([t.data],"update")}catch(e){console.error(e)}}),function(e){return l.apply(this,arguments)});return h?(0,p.jsxs)("div",{className:eX["conversations-container"],children:[c.conversationListVisible&&c.isLargeWidth?(0,p.jsx)(eV,{handleCreateConversation:z,handleConversationChange:D,onRename:T,onDelete:S,loading:_,groupedConversations:w,loadMore:I,currentConversationId:h}):null,(0,p.jsx)(d.SideSheet,{visible:c.conversationListVisible&&!c.isLargeWidth,closeIcon:(0,p.jsx)(k.Ib0,{}),closable:!1,closeOnEsc:!1,maskClosable:!1,getPopupContainer:()=>document.querySelector(".coze-chat-sdk"),placement:"left",width:320,className:eX["conversations-side-sheet"],headerStyle:{display:"none"},bodyStyle:{padding:0,height:"100%"},children:(0,p.jsx)(eV,{handleCreateConversation:z,handleConversationChange:D,onRename:T,onDelete:S,loading:_,groupedConversations:w,loadMore:I,currentConversationId:h})}),(0,p.jsx)(d.Modal,{getPopupContainer:()=>document.querySelector(".coze-chat-sdk"),okButtonProps:{loading:E},visible:null==M?void 0:M.visible,onCancel:()=>j(null),title:(null==M?void 0:M.type)==="delete"?C.o.t("web_sdk_delete_conversation",{},"\u5220\u9664\u4F1A\u8BDD"):C.o.t("web_sdk_rename_conversation",{},"\u91CD\u547D\u540D\u4F1A\u8BDD"),onOk:B,okText:(null==M?void 0:M.type)==="delete"?C.o.t("web_sdk_delete",{},"\u5220\u9664"):C.o.t("web_sdk_confirm",{},"\u786E\u5B9A"),cancelText:C.o.t("web_sdk_cancel",{},"\u53D6\u6D88"),okButtonColor:(null==M?void 0:M.type)==="delete"?"red":"brand",closable:!1,maskClosable:!1,style:{maxWidth:"80%"},children:(null==M?void 0:M.type)==="rename"?(0,p.jsx)(d.Input,{placeholder:C.o.t("web_sdk_conversation_placeholder",{},"\u8BF7\u8F93\u5165\u4F1A\u8BDD\u540D\u79F0"),value:M.conversation.name,maxLength:100,onChange:e=>j((0,s._)((0,o._)({},M),{conversation:(0,s._)((0,o._)({},M.conversation),{name:e})}))}):(0,p.jsx)("span",{className:eX["conversations-list-delete-modal-text"],children:C.o.t("web_sdk_conversation_delete_content",{},"\u5220\u9664\u540E\uFF0C\u4F1A\u8BDD\u5C06\u65E0\u6CD5\u6062\u590D\uFF0C\u786E\u8BA4\u8981\u5220\u9664\u5417\uFF1F")})})]}):null},eW=()=>{var e,t,{chatConfig:n}=(0,m.HE)();return(null===(t=n.ui)||void 0===t?void 0:null===(e=t.conversations)||void 0===e?void 0:e.isNeed)&&n.type!==l.z_.APP?(0,p.jsx)(eK,{}):null},eY=n("168074"),eG="data:image/png;base64,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",eQ=n("871636"),eJ={};eJ.styleTagTransform=U(),eJ.setAttributes=B(),eJ.insert=T().bind(null,"head"),eJ.domAPI=M(),eJ.insertStyleElement=D(),E()(eQ.Z,eJ);var e$=eQ.Z&&eQ.Z.locals?eQ.Z.locals:void 0,e0=e=>{var{iconUrl:t=eG,title:n="Coze Bot",extra:o,theme:i,isShowConversations:r,middle:a}=e,{headerTopLeftOps:s}=J(),l=$(s),{updateConversationsModalInfoByImmediate:c,conversationsModalInfo:u}=(0,m.Ul)((0,eC.N)(e=>({updateConversationsModalInfoByImmediate:e.updateConversationsModalInfoByImmediate,conversationsModalInfo:e.conversationsModalInfo})));return(0,p.jsxs)("header",{className:y()(e$.header,{[e$["bg-theme"]]:"bg-theme"===i}),children:[(null==u?void 0:u.conversationListVisible)||!r?null:(0,p.jsx)(d.IconButton,{color:"secondary",icon:(0,p.jsx)(k.Ib0,{width:"18px",height:"18px"}),className:e$["conversation-list-btn"],onClick:()=>{c(e=>{e.conversationListVisible=!0})}}),(0,p.jsx)("img",{className:e$.avatar,src:t,alt:"avatar"}),(0,p.jsx)(eY.ZT.Text,{className:e$.title,ellipsis:{showTooltip:{opts:{style:{wordBreak:"break-word"},position:"bottom"},type:"tooltip"},rows:1},children:n}),a,null==l?void 0:l.map(e=>(0,p.jsx)(d.Button,{"data-testid":e.dataTestId,color:"secondary",icon:e.icon,className:e$["icon-btn"],disabled:e.disabled,onClick:()=>{var t;null===(t=e.onClick)||void 0===t||t.call(e)},"data-test-id":e.dataTestId})),!!o&&o]})},e1=n("844439"),e2={};e2.styleTagTransform=U(),e2.setAttributes=B(),e2.insert=T().bind(null,"head"),e2.domAPI=M(),e2.insertStyleElement=D(),E()(e1.Z,e2);var e4=e1.Z&&e1.Z.locals?e1.Z.locals:void 0,e8=e=>{var{iconUrl:t=eG,title:n="Coze Bot",extra:o,theme:i,isShowConversations:r,middle:a}=e,{headerTopLeftOps:s}=J(),l=$(s),{updateConversationsModalInfoByImmediate:c,conversationsModalInfo:u}=(0,m.Ul)((0,eC.N)(e=>({updateConversationsModalInfoByImmediate:e.updateConversationsModalInfoByImmediate,conversationsModalInfo:e.conversationsModalInfo})));return(0,p.jsxs)("header",{className:y()(e4.header,{[e4["bg-theme"]]:"bg-theme"===i}),children:[(null==u?void 0:u.conversationListVisible)||!r?null:(0,p.jsx)(d.IconButton,{color:"secondary",icon:(0,p.jsx)(k.Ib0,{width:"18px",height:"18px"}),className:e4["conversation-list-btn"],onClick:()=>{c(e=>{e.conversationListVisible=!0})}}),(0,p.jsx)("img",{className:e4.avatar,src:t,alt:"avatar"}),(0,p.jsx)(eY.ZT.Text,{className:e4.title,ellipsis:{rows:1},children:n}),a,null==l?void 0:l.map(e=>(0,p.jsx)(d.Button,{color:"secondary",icon:e.icon,className:e4["icon-btn"],disabled:e.disabled,onClick:()=>{var t;null===(t=e.onClick)||void 0===t||t.call(e)}})),!!o&&o]})},e9=n("800970"),e5={};e5.styleTagTransform=U(),e5.setAttributes=B(),e5.insert=T().bind(null,"head"),e5.domAPI=M(),e5.insertStyleElement=D(),E()(e9.Z,e5);var e3=e9.Z&&e9.Z.locals?e9.Z.locals:void 0,e6=()=>{var{updateConversationsModalInfoByImmediate:e,conversationsModalInfo:t}=(0,m.Ul)((0,eC.N)(e=>({updateConversationsModalInfoByImmediate:e.updateConversationsModalInfoByImmediate,conversationsModalInfo:e.conversationsModalInfo})));return(null==t?void 0:t.conversationListVisible)?null:(0,p.jsx)(d.Tooltip,{content:C.o.t("web_sdk_open_conversations"),children:(0,p.jsx)(d.IconButton,{className:e3["float-open-conversations-btn"],size:"small",style:{height:"32px",borderTopLeftRadius:"unset",borderBottomLeftRadius:"unset"},icon:(0,p.jsx)(k.wMM,{}),onClick:()=>{e(e=>{e.conversationListVisible=!0})}})})},e7=n("347281"),te=()=>{var{groupId:e}=(0,i.dH)(),{useMessagesStore:t}=(0,i.NN)(),n=t(e=>e.messageGroupList,e7.Z),o=t(e=>e.messages,e7.Z),r=t(e=>e.findMessage,e7.Z);return{lastMessageText:(0,f.useMemo)(()=>{var t=n.find(t=>t.groupId===e);return null==t?void 0:t.memberSet.llmAnswerMessageIdList.map(e=>{var t=r(e);return(0,i.pZ)(t)?t.content:""}).filter(e=>!!e).reverse().join("\n")},[n,o,r,e])}},tt=()=>{var{meta:e,message:t}=(0,i.dH)(),n="answer"===t.type&&(!e.isFromLatestGroup||!e.isGroupLastAnswerMessage),o=!1;if("question"===t.type||"ack"===t.type){if((0,i.pZ)(t))r=t.content;else if((null==t?void 0:t.content_type)===i.zc.Mix){var r,a,s=(0,l.QQ)(t.content);r=null==s?void 0:s.item_list.map(e=>"text"===e.type&&e.text||"").filter(e=>!!e).join("\n"),o=((null==s?void 0:null===(a=s.item_list)||void 0===a?void 0:a.length)||0)>1}}else n&&(0,i.pZ)(t)&&(r=t.content);return{showHoverText:r,isMultiMessage:o}},tn=()=>{var e,{updateConversations:t,conversations:n}=(0,m.Ul)((0,eC.N)(e=>({updateConversations:e.updateConversations,conversations:e.conversations}))),{openApiService:o}=(0,m.ph)(),i=(0,f.useRef)(n);return i.current=n,{handleUpdateConversationNameByMessage:(e=(0,a._)(function*(e){var{query:n,conversationId:r}=e;try{var a=i.current.find(e=>e.id===r);if(!a||a.name)return;var s=yield o.UpdateConversation({conversation_id:r,name:n});if(0!==s.code)return;yield t([s.data],"update")}catch(e){console.error(e);return}}),function(t){return e.apply(this,arguments)})}},to=e=>({createPluginBizContext:()=>(0,o._)({},e),Plugin:er})},728971:function(e,t,n){n.d(t,{w:()=>Y,Ul:()=>C,ph:()=>P,Ir:()=>k,Zi:()=>G,R$:()=>Z,Lz:()=>H,bb:()=>V,iy:()=>R,rW:()=>O,VJ:()=>D,b$:()=>ee,NG:()=>X,HE:()=>x,JF:()=>J,eN:()=>K,$l:()=>b,GL:()=>et,Fh:()=>F,Pc:()=>A});var o,i=n("341333"),r=n("265489"),a=n("723530"),s=n("696591"),l=n("938809"),d=n("306769"),c=n("416304"),u=n("142969"),v=n("888953"),h=n("922321"),p=n("468745"),m=e=>{if(null==e?void 0:e.id)return e;var t=(0,s.x4)(s.Fe.UID);return{id:s.nr.getItem(t,"")||(0,d.x0)(),nickname:"",url:""}},f=e=>(0,h.Ue)()((0,v.mW)((0,v.XR)((t,n)=>({userInfo:m(e),voiceCallClose:!0,isStartBotVoiceCall:!1,isNeedStopRespond:!0,initError:!1,voiceInfoList:[],lastGroupFeedbackInfo:{cozeApiMessageId:"",isShowCustomPanel:!1},backgroundInfo:{},shortcuts:[],defaultInputMode:s.Ti.Text,feedbackInfo:{},conversationsModalInfo:{},conversations:[],hasRefusedCallByUser:!1,setHasRefusedCallByUser:e=>{t((0,p.Uy)(t=>{t.hasRefusedCallByUser=e}))},setUserInfo:e=>{t((0,p.Uy)(t=>{t.userInfo=m(e)}))},setUserId:e=>{t((0,p.Uy)(t=>{t.userInfo={id:e,nickname:"",url:""}}))},setToken:e=>{t((0,p.Uy)(t=>{t.token=e}))},setInitError:e=>{var{initError:o}=n();if(!e||!o||"boolean"==typeof o)t((0,p.Uy)(t=>{t.initError=e}))},setVoiceInfoList:e=>{t((0,p.Uy)(t=>{t.voiceInfoList=e}))},setDefaultInputMode:e=>{t((0,p.Uy)(t=>{t.defaultInputMode=e}))},updateLastGroupFeedbackInfo:(e,n)=>{t((0,p.Uy)(t=>{t.lastGroupFeedbackInfo={messageId:e,isShowCustomPanel:n}}))},updateFeedbackInfo:(e,n)=>{t((0,p.Uy)(t=>{t.feedbackInfo[e]=n}))},updateShortcuts(e){t((0,p.Uy)(t=>{t.shortcuts=e}))},updateBackgroundInfo(e){t((0,p.Uy)(t=>{t.backgroundInfo=e}))},setVoiceCallClose(e){t((0,p.Uy)(t=>{t.voiceCallClose=e}))},setIsStartBotVoiceCall(e){t((0,p.Uy)(t=>{t.isStartBotVoiceCall=e}))},updateConversationsModalInfoByImmediate:e=>{t((0,p.Uy)(t=>{e(t.conversationsModalInfo)}))},updateConversations:(e,n)=>{t((0,p.Uy)(t=>{"replace"===n?t.conversations=e:"add"===n?t.conversations=[...t.conversations,...e]:"remove"===n?e.forEach(e=>{var n=t.conversations.findIndex(t=>t.id===e.id);-1!==n&&t.conversations.splice(n,1)}):"update"===n&&e.forEach(e=>{var n=t.conversations.findIndex(t=>t.id===e.id);-1!==n&&(t.conversations[n]=(0,i._)({},t.conversations[n],e))})}))}})),{enabled:!1,name:"CozeChatApp.global"})),g=(0,a.createContext)({}),b=e=>{var{children:t,appProps:n}=e,o=(0,a.useMemo)(()=>({conversation_id:(0,d.x0)(),source:s.V2.WebSdk}),[]),v=(0,a.useMemo)(()=>{var e=(0,r._)((0,i._)({},n),{chatConfig:(0,c.Z)({},o,n.chatConfig)});return e.chatConfig.conversation_id=e.chatConfig.conversation_id||o.conversation_id,e},[n]),[h]=(0,a.useState)(()=>f(n.userInfo));return(0,u.Z)(()=>{n.userInfo&&h.getState().setUserInfo(n.userInfo)},[n.userInfo]),(0,l.jsx)(g.Provider,{value:{appProps:v,store:h},children:t})},x=()=>{var{appProps:e}=(0,a.useContext)(g),{chatConfig:t,layout:n=s.Ar.PC,enableReplacePrologueNicknameWithVar:o=!1}=null!=e?e:{};return(0,r._)((0,i._)({},e),{chatConfig:t,layout:n,enableReplacePrologueNicknameWithVar:o})},_=n("485203"),y=n("665298"),C=e=>{var{store:t}=(0,a.useContext)(g);if(!t)throw s.IV.create(s.Hu.StoreProvider);return(0,y.s)(t,e,_.X)},k=()=>{var{isNeedVoiceCall:e}=x(),t=C(e=>e.voiceCallClose),n=C(e=>e.voiceInfoList);return(null==n?void 0:n.length)&&!1===t&&!1!==e},I=n("835350"),w=n("65034"),N=n("655137"),E=n("979355"),A=()=>{var e=C(e=>e.userInfo);return(0,a.useMemo)(()=>e?(0,r._)((0,i._)({},e),{userUniqueName:"",userLabel:null}):{id:(0,d.x0)(),nickname:"",url:"",userUniqueName:"",userLabel:null},[e])},M=n("255721"),j=n("897538");class T{setChatInfo(e){var{openApiService:t,openApiTokenManager:n,botId:o,connectorId:i,userId:r}=e;this.openApiService=t,this.openApiTokenManager=n,this.botId=o,this.connectorId=i,this.userId=r}setGetConversationIdFn(e){this.getConversationIdFn=e}refreshOpenAPIToken(){return this.getOpenAPIToken()}getOpenAPIToken(){var e=this;return(0,M._)(function*(){var t,n=yield null===(t=e.openApiTokenManager)||void 0===t?void 0:t.getAccessToken();return(null==n?void 0:n.trim().split(/\s+/)[1])||""})()}constructor(){var e,t=this;this.bizParameters={bot_id:"",conversation_id:"",scene:j.xs.BotStore},this.getCreateRoomData=(e=(0,M._)(function*(e){var n;if(!t.openApiService)throw Error("getCreateRoomData error, cozeApiClient undefined");return(yield t.openApiService.createRoom({bot_id:t.botId||"",conversation_id:null===(n=t.getConversationIdFn)||void 0===n?void 0:n.call(t),voice_id:e&&e.length>0?e:void 0,connector_id:t.connectorId||"",uid:t.userId})).data}),function(t){return e.apply(this,arguments)})}}var S=n("154130");class B extends S.j{constructor({token:e,onRefreshToken:t}){super({getTokenApi:(0,M._)(function*(){return{access_token:yield t(),expires_at:Date.now()+864e5}})}),this.updateApiKey(e),this.tokenExpiryAt=Date.now()+864e5}}var z=()=>{var e,{debug:t}=x(),{chatConfig:n}=x(),o=A(),r=(0,a.useMemo)(()=>new B({token:n.auth.token,onRefreshToken:n.auth.onRefreshToken}),[n.auth.token,n.auth.onRefreshToken]),l=(0,a.useMemo)(()=>(0,E.Gn)({baseURL:N.a2,connector:n.auth.connectorId,openapiTokenManager:r,requestConfig:{headers:(0,i._)({},(0,s.YC)(n,null==t?void 0:t.cozeApiRequestHeader))}}),[r,n.auth.connectorId]),d=(0,a.useMemo)(()=>new T,[]);return d.setChatInfo({openApiService:l,openApiTokenManager:r,botId:n.bot_id,connectorId:null===(e=n.auth)||void 0===e?void 0:e.connectorId,userId:(null==o?void 0:o.id)||""}),(0,a.useEffect)(()=>{I.K.registerTokenManager(d),w.OR.registerTokenManager(d)},[]),{openApiTokenManager:r,ttsTokenManagerClient:d,openApiService:l}},D=()=>{var e,t=C(e=>e.backgroundInfo),{isCustomBackground:n}=x();return n||!!(null==t?void 0:null===(e=t.mobile_background_image)||void 0===e?void 0:e.origin_image_url)||!1},R=()=>D()?"bg-theme":"light",U=(0,a.createContext)({}),H=e=>{var{children:t}=e,n=(0,a.useRef)({}),{openApiTokenManager:o,openApiService:i,ttsTokenManagerClient:r}=z();return(0,l.jsx)(U.Provider,{value:{ttsTokenManagerClient:r,openApiService:i,openApiTokenManager:o,refMessageListLeft:n},children:t})},P=()=>{var{openApiService:e,openApiTokenManager:t,refMessageListLeft:n,ttsTokenManagerClient:o}=(0,a.useContext)(U);return{openApiService:e,openApiTokenManager:t,ttsTokenManagerClient:o,refMessageListLeft:n}},q=n("859266"),Z=()=>{var{ChatBackgroundPlugin:e,chatBackgroundEvent:t}=(0,a.useMemo)(()=>(0,q.D)(),[]),{isCustomBackground:n}=x(),o=C(e=>e.backgroundInfo),i=n?void 0:o;return(0,a.useEffect)(()=>{t.emit(q.i.OnBackgroundChange,i||{mobile_background_image:{},web_background_image:{}})},[i]),{ChatBackgroundPlugin:e}},L=n("345305"),V=(e,t)=>{var n,{chatConfig:o}=x(),{shortcuts:l}=C((0,L.N)(e=>({shortcuts:e.shortcuts}))),d=(0,a.useRef)(o),c=(0,a.useRef)(""),u=(0,a.useRef)(l);return u.current=l,c.current=(null==o?void 0:null===(n=o.auth)||void 0===n?void 0:n.connectorId)||"",d.current=o,{url:"/v3/chat",hooks:{onBeforeSendMessage:[t=>{var n,o=(0,s.QQ)(t.body)||{},a="".concat(N.a2,"/v3/chat?conversation_id=").concat(o.conversation_id),l=s.Jj.convertRequestBody({body:t.body,userInfo:e,connectorId:c.current,parameters:null===(n=d.current.botInfo)||void 0===n?void 0:n.parameters,shortcuts:u.current});return(0,r._)((0,i._)({},t),{body:l,url:a})}],onGetMessageStreamParser:n=>{var o;return s.tX.getMessageParser({requestMessageRawBody:n,userInfo:e,sectionId:null==t?void 0:null===(o=t.current)||void 0===o?void 0:o.getSectionId()})}}}},O=()=>(0,a.useMemo)(()=>{var e=[e=>{var{data:t}=e,{code:n,data:o}=t;return(0,r._)((0,i._)({},e),{data:{code:n,new_section_id:o.id}})}];return{url:"/v1/conversations/:conversation_id/clear",hooks:{onBeforeRequest:[e=>{var t=e.data.conversation_id,n="/v1/conversations/".concat(t,"/clear");return(0,r._)((0,i._)({},e),{url:n,data:{conversation_id:t}})}],onErrorResponse:e,onAfterResponse:e}}},[]),F=()=>{var e=X(),{chatConfig:t}=x(),{bot_id:n}=t||{},{refMessageListLeft:o}=P();return(0,a.useMemo)(()=>{var t=[t=>{var a,l,d,c,u,v,{data:h}=t,p=null===(l=t.config)||void 0===l?void 0:null===(a=l.params)||void 0===a?void 0:a.conversation_id,m=(null==o?void 0:null===(d=o.current)||void 0===d?void 0:d[p])||[],f=null===(c=m[m.length-1])||void 0===c?void 0:c.reply_id;f&&(null===(u=h.data)||void 0===u?void 0:u[0].type)==="question"&&!(null===(v=h.message_list)||void 0===v?void 0:v[0].chatId)&&(h.data[0].chat_id=f);var g=s.WZ.convertMessageListResponse(h,n);return(0,r._)((0,i._)({},t),{data:(0,r._)((0,i._)({},g),{message_list:e(p,g.message_list)})})}];return{url:"/v1/conversation/message/list",hooks:{onBeforeRequest:[e=>{var t=e.data.conversation_id,n={after_id:e.data.cursor,limit:e.data.count};return(0,r._)((0,i._)({},e),{data:n,params:{conversation_id:t}})}],onErrorResponse:t,onAfterResponse:t}}},[n])},X=()=>{var{refMessageListLeft:e}=P();return(0,a.useCallback)(function(t){for(var n,o,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[],s=[],l=0;l<r.length;l++)"question"!==r[l].type?a.push(r[l]):(s.push(...a),a.splice(0,a.length),s.push(r[l]));var d=(null==e?void 0:null===(n=e.current)||void 0===n?void 0:n[t])||[];return d.length&&(null===(o=d[0])||void 0===o?void 0:o.reply_id)===(null===(i=s[0])||void 0===i?void 0:i.reply_id)&&s.unshift(...d),(null==e?void 0:e.current)&&(e.current[t]=a),s},[])},K=()=>(0,a.useMemo)(()=>({url:"/v3/chat/cancel",method:"POST",hooks:{onBeforeRequest:[e=>{var t,n,o=null===(t=e.data)||void 0===t?void 0:t.conversation_id,a=null===(n=e.data)||void 0===n?void 0:n.query_message_id;return(0,r._)((0,i._)({},e),{data:{conversation_id:o,chat_id:a}})}]}}),[]),W=n("707567"),Y=e=>{var{openapiService:t}=e;return class e{start(){if(!this.isUploading&&!this.isCancelled)this.isUploading=!0,this.uploadPromise=this.uploadAsync()}on(e,t){this.eventBus.on(e,t)}pause(){}cancel(){if(!this.isCancelled)this.isCancelled=!0,this.abortController.abort()}upload(){var e=this;return(0,M._)(function*(){e.eventBus.emit("ready",!0);try{return yield e.performUpload()}catch(t){if(e.abortController.signal.aborted)throw Error("Upload cancelled");throw t}})()}uploadAsync(){var e=this;return(0,M._)(function*(){try{var t=yield e.upload();if(e.isUploading=!1,!e.isCancelled){var n={uploadResult:{Uri:t.uri,Url:""},extra:{message:"Upload completed successfully"},type:"success"};e.eventBus.emit("complete",n)}return t}catch(t){if(e.isUploading=!1,!e.isCancelled&&t instanceof Error){if("AbortError"===t.name){var o={type:"error",extra:{message:"Upload cancelled by user",error:Error("Upload cancelled by user")}};e.eventBus.emit("error",o)}else{var i={type:"error",extra:{message:t.message,error:t}};e.eventBus.emit("error",i)}}throw t}})()}performUpload(){var e=this;return(0,M._)(function*(){var{signal:n}=e.abortController;if(n.aborted)throw Error("Upload already cancelled");new FormData().append("file",e.file);var o=yield t.UploadFile({file:e.file},{signal:n,onUploadProgress:t=>{if(!e.isCancelled){var{loaded:n,total:o}=t,i=Math.round(n/(null!=o?o:n)*100);e.eventBus.emit("progress",{percent:i,type:"success",extra:{message:"progress"}})}}});if(!o.data)throw Error("Upload failed: No data returned");return{uri:o.data.id}})()}constructor(e){this.eventBus=new W.v,this.isUploading=!1,this.isCancelled=!1,this.uploadPromise=null,this.file=e.file,this.fileType=e.type,this.userId=e.userId,this.abortController=new AbortController,this.conversationId=e.conversationId,this.start()}}},G=()=>{var{debug:e,chatConfig:t}=x();return{hooks:{onBeforeSendMessage:[n=>(Object.entries((0,s.YC)(t,null==e?void 0:e.cozeApiRequestHeader)).forEach(e=>{var[t,o]=e;n.headers.push([t,o])}),n)]}}},Q=n("380135"),J=()=>{var{debug:e,chatConfig:t}=x();return[n=>(n.headers.delete("x-requested-with"),Object.entries((0,s.YC)(t,null==e?void 0:e.cozeApiRequestHeader)).forEach(e=>{var[t,o]=e;n.headers.set(t,o)}),n)]};var $=(o=(0,M._)(function*(e,t){var n,{code:o}=(null==e?void 0:null===(n=e.response)||void 0===n?void 0:n.data)||{},r=e;if((0,s.f1)(o)){var a=yield null==t?void 0:t();if(a){var l=(0,i._)({},e.config);l.headers=(0,i._)({},l.headers),l.headers.Authorization="Bearer ".concat(a),r=yield Q.Z.request(l)}}return r}),function(e,t){return o.apply(this,arguments)}),ee=e=>(0,a.useMemo)(()=>{var t;return[(t=(0,M._)(function*(t){return $(t,e)}),function(e){return t.apply(this,arguments)})]},[e]),et=e=>(0,a.useMemo)(()=>{var t;return[(t=(0,M._)(function*(t){return $(t,e)}),function(e){return t.apply(this,arguments)}),e=>e.config.url&&/^\/v1\/conversations\/[^\\]+\/clear$/.test(e.config.url)?(0,r._)((0,i._)({},e),{config:(0,r._)((0,i._)({},e.config),{url:"/v1/conversations/:conversation_id/clear"})}):e]},[e])},696591:function(e,t,n){n.d(t,{x4:()=>ea,v1:()=>q,nr:()=>es,zL:()=>b,QJ:()=>y,YC:()=>S,Gr:()=>et,z7:()=>I,V2:()=>ei,cI:()=>J,Ti:()=>en,WZ:()=>X,tX:()=>G,Ar:()=>$,io:()=>Q,f1:()=>C,Fe:()=>er,IV:()=>g,ww:()=>V,SQ:()=>eo,QQ:()=>E,z_:()=>ee,Jj:()=>K,Mq:()=>_,uM:()=>x,Hu:()=>f,EX:()=>k});var o,i,r,a,s,l,d,c,u,v,h,p,m=n("16242");var f=((o={})[o.Base=1e3]="Base",o[o.OpenApiUpload=1001]="OpenApiUpload",o[o.NoClearAPI=1002]="NoClearAPI",o[o.StoreProvider=1003]="StoreProvider",o[o.Iframe=2e3]="Iframe",o[o.IframeParams=2001]="IframeParams",o[o.Core=3e3]="Core",o[o.NotError=4e3]="NotError",o);class g extends Error{static wrap(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=new g({sdkCode:t});return n.message=e.message,n.name=e.name,n.cause=e.cause,n.stack=e.stack,n}static create(e){return new g({sdkCode:e})}constructor(e){super(),"number"==typeof e?this.sdkCode=e:this.sdkCode=e.sdkCode}}var b=((i={})[i.BotUnbind=0x29db5cd3]="BotUnbind",i),x=[0x29db5cd3],_=e=>{var t=null==e?void 0:e.code;if(0x29db5cd3===t)return{code:t,msg:m.o.t("unbind_notification")}};var y=((r={})[r.ERROR_FORBIDDEN=401]="ERROR_FORBIDDEN",r[r.ERROR_INVALID_TOKEN=4100]="ERROR_INVALID_TOKEN",r[r.ERROR_TOKEN_FORBIDDEN=4101]="ERROR_TOKEN_FORBIDDEN",r[r.ERROR_TOKEN_FAILED=0x29b955e6]="ERROR_TOKEN_FAILED",r[r.BOT_NOT_PUBLISH=4015]="BOT_NOT_PUBLISH",r),C=e=>[401,4100,4101,0x29b955e6].includes(e);var k=((a={}).INVALID_BOT_ID="INVALID_BOT_ID",a.OPEN_API_ERROR="OPEN_API_ERROR",a),I=e=>{window.parent.postMessage({type:"chat-sdk-error",data:e},"*")},w=Symbol(),N=e=>{try{return JSON.stringify(e)}catch(e){return console.log("catchStringify error",e),w}},E=(e,t)=>{try{return JSON.parse(e)}catch(e){console.log("catchParse error",e)}return t},A=n("341333"),M=n("265489"),j=n("412788"),T=e=>JSON.stringify({type:e.type,id:e.bot_id}),S=(e,t)=>(0,M._)((0,A._)({},t),{"x-coze-resource-entity":T(e),"Accept-Language":"zh-CN"===j.ZP.language?"zh":"en"}),B=n("796631"),z=n("273094"),D=n("498842"),R={region:"cn",is_release:!0,dev:!1},U=(0,B.rY)();U.init({bid:"bot_studio_sdk",env:(0,z.MN)({env:"thirdPart",deployVersion:"release"})}),U.start();var H="open_sdk_custom_error_";class P extends D.bR{openSdkEvent(e,t){this.event({eventName:"open_sdk_custom_event_"+e,meta:(0,A._)({},null!=t?t:{},R)})}openSdkError(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.Base;if(!(e instanceof Error)){this.errorEvent({eventName:H+f.NotError,error:g.create(f.NotError),meta:{error:e}});return}this.errorEvent({eventName:H+t,error:e,meta:R})}}var q=new P;q.init(U);var Z=n("495159"),L={text:Z.n$.TextInput,select:Z.n$.Select,file:Z.n$.MixUpload,image:Z.n$.UploadImage,audio:Z.n$.UploadAudio,doc:Z.n$.UploadDoc,table:Z.n$.UploadTable,code:Z.n$.CODE,zip:Z.n$.ARCHIVE,ppt:Z.n$.PPT,video:Z.n$.VIDEO,txt:Z.n$.TXT},V=(e,t)=>(null==e?void 0:e.map(e=>{var n,o,i,r,a,s,l,d,c,u,v=e.send_type&&("panel"===e.send_type?Z.nu.SendTypePanel:Z.nu.SendTypeQuery);return v!==Z.nu.SendTypeQuery&&(l=(null===(c=e.components)||void 0===c?void 0:c.map(e=>{var t;return{name:e.name,description:e.description,parameter:e.tool_parameter,hide:e.is_hide,options:"select"===e.type&&e.options||[],input_type:L[e.type],upload_options:"file"===e.type&&(null===(t=e.options)||void 0===t?void 0:t.map(e=>L[e]))||[],default_value:{value:e.default_value||"",type:0}}}))||[],(null==e?void 0:null===(u=e.tool)||void 0===u?void 0:u.type)&&["plugin","workflow"].includes(e.tool.type)&&(d="plugin"===e.tool.type?Z.qK.ToolTypePlugin:Z.qK.ToolTypeWorkFlow)),{object_id:(null==t?void 0:t.id)||"",command_name:e.name,shortcut_command:e.command,description:e.description,send_type:v,tool_type:d,work_flow_id:(null==e?void 0:null===(n=e.tool)||void 0===n?void 0:n.workflow_id)||"",plugin_id:(null==e?void 0:null===(o=e.tool)||void 0===o?void 0:o.plugin_id)||"",plugin_api_name:(null==e?void 0:null===(i=e.tool)||void 0===i?void 0:i.name)||"",template_query:e.query_template,components_list:l,card_schema:e.card_schema,command_id:e.id,tool_info:{tool_name:null===(r=e.tool)||void 0===r?void 0:r.name,tool_params_list:(null===(s=e.tool)||void 0===s?void 0:null===(a=s.params)||void 0===a?void 0:a.map(e=>({name:e.name,required:e.is_required,desc:e.description,type:e.type,default_value:e.default_value,refer_component:e.is_refer_component})))||[]},shortcut_icon:{url:e.icon_url},bot_info:{icon_url:(null==t?void 0:t.iconUrl)||"",name:(null==t?void 0:t.name)||""}}}))||[],O=n("306769"),F=n("151634"),X=new class e{convertMessageListResponse(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",{data:n=[],has_more:o,first_id:i,last_id:r}=e,a=n.map(e=>this.convertMessage(e,t)).filter(e=>!!e.message_id)||[];return console.log("messageListForCoze",a),{code:0,message_list:a,hasmore:o,cursor:r,next_cursor:i}}convertMessage(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",{content_type:n,content:o}=this.convertContent(e.content_type,e.content)||{},i="question"===e.type,r=e.chat_id||"--custom-replyId--".concat((0,O.x0)()),a=i?r:e.id||"--custom-messageId-".concat((0,O.x0)()),s=i?"":e.bot_id||t;if(!n||!a||!r)return{};var l="";if("function_call"===e.type){var d=E(e.content);l=(null==d?void 0:d.plugin)||""}return{reasoning_content:e.reasoning_content,content:o,content_time:1e3*(e.created_at||0),content_type:n,message_id:a,reply_id:r,role:e.role,section_id:e.section_id,sender_id:s,source:0,status:"",extra_info:{local_message_id:"",plugin:l,coze_api_message_id:e.id,coze_api_chat_id:e.chat_id},type:e.type}}convertContent(e,t){switch(e){case"object_string":return{content_type:z.zc.Mix,content:this.convertMixContent(t)};case"card":return{content_type:z.zc.Card,content:t};case"text":return{content_type:z.zc.Text,content:t};default:return}}convertMixContent(e){var t=E(e);if(!!t){var n=null==t?void 0:t.map(e=>{switch(e.type){case"text":return{type:z.zc.Text,text:e.text||"",is_refer:e.is_refer||void 0};case"image":return{type:z.zc.Image,image:{key:(null==e?void 0:e.file_id)||"",image_ori:{height:void 0,width:void 0,url:null==e?void 0:e.file_url},image_thumb:{height:void 0,width:void 0,url:null==e?void 0:e.file_url}},is_refer:e.is_refer||void 0};case"file":var{fileType:t=F.Wz.DEFAULT_UNKNOWN}=(0,F.hr)(new File([],null==e?void 0:e.name))||{};return{type:z.zc.File,file:{file_key:e.file_id||"",file_name:null==e?void 0:e.name,file_size:null==e?void 0:e.size,file_type:t,file_url:null==e?void 0:e.file_url},is_refer:e.is_refer||void 0};default:return}}).filter(e=>!!e);return JSON.stringify({item_list:n.filter(e=>!e.is_refer),refer_items:n.filter(e=>e.is_refer)})}}},K=new class e{convertRequestBody(e){var{body:t,userInfo:n,connectorId:o,parameters:i,shortcuts:r}=e,a=E(t)||{},s=a.content_type,l=a.query;return JSON.stringify({bot_id:a.bot_id,user_id:null==n?void 0:n.id,stream:!0,connector_id:o,additional_messages:[this.convertRequestMessage(s,l)],parameters:i,enable_card:!0})}convertRequestMessage(e,t){return(0,A._)({role:"user"},this.convertContent(e,t))}convertContent(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch(e){case z.zc.Text:return{content_type:"text",content:t};case z.zc.Card:return{content_type:"card",content:t};case z.zc.Image:case z.zc.File:case z.zc.Mix:return this.convertMixContent(t,n);default:throw Error("Error: unknown content Type")}}convertMixContent(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=E(e);if(!!n){var o=[...(null==n?void 0:n.item_list)||[]],i=[...(null==n?void 0:n.refer_items)||[]];return{content_type:"object_string",content:JSON.stringify((o=(o=(o=o.concat(((null==n?void 0:n.image_list)||[]).map(e=>({type:z.zc.Image,image:e})))).concat(((null==n?void 0:n.file_list)||[]).map(e=>({type:z.zc.File,file:e})))).concat((i||[]).map(e=>(0,M._)((0,A._)({},e),{is_refer:!0})))).map(e=>{var n,o;switch(e.type){case z.zc.Text:return{type:"text",text:e.text,is_refer:e.is_refer||void 0};case z.zc.Image:return{type:"image",file_id:e.image.key,file_url:t||!e.image.key?null===(n=e.image.image_ori)||void 0===n?void 0:n.url:void 0,is_refer:e.is_refer||void 0};case z.zc.File:return{type:"file",file_id:e.file.file_key||!e.file.file_key,file_url:t?null===(o=e.file)||void 0===o?void 0:o.file_url:void 0,is_refer:e.is_refer||void 0};default:return null}}).filter(e=>!!e))}}}convertMessageListResponse(e){return null==e?void 0:e.reverse().map(e=>{var t=this.convertMessage(e);if((null==t?void 0:t.content_type)==="object_string"){var n,o=E(t.content),i=null==o?void 0:o.map(e=>"image"===e.type||"file"===e.type?{type:"text",text:e.file_url}:e);if((null==i?void 0:i.length)===1&&(null===(n=i[0])||void 0===n?void 0:n.type)==="text")t.content_type="text",t.content=i[0].text||"";else{if(!((null==i?void 0:i.length)>0))return null;t.content=JSON.stringify(i)}}return t}).filter(e=>!!e)}convertMessage(e){return e.type&&["ack","answer","question"].includes(e.type)&&e.role&&["user","assistant"].includes(e.role)&&e.content_type&&["card","image","text","object_string","file"].includes(e.content_type)&&e.content?(0,A._)({role:e.role},this.convertContent(e.content_type,e.content||"",!0)):null}},W=n("182956"),Y=n("479727");class G{parse(e,t){var{terminate:n}=t,{data:o,event:i}=e;switch(i){case"conversation.chat.created":return this.createAckMessage(o);case"conversation.message.delta":var r=this.createMessage(o);if(!r)return;return r;case"conversation.message.completed":return this.createMessage(o,!0);case"conversation.chat.completed":case"done":n();return;case"conversation.chat.failed":var a,s=(null===(a=(0,Y.dj)(o).last_error)||void 0===a?void 0:a.msg)||m.o.t("sendFailed");throw W.Toast.error(s),Error("Chat stream error");case"error":var l=(0,Y.dj)(o),d=(null==l?void 0:l.msg)||m.o.t("sendFailed");throw W.Toast.error(d),Error("Chat stream error");default:return}}createMessage(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=E(e);if(!n)return;var o=(null==n?void 0:n.type)||"";n.chat_id=n.chat_id&&"0"!==n.chat_id?n.chat_id:"",n.id=n.id&&"0"!==n.id?n.id:"";var i=X.convertMessage(n,this.botId);if(!!i)return t&&i.content_type===z.zc.Text&&"answer"===i.type&&(i.content=""),i.section_id=i.section_id||this.sectionId,{event:"message",data:{conversation_id:this.conversationId,index:this.getIndexNo(o),is_finish:t,seq_id:this.getSeqNo(),message:(0,M._)((0,A._)({},i),{sender:this.botId})}}}createAckMessage(e){var t,n,o,i=E(e);if(!!i){var r=(null==i?void 0:i.id)!=="0"&&(null==i?void 0:i.id)?null==i?void 0:i.id:"",a=r||"--custom-replyId--".concat((0,O.x0)()),s=null===(n=i.inserted_additional_messages)||void 0===n?void 0:null===(t=n.lastItem)||void 0===t?void 0:t.id;return{event:"message",data:{conversation_id:this.conversationId,index:this.getIndexNo("ack"),is_finish:!0,message:{content:this.sendMessageContent,content_time:1e3*((null==i?void 0:i.created_at)||0),content_type:this.sendMessageContentType,extra_info:{local_message_id:this.localMessageId,chatflow_execute_id:null==i?void 0:i.execute_id,coze_api_message_id:s,coze_api_chat_id:r},message_id:a,reply_id:a,role:"user",section_id:(null==i?void 0:i.section_id)||this.sectionId,sender_id:null===(o=this.userInfo)||void 0===o?void 0:o.id,source:0,status:"",type:"ack"},seq_id:this.getSeqNo()}}}}getSeqNo(){return this.seqNo++}getIndexNo(e){return!this.indexNoMap[e]&&(this.indexNoMap[e]=this.indexNo++),this.indexNoMap[e]}static getMessageParser(e){var{requestMessageRawBody:t,userInfo:n,sectionId:o}=e,i=new G({requestMessageRawBody:t,userInfo:n,sectionId:o}),r=()=>{i=void 0};return(e,t)=>{var{terminate:n}=t,{type:o,event:a}=e;if("event"===o){var s=null==i?void 0:i.parse(e,{terminate:n});return["done","error","conversation.chat.failed"].includes(a)&&r(),s}}}constructor({requestMessageRawBody:e,userInfo:t,sectionId:n}){this.seqNo=0,this.indexNo=0,this.indexNoMap={},this.conversationId="",this.localMessageId="",this.sendMessageContent="",this.sendMessageContentType="",this.botId="",this.sectionId="",this.botVersion="",this.conversationId=e.conversation_id,this.localMessageId=e.local_message_id,this.sendMessageContent=e.query,this.sendMessageContentType=e.content_type,this.botId=e.bot_id,this.botVersion=e.bot_version,this.userInfo=t,this.sectionId=n||""}}var Q=((s={})[s.Today=0]="Today",s[s.In30days=1]="In30days",s[s.Others=999]="Others",s),J=new Map([[0,m.o.t("profile_history_today",{},"\u4ECA\u5929")],[1,m.o.t("log_pay_wall_date_filter_30_days",{},"\u8FC7\u53BB30\u5929")],[999,m.o.t("web_sdk_past",{},"\u8FC7\u5F80")]]);var $=((l={}).PC="pc",l.MOBILE="mobile",l);var ee=((d={}).BOT="bot",d.APP="app",d);var et=((c={}).TOKEN="token",c);var en=((u={}).Text="text",u.Voice="voice",u.VoiceCall="call",u);var eo=((v={}).EN="en",v.ZH_CN="zh-CN",v);var ei=((h={}).WebSdk="web_sdk",h.ChatFlow="chat_flow",h.MiniProgram="mini_program",h.MiniProgramV2="mini_program_v2",h);var er=((p={}).ChatHistory="ChatHistory",p.UID="OpenSDKUID",p),ea=(e,t)=>"coze__".concat(e,"__").concat(null!=t?t:""),es={setItem:(e,t)=>{var n=N(t);if(n!==w)t?localStorage.setItem(e,n):localStorage.removeItem(e)},getItem:(e,t)=>{var n=localStorage.getItem(e);return n?E(n,t):t}}},13164:function(e,t,n){n.d(t,{S:function(){return c}});var o=n(938809);n(723530);var i=n(696591),r=n(498842),a=n(16242),{Title:s,Text:l}=n(168074).ZT,d=()=>(0,o.jsxs)("div",{children:[(0,o.jsx)(s,{children:a.o.t("404_title")}),(0,o.jsx)(l,{children:a.o.t("404_content")})]}),c=e=>{var{children:t}=e;return(0,o.jsx)(r.SV,{errorBoundaryName:"ErrorBoundary",logger:i.v1.getLogger(),FallbackComponent:d,children:t})}},589296:function(e,t,n){n.d(t,{Z:()=>N});var o=n("938809"),i=n("723530"),r=n("856306"),a=n.n(r),s=n("16242"),l=n("655137"),d=n("866466"),c=n.n(d),u=n("462669"),v=n.n(u),h=n("318249"),p=n.n(h),m=n("294754"),f=n.n(m),g=n("13355"),b=n.n(g),x=n("876846"),_=n.n(x),y=n("325094"),C={};C.styleTagTransform=_(),C.setAttributes=f(),C.insert=p().bind(null,"head"),C.domAPI=v(),C.insertStyleElement=b(),c()(y.Z,C);var k=y.Z&&y.Z.locals?y.Z.locals:void 0,I=()=>s.o.t("web_sdk_official_banner",{docs_link:(0,o.jsx)("a",{className:k.link,href:l.zi,target:"_blank",children:s.o.t("web_sdk_official_banner_link")},"web_sdk_official_banner")}),w=(e,t)=>{var n=[],r="{{{link}}}";return e.replace(/\{\{\s*(\w+)\s*\}\}/g,(e,i)=>{var{link:a,text:s}=(null==t?void 0:t[i])||{};return a&&s?n.push((0,o.jsx)("a",{className:k.link,href:a,target:"_blank",children:s})):n.push(s||""),r}).split(r).map((e,t)=>(0,o.jsxs)(i.Fragment,{children:[e,n[t]]},"text_link_".concat(t)))},N=e=>{var{isShow:t=!0,expressionText:n,linkvars:i,footerClassName:r,textClassName:s,theme:l}=e;return t?(0,o.jsx)("footer",{className:a()(k.footer,r,{[k["bg-theme"]]:"bg-theme"===l}),children:(0,o.jsx)("span",{className:a()(k.text,s),children:n?w(n,i):I()})}):null}},41352:function(e,t,n){var o=n(160052),i=n.n(o),r=n(570717),a=n.n(r)()(i());a.push([e.id,".unfocus-text--tF_VBIhA8MkkGvYe{color:rgba(48,68,112,.38)}",""]),a.locals={"unfocus-text":"unfocus-text--tF_VBIhA8MkkGvYe",unfocusText:"unfocus-text--tF_VBIhA8MkkGvYe"},t.Z=a},482677:function(e,t,n){var o=n(160052),i=n.n(o),r=n(570717),a=n.n(r)()(i());a.push([e.id,".chat-input-right-slot--dqEcGee10Uu7r7We .disabled--y9NrX1VLKVUuxWML{background-color:hsla(0,0%,98%,.8)!important;color:rgba(55,67,106,.38)!important}",""]),a.locals={"chat-input-right-slot":"chat-input-right-slot--dqEcGee10Uu7r7We",chatInputRightSlot:"chat-input-right-slot--dqEcGee10Uu7r7We",disabled:"disabled--y9NrX1VLKVUuxWML"},t.Z=a},31018:function(e,t,n){var o=n(160052),i=n.n(o),r=n(570717),a=n.n(r)()(i());a.push([e.id,".feedback-detail-position--AP2vDEcMG6MYdoSG{height:52px;left:-44px;position:absolute;top:-10px;width:calc(100% + 44px)}.feedback-detail-popover--rs5e469K9U0W9EQm{box-shadow:0 4px 12px 0 rgba(0,0,0,.08),0 8px 24px 0 rgba(0,0,0,.04)!important}",""]),a.locals={"feedback-detail-position":"feedback-detail-position--AP2vDEcMG6MYdoSG",feedbackDetailPosition:"feedback-detail-position--AP2vDEcMG6MYdoSG","feedback-detail-popover":"feedback-detail-popover--rs5e469K9U0W9EQm",feedbackDetailPopover:"feedback-detail-popover--rs5e469K9U0W9EQm"},t.Z=a},393292:function(e,t,n){var o=n(160052),i=n.n(o),r=n(570717),a=n.n(r)()(i());a.push([e.id,".container--LegMlbdBy4kOVNt0{background-color:rgba(var(--coze-bg-3),var(--coze-bg-3-alpha));border-radius:4px;padding:4px}.container--LegMlbdBy4kOVNt0 .button--Ixk2fF4b6NsD2pPp{border-radius:4px;color:rgba(var(--coze-fg-3),var(--coze-fg-3-alpha));font-weight:400;justify-content:flex-start;padding-left:8px;padding-right:8px;text-align:left;width:100%}.container--LegMlbdBy4kOVNt0 .button--Ixk2fF4b6NsD2pPp.coz-btn-secondary{color:rgba(var(--coze-fg-3),var(--coze-fg-3-alpha))}.popover--WhYKzvevA_wOELMS{border-radius:4px}.chat-input-left-slot--tDHQNPJ1dA2PFtEW .disabled--UvMwGs8oDeMQ2VOD{background-color:hsla(0,0%,98%,.8)!important;color:rgba(55,67,106,.38)!important}",""]),a.locals={container:"container--LegMlbdBy4kOVNt0",button:"button--Ixk2fF4b6NsD2pPp",popover:"popover--WhYKzvevA_wOELMS","chat-input-left-slot":"chat-input-left-slot--tDHQNPJ1dA2PFtEW",chatInputLeftSlot:"chat-input-left-slot--tDHQNPJ1dA2PFtEW",disabled:"disabled--UvMwGs8oDeMQ2VOD"},t.Z=a},93400:function(e,t,n){var o=n(160052),i=n.n(o),r=n(570717),a=n.n(r)()(i());a.push([e.id,".conversation-item--w0GPBYc1zUUW9Fhu{display:flex;flex-direction:column}.conversation-item-time--m_4xHaRLqMkAJboA{color:var(--coz-fg-secondary);font-size:14px;font-weight:400;line-height:20px;margin-top:4px;padding:8px 8px 0}.conversation-item-content--KdHMJe5Is3IEWwmt{align-items:center;align-self:stretch;border-radius:var(--mini,5px);display:flex;height:40px;padding:4px 8px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.conversation-item-content-active--GPpE3LSDPnQ1gjwT{background:var(--coz-mg-secondary-hovered)}.conversation-item-mask--QgXErkRS1Ds8XCuk{-webkit-backdrop-filter:blur(2.5px) saturate(1.2);backdrop-filter:blur(2.5px) saturate(1.2);background:hsla(0,0%,100%,.25);height:100%;left:0;position:fixed;top:0;width:100%;z-index:calc(var(--chat-z-index-input) + 2)}.conversation-item-content-touched--IFNSnaGYZAoYu3Ur{animation:jelly--ScKDjD5h968yb6fs .7s cubic-bezier(.4,0,.2,1);border:1px solid var(--coz-stroke-primary);will-change:transform}.conversation-item-content-operate-visible--e7IhGarmqA4tr5h9{background:var(--coz-bg-max);border:1px solid var(--coz-stroke-primary);box-shadow:0 0 8px 1px rgba(0,0,0,.2);z-index:calc(var(--chat-z-index-input) + 3)}@keyframes jelly--ScKDjD5h968yb6fs{0%{transform:scale(1)}70%{transform:scale(1.08)}to{transform:scale(1)}}",""]),a.locals={"conversation-item":"conversation-item--w0GPBYc1zUUW9Fhu",conversationItem:"conversation-item--w0GPBYc1zUUW9Fhu","conversation-item-time":"conversation-item-time--m_4xHaRLqMkAJboA",conversationItemTime:"conversation-item-time--m_4xHaRLqMkAJboA","conversation-item-content":"conversation-item-content--KdHMJe5Is3IEWwmt",conversationItemContent:"conversation-item-content--KdHMJe5Is3IEWwmt","conversation-item-content-active":"conversation-item-content-active--GPpE3LSDPnQ1gjwT",conversationItemContentActive:"conversation-item-content-active--GPpE3LSDPnQ1gjwT","conversation-item-mask":"conversation-item-mask--QgXErkRS1Ds8XCuk",conversationItemMask:"conversation-item-mask--QgXErkRS1Ds8XCuk","conversation-item-content-touched":"conversation-item-content-touched--IFNSnaGYZAoYu3Ur",conversationItemContentTouched:"conversation-item-content-touched--IFNSnaGYZAoYu3Ur",jelly:"jelly--ScKDjD5h968yb6fs","conversation-item-content-operate-visible":"conversation-item-content-operate-visible--e7IhGarmqA4tr5h9",conversationItemContentOperateVisible:"conversation-item-content-operate-visible--e7IhGarmqA4tr5h9"},t.Z=a},300135:function(e,t,n){var o=n(160052),i=n.n(o),r=n(570717),a=n.n(r)()(i());a.push([e.id,".conversation-item--SjAs2PA25cl8VByI{display:flex;flex-direction:column}.conversation-item-time--QJXKM2ZK6owwBEL_{color:var(--coz-fg-secondary);font-size:14px;font-weight:400;line-height:20px;margin-top:4px;padding:8px 8px 0}.conversation-item-content--c5hMq9b2Dc9MHC6K{align-items:center;align-self:stretch;border-radius:var(--mini,5px);cursor:pointer;display:flex;height:40px;padding:4px 8px}.conversation-item-content--c5hMq9b2Dc9MHC6K .conversation-operate--tHG741U1NSEnQjoT{display:none}.conversation-item-content--c5hMq9b2Dc9MHC6K:hover{background:var(--coz-mg-secondary-hovered)}.conversation-item-content--c5hMq9b2Dc9MHC6K:hover .conversation-operate--tHG741U1NSEnQjoT{display:block}.conversation-item-content-active--MszWKHnf0G0hUPi6{background:var(--coz-mg-secondary-hovered)}",""]),a.locals={"conversation-item":"conversation-item--SjAs2PA25cl8VByI",conversationItem:"conversation-item--SjAs2PA25cl8VByI","conversation-item-time":"conversation-item-time--QJXKM2ZK6owwBEL_",conversationItemTime:"conversation-item-time--QJXKM2ZK6owwBEL_","conversation-item-content":"conversation-item-content--c5hMq9b2Dc9MHC6K",conversationItemContent:"conversation-item-content--c5hMq9b2Dc9MHC6K","conversation-operate":"conversation-operate--tHG741U1NSEnQjoT",conversationOperate:"conversation-operate--tHG741U1NSEnQjoT","conversation-item-content-active":"conversation-item-content-active--MszWKHnf0G0hUPi6",conversationItemContentActive:"conversation-item-content-active--MszWKHnf0G0hUPi6"},t.Z=a},559968:function(e,t,n){var o=n(160052),i=n.n(o),r=n(570717),a=n.n(r)()(i());a.push([e.id,".conversations--XYjb8pUho3gEren3{display:flex;flex-direction:column;height:100%;width:320px}.conversations-header--J2lalsUnwP0mmCYG{align-items:center;display:flex;justify-content:space-between;padding:12px 16px}.conversations-header-title--q3pvV2TxJfIups4E{color:var(--coz-fg-primary);font-size:16px;font-weight:600;line-height:22px}.conversations-create-button--zo0EF2Lihb89VDkQ{margin:0 16px;width:calc(100% - 32px)}.conversations-list--WwraNzAQFgzVGLrC{display:flex;flex-direction:column;gap:4px;height:100%;margin-bottom:10px;overflow-y:auto}.conversations-list-group--u7HKoXEQfsQwxp5h{display:flex;flex-direction:column;padding:0 8px}",""]),a.locals={conversations:"conversations--XYjb8pUho3gEren3","conversations-header":"conversations-header--J2lalsUnwP0mmCYG",conversationsHeader:"conversations-header--J2lalsUnwP0mmCYG","conversations-header-title":"conversations-header-title--q3pvV2TxJfIups4E",conversationsHeaderTitle:"conversations-header-title--q3pvV2TxJfIups4E","conversations-create-button":"conversations-create-button--zo0EF2Lihb89VDkQ",conversationsCreateButton:"conversations-create-button--zo0EF2Lihb89VDkQ","conversations-list":"conversations-list--WwraNzAQFgzVGLrC",conversationsList:"conversations-list--WwraNzAQFgzVGLrC","conversations-list-group":"conversations-list-group--u7HKoXEQfsQwxp5h",conversationsListGroup:"conversations-list-group--u7HKoXEQfsQwxp5h"},t.Z=a},114488:function(e,t,n){var o=n(160052),i=n.n(o),r=n(570717),a=n.n(r)()(i());a.push([e.id,".conversations-container--JN1GUt5q_3AX29aZ{display:flex;height:100%;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.conversations-side-sheet--ls0jiUBreTomzthk{padding:0;z-index:calc(var(--chat-z-index-input) + 1)}.conversations-list-delete-modal-text--fOX7uLD7Vy4qxZvo{color:var(--coz-fg-secondary);font-size:14px;font-weight:400;line-height:20px}",""]),a.locals={"conversations-container":"conversations-container--JN1GUt5q_3AX29aZ",conversationsContainer:"conversations-container--JN1GUt5q_3AX29aZ","conversations-side-sheet":"conversations-side-sheet--ls0jiUBreTomzthk",conversationsSideSheet:"conversations-side-sheet--ls0jiUBreTomzthk","conversations-list-delete-modal-text":"conversations-list-delete-modal-text--fOX7uLD7Vy4qxZvo",conversationsListDeleteModalText:"conversations-list-delete-modal-text--fOX7uLD7Vy4qxZvo"},t.Z=a},311092:function(e,t,n){var o=n(160052),i=n.n(o),r=n(570717),a=n.n(r)()(i());a.push([e.id,".feedback-thumb-down-detail-container--VHo8DlHwPEfuSe2e{background:var(--coz-bg-plus,#fcfcff);border:1px solid var(--coz-stroke-primary,rgba(82,100,154,.13));border-radius:8px;box-sizing:border-box;padding:8px}.feedback-thumb-down-detail-container--VHo8DlHwPEfuSe2e .header--gfhA23nyTscezvTP{align-items:center;color:var(--coz-fg-secondary,rgba(32,41,69,.62));display:flex;justify-content:center;margin-bottom:12px}.feedback-thumb-down-detail-container--VHo8DlHwPEfuSe2e .header--gfhA23nyTscezvTP .header-title--vHk0BfUIm3gWl1qZ{color:var(--coz-fg-secondary,rgba(32,41,69,.62));flex:1 1;font-size:14px;font-weight:400;line-height:20px;overflow:hidden}.feedback-thumb-down-detail-container--VHo8DlHwPEfuSe2e .btn--u9z5eFC0B4dE3__4{margin:0 8px 8px 0;max-width:calc(100% - 8px)}.feedback-thumb-down-detail-container--VHo8DlHwPEfuSe2e .btn--u9z5eFC0B4dE3__4 .btn-content--TbsEy_qK_SYoOxN_{overflow:hidden}.feedback-thumb-down-detail-container--VHo8DlHwPEfuSe2e .btn--u9z5eFC0B4dE3__4 .btn-txt--JMyC9h5T50QqUk3x{font-weight:600;overflow:hidden;width:100%}.feedback-thumb-down-detail-container--VHo8DlHwPEfuSe2e .btn--u9z5eFC0B4dE3__4.btn-selected--jgTv5bavyK4DlRSO .btn-txt--JMyC9h5T50QqUk3x{color:#fff}.feedback-thumb-down-detail-container--VHo8DlHwPEfuSe2e .textarea--UWqx5bqJocY4cbYX{background:var(--coz-mg-primary,rgba(87,104,161,.08))!important;border:none;border-radius:8px;padding:4px 10px}.feedback-thumb-down-detail-container--VHo8DlHwPEfuSe2e .textarea--UWqx5bqJocY4cbYX textarea::-webkit-scrollbar-thumb{background:var(--coz-fg-dim,rgba(6,7,9,.3));border-radius:3px}.feedback-thumb-down-detail-container--VHo8DlHwPEfuSe2e .textarea--UWqx5bqJocY4cbYX textarea::-webkit-scrollbar{background-color:transparent;display:block!important;width:4px}.feedback-thumb-down-detail-container--VHo8DlHwPEfuSe2e .textarea--UWqx5bqJocY4cbYX textarea::-webkit-scrollbar:hover{width:4px}.feedback-thumb-down-detail-container--VHo8DlHwPEfuSe2e .textarea--UWqx5bqJocY4cbYX textarea::-webkit-scrollbar-button{display:none}.feedback-thumb-down-detail-container--VHo8DlHwPEfuSe2e .textarea--UWqx5bqJocY4cbYX textarea::-webkit-scrollbar-corner,.feedback-thumb-down-detail-container--VHo8DlHwPEfuSe2e .textarea--UWqx5bqJocY4cbYX textarea::-webkit-scrollbar-track{background-color:transparent}",""]),a.locals={"feedback-thumb-down-detail-container":"feedback-thumb-down-detail-container--VHo8DlHwPEfuSe2e",feedbackThumbDownDetailContainer:"feedback-thumb-down-detail-container--VHo8DlHwPEfuSe2e",header:"header--gfhA23nyTscezvTP","header-title":"header-title--vHk0BfUIm3gWl1qZ",headerTitle:"header-title--vHk0BfUIm3gWl1qZ",btn:"btn--u9z5eFC0B4dE3__4","btn-content":"btn-content--TbsEy_qK_SYoOxN_",btnContent:"btn-content--TbsEy_qK_SYoOxN_","btn-txt":"btn-txt--JMyC9h5T50QqUk3x",btnTxt:"btn-txt--JMyC9h5T50QqUk3x","btn-selected":"btn-selected--jgTv5bavyK4DlRSO",btnSelected:"btn-selected--jgTv5bavyK4DlRSO",textarea:"textarea--UWqx5bqJocY4cbYX"},t.Z=a},634863:function(e,t,n){var o=n(160052),i=n.n(o),r=n(570717),a=n.n(r)()(i());a.push([e.id,".icon--AZ09GNhX6AMdKxVe{height:14px;width:14px}",""]),a.locals={icon:"icon--AZ09GNhX6AMdKxVe"},t.Z=a},338039:function(e,t,n){var o=n(160052),i=n.n(o),r=n(570717),a=n.n(r)()(i());a.push([e.id,".icon--ED3f2GsXqVA48R4j{height:14px;width:14px}",""]),a.locals={icon:"icon--ED3f2GsXqVA48R4j"},t.Z=a},800970:function(e,t,n){var o=n(160052),i=n.n(o),r=n(570717),a=n.n(r)()(i());a.push([e.id,".float-open-conversations-btn--mnJ0uSG0V0sgC6BA{left:0;position:absolute;top:20px}",""]),a.locals={"float-open-conversations-btn":"float-open-conversations-btn--mnJ0uSG0V0sgC6BA",floatOpenConversationsBtn:"float-open-conversations-btn--mnJ0uSG0V0sgC6BA"},t.Z=a},844439:function(e,t,n){var o=n(160052),i=n.n(o),r=n(570717),a=n.n(r)()(i());a.push([e.id,".header--mq0YzhvCxKQ4i02D{align-items:center;display:flex;flex:0 0 auto;height:72px;padding:24px 16px 16px}.header--mq0YzhvCxKQ4i02D .conversation-list-btn--HL3C5tybFmofH0KM{margin-right:8px}.header--mq0YzhvCxKQ4i02D .avatar--KMJfSOFVHwwmPfMu{height:28px;margin-right:15px;width:28px}.header--mq0YzhvCxKQ4i02D .title--daCxLqusngk8AXD_{color:#000000d9;flex:1 1 auto;font-size:20px;font-weight:700;margin-right:12px}.header--mq0YzhvCxKQ4i02D .icon-btn--iuVi3RrdT82N0EDU{height:32px;width:32px}.header--mq0YzhvCxKQ4i02D.bg-theme--UqmBDFZp1AE3EpzN .icon-btn--iuVi3RrdT82N0EDU,.header--mq0YzhvCxKQ4i02D.bg-theme--UqmBDFZp1AE3EpzN .title--daCxLqusngk8AXD_{color:#fff}.header--mq0YzhvCxKQ4i02D.bg-theme--UqmBDFZp1AE3EpzN .icon-btn--iuVi3RrdT82N0EDU:disabled,.header--mq0YzhvCxKQ4i02D.bg-theme--UqmBDFZp1AE3EpzN .icon-btn--iuVi3RrdT82N0EDU:hover{color:hsla(0,0%,100%,.8)!important}",""]),a.locals={header:"header--mq0YzhvCxKQ4i02D","conversation-list-btn":"conversation-list-btn--HL3C5tybFmofH0KM",conversationListBtn:"conversation-list-btn--HL3C5tybFmofH0KM",avatar:"avatar--KMJfSOFVHwwmPfMu",title:"title--daCxLqusngk8AXD_","icon-btn":"icon-btn--iuVi3RrdT82N0EDU",iconBtn:"icon-btn--iuVi3RrdT82N0EDU","bg-theme":"bg-theme--UqmBDFZp1AE3EpzN",bgTheme:"bg-theme--UqmBDFZp1AE3EpzN"},t.Z=a},871636:function(e,t,n){var o=n(160052),i=n.n(o),r=n(570717),a=n.n(r)()(i());a.push([e.id,".header--hDXCKTaAv7YsBWOB{align-items:center;border-bottom:1px solid #1d1c2314;display:flex;flex:0 0 auto;height:56px;padding:0 16px}.header--hDXCKTaAv7YsBWOB .avatar--WLKnZDr2WAJE4ful,.header--hDXCKTaAv7YsBWOB .conversation-list-btn--FN_CnKzgxck9XRz6{margin-right:8px}.header--hDXCKTaAv7YsBWOB .avatar--WLKnZDr2WAJE4ful{height:24px;width:24px}.header--hDXCKTaAv7YsBWOB .title--wxZ9cSnF9YCphkY5{color:#1c1d23;flex:1 1 auto;font-size:18px;font-weight:600;margin-right:12px}.header--hDXCKTaAv7YsBWOB .open-modal-btn--Cq4mIrNpWbctjYne svg{height:18px;width:18px}.header--hDXCKTaAv7YsBWOB .icon-btn--Vs1t5riqqMkMTFK9{height:32px;width:32px}.header--hDXCKTaAv7YsBWOB.bg-theme--X1h91GqXHRY0S7XE .conversation-list-btn--FN_CnKzgxck9XRz6,.header--hDXCKTaAv7YsBWOB.bg-theme--X1h91GqXHRY0S7XE .icon-btn--Vs1t5riqqMkMTFK9,.header--hDXCKTaAv7YsBWOB.bg-theme--X1h91GqXHRY0S7XE .title--wxZ9cSnF9YCphkY5{color:#fff}.header--hDXCKTaAv7YsBWOB.bg-theme--X1h91GqXHRY0S7XE .conversation-list-btn--FN_CnKzgxck9XRz6:hover,.header--hDXCKTaAv7YsBWOB.bg-theme--X1h91GqXHRY0S7XE .icon-btn--Vs1t5riqqMkMTFK9:disabled,.header--hDXCKTaAv7YsBWOB.bg-theme--X1h91GqXHRY0S7XE .icon-btn--Vs1t5riqqMkMTFK9:hover{color:hsla(0,0%,100%,.8)!important}",""]),a.locals={header:"header--hDXCKTaAv7YsBWOB",avatar:"avatar--WLKnZDr2WAJE4ful","conversation-list-btn":"conversation-list-btn--FN_CnKzgxck9XRz6",conversationListBtn:"conversation-list-btn--FN_CnKzgxck9XRz6",title:"title--wxZ9cSnF9YCphkY5","open-modal-btn":"open-modal-btn--Cq4mIrNpWbctjYne",openModalBtn:"open-modal-btn--Cq4mIrNpWbctjYne","icon-btn":"icon-btn--Vs1t5riqqMkMTFK9",iconBtn:"icon-btn--Vs1t5riqqMkMTFK9","bg-theme":"bg-theme--X1h91GqXHRY0S7XE",bgTheme:"bg-theme--X1h91GqXHRY0S7XE"},t.Z=a},13831:function(e,t,n){var o=n(160052),i=n.n(o),r=n(570717),a=n.n(r)()(i());a.push([e.id,".message-box-wrapper--TjneX3popc8nmfyj .coz-fg-images-user-name{color:var(--coze-fg-image-user-name)}",""]),a.locals={"message-box-wrapper":"message-box-wrapper--TjneX3popc8nmfyj",messageBoxWrapper:"message-box-wrapper--TjneX3popc8nmfyj"},t.Z=a},325094:function(e,t,n){var o=n(160052),i=n.n(o),r=n(570717),a=n.n(r)()(i());a.push([e.id,".footer--LY_x27R3dQu8cqLO{align-items:center;background:none;bottom:2px;display:flex;flex:0 0 auto;height:32px;justify-content:center;position:absolute;width:100%;z-index:50}.footer--LY_x27R3dQu8cqLO,.footer--LY_x27R3dQu8cqLO>.text--DiHZjCk132ou400r{font-size:12px;font-weight:400}.footer--LY_x27R3dQu8cqLO>.text--DiHZjCk132ou400r{color:rgba(48,59,94,.47);font-style:normal;line-height:16px}.footer--LY_x27R3dQu8cqLO>.text--DiHZjCk132ou400r>.link--SF8TyNHV7TQpRzd2{color:#4d53e8;text-decoration:none}.footer--LY_x27R3dQu8cqLO.bg-theme--uIdPCCPwAz42B4NV>.text--DiHZjCk132ou400r{color:hsla(0,0%,100%,.6)}",""]),a.locals={footer:"footer--LY_x27R3dQu8cqLO",text:"text--DiHZjCk132ou400r",link:"link--SF8TyNHV7TQpRzd2","bg-theme":"bg-theme--uIdPCCPwAz42B4NV",bgTheme:"bg-theme--uIdPCCPwAz42B4NV"},t.Z=a}}]);
//# sourceMappingURL=https://sourcemap-redirect.coze.cn/obj/coze-sourcemap/ol-sourcemap/bot/1.0.2.2232/98501.51e63a6e.js.map