/*! For license information please see agentDialog.js.LICENSE.txt */
!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(){var e,a,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",s=n.toStringTag||"@@toStringTag";function r(t,n,o,s){var r=n&&n.prototype instanceof c?n:c,l=Object.create(r.prototype);return i(l,"_invoke",function(t,i,n){var o,s,r,c=0,l=n||[],h=!1,m={p:0,n:0,v:e,a:u,f:u.bind(e,4),d:function(t,i){return o=t,s=0,r=e,m.n=i,d}};function u(t,i){for(s=t,r=i,a=0;!h&&c&&!n&&a<l.length;a++){var n,o=l[a],u=m.p,g=o[2];t>3?(n=g===i)&&(r=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=u&&((n=t<2&&u<o[1])?(s=0,m.v=i,m.n=o[1]):u<g&&(n=t<3||o[0]>i||i>g)&&(o[4]=t,o[5]=i,m.n=g,s=0))}if(n||t>1)return d;throw h=!0,i}return function(n,l,g){if(c>1)throw TypeError("Generator is already running");for(h&&1===l&&u(l,g),s=l,r=g;(a=s<2?e:r)||!h;){o||(s?s<3?(s>1&&(m.n=-1),u(s,r)):m.n=r:m.v=r);try{if(c=2,o){if(s||(n="next"),a=o[n]){if(!(a=a.call(o,r)))throw TypeError("iterator result is not an object");if(!a.done)return a;r=a.value,s<2&&(s=0)}else 1===s&&(a=o.return)&&a.call(o),s<2&&(r=TypeError("The iterator does not provide a '"+n+"' method"),s=1);o=e}else if((a=(h=m.n<0)?r:t.call(i,m))!==d)break}catch(t){o=e,s=1,r=t}finally{c=1}}return{value:a,done:h}}}(t,o,s),!0),l}var d={};function c(){}function l(){}function h(){}a=Object.getPrototypeOf;var m=[][o]?a(a([][o]())):(i(a={},o,function(){return this}),a),u=h.prototype=c.prototype=Object.create(m);function g(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,i(e,s,"GeneratorFunction")),e.prototype=Object.create(u),e}return l.prototype=h,i(u,"constructor",h),i(h,"constructor",l),l.displayName="GeneratorFunction",i(h,s,"GeneratorFunction"),i(u),i(u,s,"Generator"),i(u,o,function(){return this}),i(u,"toString",function(){return"[object Generator]"}),(t=function(){return{w:r,m:g}})()}function i(e,t,a,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}i=function(e,t,a,n){function s(t,a){i(e,t,function(e){return this._invoke(t,a,e)})}t?o?o(e,t,{value:a,enumerable:!n,configurable:!n,writable:!n}):e[t]=a:(s("next",0),s("throw",1),s("return",2))},i(e,t,a,n)}function a(e,t,i,a,n,o,s){try{var r=e[o](s),d=r.value}catch(e){return void i(e)}r.done?t(d):Promise.resolve(d).then(a,n)}function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,a)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach(function(t){s(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function s(e,t,i){return(t=d(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,d(a.key),a)}}function d(t){var i=function(t,i){if("object"!=e(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var n=a.call(t,i||"default");if("object"!=e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(t)}(t,"string");return"symbol"==e(i)?i:i+""}var c=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.defaultModel="right",this.options={url:"/consumer/cn/customerService/#/aiagent",dialogModel:this.defaultModel,isAutoAgreement:!0},this.baseSize={dragMargin:16,minWidth:404,minHeight:document.documentElement.clientHeight/2,maxWidth:document.documentElement.clientWidth/2,maxHeight:document.documentElement.clientHeight-32},this.sizeRect=this.getDialogSizeRect(),this.iframeOverlay,this.headTransform=null,this.HOT_AREA_RIGHT=72,this.isShowFixedHotArea=!1,this.isFixedHotArea=!1,this.params={data:"",query:"",codeType:"",channelNo:"",channelDesc:"",dialogType:"1001"},this.MAX_LENGTH={1001:1e3,1002:2e3,1003:7e3,1004:7e3},this.DIALOG_TYPE={1001:"message",1004:"QUERY_CODE"},this.modal=null,this.iframe=null,this.showDialog=!1,this.createModal(),this.needDialogSize="NEED_DIALOG_SIZE",this.needAutoParams="NEED_AUTO_PARAMS",this.shouldPreventScroll=!1,this.includeCSS(),this.setTimeoutCatch=null},i=[{key:"includeCSS",value:function(){for(var e=new URL("/consumer/cn/customerService/agentDialog.css",window.location.origin).href,t=document.getElementsByTagName("link"),i=0;i<t.length;i++)if(t[i].href.includes(e))return;var a=document.querySelector("head"),n=document.createElement("link");n.rel="stylesheet",n.href=e,a.appendChild(n)}},{key:"init",value:function(e){var t=this;return Object.entries(this.options).forEach(function(i){e[i[0]]&&(t.options[i[0]]=e[i[0]])}),Object.entries(this.sizeRect).forEach(function(i){e[i[0]]&&("width"===i[0]?t.sizeRect[i[0]]=Math.min(Math.max(t.baseSize.minWidth,e[i[0]]),t.baseSize.maxWidth):"height"===i[0]?t.sizeRect[i[0]]=Math.min(Math.max(t.baseSize.minHeight,e[i[0]]),t.baseSize.maxHeight):t.sizeRect[i[0]]=e[i[0]])}),this}},{key:"getDialogSizeRect",value:function(){var e="20px",t=40,i=80,a=this.baseSize.minWidth,n=.8*document.documentElement.clientHeight,o="0px 8px 32px 0px rgba(0, 0, 0, 0.2)";return document.documentElement.clientWidth<=this.baseSize.minWidth+2*this.baseSize.dragMargin?(i=0,t=0,a=document.documentElement.clientWidth,e="20px 20px 0px 0px",o="rgba(0, 0, 0,0.2) 0px -6px 28px 8px"):document.documentElement.clientWidth<=600?i=16:document.documentElement.clientWidth<=1280&&(i=40),{width:a,height:n,right:i,bottom:t,borderRadius:e,boxShadow:o}}},{key:"createModal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.modal||(this.modal=document.createElement("div"),this.iframe=document.createElement("iframe"),this.iframeOverlay=this.createIframeOverlay(),this.modal.appendChild(this.iframeOverlay)),this.modal.id="agentDialog",e||(this.modal.style.display="none"),document.documentElement.clientWidth<=840&&(this.options.dialogModel="full"),this.options.dialogModel===this.defaultModel?(this.modal.style.bottom=this.sizeRect.bottom+"px",this.modal.style.right=this.sizeRect.right+"px",this.modal.style.width=this.sizeRect.width+"px",this.modal.style.height=this.sizeRect.height+"px",this.modal.style.boxShadow=this.sizeRect.boxShadow,this.modal.style.borderRadius=this.sizeRect.borderRadius,this.iframe.style.borderRadius=this.sizeRect.borderRadius,this.modal.style.transition="0.2s",this.parentPageDisableScroll()):(this.modal.style.width="100%",this.modal.style.height="100%",this.modal.style.right="0px",this.modal.style.bottom="0px",this.modal.style.borderRadius="0px",this.iframe.style.borderRadius="0px",this.modal.style.transition="0.2s"),this.modal.classList.add("resizable-iframe-container"),this.iframe.id="agentIframe",this.iframe.classList.add("resizable-iframe")}},{key:"checkStorage",value:function(){var e=JSON.parse(sessionStorage.getItem(this.needDialogSize));e&&e.isFromCookie&&(this.sizeRect=e,this.createModal());var t=JSON.parse(sessionStorage.getItem(this.needAutoParams));t&&t.isFromCookie&&t.expires>(new Date).getTime()&&this.show(t)}},{key:"show",value:function(e){var t=this;this.createModal(),this.params=o(o({},this.params),e);var i=!0;if(this.MAX_LENGTH[this.params.dialogType]&&-1!==["right","full"].indexOf(this.options.dialogModel)){if(1001===Number(this.params.dialogType)&&(this.params.query="",this.params.codeType="",this.params.data=(null==e?void 0:e.data)||"",i=!this.params.data),1004===Number(this.params.dialogType)){if(!this.params.query)return;i=!1,this.params.data=""}document.getElementById("agentDialog")?(document.getElementById("agentDialog").style.display="unset",this.sendPostMessage()):(this.iframe.src=this.options.url+"?dialogType="+this.params.dialogType+"&dialogModel="+this.options.dialogModel+"&dialogWe="+i,this.modal.style.display="unset",this.modal.appendChild(this.iframe),document.body.appendChild(this.modal),this.iframe.onload=function(){t.setupCommunication()},this.options.dialogModel===this.defaultModel&&this.startDragBorder()),sessionStorage.removeItem(this.needAutoParams),this.showDialog=!0,this.parentPageDisableScroll(),this.iframe.contentWindow.postMessage(JSON.stringify({type:"PARENT_INNERWIDTH",data:document.documentElement.clientWidth})),window.addEventListener("resize",this.changeBrowerSize)}}},{key:"sendPostMessage",value:function(){1004===this.params.dialogType&&(this.params.query=this.params.query.slice(0,this.MAX_LENGTH[this.params.dialogType])),1001===this.params.dialogType&&this.params.data&&(this.params.data=this.params.data.slice(0,this.MAX_LENGTH[this.params.dialogType])),this.params.type=this.DIALOG_TYPE[this.params.dialogType],this.iframe.contentWindow.postMessage(JSON.stringify(this.params))}},{key:"setupCommunication",value:function(){var e=this,t=this.iframe.contentWindow;window.addEventListener("message",function(i){if(i.source===t){var a=JSON.parse(i.data);e.dealMessageType(a)}}),window.addEventListener("scroll",this.preventPageScrolling,{passive:!1}),window.addEventListener("wheel",this.preventPageScrolling,{passive:!1}),window.addEventListener("touchmove",this.preventPageScrolling,{passive:!1})}},{key:"preventPageScrolling",value:function(e){window.AgentDialog.shouldPreventScroll&&(null==e||e.preventDefault())}},{key:"dealMessageType",value:function(e){var t=this;if("RENDERING_DOWN"===e.type&&this.options.dialogModel===this.defaultModel&&this.startDragHead(),"CLOSE"===e.type&&(this.parentPageDisableScroll(!0),sessionStorage.removeItem(this.needAutoParams),this.hide()),"ITSREADY"===e.type&&this.sendPostMessage(),"CLEAN_SDK_QUERY"===e.type&&(this.params.query="",this.params.data=""),"LOGIN"===e.type&&(this.setCookie(),window.AUI2.LOGIN.checkLogin()),"REGISTER"===e.type&&(this.setCookie(),window.AUI2.LOGIN.register()),"USER_CENTER"===e.type&&this.setCookie(),"REFRESH"===e.type&&location.reload(),"SIGN_AGREEMENT_DIALOG"===e.type&&this.options.isAutoAgreement){var i=JSON.parse(e.data);i.data&&i.dialogType&&(this.params.data=i.data,this.params.query="",this.params.dialogType=i.dialogType),this.setCookie(),this.initAgreeDialog(i.domain,i.contentType)}"SIGN_AGREEMENT"===e.type&&this.options.isAutoAgreement&&this.checkStorage(),"DISABLE_SCROLL"===e.type&&(this.shouldPreventScroll=!0,this.setTimeoutCatch&&clearTimeout(this.setTimeoutCatch),this.setTimeoutCatch=setTimeout(function(){t.shouldPreventScroll=!1},200)),"CHANGE_SCREEN_SIZE"===e.type&&(this.options.dialogModel=e.data,this.parentPageDisableScroll(),this.changeScreenModel(e.data))}},{key:"parentPageDisableScroll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.options.dialogModel===this.defaultModel||e?document.body.classList.contains("parent-page-overHide")&&document.body.classList.remove("parent-page-overHide"):document.body.classList.add("parent-page-overHide")}},{key:"setCookie",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=(new Date).getTime()+60*e*1e3,i=o(o({},this.params),{},{expires:t,isFromCookie:!0});sessionStorage.setItem(this.needAutoParams,JSON.stringify(i))}},{key:"initAgreeDialog",value:function(e,i){var n=this;if(document.querySelector(".agreement-dialog"))return!1;sessionStorage.removeItem("ignoreprivacy");var o=e.replace("/consumer/cn/","");l([o+"/config/commonResource/plugins/1.0/agreementDialog/style.css",o+"/config/commonResource/plugins/1.0/agreementDialog/agreementDialog.js"],"",function(){var o,s,r={domain:e,contentType:i,agreementFun:(o=t().m(function e(){return t().w(function(e){for(;;)switch(e.n){case 0:n.iframe.contentWindow.postMessage(JSON.stringify({type:"SIGN_AGREEMENT_SURE"}));case 1:return e.a(2)}},e)}),s=function(){var e=this,t=arguments;return new Promise(function(i,n){var s=o.apply(e,t);function r(e){a(s,i,n,r,d,"next",e)}function d(e){a(s,i,n,r,d,"throw",e)}r(void 0)})},function(){return s.apply(this,arguments)}),cancleFun:function(){}};window.agreementDialog.init(r)})}},{key:"changeBrowerSize",value:function(){var e=this.AgentDialog;document.documentElement.clientWidth<=e.baseSize.minWidth+2*e.baseSize.dragMargin?(e.sizeRect=e.getDialogSizeRect(),e.createModal(!0)):(document.documentElement.clientWidth<=840&&e.options.dialogModel===e.defaultModel&&(e.options.dialogModel="full",e.changeScreenModel("full")),e.baseSize.minHeight=document.documentElement.clientHeight/2,e.baseSize.maxWidth=Math.max(document.documentElement.clientWidth/2,e.baseSize.minWidth),e.baseSize.maxHeight=document.documentElement.clientHeight-32,e.changeDialogPCSize(e),e.options.dialogModel===e.defaultModel&&e.createModal(!0)),e.iframe.contentWindow.postMessage(JSON.stringify({type:"PARENT_INNERWIDTH",data:document.documentElement.clientWidth}))}},{key:"changeDialogPCSize",value:function(e){var t=e.getDialogSizeRect();e.sizeRect.width,e.sizeRect.borderRadius=t.borderRadius,e.sizeRect.boxShadow=t.boxShadow;var i=Math.min(Math.max(e.sizeRect.width,e.baseSize.minWidth),e.baseSize.maxWidth);if(e.sizeRect.width=i,e.sizeRect.right=Math.max(e.sizeRect.right,e.baseSize.dragMargin),i+e.sizeRect.right+e.baseSize.dragMargin>document.documentElement.clientWidth){var a=Math.max(document.documentElement.clientWidth-i-e.baseSize.dragMargin,e.baseSize.dragMargin);e.sizeRect.right=a}var n=Math.min(Math.max(e.sizeRect.height,e.baseSize.minHeight),e.baseSize.maxHeight);if(e.sizeRect.height=n,e.sizeRect.bottom=Math.max(e.sizeRect.bottom,e.baseSize.dragMargin),n+e.sizeRect.bottom+e.baseSize.dragMargin>document.documentElement.clientHeight){var o=Math.max(document.documentElement.clientHeight-n-e.baseSize.dragMargin,e.baseSize.dragMargin);e.sizeRect.bottom=o}}},{key:"hide",value:function(){this.showDialog&&(this.showDialog=!1,document.getElementById("agentDialog").style.display="none")}},{key:"createIframeOverlay",value:function(){var e=document.createElement("div");return Object.assign(e.style,{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",zIndex:"982",display:"none"}),e}},{key:"startDragBorder",value:function(){var e=this;["rt","rb","lt","lb","l","t","r","b","ct"].forEach(function(t){var i=document.createElement("div");i.classList.add("resize-handle"),i.classList.add(t),e.modal.appendChild(i)});var t=this.modal.querySelectorAll(".resize-handle");this.enableResize(t,"border"),this.onResize(this.modal,function(){})}},{key:"startDragHead",value:function(){var e;if(!this.iframe||!this.iframe.contentDocument)return!1;var t=(this.iframe.contentDocument||(null===(e=this.iframe.contentWindow)||void 0===e?void 0:e.document)).querySelector(".dialog-header"),i=t.getBoundingClientRect(),a=(t.querySelector(".title").getBoundingClientRect(),t.querySelector(".option").getBoundingClientRect()),n=document.createElement("div");n.classList.add("resize-header"),n.classList.add("hd"),n.style.height=i.height+"px",n.style.width="calc(100% - ".concat(a.width,"px - 24px)"),this.modal.appendChild(n);var o=document.createElement("div");o.classList.add("resize-header"),o.classList.add("hd"),o.style.height=a.top+"px",o.style.width="calc(".concat(a.width,"px + 24px)"),o.style.right="0px",o.style.left="unset",this.modal.appendChild(o);var s=document.createElement("div");s.classList.add("resize-header"),s.classList.add("hd"),s.style.height=i.height-a.top-a.height+"px",s.style.width="calc(".concat(a.width,"px + 24px)"),s.style.top=a.top+a.height+"px",s.style.right="0px",s.style.left="unset",this.modal.appendChild(s);var r=this.modal.querySelectorAll(".resize-header");this.enableResize(r,"header")}},{key:"enableResize",value:function(e,t){var i,a,n,o,s,r,d,c,l=this,h=!1;function m(e){if(l.iframe.contentWindow.postMessage(JSON.stringify({type:"PARENT_INNERWIDTH",data:document.documentElement.clientWidth})),d=e.target.classList[1],h=!0,"touchstart"===e.type?(i=e.changedTouches[0].clientX,a=e.changedTouches[0].clientY):(i=e.clientX,a=e.clientY),n=l.modal.offsetWidth,o=l.modal.offsetHeight,s=document.documentElement.clientWidth-l.modal.offsetLeft-n,r=document.documentElement.clientHeight-l.modal.offsetTop-o,l.iframeOverlay.style.display="block","hd"===d){var t=l.modal.querySelector(".ct");t.classList.contains("mouserDown")||t.classList.add("mouserDown")}l.isFixedHotArea&&"hd"===d?(o=.8*l.baseSize.maxHeight,r=.2*l.baseSize.maxHeight+l.baseSize.dragMargin,l.modal.style.height="".concat(o,"px"),l.modal.style.bottom="".concat(r,"px"),l.sizeRect.height=o,l.sizeRect.bottom=r,l.isFixedHotArea=!1):l.isFixedHotArea=!1,document.addEventListener("mousemove",u,{passive:!1}),document.addEventListener("touchmove",u,{passive:!1}),document.addEventListener("mouseup",g),document.addEventListener("touchend",g)}function u(e){if(!h)return!1;var t,m,u,g,p=e.clientX-i,y=e.clientY-a;switch("touchmove"===e.type&&(p=e.changedTouches[0].clientX-i,y=e.changedTouches[0].clientY-a),l.modal.style.transition="0s",d){case"lt":t=n-p,t=Math.max(t,l.baseSize.minWidth),t=Math.min(t,l.baseSize.maxWidth,document.documentElement.clientWidth-s-l.baseSize.dragMargin),l.modal.style.width="".concat(t,"px"),l.sizeRect.width=t,m=o-y,m=Math.max(m,l.baseSize.minHeight),m=Math.min(m,l.baseSize.maxHeight,document.documentElement.clientHeight-r-l.baseSize.dragMargin),l.modal.style.height="".concat(m,"px"),l.sizeRect.height=m;break;case"lb":t=n-p,t=Math.max(t,l.baseSize.minWidth),t=Math.min(t,l.baseSize.maxWidth,document.documentElement.clientWidth-s-l.baseSize.dragMargin),l.modal.style.width="".concat(t,"px"),l.sizeRect.width=t,g=r-y,g=Math.max(g,l.baseSize.dragMargin),g=Math.min(g,r+(o-l.baseSize.minHeight)),m=o+(r-g),l.modal.style.height="".concat(m,"px"),l.sizeRect.height=m,l.modal.style.bottom="".concat(g,"px"),l.sizeRect.bottom=g;break;case"rt":u=s-p,u=Math.max(u,l.baseSize.dragMargin,s-(l.baseSize.maxWidth-n)),u=Math.min(u,s+(n-l.baseSize.minWidth)),t=n+(s-u),l.modal.style.width="".concat(t,"px"),l.sizeRect.width=t,l.modal.style.right="".concat(u,"px"),l.sizeRect.right=u,m=o-y,m=Math.max(m,l.baseSize.minHeight),m=Math.min(m,l.baseSize.maxHeight,document.documentElement.clientHeight-r-l.baseSize.dragMargin),l.modal.style.height="".concat(m,"px"),l.sizeRect.height=m;break;case"rb":u=s-p,u=Math.max(u,l.baseSize.dragMargin,s-(l.baseSize.maxWidth-n)),u=Math.min(u,s+(n-l.baseSize.minWidth)),t=n+(s-u),l.modal.style.width="".concat(t,"px"),l.sizeRect.width=t,l.modal.style.right="".concat(u,"px"),l.sizeRect.right=u,g=r-y,g=Math.max(g,l.baseSize.dragMargin),g=Math.min(g,r+(o-l.baseSize.minHeight)),m=o+(r-g),l.modal.style.height="".concat(m,"px"),l.sizeRect.height=m,l.modal.style.bottom="".concat(g,"px"),l.sizeRect.bottom=g;break;case"l":t=n-p,t=Math.max(t,l.baseSize.minWidth),t=Math.min(t,l.baseSize.maxWidth,document.documentElement.clientWidth-s-l.baseSize.dragMargin),l.modal.style.width="".concat(t,"px"),l.sizeRect.width=t;break;case"r":u=s-p,u=Math.max(u,l.baseSize.dragMargin,s-(l.baseSize.maxWidth-n)),u=Math.min(u,s+(n-l.baseSize.minWidth)),t=n+(s-u),l.modal.style.width="".concat(t,"px"),l.sizeRect.width=t,l.modal.style.right="".concat(u,"px"),l.sizeRect.right=u;break;case"t":m=o-y,m=Math.max(m,l.baseSize.minHeight),m=Math.min(m,l.baseSize.maxHeight,document.documentElement.clientHeight-r-l.baseSize.dragMargin),l.modal.style.height="".concat(m,"px"),l.sizeRect.height=m;break;case"b":g=r-y,g=Math.max(g,l.baseSize.dragMargin),g=Math.min(g,r+(o-l.baseSize.minHeight)),m=o+(r-g),l.modal.style.height="".concat(m,"px"),l.sizeRect.height=m,l.modal.style.bottom="".concat(g,"px"),l.sizeRect.bottom=g;break;case"ct":default:break;case"hd":u=s-p,u=Math.max(u,l.baseSize.dragMargin),u=Math.min(u,document.documentElement.clientWidth-n-l.baseSize.dragMargin),l.sizeRect.right=u,g=r-y,g=Math.max(g,l.baseSize.dragMargin),g=Math.min(g,document.documentElement.clientHeight-o-l.baseSize.dragMargin),l.sizeRect.bottom=g,c&&cancelAnimationFrame(c),c=requestAnimationFrame(function(){var e=s-u,t=r-g;l.modal.style.transform="translate(".concat(e,"px, ").concat(t,"px)"),l.headTransform=[u,g]}),l.isRightHotArea(u)}null==e||e.preventDefault(),document.body.style.userSelect="none"}function g(){h=!1,document.removeEventListener("mousemove",u),document.removeEventListener("touchmove",u),document.removeEventListener("mouseup",g),document.removeEventListener("touchend",g),c&&cancelAnimationFrame(c),l.borderMouseUpItem()}e.forEach(function(e){e.addEventListener("mousedown",m,{passive:!1}),e.addEventListener("touchstart",m,{passive:!1})})}},{key:"isRightHotArea",value:function(e){var t=this;e<=t.HOT_AREA_RIGHT?(t.isShowFixedHotArea=!0,t.createOrDeleteHotArea()):(t.createOrDeleteHotArea(!0),t.isShowFixedHotArea=!1)}},{key:"borderMouseUpItem",value:function(){var e=this;e.iframeOverlay.style.display="none",document.body.style.userSelect="auto";var t=e.modal.querySelector(".ct");t.classList.contains("mouserDown")&&t.classList.remove("mouserDown"),e.headTransform&&(e.modal.style.right="".concat(e.headTransform[0],"px"),e.modal.style.bottom="".concat(e.headTransform[1],"px"),e.modal.style.transform="translate(0, 0)",e.headTransform=null),e.isShowFixedHotArea&&(e.modal.style.width="".concat(e.baseSize.minWidth,"px"),e.sizeRect.width=e.baseSize.minWidth,e.modal.style.right="".concat(e.baseSize.dragMargin,"px"),e.sizeRect.right=e.baseSize.dragMargin,e.modal.style.height="".concat(e.baseSize.maxHeight,"px"),e.sizeRect.height=e.baseSize.maxHeight,e.modal.style.bottom="".concat(e.baseSize.dragMargin,"px"),e.sizeRect.bottom=e.baseSize.dragMargin,e.modal.style.transition="0.3s",e.createOrDeleteHotArea(!0),e.isShowFixedHotArea=!1,e.isFixedHotArea=!0)}},{key:"createOrDeleteHotArea",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isShowFixedHotArea){var t=document.getElementById("fixedHotArea");if(e&&t)t.remove();else if(!t){var i=document.querySelector("aui-header");i&&this.baseSize.maxHeight>document.documentElement.clientHeight-33&&(this.baseSize.maxHeight-=i.clientHeight);var a=document.createElement("div");a.id="fixedHotArea",a.style.bottom=this.baseSize.dragMargin+"px",a.style.right=this.baseSize.dragMargin+"px",a.style.width=this.baseSize.minWidth+"px",a.style.height=this.baseSize.maxHeight+"px",a.style.borderRadius=this.sizeRect.borderRadius,a.style.boxShadow="0px 8px 32px 0px rgba(0, 0, 0, 0.2)",a.classList.add("resizable-hot-area"),document.body.appendChild(a)}}}},{key:"endDragListener",value:function(){var e=this.modal.querySelectorAll(".resize-handle");null==e||e.forEach(function(e){e.remove()});var t=this.modal.querySelectorAll(".resize-header");null==t||t.forEach(function(e){e.remove()})}},{key:"changeScreenModel",value:function(e){this.createModal(!0),e!==this.defaultModel?this.endDragListener():(this.startDragBorder(),this.startDragHead())}},{key:"onResize",value:function(e,t){new ResizeObserver(t).observe(e)}}],i&&r(e.prototype,i),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i,n}();function l(e,t,i){var a,n=[];(e||[]).forEach(function(o){n.push(o),"css"===o.split(".").reverse()[0]?((a=document.createElement("link")).rel="stylesheet",a.type="text/css",a.href=o+(t?"?v="+t:""),document.head.appendChild(a)):((a=document.createElement("script")).type="text/javascript",a.src=o+(t?"?v="+t:""),document.body.appendChild(a)),n.length===e.length&&i&&(a.onload=i)})}window.AUI2||l([window.location.origin+"/aui2/aui2-login-developer-v2.js"]);window.AgentDialog||(window.AgentDialog=new c)}();